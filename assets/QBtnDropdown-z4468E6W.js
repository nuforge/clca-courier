import{c as l,k as H,r as g,X as z,B as E,o as N,h as o,ao as F,n as j,a8 as W,w as T,ap as A,g as M,aq as G,ar as O,as as U,at as X,N as J,R as I,au as K}from"./index-DDm66URI.js";import{Q as Y}from"./QBtnGroup-Y3E2aR4E.js";import{Q as Z}from"./QMenu-CdApXZTA.js";const p={ratio:[String,Number]};function ee(e,i){return l(()=>{const a=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}const ne=1.7778,re=H({name:"QImg",props:{...p,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ne},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:a}){const s=g(e.initialRatio),d=ee(e,s),c=M(),{registerTimeout:y,removeTimeout:m}=z(),{registerTimeout:_,removeTimeout:b}=z(),v=l(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),C=l(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),r=[g(null),g(v.value)],u=g(0),h=g(!1),S=g(!1),D=l(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),R=l(()=>({width:e.width,height:e.height})),B=l(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),w=l(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function n(){if(b(),e.loadingShowDelay===0){h.value=!0;return}_(()=>{h.value=!0},e.loadingShowDelay)}function k(){b(),h.value=!1}function P({target:t}){A(c)===!1&&(m(),s.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,Q(t,1))}function Q(t,f){f===1e3||A(c)===!0||(t.complete===!0?V(t):y(()=>{Q(t,f+1)},50))}function V(t){A(c)!==!0&&(u.value=u.value^1,r[u.value].value=null,k(),t.getAttribute("__qerror")!=="true"&&(S.value=!1),a("load",t.currentSrc||t.src))}function $(t){m(),k(),S.value=!0,r[u.value].value=C.value,r[u.value^1].value=v.value,a("error",t)}function L(t){const f=r[t].value,q={key:"img_"+t,class:B.value,style:w.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...f};return u.value===t?Object.assign(q,{class:q.class+"current",onLoad:P,onError:$}):q.class+="loaded",o("div",{class:"q-img__container absolute-full",key:"img"+t},o("img",q))}function x(){return h.value===!1?o("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},j(i[S.value===!0?"error":"default"])):o("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[o(W,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){T(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,f=>{m(),S.value=!1,f===null?(k(),r[u.value^1].value=v.value):n(),r[u.value].value=f},{immediate:!0})};E.value===!0?N(t):t()}return()=>{const t=[];return d.value!==null&&t.push(o("div",{key:"filler",style:d.value})),r[0].value!==null&&t.push(L(0)),r[1].value!==null&&t.push(L(1)),t.push(o(F,{name:"q-transition--fade"},x)),o("div",{key:"main",class:D.value,style:R.value,role:"img","aria-label":e.alt},t)}}}),te=Object.keys(O);function ae(e){return te.reduce((i,a)=>{const s=e[a];return s!==void 0&&(i[a]=s),i},{})}const ue=H({name:"QBtnDropdown",props:{...O,...G,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:i,emit:a}){const{proxy:s}=M(),d=g(e.modelValue),c=g(null),y=U(),m=l(()=>{const n={"aria-expanded":d.value===!0?"true":"false","aria-haspopup":"true","aria-controls":y.value,"aria-label":e.toggleAriaLabel||s.$q.lang.label[d.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(n["aria-disabled"]="true"),n}),_=l(()=>"q-btn-dropdown__arrow"+(d.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),b=l(()=>X(e)),v=l(()=>ae(e));T(()=>e.modelValue,n=>{c.value?.[n?"show":"hide"]()}),T(()=>e.split,w);function C(n){d.value=!0,a("beforeShow",n)}function r(n){a("show",n),a("update:modelValue",!0)}function u(n){d.value=!1,a("beforeHide",n)}function h(n){a("hide",n),a("update:modelValue",!1)}function S(n){a("click",n)}function D(n){K(n),w(),a("click",n)}function R(n){c.value?.toggle(n)}function B(n){c.value?.show(n)}function w(n){c.value?.hide(n)}return Object.assign(s,{show:B,hide:w,toggle:R}),N(()=>{e.modelValue===!0&&B()}),()=>{const n=[o(J,{class:_.value,name:e.dropdownIcon||s.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&n.push(o(Z,{ref:c,id:y.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:C,onShow:r,onBeforeHide:u,onHide:h},i.default)),e.split===!1?o(I,{class:"q-btn-dropdown q-btn-dropdown--simple",...v.value,...m.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:S},{default:()=>j(i.label,[]).concat(n),loading:i.loading}):o(Y,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...b.value,glossy:e.glossy,stretch:e.stretch},()=>[o(I,{class:"q-btn-dropdown--current",...v.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:D},{default:i.label,loading:i.loading}),o(I,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...m.value,...b.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>n)])}}});export{re as Q,ue as a};
