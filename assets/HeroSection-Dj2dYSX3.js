import{b3 as L,k as j,g as G,b4 as V,c as m,h as S,b5 as q,r as k,w as H,b as _,d as $,o as F,a4 as b,J as h,P as I,a5 as p,aD as T,K as B,a3 as z,ac as Q,F as E,a9 as O,I as U,R as D,aa as W,f as M,N as Y}from"./index-DDnSiyj2.js";import{b as J}from"./format-BvkBI9bc.js";import{e as K}from"./external-image-service-Ca-YEMw0.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={...L,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},P=50,R=2*P,Z=R*Math.PI,ae=Math.round(Z*1e3)/1e3,te=j({name:"QCircularProgress",props:{...ee,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:u}){const{proxy:{$q:a}}=G(),t=V(e),c=m(()=>{const i=(a.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(a.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-i}deg)`:`rotate3d(0, 0, 1, ${i-90}deg)`}}),v=m(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),r=m(()=>R/(1-e.thickness/2)),y=m(()=>`${r.value/2} ${r.value/2} ${r.value} ${r.value}`),d=m(()=>J(e.value,e.min,e.max)),g=m(()=>e.max-e.min),s=m(()=>e.thickness/2*r.value),x=m(()=>{const i=(e.max-d.value)/g.value,f=e.rounded===!0&&d.value<e.max&&i<.25?s.value/2*(1-i/.25):0;return Z*i+f});function C({thickness:i,offset:f,color:o,cls:n,rounded:l}){return S("circle",{class:"q-circular-progress__"+n+(o!==void 0?` text-${o}`:""),style:v.value,fill:"transparent",stroke:"currentColor","stroke-width":i,"stroke-dasharray":ae,"stroke-dashoffset":f,"stroke-linecap":l,cx:r.value,cy:r.value,r:P})}return()=>{const i=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&i.push(S("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:P-s.value/2,cx:r.value,cy:r.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&i.push(C({cls:"track",thickness:s.value,offset:0,color:e.trackColor})),i.push(C({cls:"circle",thickness:s.value,offset:x.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const f=[S("svg",{class:"q-circular-progress__svg",style:c.value,viewBox:y.value,"aria-hidden":"true"},i)];return e.showValue===!0&&f.push(S("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},u.default!==void 0?u.default():[S("div",d.value)])),S("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:t.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:d.value},q(u.internal,f))}}});async function le(e){return new Promise(u=>{const a=new Image;a.onload=()=>u(!0),a.onerror=()=>u(!1);const t=setTimeout(()=>{u(!1)},1e4);a.onload=()=>{clearTimeout(t),u(!0)},a.onerror=()=>{clearTimeout(t),u(!1)},a.src=e})}const A=["/images/clca-lake-3.jpg","/images/clca-moon-logo.png","/clca-moon-logo.png","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiB2aWV3Qm94PSIwIDAgMTkyMCAxMDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiBmaWxsPSIjZjVmNWY1Ii8+Cjx0ZXh0IHg9Ijk2MCIgeT0iNTQwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDgiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjNlbSI+SW1hZ2UgTm90IEF2YWlsYWJsZTwvdGV4dD4KPHN2Zz4K"];async function re(e){const u=e?[e,...A]:A;for(const t of u)if(await le(t))return t;return A[A.length-1]||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiB2aWV3Qm94PSIwIDAgMTkyMCAxMDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiBmaWxsPSIjZjVmNWY1Ii8+Cjx0ZXh0IHg9Ijk2MCIgeT0iNTQwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDgiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjNlbSI+SW1hZ2UgTm90IEF2YWlsYWJsZTwvdGV4dD4KPHN2Zz4K"}function oe(e,u={}){const t={...{lazy:!0,placeholder:"",fallback:"",retryAttempts:3,retryDelay:1e3,maxAge:864e5,quality:.9,maxWidth:2048,maxHeight:2048,forceRefresh:!1},...u},c=k(t.placeholder||null),v=k(!1),r=k(!1),y=k(null),d=k(0),g=k(0),s=k(null),x=m(()=>typeof e=="string"?e:e?.value);async function C(n){for(g.value=0;g.value<t.retryAttempts;)try{g.value++,d.value=g.value/t.retryAttempts*50;const l=await K.getImage(n,{maxAge:t.maxAge,quality:t.quality,maxWidth:t.maxWidth,maxHeight:t.maxHeight,forceRefresh:t.forceRefresh});if(l)return d.value=100,l;throw new Error("Failed to load image")}catch(l){if(g.value>=t.retryAttempts)throw l;await new Promise(N=>setTimeout(N,t.retryDelay))}return null}async function i(){const n=x.value;if(!n){o();return}s.value&&s.value.abort(),s.value=new AbortController;try{v.value=!0,r.value=!1,y.value=null,d.value=0;const l=await C(n);if(s.value?.signal.aborted)return;if(l)c.value=l,r.value=!1;else throw new Error("Failed to load image after all retry attempts")}catch(l){if(s.value?.signal.aborted)return;console.error("External image load failed:",l),r.value=!0,y.value=l instanceof Error?l:new Error("Unknown error");try{const w=await re(t.fallback);c.value=w,r.value=!1,y.value=null}catch(w){console.warn("Fallback image loading failed:",w),c.value=t.placeholder||null}}finally{s.value?.signal.aborted||(v.value=!1,d.value=r.value?0:100)}}async function f(){const n=t.maxAge;t.maxAge=0;try{await i()}finally{t.maxAge=n}}function o(){s.value&&(s.value.abort(),s.value=null),c.value=t.placeholder||null,v.value=!1,r.value=!1,y.value=null,d.value=0,g.value=0}return H(x,n=>{n&&!t.lazy?i():n||o()},{immediate:!t.lazy}),_(()=>{s.value&&s.value.abort(),c.value&&c.value.startsWith("blob:")&&URL.revokeObjectURL(c.value)}),{imageUrl:c,isLoading:v,hasError:r,error:y,loadProgress:d,load:i,reload:f,clear:o}}const se={class:"hero-content"},ie={class:"hero-content-inner"},ne={key:2,class:"hero-custom-content"},ue={key:3,class:"hero-actions"},ce={key:1,class:"hero-loading-indicator"},de={key:2,class:"hero-error"},me=$({__name:"HeroSection",props:{title:{},subtitle:{},backgroundImage:{},backgroundColor:{default:"#f5f5f5"},backgroundSize:{default:"cover"},backgroundPosition:{default:"center"},overlay:{type:Boolean,default:!0},overlayColor:{default:"rgba(0, 0, 0, 0.4)"},overlayOpacity:{default:.4},height:{default:"60vh"},minHeight:{default:"400px"},maxHeight:{default:"800px"},variant:{default:"centered"},textAlign:{default:"center"},titleClasses:{},subtitleClasses:{},actions:{default:()=>[]},imageOptions:{default:()=>({lazy:!1,maxWidth:2048,maxHeight:1152,quality:.9})},autoLoad:{type:Boolean,default:!0}},setup(e,{expose:u}){const a=e,t=m(()=>a.backgroundImage||null),{imageUrl:c,isLoading:v,hasError:r,error:y,loadProgress:d,load:g,reload:s}=oe(t,{...a.imageOptions,lazy:!a.autoLoad,fallback:"/images/clca-lake-3.jpg"}),x=m(()=>({height:a.height,minHeight:a.minHeight,maxHeight:a.maxHeight,backgroundColor:a.backgroundColor,backgroundImage:c.value?`url(${c.value})`:void 0,backgroundSize:a.backgroundSize,backgroundPosition:a.backgroundPosition,backgroundRepeat:"no-repeat",textAlign:a.textAlign})),C=m(()=>({backgroundColor:a.overlayColor,opacity:a.overlayOpacity})),i=m(()=>["text-h2","text-weight-bold","q-mb-md",...Array.isArray(a.titleClasses)?a.titleClasses:[a.titleClasses].filter(Boolean)]),f=m(()=>["text-h5","text-weight-light","q-mb-lg",...Array.isArray(a.subtitleClasses)?a.subtitleClasses:[a.subtitleClasses].filter(Boolean)]);return F(()=>{a.autoLoad&&a.backgroundImage&&g()}),H(()=>a.backgroundImage,o=>{o&&a.autoLoad&&g()}),u({loadImage:g,reloadImage:s,imageUrl:c,isLoading:v,hasError:r,error:y,loadProgress:d}),(o,n)=>(h(),b("section",{class:B(["hero-section",`hero-${o.variant}`,{"hero-loading":W(v)}]),style:T(x.value)},[o.overlay?(h(),b("div",{key:0,class:"hero-overlay",style:T(C.value)},null,4)):I("",!0),p("div",se,[p("div",ie,[o.title?(h(),b("h1",{key:0,class:B(["hero-title",i.value])},z(o.title),3)):I("",!0),o.subtitle?(h(),b("p",{key:1,class:B(["hero-subtitle",f.value])},z(o.subtitle),3)):I("",!0),o.$slots.default?(h(),b("div",ne,[Q(o.$slots,"default",{},void 0)])):I("",!0),o.actions&&o.actions.length>0?(h(),b("div",ue,[(h(!0),b(E,null,O(o.actions,(l,w)=>(h(),U(D,{key:w,label:l.label,icon:l.icon,color:l.color||"primary",outline:l.outline,flat:l.flat,to:l.to,href:l.href,loading:l.loading,disable:l.disabled,size:l.size||"lg",class:"hero-action-btn q-mr-md q-mb-md",onClick:l.onClick},null,8,["label","icon","color","outline","flat","to","href","loading","disable","size","onClick"]))),128))])):I("",!0)])]),W(v)?(h(),b("div",ce,[M(te,{value:W(d),size:"50px",thickness:.2,color:"white","center-color":"transparent"},null,8,["value"]),n[0]||(n[0]=p("p",{class:"text-white q-mt-md"},"Loading image...",-1))])):I("",!0),W(r)&&!W(v)?(h(),b("div",de,[M(Y,{name:"mdi-image-broken",size:"3rem",color:"grey-5"}),n[1]||(n[1]=p("p",{class:"text-grey-5 q-mt-md"},"Failed to load background image",-1)),M(D,{label:"Retry",icon:"mdi-refresh",color:"primary",outline:"",onClick:W(s)},null,8,["onClick"])])):I("",!0)],6))}}),ye=X(me,[["__scopeId","data-v-74f38b9d"]]);export{ye as H,te as Q,oe as u};
