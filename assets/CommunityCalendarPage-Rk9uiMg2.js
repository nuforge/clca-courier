import{f as b,ai as St,aj as aa,c as na,S as la,ak as ra,g as oa,U as sa,al as ua,r as U,am as ia,w as ke,Z as bt,h as C,an as He,j as ca,ao as da,F as J,ap as va,aq as ma,_ as Et,q as fa,ar as pe,l as A,v as $t,a3 as ha,x as P,y as $,a5 as xe,z as Re,B as Y,C as y,M as z,G as T,E as R,D as K,N as ae,H as B,J as Ie,K as Ve,a6 as ga,L as Oe,ac as me,as as ya,at as Da,I as N,a8 as Ma,au as pa,av as ba,aw as _a,ab as _t,af as wa,ae as Ca}from"./index-Cz4yoHZ0.js";import{Q as ze,a as be,b as xa}from"./QItem-CRPqqROe.js";import{Q as ka}from"./QSelect-C8Md63BB.js";import{Q as Ya}from"./QSpinnerDots-CogZnuS_.js";import{Q as qa}from"./QInnerLoading-DbT1s7F3.js";import{Q as Sa}from"./QBanner-BUUebsTS.js";import{u as Ea}from"./use-render-cache-DLxPkVnQ.js";import{p as V}from"./format-DeJNMzpE.js";import{Q as $a}from"./QSpace-BgG47InH.js";import{Q as Tt}from"./QBadge-BYtMBeQj.js";import{Q as Ta}from"./QPage-DMXTvWWM.js";import{C as Fe}from"./ClosePopup-CnTt8MxX.js";import{Q as wt}from"./QChip-BQ4pZl7c.js";import{Q as Ha}from"./QList-Dm_7T7JJ.js";import{Q as Ia}from"./QMenu-DWv1BRzc.js";import{_ as Ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _e=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Va(e,r,s){return Object.prototype.toString.call(e)==="[object Date]"&&(s=e.getDate(),r=e.getMonth()+1,e=e.getFullYear()),La(ut(e,r,s))}function Ct(e,r,s){return Vt(Na(e,r,s))}function Oa(e){return Fa(e)===0}function Ue(e,r){return r<=6?31:r<=11||Oa(e)?30:29}function Fa(e){const r=_e.length;let s=_e[0],o,i,l,x,c;if(e<s||e>=_e[r-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<r&&(o=_e[c],i=o-s,!(e<o));c+=1)s=o;return x=e-s,i-x<6&&(x=x-i+F(i+4,33)*33),l=re(re(x+1,33)-1,4),l===-1&&(l=4),l}function It(e,r){const s=_e.length,o=e+621;let i=-14,l=_e[0],x,c,D,I,h;if(e<l||e>=_e[s-1])throw new Error("Invalid Jalaali year "+e);for(h=1;h<s&&(x=_e[h],c=x-l,!(e<x));h+=1)i=i+F(c,33)*8+F(re(c,33),4),l=x;I=e-l,i=i+F(I,33)*8+F(re(I,33)+3,4),re(c,33)===4&&c-I===4&&(i+=1);const S=F(o,4)-F((F(o,100)+1)*3,4)-150,G=20+i-S;return r||(c-I<6&&(I=I-c+F(c+4,33)*33),D=re(re(I+1,33)-1,4),D===-1&&(D=4)),{leap:D,gy:o,march:G}}function Na(e,r,s){const o=It(e,!0);return ut(o.gy,3,o.march)+(r-1)*31-F(r,7)*(r-7)+s-1}function La(e){const r=Vt(e).gy;let s=r-621,o,i,l;const x=It(s,!1),c=ut(r,3,x.march);if(l=e-c,l>=0){if(l<=185)return i=1+F(l,31),o=re(l,31)+1,{jy:s,jm:i,jd:o};l-=186}else s-=1,l+=179,x.leap===1&&(l+=1);return i=7+F(l,30),o=re(l,30)+1,{jy:s,jm:i,jd:o}}function ut(e,r,s){let o=F((e+F(r-8,6)+100100)*1461,4)+F(153*re(r+9,12)+2,5)+s-34840408;return o=o-F(F(e+100100+F(r-8,6),100)*3,4)+752,o}function Vt(e){let r=4*e+139361631;r=r+F(F(4*e+183187720,146097)*3,4)*4-3908;const s=F(re(r,1461),4)*5+308,o=F(re(s,153),5)+1,i=re(F(s,153),12)+1;return{gy:F(r,1461)-100100+F(8-i,6),gm:i,gd:o}}function F(e,r){return~~(e/r)}function re(e,r){return e-~~(e/r)*r}const Aa=["gregorian","persian"],xt={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Aa.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Qa=["update:modelValue"];function De(e){return e.year+"/"+V(e.month)+"/"+V(e.day)}function ja(e,r){const s=b(()=>e.disable!==!0&&e.readonly!==!0),o=b(()=>s.value===!0?0:-1),i=b(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function l(){return e.locale!==void 0?{...r.lang.date,...e.locale}:r.lang.date}function x(c){const D=new Date,I=c===!0?null:0;if(e.calendar==="persian"){const h=Va(D);return{year:h.jy,month:h.jm,day:h.jd}}return{year:D.getFullYear(),month:D.getMonth()+1,day:D.getDate(),hour:I,minute:I,second:I,millisecond:I}}return{editable:s,tabindex:o,headerClass:i,getLocale:l,getCurrentDate:x}}const Ot=864e5,Ba=36e5,st=6e4,Ft="YYYY-MM-DDTHH:mm:ss.SSSZ",Ra=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,za=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,nt={};function Ua(e,r){const s="("+r.days.join("|")+")",o=e+s;if(nt[o]!==void 0)return nt[o];const i="("+r.daysShort.join("|")+")",l="("+r.months.join("|")+")",x="("+r.monthsShort.join("|")+")",c={};let D=0;const I=e.replace(za,S=>{switch(D++,S){case"YY":return c.YY=D,"(-?\\d{1,2})";case"YYYY":return c.YYYY=D,"(-?\\d{1,4})";case"M":return c.M=D,"(\\d{1,2})";case"Mo":return c.M=D++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return c.M=D,"(\\d{2})";case"MMM":return c.MMM=D,x;case"MMMM":return c.MMMM=D,l;case"D":return c.D=D,"(\\d{1,2})";case"Do":return c.D=D++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=D,"(\\d{2})";case"H":return c.H=D,"(\\d{1,2})";case"HH":return c.H=D,"(\\d{2})";case"h":return c.h=D,"(\\d{1,2})";case"hh":return c.h=D,"(\\d{2})";case"m":return c.m=D,"(\\d{1,2})";case"mm":return c.m=D,"(\\d{2})";case"s":return c.s=D,"(\\d{1,2})";case"ss":return c.s=D,"(\\d{2})";case"S":return c.S=D,"(\\d{1})";case"SS":return c.S=D,"(\\d{2})";case"SSS":return c.S=D,"(\\d{3})";case"A":return c.A=D,"(AM|PM)";case"a":return c.a=D,"(am|pm)";case"aa":return c.aa=D,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return s;case"Q":case"d":case"E":return"(\\d{1})";case"do":return D++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return D++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return D++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return c.Z=D,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=D,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=D,"(-?\\d+)";case"x":return c.x=D,"(-?\\d{4,})";default:return D--,S[0]==="["&&(S=S.substring(1,S.length-1)),S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),h={map:c,regex:new RegExp("^"+I)};return nt[o]=h,h}function Nt(e,r){return e!==void 0?e:r!==void 0?r.date:aa.date}function kt(e,r=""){const s=e>0?"-":"+",o=Math.abs(e),i=Math.floor(o/60),l=o%60;return s+V(i)+r+V(l)}function Za(e,r,s,o,i){const l={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(l,i),e==null||e===""||typeof e!="string")return l;r===void 0&&(r=Ft);const x=Nt(s,St.props),c=x.months,D=x.monthsShort,{regex:I,map:h}=Ua(r,x),S=e.match(I);if(S===null)return l;let G="";if(h.X!==void 0||h.x!==void 0){const Q=parseInt(S[h.X!==void 0?h.X:h.x],10);if(isNaN(Q)===!0||Q<0)return l;const j=new Date(Q*(h.X!==void 0?1e3:1));l.year=j.getFullYear(),l.month=j.getMonth()+1,l.day=j.getDate(),l.hour=j.getHours(),l.minute=j.getMinutes(),l.second=j.getSeconds(),l.millisecond=j.getMilliseconds()}else{if(h.YYYY!==void 0)l.year=parseInt(S[h.YYYY],10);else if(h.YY!==void 0){const Q=parseInt(S[h.YY],10);l.year=Q<0?Q:2e3+Q}if(h.M!==void 0){if(l.month=parseInt(S[h.M],10),l.month<1||l.month>12)return l}else h.MMM!==void 0?l.month=D.indexOf(S[h.MMM])+1:h.MMMM!==void 0&&(l.month=c.indexOf(S[h.MMMM])+1);if(h.D!==void 0){if(l.day=parseInt(S[h.D],10),l.year===null||l.month===null||l.day<1)return l;const Q=o!=="persian"?new Date(l.year,l.month,0).getDate():Ue(l.year,l.month);if(l.day>Q)return l}h.H!==void 0?l.hour=parseInt(S[h.H],10)%24:h.h!==void 0&&(l.hour=parseInt(S[h.h],10)%12,(h.A&&S[h.A]==="PM"||h.a&&S[h.a]==="pm"||h.aa&&S[h.aa]==="p.m.")&&(l.hour+=12),l.hour=l.hour%24),h.m!==void 0&&(l.minute=parseInt(S[h.m],10)%60),h.s!==void 0&&(l.second=parseInt(S[h.s],10)%60),h.S!==void 0&&(l.millisecond=parseInt(S[h.S],10)*10**(3-S[h.S].length)),(h.Z!==void 0||h.ZZ!==void 0)&&(G=h.Z!==void 0?S[h.Z].replace(":",""):S[h.ZZ],l.timezoneOffset=(G[0]==="+"?-1:1)*(60*G.slice(1,3)+1*G.slice(3,5)))}return l.dateHash=V(l.year,4)+"/"+V(l.month)+"/"+V(l.day),l.timeHash=V(l.hour)+":"+V(l.minute)+":"+V(l.second)+G,l}function lt(e){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate());r.setDate(r.getDate()-(r.getDay()+6)%7+3);const s=new Date(r.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);const o=r.getTimezoneOffset()-s.getTimezoneOffset();r.setHours(r.getHours()-o);const i=(r-s)/(Ot*7);return 1+Math.floor(i)}function fe(e,r,s){const o=new Date(e),i=`set${s===!0?"UTC":""}`;switch(r){case"year":case"years":o[`${i}Month`](0);case"month":case"months":o[`${i}Date`](1);case"day":case"days":case"date":o[`${i}Hours`](0);case"hour":case"hours":o[`${i}Minutes`](0);case"minute":case"minutes":o[`${i}Seconds`](0);case"second":case"seconds":o[`${i}Milliseconds`](0)}return o}function je(e,r,s){return(e.getTime()-e.getTimezoneOffset()*st-(r.getTime()-r.getTimezoneOffset()*st))/s}function Lt(e,r,s="days"){const o=new Date(e),i=new Date(r);switch(s){case"years":case"year":return o.getFullYear()-i.getFullYear();case"months":case"month":return(o.getFullYear()-i.getFullYear())*12+o.getMonth()-i.getMonth();case"days":case"day":case"date":return je(fe(o,"day"),fe(i,"day"),Ot);case"hours":case"hour":return je(fe(o,"hour"),fe(i,"hour"),Ba);case"minutes":case"minute":return je(fe(o,"minute"),fe(i,"minute"),st);case"seconds":case"second":return je(fe(o,"second"),fe(i,"second"),1e3)}}function rt(e){return Lt(e,fe(e,"year"),"days")+1}function Se(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Yt={YY(e,r,s){const o=this.YYYY(e,r,s)%100;return o>=0?V(o):"-"+V(Math.abs(o))},YYYY(e,r,s){return s??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return Se(e.getMonth()+1)},MM(e){return V(e.getMonth()+1)},MMM(e,r){return r.monthsShort[e.getMonth()]},MMMM(e,r){return r.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Se(this.Q(e))},D(e){return e.getDate()},Do(e){return Se(e.getDate())},DD(e){return V(e.getDate())},DDD(e){return rt(e)},DDDo(e){return Se(rt(e))},DDDD(e){return V(rt(e),3)},d(e){return e.getDay()},do(e){return Se(e.getDay())},dd(e,r){return r.days[e.getDay()].slice(0,2)},ddd(e,r){return r.daysShort[e.getDay()]},dddd(e,r){return r.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return lt(e)},wo(e){return Se(lt(e))},ww(e){return V(lt(e))},H(e){return e.getHours()},HH(e){return V(e.getHours())},h(e){const r=e.getHours();return r===0?12:r>12?r%12:r},hh(e){return V(this.h(e))},m(e){return e.getMinutes()},mm(e){return V(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return V(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return V(Math.floor(e.getMilliseconds()/10))},SSS(e){return V(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,r,s,o){const i=o??e.getTimezoneOffset();return kt(i,":")},ZZ(e,r,s,o){const i=o??e.getTimezoneOffset();return kt(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Pa(e,r,s,o,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const l=new Date(e);if(isNaN(l))return;r===void 0&&(r=Ft);const x=Nt(s,St.props);return r.replace(Ra,(c,D)=>c in Yt?Yt[c](l,x,o,i):D===void 0?c:D.split("\\]").join("]"))}const ve=20,Ja=["Calendar","Years","Months"],qt=e=>Ja.includes(e),ot=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ee=" â€” ";function Me(e){return e.year+"/"+V(e.month)}const Wa=na({name:"QDate",props:{...xt,...ra,...la,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...xt.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ot},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ot},navigationMaxYearMonth:{type:String,validator:ot},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:qt}},emits:[...Qa,"rangeStart","rangeEnd","navigation"],setup(e,{slots:r,emit:s}){const{proxy:o}=oa(),{$q:i}=o,l=sa(e,i),{getCache:x}=Ea(),{tabindex:c,headerClass:D,getLocale:I,getCurrentDate:h}=ja(e,i);let S;const G=ua(e),Q=da(G),j=U(null),u=U(ft()),_=U(I()),H=b(()=>ft()),de=b(()=>I()),W=b(()=>h()),v=U(ht(u.value,_.value)),L=U(e.defaultView),oe=b(()=>i.lang.rtl===!0?"right":"left"),X=U(oe.value),se=U(oe.value),ue=v.value.year,he=U(ue-ue%ve-(ue<0?ve:0)),Z=U(null),ge=b(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(l.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ie=b(()=>e.color||"primary"),ne=b(()=>e.textColor||"white"),M=b(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),p=b(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),f=b(()=>p.value.filter(t=>typeof t=="string").map(t=>Ke(t,u.value,_.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),w=b(()=>{const t=a=>Ke(a,u.value,_.value);return p.value.filter(a=>ia(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),k=b(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Ct(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),le=b(()=>e.calendar==="persian"?De:(t,a,n)=>Pa(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?u.value:a,n===void 0?_.value:n,t.year,t.timezoneOffset)),we=b(()=>f.value.length+w.value.reduce((t,a)=>t+1+Lt(k.value(a.to),k.value(a.from)),0)),Ne=b(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(Z.value!==null){const n=Z.value.init,d=k.value(n);return _.value.daysShort[d.getDay()]+", "+_.value.monthsShort[n.month-1]+" "+n.day+Ee+"?"}if(we.value===0)return Ee;if(we.value>1)return`${we.value} ${_.value.pluralDay}`;const t=f.value[0],a=k.value(t);return isNaN(a.valueOf())===!0?Ee:_.value.headerTitle!==void 0?_.value.headerTitle(a,t):_.value.daysShort[a.getDay()]+", "+_.value.monthsShort[t.month-1]+" "+t.day}),Ze=b(()=>f.value.concat(w.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Pe=b(()=>f.value.concat(w.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),it=b(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(we.value===0)return Ee;if(we.value>1){const t=Ze.value,a=Pe.value,n=_.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+Ee+n[a.month-1]+" ":t.month!==a.month?Ee+n[a.month-1]:"")+" "+a.year}return f.value[0].year}),Le=b(()=>{const t=[i.iconSet.datetime.arrowLeft,i.iconSet.datetime.arrowRight];return i.lang.rtl===!0?t.reverse():t}),ct=b(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):_.value.firstDayOfWeek),At=b(()=>{const t=_.value.daysShort,a=ct.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ye=b(()=>{const t=v.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ue(t.year,t.month)}),Qt=b(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),ee=b(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),te=b(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Je=b(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return ee.value!==null&&ee.value.year>=v.value.year&&(t.year.prev=!1,ee.value.year===v.value.year&&ee.value.month>=v.value.month&&(t.month.prev=!1)),te.value!==null&&te.value.year<=v.value.year&&(t.year.next=!1,te.value.year===v.value.year&&te.value.month<=v.value.month&&(t.month.next=!1)),t}),Ae=b(()=>{const t={};return f.value.forEach(a=>{const n=Me(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),dt=b(()=>{const t={};return w.value.forEach(a=>{const n=Me(a.from),d=Me(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===d?a.to.day:void 0,range:a}),n<d){let m;const{year:E,month:g}=a.from,q=g<12?{year:E,month:g+1}:{year:E+1,month:1};for(;(m=Me(q))<=d;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===d?a.to.day:void 0,range:a}),q.month++,q.month>12&&(q.year++,q.month=1)}}),t}),$e=b(()=>{if(Z.value===null)return;const{init:t,initHash:a,final:n,finalHash:d}=Z.value,[m,E]=a<=d?[t,n]:[n,t],g=Me(m),q=Me(E);if(g!==ce.value&&q!==ce.value)return;const O={};return g===ce.value?(O.from=m.day,O.includeFrom=!0):O.from=1,q===ce.value?(O.to=E.day,O.includeTo=!0):O.to=ye.value,O}),ce=b(()=>Me(v.value)),jt=b(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ye.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ye.value;n++){const d=ce.value+"/"+V(n);t[n]=a(d)}return t}),Bt=b(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ye.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ye.value;n++){const d=ce.value+"/"+V(n);t[n]=a(d)===!0&&Qt.value(d)}}return t}),Rt=b(()=>{let t,a;const{year:n,month:d}=v.value;if(e.calendar!=="persian")t=new Date(n,d-1,1),a=new Date(n,d-1,0).getDate();else{const m=Ct(n,d,1);t=new Date(m.gy,m.gm-1,m.gd);let E=d-1,g=n;E===0&&(E=12,g--),a=Ue(g,E)}return{days:t.getDay()-ct.value-1,endDay:a}}),vt=b(()=>{const t=[],{days:a,endDay:n}=Rt.value,d=a<0?a+7:a;if(d<6)for(let g=n-d;g<=n;g++)t.push({i:g,fill:!0});const m=t.length;for(let g=1;g<=ye.value;g++){const q={i:g,event:Bt.value[g],classes:[]};jt.value[g]===!0&&(q.in=!0,q.flat=!0),t.push(q)}if(Ae.value[ce.value]!==void 0&&Ae.value[ce.value].forEach(g=>{const q=m+g-1;Object.assign(t[q],{selected:!0,unelevated:!0,flat:!1,color:ie.value,textColor:ne.value})}),dt.value[ce.value]!==void 0&&dt.value[ce.value].forEach(g=>{if(g.from!==void 0){const q=m+g.from-1,O=m+(g.to||ye.value)-1;for(let Te=q;Te<=O;Te++)Object.assign(t[Te],{range:g.range,unelevated:!0,color:ie.value,textColor:ne.value});Object.assign(t[q],{rangeFrom:!0,flat:!1}),g.to!==void 0&&Object.assign(t[O],{rangeTo:!0,flat:!1})}else if(g.to!==void 0){const q=m+g.to-1;for(let O=m;O<=q;O++)Object.assign(t[O],{range:g.range,unelevated:!0,color:ie.value,textColor:ne.value});Object.assign(t[q],{flat:!1,rangeTo:!0})}else{const q=m+ye.value-1;for(let O=m;O<=q;O++)Object.assign(t[O],{range:g.range,unelevated:!0,color:ie.value,textColor:ne.value})}}),$e.value!==void 0){const g=m+$e.value.from-1,q=m+$e.value.to-1;for(let O=g;O<=q;O++)t[O].color=ie.value,t[O].editRange=!0;$e.value.includeFrom===!0&&(t[g].editRangeFrom=!0),$e.value.includeTo===!0&&(t[q].editRangeTo=!0)}v.value.year===W.value.year&&v.value.month===W.value.month&&(t[m+W.value.day-1].today=!0);const E=t.length%7;if(E>0){const g=7-E;for(let q=1;q<=g;q++)t.push({i:q,fill:!0})}return t.forEach(g=>{let q="q-date__calendar-item ";g.fill===!0?q+="q-date__calendar-item--fill":(q+=`q-date__calendar-item--${g.in===!0?"in":"out"}`,g.range!==void 0&&(q+=` q-date__range${g.rangeTo===!0?"-to":g.rangeFrom===!0?"-from":""}`),g.editRange===!0&&(q+=` q-date__edit-range${g.editRangeFrom===!0?"-from":""}${g.editRangeTo===!0?"-to":""}`),(g.range!==void 0||g.editRange===!0)&&(q+=` text-${g.color}`)),g.classes=q}),t}),zt=b(()=>e.disable===!0?{"aria-disabled":"true"}:{});ke(()=>e.modelValue,t=>{if(S===JSON.stringify(t))S=0;else{const a=ht(u.value,_.value);Ye(a.year,a.month,a)}}),ke(L,()=>{j.value!==null&&o.$el.contains(document.activeElement)===!0&&j.value.focus()}),ke(()=>v.value.year+"|"+v.value.month,()=>{s("navigation",{year:v.value.year,month:v.value.month})}),ke(H,t=>{pt(t,_.value,"mask"),u.value=t}),ke(de,t=>{pt(u.value,t,"locale"),_.value=t});function We(t){S=JSON.stringify(t)}function mt(){const{year:t,month:a,day:n}=W.value,d={...v.value,year:t,month:a,day:n},m=Ae.value[Me(d)];(m===void 0||m.includes(d.day)===!1)&&et(d),Xe(d.year,d.month)}function Ut(t){qt(t)===!0&&(L.value=t)}function Zt(t,a){["month","year"].includes(t)&&(t==="month"?yt:Ge)(a===!0?-1:1)}function Xe(t,a){L.value="Calendar",Ye(t,a)}function Pt(t,a){if(e.range===!1||!t){Z.value=null;return}const n=Object.assign({...v.value},t),d=a!==void 0?Object.assign({...v.value},a):n;Z.value={init:n,initHash:De(n),final:d,finalHash:De(d)},Xe(n.year,n.month)}function ft(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ke(t,a,n){return Za(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ht(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return gt();const d=n[n.length-1],m=Ke(d.from!==void 0?d.from:d,t,a);return m.dateHash===null?gt():m}function gt(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=W.value!==void 0?W.value:h();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+V(a)+"/01"}}function yt(t){let a=v.value.year,n=Number(v.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),Ye(a,n),M.value===!0&&Qe("month")}function Ge(t){const a=Number(v.value.year)+t;Ye(a,v.value.month),M.value===!0&&Qe("year")}function Jt(t){Ye(t,v.value.month),L.value=e.defaultView==="Years"?"Months":"Calendar",M.value===!0&&Qe("year")}function Wt(t){Ye(v.value.year,t),L.value="Calendar",M.value===!0&&Qe("month")}function Xt(t,a){(Ae.value[a]?.includes(t.day)===!0?tt:et)(t)}function Ce(t){return{year:t.year,month:t.month,day:t.day}}function Ye(t,a,n){if(ee.value!==null&&t<=ee.value.year&&((a<ee.value.month||t<ee.value.year)&&(a=ee.value.month),t=ee.value.year),te.value!==null&&t>=te.value.year&&((a>te.value.month||t>te.value.year)&&(a=te.value.month),t=te.value.year),n!==void 0){const{hour:m,minute:E,second:g,millisecond:q,timezoneOffset:O,timeHash:Te}=n;Object.assign(v.value,{hour:m,minute:E,second:g,millisecond:q,timezoneOffset:O,timeHash:Te})}const d=t+"/"+V(a)+"/01";d!==v.value.dateHash&&(X.value=v.value.dateHash<d==(i.lang.rtl!==!0)?"left":"right",t!==v.value.year&&(se.value=X.value),bt(()=>{he.value=t-t%ve-(t<0?ve:0),Object.assign(v.value,{year:t,month:a,day:1,dateHash:d})}))}function Dt(t,a,n){const d=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:m,details:E}=Mt(a,n);We(d),s("update:modelValue",d,m,E)}function Qe(t){const a=f.value[0]!==void 0&&f.value[0].dateHash!==null?{...f.value[0]}:{...v.value};bt(()=>{a.year=v.value.year,a.month=v.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ue(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const d=qe(a),{details:m}=Mt("",a);We(d),s("update:modelValue",d,t,m)})}function Mt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...Ce(a.target),from:Ce(a.from),to:Ce(a.to)}}:{reason:`${t}-day`,details:Ce(a)}}function qe(t,a,n){return t.from!==void 0?{from:le.value(t.from,a,n),to:le.value(t.to,a,n)}:le.value(t,a,n)}function et(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=De(t.from),d=De(t.to),m=f.value.filter(g=>g.dateHash<n||g.dateHash>d),E=w.value.filter(({from:g,to:q})=>q.dateHash<n||g.dateHash>d);a=m.concat(E).concat(t).map(g=>qe(g))}else{const n=p.value.slice();n.push(qe(t)),a=n}else a=qe(t);Dt(a,"add",t)}function tt(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=qe(t);t.from!==void 0?a=e.modelValue.filter(d=>d.from!==void 0?d.from!==n.from&&d.to!==n.to:!0):a=e.modelValue.filter(d=>d!==n),a.length===0&&(a=null)}Dt(a,"remove",t)}function pt(t,a,n){const d=f.value.concat(w.value).map(E=>qe(E,t,a)).filter(E=>E.from!==void 0?E.from.dateHash!==null&&E.to.dateHash!==null:E.dateHash!==null),m=(e.multiple===!0?d:d[0])||null;We(m),s("update:modelValue",m,n)}function Kt(){if(e.minimal!==!0)return C("div",{class:"q-date__header "+D.value},[C("div",{class:"relative-position"},[C(He,{name:"q-transition--fade"},()=>C("div",{key:"h-yr-"+it.value,class:"q-date__header-subtitle q-date__header-link "+(L.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...x("vY",{onClick(){L.value="Years"},onKeyup(t){t.keyCode===13&&(L.value="Years")}})},[it.value]))]),C("div",{class:"q-date__header-title relative-position flex no-wrap"},[C("div",{class:"relative-position col"},[C(He,{name:"q-transition--fade"},()=>C("div",{key:"h-sub"+Ne.value,class:"q-date__header-title-label q-date__header-link "+(L.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...x("vC",{onClick(){L.value="Calendar"},onKeyup(t){t.keyCode===13&&(L.value="Calendar")}})},[Ne.value]))]),e.todayBtn===!0?C(J,{class:"q-date__header-today self-start",icon:i.iconSet.datetime.today,"aria-label":i.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:mt}):null])])}function at({label:t,type:a,key:n,dir:d,goTo:m,boundaries:E,cls:g}){return[C("div",{class:"row items-center q-date__arrow"},[C(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Le.value[0],"aria-label":a==="Years"?i.lang.date.prevYear:i.lang.date.prevMonth,tabindex:c.value,disable:E.prev===!1,...x("go-#"+a,{onClick(){m(-1)}})})]),C("div",{class:"relative-position overflow-hidden flex flex-center"+g},[C(He,{name:"q-transition--jump-"+d},()=>C("div",{key:n},[C(J,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:c.value,...x("view#"+a,{onClick:()=>{L.value=a}})})]))]),C("div",{class:"row items-center q-date__arrow"},[C(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Le.value[1],"aria-label":a==="Years"?i.lang.date.nextYear:i.lang.date.nextMonth,tabindex:c.value,disable:E.next===!1,...x("go+#"+a,{onClick(){m(1)}})})])]}const Gt={Calendar:()=>[C("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[C("div",{class:"q-date__navigation row items-center no-wrap"},at({label:_.value.months[v.value.month-1],type:"Months",key:v.value.month,dir:X.value,goTo:yt,boundaries:Je.value.month,cls:" col"}).concat(at({label:v.value.year,type:"Years",key:v.value.year,dir:se.value,goTo:Ge,boundaries:Je.value.year,cls:""}))),C("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},At.value.map(t=>C("div",{class:"q-date__calendar-item"},[C("div",t)]))),C("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[C(He,{name:"q-transition--slide-"+X.value},()=>C("div",{key:ce.value,class:"q-date__calendar-days fit"},vt.value.map(t=>C("div",{class:t.classes},[t.in===!0?C(J,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...x("day#"+t.i,{onClick:()=>{ea(t.i)},onMouseover:()=>{ta(t.i)}})},t.event!==!1?()=>C("div",{class:"q-date__event bg-"+t.event}):null):C("div",""+t.i)]))))])])],Months(){const t=v.value.year===W.value.year,a=d=>ee.value!==null&&v.value.year===ee.value.year&&ee.value.month>d||te.value!==null&&v.value.year===te.value.year&&te.value.month<d,n=_.value.monthsShort.map((d,m)=>{const E=v.value.month===m+1;return C("div",{class:"q-date__months-item flex flex-center"},[C(J,{class:t===!0&&W.value.month===m+1?"q-date__today":null,flat:E!==!0,label:d,unelevated:E,color:E===!0?ie.value:null,textColor:E===!0?ne.value:null,tabindex:c.value,disable:a(m+1),...x("month#"+m,{onClick:()=>{Wt(m+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(C("div",{class:"row no-wrap full-width"},[at({label:v.value.year,type:"Years",key:v.value.year,dir:se.value,goTo:Ge,boundaries:Je.value.year,cls:" col"})])),C("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=he.value,a=t+ve,n=[],d=m=>ee.value!==null&&ee.value.year>m||te.value!==null&&te.value.year<m;for(let m=t;m<=a;m++){const E=v.value.year===m;n.push(C("div",{class:"q-date__years-item flex flex-center"},[C(J,{key:"yr"+m,class:W.value.year===m?"q-date__today":null,flat:!E,label:m,dense:!0,unelevated:E,color:E===!0?ie.value:null,textColor:E===!0?ne.value:null,tabindex:c.value,disable:d(m),...x("yr#"+m,{onClick:()=>{Jt(m)}})})]))}return C("div",{class:"q-date__view q-date__years flex flex-center"},[C("div",{class:"col-auto"},[C(J,{round:!0,dense:!0,flat:!0,icon:Le.value[0],"aria-label":i.lang.date.prevRangeYears(ve),tabindex:c.value,disable:d(t),...x("y-",{onClick:()=>{he.value-=ve}})})]),C("div",{class:"q-date__years-content col self-stretch row items-center"},n),C("div",{class:"col-auto"},[C(J,{round:!0,dense:!0,flat:!0,icon:Le.value[1],"aria-label":i.lang.date.nextRangeYears(ve),tabindex:c.value,disable:d(a),...x("y+",{onClick:()=>{he.value+=ve}})})])])}};function ea(t){const a={...v.value,day:t};if(e.range===!1){Xt(a,ce.value);return}if(Z.value===null){const n=vt.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&n.range!==void 0){tt({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){tt(a);return}const d=De(a);Z.value={init:a,initHash:d,final:a,finalHash:d},s("rangeStart",Ce(a))}else{const n=Z.value.initHash,d=De(a),m=n<=d?{from:Z.value.init,to:a}:{from:a,to:Z.value.init};Z.value=null,et(n===d?a:{target:a,...m}),s("rangeEnd",{from:Ce(m.from),to:Ce(m.to)})}}function ta(t){if(Z.value!==null){const a={...v.value,day:t};Object.assign(Z.value,{final:a,finalHash:De(a)})}}return Object.assign(o,{setToday:mt,setView:Ut,offsetCalendar:Zt,setCalendarTo:Xe,setEditingRange:Pt}),()=>{const t=[C("div",{class:"q-date__content col relative-position"},[C(He,{name:"q-transition--fade"},Gt[L.value])])],a=ca(r.default);return a!==void 0&&t.push(C("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&Q(t,"push"),C("div",{class:ge.value,...zt.value},[Kt(),C("div",{ref:j,class:"q-date__main col column",tabindex:-1},t)])}}}),Xa=()=>{const e=U([]),r=U(!1),s=U(null),o=U({currentMonth:ma(),currentYear:va(),selectedDate:null,viewMode:"month"}),i=U({});let l=null;const x=b(()=>new Date(o.value.currentYear,o.value.currentMonth-1)),c=b(()=>x.value.toLocaleDateString("en-US",{month:"long"})),D=b(()=>`${o.value.currentYear}-${o.value.currentMonth.toString().padStart(2,"0")}`),I=b(()=>o.value.viewMode==="month"?ue(o.value.currentYear,o.value.currentMonth):o.value.viewMode==="day"&&o.value.selectedDate?se(o.value.selectedDate):e.value),h=b(()=>{const M={};return I.value.forEach(p=>{const f=p.eventDate;M[f]||(M[f]=[]),M[f].push(p)}),M}),S=b(()=>e.value.filter(M=>M.featured)),G=b(()=>{const M=new Date().toISOString().split("T")[0]??"",p=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]??"";return e.value.filter(f=>f.eventDate>=M&&f.eventDate<=p).sort((f,w)=>f.eventDate.localeCompare(w.eventDate))}),Q=async(M={})=>{r.value=!0,s.value=null;try{const p=await pe.getCalendarEvents({...i.value,...M});e.value=p,A.success(`Loaded ${p.length} calendar events`)}catch(p){const f=p instanceof Error?p.message:"Failed to load calendar events";s.value=f,A.error("Failed to load calendar events",{error:p})}finally{r.value=!1}},j=async(M,p)=>{r.value=!0,s.value=null;try{const f=await pe.getEventsForMonth(M,p);e.value=f,A.success(`Loaded ${f.length} events for ${p}/${M}`)}catch(f){const w=f instanceof Error?f.message:"Failed to load month events";s.value=w,A.error("Failed to load month events",{error:f,year:M,month:p})}finally{r.value=!1}},u=(M={})=>{l&&l();try{l=pe.subscribeToCalendarEvents({...i.value,...M},p=>{e.value=p,A.info(`Real-time update: ${p.length} calendar events`)})}catch(p){A.error("Failed to subscribe to calendar events",{error:p})}},_=(M,p)=>{o.value.currentYear=M,o.value.currentMonth=p,j(M,p)},H=()=>{let{currentYear:M,currentMonth:p}=o.value;p===12?(M+=1,p=1):p+=1,_(M,p)},de=()=>{let{currentYear:M,currentMonth:p}=o.value;p===1?(M-=1,p=12):p-=1,_(M,p)},W=()=>{const M=new Date;_(M.getFullYear(),M.getMonth()+1)},v=M=>{o.value.selectedDate=M,o.value.viewMode="day"},L=M=>{o.value.viewMode=M},oe=M=>{i.value={...i.value,...M},Q()},X=()=>{i.value={},Q()},se=M=>e.value.filter(p=>p.eventDate===M),ue=(M,p)=>{const f=p.toString().padStart(2,"0"),w=`${M}-${f}`;return e.value.filter(k=>k.eventDate.startsWith(w))},he=M=>e.value.some(p=>p.eventDate===M),Z=M=>e.value.filter(p=>p.eventDate===M).length,ge=M=>pe.formatEventTime(M),ie=M=>pe.getEventTypeIcon(M),ne=M=>pe.getEventTypeColor(M);return Et(()=>{j(o.value.currentYear,o.value.currentMonth)}),fa(()=>{l&&l()}),{events:e,isLoading:r,error:s,calendarState:o,filters:i,currentDate:x,monthName:c,yearMonthKey:D,currentViewEvents:I,eventsByDate:h,featuredEvents:S,upcomingEvents:G,loadEvents:Q,loadEventsForMonth:j,subscribeToEvents:u,goToMonth:_,goToNextMonth:H,goToPreviousMonth:de,goToToday:W,selectDate:v,setViewMode:L,setFilters:oe,clearFilters:X,getEventsForDate:se,getEventsForMonth:ue,hasEventsOnDate:he,getEventCountForDate:Z,formatEventTime:ge,getEventIcon:ie,getEventColor:ne}},Ka={class:"row items-start no-wrap"},Ga={class:"col-auto q-mr-sm"},en={class:"col"},tn={key:0,class:"row items-center q-gutter-xs q-mb-xs"},an={class:"text-caption text-grey-7"},nn={key:1,class:"row items-center q-gutter-xs q-mb-xs"},ln={class:"text-caption text-grey-7"},rn={key:2,class:"text-caption text-grey-8 q-mb-xs"},on={key:3,class:"row items-center q-gutter-xs"},sn={key:0,class:"text-caption text-grey-6"},un={key:4,class:"text-caption text-grey-6 q-mt-xs"},cn={key:0,class:"col-auto"},dn={key:0,class:"q-mt-xs"},vn=$t({__name:"CalendarEventCard",props:{event:{},compact:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0}},emits:["click","view","export","share"],setup(e,{emit:r}){const s=e,o=r,i=ha(),l=U(!1),x=b(()=>{if(!s.event.content)return"";const u=s.compact?60:120;return s.event.content.length<=u?s.event.content:s.event.content.substring(0,u)+"..."}),c=()=>{s.disabled||o("click",s.event)},D=u=>pe.getEventTypeIcon(u),I=u=>pe.getEventTypeColor(u),h=u=>ya(u.eventDate,u.eventTime,u.eventEndTime,u.allDay),S=u=>{const{type:_,interval:H=1}=u;if(H===1)switch(_){case"daily":return"Daily";case"weekly":return"Weekly";case"monthly":return"Monthly";case"yearly":return"Yearly";default:return""}else switch(_){case"daily":return`Every ${H} days`;case"weekly":return`Every ${H} weeks`;case"monthly":return`Every ${H} months`;case"yearly":return`Every ${H} years`;default:return""}},G=()=>{const u=s.event,_=Da(u.eventDate);if(!_){A.warn("Invalid event date for calendar export:",u.eventDate);return}if(u.eventTime&&!u.allDay){const X=u.eventTime.split(":"),se=parseInt(X[0]||"0",10),ue=parseInt(X[1]||"0",10);_.setHours(se,ue)}const H=new Date(_);if(u.eventEndTime&&!u.allDay){const X=u.eventEndTime.split(":"),se=parseInt(X[0]||"0",10),ue=parseInt(X[1]||"0",10);H.setHours(se,ue)}else u.allDay?H.setDate(H.getDate()+1):H.setHours(H.getHours()+1);const de=X=>X.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",W=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//CLCA Courier//Calendar Event//EN","BEGIN:VEVENT",`DTSTART:${de(_)}`,`DTEND:${de(H)}`,`SUMMARY:${u.title}`,`DESCRIPTION:${u.content.replace(/\n/g,"\\n")}`,...u.eventLocation?[`LOCATION:${u.eventLocation}`]:[],`UID:${u.id}@clca-courier.com`,"END:VEVENT","END:VCALENDAR"].join(`
`),v=new Blob([W],{type:"text/calendar"}),L=URL.createObjectURL(v),oe=document.createElement("a");oe.href=L,oe.download=`${u.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.ics`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(L),i.notify({message:"Event exported to calendar",color:"positive",icon:"mdi-calendar-export"}),o("export",u)},Q=()=>{const u={title:s.event.title,text:`${s.event.title}

${s.event.content}`,url:window.location.href};navigator.share&&window.isSecureContext?navigator.share(u).catch(()=>{j()}):j(),o("share",s.event)},j=()=>{const u=`${s.event.title}

Date: ${h(s.event)}
${s.event.eventLocation?`Location: ${s.event.eventLocation}
`:""}
${s.event.content}`;navigator.clipboard.writeText(u).then(()=>{i.notify({message:"Event details copied to clipboard",color:"positive",icon:"mdi-content-copy"})}).catch(()=>{i.notify({message:"Failed to copy event details",color:"negative",icon:"mdi-alert"})})};return(u,_)=>($(),P(xe,{class:Re(["calendar-event-card",[`border-left-${I(u.event.type)}`,{"cursor-pointer":!u.disabled,"event-featured":u.event.featured,"event-compact":u.compact}]]),onClick:c,disable:u.disabled},{default:Y(()=>[y(me,{class:Re(["q-pa-sm",{"q-pa-xs":u.compact}])},{default:Y(()=>[T("div",Ka,[T("div",Ga,[y(K,{name:D(u.event.type),color:I(u.event.type),size:u.compact?"sm":"md"},null,8,["name","color","size"])]),T("div",en,[T("div",{class:Re(["text-subtitle2 text-weight-medium q-mb-xs",{"text-caption":u.compact}])},[ae(B(u.event.title)+" ",1),u.event.featured?($(),P(K,{key:0,name:"mdi-star",color:"amber",size:"xs",class:"q-ml-xs"})):z("",!0)],2),u.compact?z("",!0):($(),R("div",tn,[y(K,{name:"mdi-clock-outline",size:"xs",color:"grey-6"}),T("span",an,B(h(u.event)),1)])),u.event.eventLocation&&!u.compact?($(),R("div",nn,[y(K,{name:"mdi-map-marker-outline",size:"xs",color:"grey-6"}),T("span",ln,B(u.event.eventLocation),1)])):z("",!0),!u.compact&&u.event.content?($(),R("div",rn,B(x.value),1)):z("",!0),!u.compact&&u.event.tags.length>0?($(),R("div",on,[($(!0),R(Ie,null,Ve(u.event.tags.slice(0,3),H=>($(),P(wt,{key:H,dense:"",square:"",color:"grey-3","text-color":"grey-8",size:"xs",label:H},null,8,["label"]))),128)),u.event.tags.length>3?($(),R("span",sn," +"+B(u.event.tags.length-3)+" more ",1)):z("",!0)])):z("",!0),u.compact?($(),R("div",un,B(h(u.event)),1)):z("",!0)]),u.showActions&&!u.compact?($(),R("div",cn,[y(J,{flat:"",round:"",icon:"mdi-dots-vertical",size:"sm",onClick:_[2]||(_[2]=ga(H=>l.value=!0,["stop"]))},{default:Y(()=>[y(Ia,{modelValue:l.value,"onUpdate:modelValue":_[1]||(_[1]=H=>l.value=H)},{default:Y(()=>[y(Ha,null,{default:Y(()=>[Oe(($(),P(ze,{clickable:"",onClick:_[0]||(_[0]=H=>u.$emit("view",u.event))},{default:Y(()=>[y(be,{avatar:""},{default:Y(()=>[y(K,{name:"mdi-eye"})]),_:1}),y(be,null,{default:Y(()=>_[3]||(_[3]=[ae("View Details",-1)])),_:1,__:[3]})]),_:1})),[[Fe]]),Oe(($(),P(ze,{clickable:"",onClick:G},{default:Y(()=>[y(be,{avatar:""},{default:Y(()=>[y(K,{name:"mdi-calendar-export"})]),_:1}),y(be,null,{default:Y(()=>_[4]||(_[4]=[ae("Export to Calendar",-1)])),_:1,__:[4]})]),_:1})),[[Fe]]),Oe(($(),P(ze,{clickable:"",onClick:Q},{default:Y(()=>[y(be,{avatar:""},{default:Y(()=>[y(K,{name:"mdi-share"})]),_:1}),y(be,null,{default:Y(()=>_[5]||(_[5]=[ae("Share Event",-1)])),_:1,__:[5]})]),_:1})),[[Fe]])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):z("",!0)]),u.event.eventRecurrence&&u.event.eventRecurrence.type!=="none"?($(),R("div",dn,[y(wt,{dense:"",square:"",color:"info","text-color":"white",size:"xs",icon:"mdi-repeat",label:S(u.event.eventRecurrence)},null,8,["label"])])):z("",!0)]),_:1},8,["class"]),u.event.allDay?($(),P(Tt,{key:0,floating:"",color:"secondary",label:"All Day",class:"all-day-badge"})):z("",!0)]),_:1},8,["class","disable"]))}}),Be=Ht(vn,[["__scopeId","data-v-e9c33aab"]]),mn={class:"calendar-page"},fn={class:"row items-center justify-between"},hn={class:"row items-center q-gutter-sm"},gn={class:"text-h6 q-mx-md"},yn={class:"row items-center q-gutter-sm"},Dn={key:0,class:"q-pa-md"},Mn={class:"text-subtitle1 q-mb-sm"},pn={class:"q-gutter-sm"},bn={class:"text-h6 q-mb-md"},_n={class:"row q-col-gutter-md"},wn={class:"text-h6 q-mb-md"},Cn={class:"q-gutter-sm"},xn={class:"text-h6"},kn={class:"q-mb-md"},Yn={class:"text-subtitle2 q-mb-xs"},qn={key:0,class:"text-body2"},Sn={key:0},En={key:1},$n={key:0},Tn={key:0,class:"q-mb-md"},Hn={class:"text-subtitle2 q-mb-xs"},In={class:"text-body2"},Vn={class:"q-mb-md"},On={class:"text-subtitle2 q-mb-xs"},Fn={class:"text-body1",style:{"white-space":"pre-line"}},Nn={class:"q-mb-md"},Ln={class:"text-caption text-grey-6"},An={class:"q-gutter-sm"},Qn=$t({__name:"CommunityCalendarPage",setup(e){const r=f=>f.replace(/([A-Z])/g," $1").replace(/^./,w=>w.toUpperCase()).replace(/-/g," "),{events:s,isLoading:o,error:i,calendarState:l,filters:x,monthName:c,eventsByDate:D,upcomingEvents:I,goToNextMonth:h,goToPreviousMonth:S,goToToday:G,loadEventsForMonth:Q,getEventsForDate:j,getEventIcon:u,getEventColor:_}=Xa(),H=U(null),de=U(!1),W=U(!1),v=U(null),L=U(!1),oe=[{label:"Events",value:"event"},{label:"Announcements",value:"announcement"},{label:"Articles",value:"article"},{label:"Classifieds",value:"classified"},{label:"Photos",value:"photo"}],X=b(()=>Object.keys(D.value).map(f=>f.replace(/-/g,"/"))),se=b(()=>`${l.value.currentYear}-${l.value.currentMonth}`),ue=b(()=>`${l.value.currentYear}/${l.value.currentMonth.toString().padStart(2,"0")}`),he=f=>{A.debug("ðŸ—“ï¸ Calendar navigation triggered:",f),A.debug("ðŸ—“ï¸ Current calendar state before update:",{currentYear:l.value.currentYear,currentMonth:l.value.currentMonth}),l.value.currentYear=f.year,l.value.currentMonth=f.month,A.debug("ðŸ—“ï¸ Calendar state after update:",{currentYear:l.value.currentYear,currentMonth:l.value.currentMonth}),Q(f.year,f.month)},Z=f=>{A.debug("ðŸ—“ï¸ Date selected:",{date:f,type:typeof f});let w=null;if(typeof f=="string"?w=f.replace(/\//g,"-"):Array.isArray(f)&&f.length>0&&f[0]&&(w=f[0].replace(/\//g,"-")),A.debug("ðŸ—“ï¸ Converted selectedDate:",w),w){l.value.selectedDate=w,H.value=f;const k=j(w);A.debug("ðŸ—“ï¸ Events found for date:",{selectedDate:w,eventsCount:k.length,events:k})}},ge=f=>{v.value=f,W.value=!0},ie=()=>{Q(l.value.currentYear,l.value.currentMonth)},ne=()=>{if(!H.value)return[];const f=H.value.replace(/\//g,"-");return j(f)},M=()=>{x.value.types&&x.value.types.length>0&&x.value.types,de.value,Q(l.value.currentYear,l.value.currentMonth)},p=f=>{const k=(f.includes("/")?f.replace(/\//g,"-"):f).split("-").map(Number);if(k.length!==3||k.some(Pe=>isNaN(Pe)))return A.warn("ðŸ—“ï¸ Invalid date format:",f),"Invalid Date";const le=k[0],we=k[1],Ne=k[2],Ze=new Date(le,we-1,Ne);return Ca(Ze,"FULL")};return ke(()=>l.value,f=>{A.debug("ðŸ—“ï¸ Calendar state changed:",f)},{deep:!0}),ke(()=>c.value,f=>{A.debug("ðŸ—“ï¸ Month name changed:",f)}),Et(()=>{A.debug("ðŸ—“ï¸ Calendar page mounted with state:",{currentMonth:l.value.currentMonth,currentYear:l.value.currentYear,viewMode:l.value.viewMode,eventsCount:s.value.length}),A.debug("ðŸ—“ï¸ EventsByDate structure:",D.value),A.debug("ðŸ—“ï¸ CalendarEvents array:",X.value),A.debug("ðŸ—“ï¸ monthName value:",c.value),A.debug("ðŸ—“ï¸ All events:",s.value),A.debug("ðŸ—“ï¸ Calendar header debug:",{monthName:c.value,currentYear:l.value.currentYear,currentMonth:l.value.currentMonth,selectedDate:l.value.selectedDate,viewMode:l.value.viewMode})}),(f,w)=>($(),P(Ta,{padding:""},{default:Y(()=>[T("div",mn,[w[11]||(w[11]=T("div",{class:"row items-center justify-between q-mb-lg"},[T("div",null,[T("h1",{class:"text-h4 q-ma-none"},"Community Calendar"),T("p",{class:"text-subtitle1 text-grey-6 q-ma-none"}," Stay up to date with community events and activities ")])],-1)),y(xe,{flat:"",class:"q-mb-md"},{default:Y(()=>[y(me,{class:"q-pa-md"},{default:Y(()=>[T("div",fn,[T("div",hn,[y(J,{flat:"",round:"",icon:"mdi-chevron-left",onClick:N(S),loading:N(o)},null,8,["onClick","loading"]),T("div",gn,B(N(c))+" "+B(N(l).currentYear),1),y(J,{flat:"",round:"",icon:"mdi-chevron-right",onClick:N(h),loading:N(o)},null,8,["onClick","loading"]),y(Ma,{vertical:"",class:"q-mx-md"}),y(J,{flat:"",label:"Today",icon:"mdi-calendar-today",onClick:N(G),disable:N(o)},null,8,["onClick","disable"])]),T("div",yn,[y(ka,{modelValue:N(x).types,"onUpdate:modelValue":[w[0]||(w[0]=k=>N(x).types=k),M],multiple:"",dense:"",outlined:"",label:"Event Types",options:oe,"option-label":"label","option-value":"value","emit-value":"","map-options":"",clearable:"",style:{"min-width":"150px"}},{option:Y(({itemProps:k,opt:le})=>[y(ze,pa(ba(k)),{default:Y(()=>[y(be,{avatar:""},{default:Y(()=>[y(K,{name:N(u)(le.value),color:N(_)(le.value)},null,8,["name","color"])]),_:2},1024),y(be,null,{default:Y(()=>[y(xa,null,{default:Y(()=>[ae(B(le.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),y(_a,{modelValue:de.value,"onUpdate:modelValue":[w[1]||(w[1]=k=>de.value=k),M],label:"Featured Only"},null,8,["modelValue"]),y(J,{flat:"",round:"",icon:"mdi-refresh",onClick:ie,loading:N(o)},null,8,["loading"])])])]),_:1})]),_:1}),y(qa,{showing:N(o)&&N(s).length===0},{default:Y(()=>[y(Ya,{size:"50px",color:"primary"})]),_:1},8,["showing"]),N(i)?($(),P(Sa,{key:0,class:"bg-negative text-white q-mb-md"},{avatar:Y(()=>[y(K,{name:"mdi-alert-circle"})]),action:Y(()=>[y(J,{flat:"",label:"Retry",onClick:ie})]),default:Y(()=>[ae(" "+B(N(i))+" ",1)]),_:1})):z("",!0),y(xe,{flat:"",class:"calendar-grid"},{default:Y(()=>[y(me,{class:"q-pa-none"},{default:Y(()=>[($(),P(Wa,{key:se.value,modelValue:H.value,"onUpdate:modelValue":[w[2]||(w[2]=k=>H.value=k),Z],events:X.value,"event-color":"primary","today-btn":"",class:"full-width",onNavigation:he,landscape:"","default-year-month":ue.value,"navigation-min-year-month":"2020/01","navigation-max-year-month":"2030/12",flat:""},null,8,["modelValue","events","default-year-month"])),H.value&&ne().length>0?($(),R("div",Dn,[T("div",Mn," Events on "+B(p(H.value.replace(/\//g,"-")))+": ",1),T("div",pn,[($(!0),R(Ie,null,Ve(ne(),k=>($(),P(Be,{key:k.id,event:k,compact:"",onClick:le=>ge(k)},null,8,["event","onClick"]))),128))])])):z("",!0)]),_:1})]),_:1}),H.value&&ne().length>0?($(),P(xe,{key:1,flat:"",class:"q-mt-md"},{default:Y(()=>[y(me,null,{default:Y(()=>[T("div",bn,[y(K,{name:"mdi-calendar-check",class:"q-mr-sm"}),ae(" Events on "+B(p(H.value.replace(/\//g,"-"))),1)]),T("div",_n,[($(!0),R(Ie,null,Ve(ne(),k=>($(),R("div",{key:k.id,class:"col-12 col-md-6"},[y(Be,{event:k,onClick:le=>ge(k)},null,8,["event","onClick"])]))),128))])]),_:1})]),_:1})):z("",!0),N(I).length>0?($(),P(xe,{key:2,flat:"",class:"q-mt-md"},{default:Y(()=>[y(me,null,{default:Y(()=>[T("div",wn,[y(K,{name:"mdi-calendar-clock",class:"q-mr-sm"}),w[6]||(w[6]=ae(" Upcoming Events ",-1))]),T("div",Cn,[($(!0),R(Ie,null,Ve(N(I).slice(0,3),k=>($(),P(Be,{key:k.id,event:k,compact:"",onClick:le=>ge(k)},null,8,["event","onClick"]))),128)),N(I).length>3?($(),P(J,{key:0,flat:"",color:"primary",label:"View All Upcoming",onClick:w[3]||(w[3]=k=>L.value=!0)})):z("",!0)])]),_:1})]),_:1})):z("",!0),y(_t,{modelValue:W.value,"onUpdate:modelValue":w[4]||(w[4]=k=>W.value=k),position:"right","full-height":""},{default:Y(()=>[y(xe,{style:{width:"500px","max-width":"90vw"}},{default:Y(()=>[y(me,{class:"row items-center q-pb-none"},{default:Y(()=>[T("div",xn,B(v.value?.title),1),y($a),Oe(y(J,{icon:"close",flat:"",round:"",dense:""},null,512),[[Fe]])]),_:1}),v.value?($(),P(me,{key:0},{default:Y(()=>[T("div",{class:Re(["text-overline q-mb-sm",`text-${N(_)(v.value.type)}`])},[y(K,{name:N(u)(v.value.type),size:"sm",class:"q-mr-xs"},null,8,["name"]),ae(" "+B(r(v.value.type)),1)],2),T("div",kn,[T("div",Yn,[y(K,{name:"mdi-calendar",class:"q-mr-xs"}),ae(" "+B(p(v.value.eventDate)),1)]),v.value.eventTime||v.value.eventEndTime?($(),R("div",qn,[y(K,{name:"mdi-clock",class:"q-mr-xs"}),v.value.allDay?($(),R("span",Sn,"All Day")):($(),R("span",En,[ae(B(v.value.eventTime||"TBD")+" ",1),v.value.eventEndTime?($(),R("span",$n," - "+B(v.value.eventEndTime),1)):z("",!0)]))])):z("",!0)]),v.value.eventLocation?($(),R("div",Tn,[T("div",Hn,[y(K,{name:"mdi-map-marker",class:"q-mr-xs"}),w[7]||(w[7]=ae(" Location ",-1))]),T("div",In,B(v.value.eventLocation),1)])):z("",!0),T("div",Vn,[T("div",On,[y(K,{name:"mdi-text",class:"q-mr-xs"}),w[8]||(w[8]=ae(" Description ",-1))]),T("div",Fn,B(v.value.content),1)]),T("div",Nn,[T("div",Ln," By "+B(v.value.authorName)+" â€¢ "+B(v.value.authorEmail),1)]),v.value.featured?($(),P(Tt,{key:1,color:"amber","text-color":"black",class:"q-mt-sm"},{default:Y(()=>[y(K,{name:"star",size:"xs",class:"q-mr-xs"}),w[9]||(w[9]=ae(" Featured Event ",-1))]),_:1,__:[9]})):z("",!0)]),_:1})):z("",!0)]),_:1})]),_:1},8,["modelValue"]),y(_t,{modelValue:L.value,"onUpdate:modelValue":w[5]||(w[5]=k=>L.value=k)},{default:Y(()=>[y(xe,{style:{"min-width":"400px","max-width":"600px"}},{default:Y(()=>[y(me,null,{default:Y(()=>w[10]||(w[10]=[T("div",{class:"text-h6"},"All Upcoming Events",-1)])),_:1,__:[10]}),y(me,{class:"q-pt-none"},{default:Y(()=>[T("div",An,[($(!0),R(Ie,null,Ve(N(I),k=>($(),P(Be,{key:k.id,event:k,onClick:le=>ge(k)},null,8,["event","onClick"]))),128))])]),_:1}),y(wa,{align:"right"},{default:Y(()=>[Oe(y(J,{flat:"",label:"Close",color:"primary"},null,512),[[Fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}}),ll=Ht(Qn,[["__scopeId","data-v-9e6c46b3"]]);export{ll as default};
