import{k as le,aq as S,S as ie,u as se,V as re,g as ue,r as c,c as w,aC as ce,X as de,aD as fe,Y as ve,aE as he,w as H,x as q,aF as A,aG as F,v as ge,h as L,ao as me,n as we,aH as ye}from"./index-DDm66URI.js";import{v as Pe,a as M,u as pe,p as R,b as Te,c as Se,d as be,r as j,s as De}from"./position-engine-BLFvuBSe.js";import{c as Q}from"./selection-DY8u9fNx.js";const Ce=le({name:"QTooltip",inheritAttrs:!1,props:{...pe,...re,...S,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...S.transitionShow,default:"jump-down"},transitionHide:{...S.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:M},self:{type:String,default:"top middle",validator:M},offset:{type:Array,default:()=>[14,14],validator:Pe},scrollTarget:se,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ie],setup(e,{slots:D,emit:P,attrs:h}){let u,t;const l=ue(),{proxy:{$q:n}}=l,d=c(null),g=c(!1),W=w(()=>R(e.anchor,n.lang.rtl)),z=w(()=>R(e.self,n.lang.rtl)),B=w(()=>e.persistent!==!0),{registerTick:N,removeTick:U}=ce(),{registerTimeout:m}=de(),{transitionProps:_,transitionStyle:G}=fe(e),{localScrollTarget:E,changeScrollEvent:I,unconfigureScrollTarget:X}=Te(e,k),{anchorEl:a,canShow:Y,anchorEvents:f}=Se({showing:g,configureAnchorEl:oe}),{show:$,hide:p}=ve({showing:g,canShow:Y,handleShow:K,handleHide:Z,hideOnRouteChange:B,processOnMount:!0});Object.assign(f,{delayShow:ee,delayHide:te});const{showPortal:O,hidePortal:V,renderPortal:J}=he(l,d,ae,"tooltip");if(n.platform.is.mobile===!0){const o={anchorEl:a,innerRef:d,onClickOutside(i){return p(i),i.target.classList.contains("q-dialog__backdrop")&&ye(i),!0}},T=w(()=>e.modelValue===null&&e.persistent!==!0&&g.value===!0);H(T,i=>{(i===!0?be:j)(o)}),q(()=>{j(o)})}function K(o){O(),N(()=>{t=new MutationObserver(()=>v()),t.observe(d.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),v(),k()}),u===void 0&&(u=H(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,v)),m(()=>{O(!0),P("show",o)},e.transitionDuration)}function Z(o){U(),V(),C(),m(()=>{V(!0),P("hide",o)},e.transitionDuration)}function C(){t!==void 0&&(t.disconnect(),t=void 0),u!==void 0&&(u(),u=void 0),X(),A(f,"tooltipTemp")}function v(){De({targetEl:d.value,offset:e.offset,anchorEl:a.value,anchorOrigin:W.value,selfOrigin:z.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ee(o){if(n.platform.is.mobile===!0){Q(),document.body.classList.add("non-selectable");const T=a.value,i=["touchmove","touchcancel","touchend","click"].map(x=>[T,x,"delayHide","passiveCapture"]);F(f,"tooltipTemp",i)}m(()=>{$(o)},e.delay)}function te(o){n.platform.is.mobile===!0&&(A(f,"tooltipTemp"),Q(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),m(()=>{p(o)},e.hideDelay)}function oe(){if(e.noParentEvent===!0||a.value===null)return;const o=n.platform.is.mobile===!0?[[a.value,"touchstart","delayShow","passive"]]:[[a.value,"mouseenter","delayShow","passive"],[a.value,"mouseleave","delayHide","passive"]];F(f,"anchor",o)}function k(){if(a.value!==null||e.scrollTarget!==void 0){E.value=ge(a.value,e.scrollTarget);const o=e.noParentEvent===!0?v:p;I(E.value,o)}}function ne(){return g.value===!0?L("div",{...h,ref:d,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",h.class],style:[h.style,G.value],role:"tooltip"},we(D.default)):null}function ae(){return L(me,_.value,ne)}return q(C),Object.assign(l.proxy,{updatePosition:v}),J}}),b=c(!1),y=c(null),s=c(!1),r=c(null);function ke(){return{showViewer:b,selectedDocument:y,isLoading:s,error:r,openDocument:t=>{console.log("🔍 [usePdfViewer] Opening document:",t),console.log("🔍 [usePdfViewer] Document URL:",t.url),y.value=t,b.value=!0,s.value=!0,r.value=null},closeViewer:()=>{b.value=!1,y.value=null,s.value=!1,r.value=null},switchDocument:t=>{try{s.value=!0,r.value=null,y.value=t,console.log("🔄 [usePdfViewer] Switching to document:",t.title)}catch(l){console.error("Error switching document:",l);const n=l instanceof Error?l.message:"Failed to switch document";r.value=n,s.value=!1}},onViewerReady:t=>{t?console.log("✅ [usePdfViewer] PDF viewer ready"):(console.error("❌ [usePdfViewer] PDF viewer failed to initialize"),r.value="PDF viewer failed to initialize"),s.value=!1},onViewerError:t=>{console.error("PDF Viewer error:",t),r.value=t,s.value=!1}}}export{Ce as Q,ke as u};
