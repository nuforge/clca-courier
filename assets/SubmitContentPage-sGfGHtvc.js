import{c as Re,aF as nt,aG as st,f as L,h as z,D as T,s as it,aH as rt,aI as dt,aJ as ut,j as Ge,l as le,aK as ct,aL as je,aM as Fe,aN as mt,F as B,S as pt,g as vt,U as gt,aO as ft,r as V,w as ie,_ as X,t as ht,aP as yt,Z as bt,aQ as _t,v as J,E as C,C as a,G as e,N as b,M as D,H as w,B as c,ab as ge,a5 as W,ac as M,L as ue,y as h,a8 as se,Q as F,az as wt,J as fe,K as he,x as K,a3 as Ne,a4 as We,aw as qe,au as Ct,av as qt,aR as Tt,z as kt,aS as St,aT as Be,aU as He,aV as xt,aW as $t,aX as Dt,aY as Ve,I as A,a0 as Vt,a2 as Ut,aZ as Pt,ag as Et}from"./index-C_JkpTYA.js";import{Q as de}from"./QBanner-oWfq04-Z.js";import{Q as Ke}from"./QExpansionItem-Za1EKcJ-.js";import{Q as ye}from"./QSpace-Cx1rzqTo.js";import{Q as It}from"./QPage-Df4pcqfM.js";import{C as be}from"./ClosePopup-CItAD2gQ.js";import{a as ne,Q as ze,b as pe}from"./QItem-D71Clo6b.js";import{Q as Z}from"./QSelect-D2dFKaVT.js";import{Q as At}from"./QForm-rH8jkxSV.js";import{firestoreService as Lt}from"./firebase-firestore.service-DPj3Rf11.js";import{Q as Rt}from"./QBtnDropdown-B_VspOMD.js";import{Q as Nt}from"./QTooltip-CP8m_Pmp.js";import{u as zt,a as Ot,b as Mt,Q as Ft}from"./QLinearProgress-C9f8OJUy.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as Bt,a as Ue,b as Ht,c as Pe}from"./QTabPanels-uSMTtWjo.js";import{Q as Ye}from"./QImg-CcqjdU3Y.js";import{Q as ve}from"./QChip-pZEp0y1J.js";import{u as Je}from"./useSiteTheme-BN9TRfnC.js";import{Q as Qt}from"./QBadge-DwFIcqT9.js";import{Q as Gt}from"./QList-hbuR9g1G.js";import{f as Ee}from"./firebase-auth.service-DUJ5rzAl.js";import{T as Y}from"./translation-keys-CcbP-t_8.js";import{u as jt}from"./vue-i18n.runtime-BJBTxLQE.js";import"./QSlideTransition-Bh093xlC.js";import"./QMenu-Dh3ZC5pK.js";import"./format-DFNAs745.js";import"./QBtnGroup-CnpgbsFn.js";import"./QResizeObserver-065t6PDQ.js";import"./touch-BjYP5sR0.js";import"./use-render-cache-DLxPkVnQ.js";const Ie=Re({name:"QBreadcrumbsEl",props:{...nt,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(n,{slots:t}){const{linkTag:o,linkAttrs:d,linkClass:l,navigateOnClick:s}=st(),v=L(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(n.disable!==!0?"q-link--focusable"+l.value:"q-breadcrumbs__el--disable"),...d.value,onClick:s})),_=L(()=>"q-breadcrumbs__el-icon"+(n.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const y=[];return n.icon!==void 0&&y.push(z(T,{class:_.value,name:n.icon})),n.label!==void 0&&y.push(n.label),z(o.value,{...v.value},it(t.default,y))}}}),Wt=["",!0],Kt=Re({name:"QBreadcrumbs",props:{...rt,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:n=>["none","xs","sm","md","lg","xl"].includes(n),default:"sm"}},setup(n,{slots:t}){const o=dt(n),d=L(()=>`flex items-center ${o.value}${n.gutter==="none"?"":` q-gutter-${n.gutter}`}`),l=L(()=>n.separatorColor?` text-${n.separatorColor}`:""),s=L(()=>` text-${n.activeColor}`);return()=>{if(t.default===void 0)return;const v=ut(Ge(t.default));if(v.length===0)return;let _=1;const y=[],i=v.filter(g=>g.type?.name==="QBreadcrumbsEl").length,r=t.separator!==void 0?t.separator:()=>n.separator;return v.forEach(g=>{if(g.type?.name==="QBreadcrumbsEl"){const U=_<i,u=g.props!==null&&Wt.includes(g.props.disable),m=(U===!0?"":" q-breadcrumbs--last")+(u!==!0&&U===!0?s.value:"");_++,y.push(z("div",{class:`flex items-center${m}`},[g])),U===!0&&y.push(z("div",{class:"q-breadcrumbs__separator"+l.value},r()))}else y.push(g)}),z("div",{class:"q-breadcrumbs"},[z("div",{class:d.value},y)])}}});class Yt{createMetadataTemplate(t){const o={priority:"normal",tags:[],visibility:"public"};switch(t){case"article":return{...o,category:"community",author:""};case"event":return{...o,date:"",location:"",capacity:0};case"classified":return{...o,category:"for-sale",price:"",contact:""};case"announcement":return{...o,category:"community",urgency:"normal"};default:return o}}getPredefinedCategories(){return["community","events","announcements","for-sale","services","housing","recreation"]}getUserDefinedCategories(){return["lake-activities","volunteer-opportunities","neighborhood-watch"]}async submitContent(t){le.debug("Submitting content to Firebase:",t),t.type==="event"&&le.debug("Calendar event detected:",{onCalendar:t.onCalendar,eventDate:t.eventDate,eventTime:t.eventTime,eventLocation:t.eventLocation,allDay:t.allDay});try{const o={type:t.type,title:t.title,content:t.content,tags:[t.category],attachments:t.attachments||[],onCalendar:t.onCalendar||!1,allDay:t.allDay||!1};t.eventDate&&(o.eventDate=t.eventDate),t.eventEndDate&&(o.eventEndDate=t.eventEndDate),t.eventTime&&(o.eventTime=t.eventTime),t.eventEndTime&&(o.eventEndTime=t.eventEndTime),t.eventLocation&&(o.eventLocation=t.eventLocation),t.eventRecurrence&&(o.eventRecurrence=t.eventRecurrence),o.metadata={submissionSource:"web",userAgent:navigator.userAgent,priority:t.priority,targetIssue:t.targetIssue,...t.metadata},le.debug("UserContent data being submitted:",o);const d=await Lt.submitUserContent(o);return le.success("Content submitted successfully to Firebase with ID:",d),d}catch(o){throw le.error("Error submitting content to Firebase:",o),o}}}const re=new Yt;function Ze(n,t){if(t&&n===t)return null;const o=n.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(o)===!0)return n;const d=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,l=d.display;return l==="block"||l==="table"?n:Ze(n.parentNode)}function Ae(n,t,o){return!n||n===document.body?!1:o===!0&&n===t||(t===document?document.body:t).contains(n.parentNode)}function Xe(n,t,o){if(o||(o=document.createRange(),o.selectNode(n),o.setStart(n,0)),t.count===0)o.setEnd(n,t.count);else if(t.count>0)if(n.nodeType===Node.TEXT_NODE)n.textContent.length<t.count?t.count-=n.textContent.length:(o.setEnd(n,t.count),t.count=0);else for(let d=0;t.count!==0&&d<n.childNodes.length;d++)o=Xe(n.childNodes[d],t,o);return o}const Jt=/^https?:\/\//;class Zt{constructor(t,o){this.el=t,this.eVm=o,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(Ae(t.anchorNode,this.el,!0)&&Ae(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t?.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const o=t.startContainer;return o.nodeType===document.ELEMENT_NODE?o:o.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?Ze(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const o=document.createRange(),d=document.getSelection();t!==null?(o.setStart(t.startContainer,t.startOffset),o.setEnd(t.endContainer,t.endOffset),d.removeAllRanges(),d.addRange(o)):(d.selectAllChildren(this.el),d.collapseToEnd())}savePosition(){let t=-1,o;const d=document.getSelection(),l=this.el.parentNode;if(d.focusNode&&Ae(d.focusNode,l))for(o=d.focusNode,t=d.focusOffset;o&&o!==l;)o!==this.el&&o.previousSibling?(o=o.previousSibling,t+=o.textContent.length):o=o.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const o=window.getSelection(),d=Xe(this.el,{count:this.savedPos});d&&(d.collapse(!1),o.removeAllRanges(),o.addRange(d))}}hasParent(t,o){const d=o?this.parent:this.blockParent;return d!==null?d.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,o,d=this.parent){return d===null?!1:t.includes(d.nodeName.toLowerCase())===!0?!0:o===!0?this.hasParents(t,o,d.parentNode):!1}is(t,o){if(this.selection===null)return!1;switch(t){case"formatBlock":return o==="DIV"&&this.parent===this.el||this.hasParent(o,o==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===o;case"fontName":const d=document.queryCommandValue(t);return d===`"${o}"`||d===o;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const l=document.queryCommandState(t);return o!==void 0?l===o:l}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,o,d=ct){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(o)&&this.is(t,o)&&(t="outdent",o=null),o==="PRE"&&this.is(t,"PRE")&&(o="P");else if(t==="print"){d();const l=window.open();l.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),l.print(),l.close();return}else if(t==="link"){const l=this.getParentAttribute("href");if(l===null){const s=this.selectWord(this.selection),v=s?s.toString():"";if(!v.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Jt.test(v)?v:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(s.getRangeAt(0))}else this.eVm.editLinkUrl.value=l,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),d();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),d();return}document.execCommand(t,!1,o),d()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const o=document.createRange();o.setStart(t.anchorNode,t.anchorOffset),o.setEnd(t.focusNode,t.focusOffset);const d=o.collapsed?["backward","forward"]:["forward","backward"];o.detach();const l=t.focusNode,s=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",d[0],"character"),t.modify("move",d[1],"word"),t.extend(l,s),t.modify("extend",d[1],"character"),t.modify("extend",d[0],"word"),t}}function et(n,t,o){t.handler?t.handler(n,o,o.caret):o.runCmd(t.cmd,t.param)}function Oe(n){return z("div",{class:"q-editor__toolbar-group"},n)}function tt(n,t,o,d=!1){const l=d||(t.type==="toggle"?t.toggled?t.toggled(n):t.cmd&&n.caret.is(t.cmd,t.param):!1),s=[];if(n.$q.platform.is.desktop&&(t.tip||t.htmlTip)){const v=t.key?z("div",[z("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;s.push(z(Nt,{delay:1e3},()=>[z("div",t.htmlTip?{innerHTML:t.htmlTip}:t.tip),v]))}return z(B,{...n.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:l?t.toggleColor||n.props.toolbarToggleColor:t.color||n.props.toolbarColor,textColor:l&&!n.props.toolbarPush?null:t.textColor||n.props.toolbarTextColor,label:t.label,"aria-label":t.label==null?t.tip:void 0,disable:t.disable?typeof t.disable=="function"?t.disable(n):!0:!1,size:"sm",onClick(v){o?.(),et(v,t,n)}},()=>s)}function Xt(n,t){const o=t.list==="only-icons";let d=t.label,l=t.icon!==null?t.icon:void 0,s,v;function _(){i.component.proxy.hide()}if(o)v=t.options.map(r=>{const g=r.type===void 0?n.caret.is(r.cmd,r.param):!1;return g&&(d=r.tip,l=r.icon!==null?r.icon:void 0),tt(n,r,_,g)}),s=n.toolbarBackgroundClass.value,v=[Oe(v)];else{const r=n.props.toolbarToggleColor!==void 0?`text-${n.props.toolbarToggleColor}`:null,g=n.props.toolbarTextColor!==void 0?`text-${n.props.toolbarTextColor}`:null,U=t.list==="no-icons";v=t.options.map(u=>{const m=u.disable?u.disable(n):!1,k=u.type===void 0?n.caret.is(u.cmd,u.param):!1;k&&(d=u.tip,l=u.icon!==null?u.icon:void 0);const Q=u.htmlTip;return z(ze,{active:k,activeClass:r,clickable:!0,disable:m,dense:!0,onClick(S){_(),S?.qAvoidFocus!==!0&&n.contentRef.value?.focus(),n.caret.restore(),et(S,u,n)}},()=>[U===!0?null:z(ne,{class:k?r:g,side:!0},()=>z(T,{name:u.icon!==null?u.icon:void 0})),z(ne,Q?()=>z("div",{class:"text-no-wrap",innerHTML:u.htmlTip}):u.tip?()=>z("div",{class:"text-no-wrap"},u.tip):void 0)])}),s=[n.toolbarBackgroundClass.value,g]}const y=t.highlight&&d!==t.label,i=z(Rt,{...n.buttonProps.value,noCaps:!0,noWrap:!0,color:y?n.props.toolbarToggleColor:n.props.toolbarColor,textColor:y&&!n.props.toolbarPush?null:n.props.toolbarTextColor,label:t.fixedLabel?t.label:d,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:l,contentClass:s,onShow:r=>n.emit("dropdownShow",r),onHide:r=>n.emit("dropdownHide",r),onBeforeShow:r=>n.emit("dropdownBeforeShow",r),onBeforeHide:r=>n.emit("dropdownBeforeHide",r)},()=>v);return i}function eo(n){if(n.caret)return n.buttons.value.filter(t=>!n.isViewingSource.value||t.find(o=>o.cmd==="viewsource")).map(t=>Oe(t.map(o=>n.isViewingSource.value&&o.cmd!=="viewsource"?!1:o.type==="slot"?Ge(n.slots[o.slot]):o.type==="dropdown"?Xt(n,o):tt(n,o))))}function to(n,t,o,d={}){const l=Object.keys(d);if(l.length===0)return{};const s={default_font:{cmd:"fontName",param:n,icon:o,tip:t}};return l.forEach(v=>{const _=d[v];s[v]={cmd:"fontName",param:_,icon:o,tip:_,htmlTip:`<font face="${_}">${_}</font>`}}),s}function oo(n){if(n.caret){const t=n.props.toolbarColor||n.props.toolbarTextColor;let o=n.editLinkUrl.value;const d=()=>{n.caret.restore(),o!==n.editLinkUrl.value&&document.execCommand("createLink",!1,o===""?" ":o),n.editLinkUrl.value=null};return[z("div",{class:`q-mx-xs text-${t}`},`${n.$q.lang.editor.url}: `),z("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:l=>{mt(l),o=l.target.value},onKeydown:l=>{if(je(l)!==!0)switch(l.keyCode){case 13:return Fe(l),d();case 27:Fe(l),n.caret.restore(),(!n.editLinkUrl.value||n.editLinkUrl.value==="https://")&&document.execCommand("unlink"),n.editLinkUrl.value=null;break}}}),Oe([z(B,{key:"qedt_btm_rem",...n.buttonProps.value,label:n.$q.lang.label.remove,noCaps:!0,onClick:()=>{n.caret.restore(),document.execCommand("unlink"),n.editLinkUrl.value=null}}),z(B,{key:"qedt_btm_upd",...n.buttonProps.value,label:n.$q.lang.label.update,noCaps:!0,onClick:d})])]}}const ao=Object.prototype.toString,Le=Object.prototype.hasOwnProperty,lo=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(n=>"[object "+n+"]"));function Qe(n){if(n!==Object(n)||lo.has(ao.call(n))===!0||n.constructor&&Le.call(n,"constructor")===!1&&Le.call(n.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in n);return t===void 0||Le.call(n,t)}function ot(){let n,t,o,d,l,s,v=arguments[0]||{},_=1,y=!1;const i=arguments.length;for(typeof v=="boolean"&&(y=v,v=arguments[1]||{},_=2),Object(v)!==v&&typeof v!="function"&&(v={}),i===_&&(v=this,_--);_<i;_++)if((n=arguments[_])!==null)for(t in n)o=v[t],d=n[t],v!==d&&(y===!0&&d&&((l=Array.isArray(d))||Qe(d)===!0)?(l===!0?s=Array.isArray(o)===!0?o:[]:s=Qe(o)===!0?o:{},v[t]=ot(y,s,d)):d!==void 0&&(v[t]=d));return v}const no=Re({name:"QEditor",props:{...pt,...Ot,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:n=>n.length===0||n.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:n=>["div","p"].includes(n),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...zt,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(n,{slots:t,emit:o}){const{proxy:d}=vt(),{$q:l}=d,s=gt(n,l),{inFullscreen:v,toggleFullscreen:_}=Mt(),y=ft(),i=V(null),r=V(null),g=V(null),U=V(!1),u=L(()=>!n.readonly&&!n.disable);let m,k,Q=n.modelValue;document.execCommand("defaultParagraphSeparator",!1,n.paragraphTag),m=window.getComputedStyle(document.body).fontFamily;const S=L(()=>n.toolbarBg?` bg-${n.toolbarBg}`:""),$=L(()=>({type:"a",flat:n.toolbarOutline!==!0&&n.toolbarPush!==!0,noWrap:!0,outline:n.toolbarOutline,push:n.toolbarPush,rounded:n.toolbarRounded,dense:!0,color:n.toolbarColor,disable:!u.value,size:"sm"})),x=L(()=>{const p=l.lang.editor,f=l.iconSet.editor;return{bold:{cmd:"bold",icon:f.bold,tip:p.bold,key:66},italic:{cmd:"italic",icon:f.italic,tip:p.italic,key:73},strike:{cmd:"strikeThrough",icon:f.strikethrough,tip:p.strikethrough,key:83},underline:{cmd:"underline",icon:f.underline,tip:p.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:f.unorderedList,tip:p.unorderedList},ordered:{cmd:"insertOrderedList",icon:f.orderedList,tip:p.orderedList},subscript:{cmd:"subscript",icon:f.subscript,tip:p.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:f.superscript,tip:p.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:N=>N.caret&&!N.caret.can("link"),icon:f.hyperlink,tip:p.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:f.toggleFullscreen,tip:p.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:f.viewSource,tip:p.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:f.quote,tip:p.quote,key:81},left:{cmd:"justifyLeft",icon:f.left,tip:p.left},center:{cmd:"justifyCenter",icon:f.center,tip:p.center},right:{cmd:"justifyRight",icon:f.right,tip:p.right},justify:{cmd:"justifyFull",icon:f.justify,tip:p.justify},print:{type:"no-state",cmd:"print",icon:f.print,tip:p.print,key:80},outdent:{type:"no-state",disable:N=>N.caret&&!N.caret.can("outdent"),cmd:"outdent",icon:f.outdent,tip:p.outdent},indent:{type:"no-state",disable:N=>N.caret&&!N.caret.can("indent"),cmd:"indent",icon:f.indent,tip:p.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:f.removeFormat,tip:p.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:f.hr,tip:p.hr},undo:{type:"no-state",cmd:"undo",icon:f.undo,tip:p.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:f.redo,tip:p.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:f.heading1||f.heading,tip:p.heading1,htmlTip:`<h1 class="q-ma-none">${p.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:f.heading2||f.heading,tip:p.heading2,htmlTip:`<h2 class="q-ma-none">${p.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:f.heading3||f.heading,tip:p.heading3,htmlTip:`<h3 class="q-ma-none">${p.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:f.heading4||f.heading,tip:p.heading4,htmlTip:`<h4 class="q-ma-none">${p.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:f.heading5||f.heading,tip:p.heading5,htmlTip:`<h5 class="q-ma-none">${p.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:f.heading6||f.heading,tip:p.heading6,htmlTip:`<h6 class="q-ma-none">${p.heading6}</h6>`},p:{cmd:"formatBlock",param:n.paragraphTag,icon:f.heading,tip:p.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:f.code,htmlTip:`<code>${p.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:f.size1||f.size,tip:p.size1,htmlTip:`<font size="1">${p.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:f.size2||f.size,tip:p.size2,htmlTip:`<font size="2">${p.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:f.size3||f.size,tip:p.size3,htmlTip:`<font size="3">${p.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:f.size4||f.size,tip:p.size4,htmlTip:`<font size="4">${p.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:f.size5||f.size,tip:p.size5,htmlTip:`<font size="5">${p.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:f.size6||f.size,tip:p.size6,htmlTip:`<font size="6">${p.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:f.size7||f.size,tip:p.size7,htmlTip:`<font size="7">${p.size7}</font>`}}}),G=L(()=>{const p=n.definitions||{},f=n.definitions||n.fonts?ot(!0,{},x.value,p,to(m,l.lang.editor.defaultFont,l.iconSet.editor.font,n.fonts)):x.value;return n.toolbar.map(N=>N.map(j=>{if(j.options)return{type:"dropdown",icon:j.icon,label:j.label,size:"sm",dense:!0,fixedLabel:j.fixedLabel,fixedIcon:j.fixedIcon,highlight:j.highlight,list:j.list,options:j.options.map(lt=>f[lt])};const te=f[j];return te?te.type==="no-state"||p[j]&&(te.cmd===void 0||x.value[te.cmd]&&x.value[te.cmd].type==="no-state")?te:Object.assign({type:"toggle"},te):{type:"slot",slot:j}}))}),H={$q:l,props:n,slots:t,emit:o,inFullscreen:v,toggleFullscreen:_,runCmd:$e,isViewingSource:U,editLinkUrl:g,toolbarBackgroundClass:S,buttonProps:$,contentRef:r,buttons:G,setContent:xe};ie(()=>n.modelValue,p=>{Q!==p&&(Q=p,xe(p,!0))}),ie(g,p=>{o(`link${p?"Show":"Hide"}`)});const ce=L(()=>n.toolbar&&n.toolbar.length!==0),R=L(()=>{const p={},f=N=>{N.key&&(p[N.key]={cmd:N.cmd,param:N.param})};return G.value.forEach(N=>{N.forEach(j=>{j.options?j.options.forEach(f):f(j)})}),p}),I=L(()=>v.value?n.contentStyle:[{minHeight:n.minHeight,height:n.height,maxHeight:n.maxHeight},n.contentStyle]),O=L(()=>`q-editor q-editor--${U.value===!0?"source":"default"}`+(n.disable===!0?" disabled":"")+(v.value===!0?" fullscreen column":"")+(n.square===!0?" q-editor--square no-border-radius":"")+(n.flat===!0?" q-editor--flat":"")+(n.dense===!0?" q-editor--dense":"")+(s.value===!0?" q-editor--dark q-dark":"")),me=L(()=>[n.contentClass,"q-editor__content",{col:v.value,"overflow-auto":v.value||n.maxHeight}]),ee=L(()=>n.disable===!0?{"aria-disabled":"true"}:{});function Te(){if(r.value!==null){const p=`inner${U.value===!0?"Text":"HTML"}`,f=r.value[p];f!==n.modelValue&&(Q=f,o("update:modelValue",f))}}function ke(p){if(o("keydown",p),p.ctrlKey!==!0||je(p)===!0){ae();return}const f=p.keyCode,N=R.value[f];if(N!==void 0){const{cmd:j,param:te}=N;yt(p),$e(j,te,!1)}}function Se(p){ae(),o("click",p)}function _e(p){if(r.value!==null){const{scrollTop:f,scrollHeight:N}=r.value;k=N-f}H.caret.save(),o("blur",p)}function P(p){bt(()=>{r.value!==null&&k!==void 0&&(r.value.scrollTop=r.value.scrollHeight-k)}),o("focus",p)}function q(p){const f=i.value;if(f!==null&&f.contains(p.target)===!0&&(p.relatedTarget===null||f.contains(p.relatedTarget)!==!0)){const N=`inner${U.value===!0?"Text":"HTML"}`;H.caret.restorePosition(r.value[N].length),ae()}}function E(p){const f=i.value;f!==null&&f.contains(p.target)===!0&&(p.relatedTarget===null||f.contains(p.relatedTarget)!==!0)&&(H.caret.savePosition(),ae())}function we(){k=void 0}function Me(p){H.caret.save()}function xe(p,f){if(r.value!==null){f===!0&&H.caret.savePosition();const N=`inner${U.value===!0?"Text":"HTML"}`;r.value[N]=p,f===!0&&(H.caret.restorePosition(r.value[N].length),ae())}}function $e(p,f,N=!0){De(),H.caret.restore(),H.caret.apply(p,f,()=>{De(),H.caret.save(),N&&ae()})}function ae(){setTimeout(()=>{g.value=null,d.$forceUpdate()},1)}function De(){_t(()=>{r.value?.focus({preventScroll:!0})})}function at(){return r.value}return X(()=>{H.caret=d.caret=new Zt(r.value,H),xe(n.modelValue),ae(),document.addEventListener("selectionchange",Me)}),ht(()=>{document.removeEventListener("selectionchange",Me)}),Object.assign(d,{runCmd:$e,refreshToolbar:ae,focus:De,getContentEl:at}),()=>{let p;if(ce.value){const f=[z("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+S.value},eo(H))];g.value!==null&&f.push(z("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+S.value},oo(H))),p=z("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},f)}return z("div",{ref:i,class:O.value,style:{height:v.value===!0?"100%":null},...ee.value,onFocusin:q,onFocusout:E},[p,z("div",{ref:r,style:I.value,class:me.value,contenteditable:u.value,placeholder:n.placeholder,...y.listeners.value,onInput:Te,onKeydown:ke,onClick:Se,onBlur:_e,onFocus:P,onMousedown:we,onTouchstartPassive:we})])}}}),so={class:"rich-text-editor"},io={class:"row items-center justify-between q-mt-sm text-caption text-grey-6"},ro={key:0},uo={key:1},co={class:"text-right"},mo=J({__name:"RichTextEditor",props:{modelValue:{},minHeight:{default:"200px"},placeholder:{default:"Write your content here..."},maxLength:{default:1e4}},emits:["update:modelValue"],setup(n,{expose:t,emit:o}){const d=n,l=o,s=V(d.modelValue),v=V(!1),_=[["bold","italic","strike"],["hr"],[{label:"Headers",icon:"format_size",list:"no-icons",options:["h1","h2","h3"]}],["quote","unordered","ordered"],["link"],["undo","redo"],["fullscreen"]],y=L(()=>s.value.replace(/<[^>]*>/g,"").length),i=L(()=>s.value.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(k=>k.length>0).length),r=L(()=>Math.ceil(i.value/200));ie(()=>d.modelValue,u=>{u!==s.value&&(s.value=u)});function g(u){s.value=u,l("update:modelValue",u)}function U(){return y.value>d.maxLength?`Content exceeds maximum length of ${d.maxLength} characters`:null}return t({validate:U,characterCount:y,wordCount:i}),(u,m)=>(h(),C("div",so,[a(no,{modelValue:s.value,"onUpdate:modelValue":[m[0]||(m[0]=k=>s.value=k),g],toolbar:_,"min-height":u.minHeight,placeholder:u.placeholder,"content-class":"rich-text-content","toolbar-color":"grey-2","toolbar-text-color":"grey-8"},null,8,["modelValue","min-height","placeholder"]),e("div",io,[e("div",null,[b(w(y.value)+" characters ",1),i.value>0?(h(),C("span",ro,"• "+w(i.value)+" words",1)):D("",!0),r.value>0?(h(),C("span",uo,"• ~"+w(r.value)+" min read",1)):D("",!0)]),e("div",co,[a(B,{flat:"",dense:"",size:"sm",icon:"help_outline",color:"grey-6",onClick:m[1]||(m[1]=k=>v.value=!0)},{default:c(()=>m[3]||(m[3]=[b(" Formatting Help ",-1)])),_:1,__:[3]})])]),a(ge,{modelValue:v.value,"onUpdate:modelValue":m[2]||(m[2]=k=>v.value=k),"max-width":"600px"},{default:c(()=>[a(W,null,{default:c(()=>[a(M,{class:"row items-center q-pb-none"},{default:c(()=>[m[4]||(m[4]=e("div",{class:"text-h6"},"Formatting Guide",-1)),a(ye),ue(a(B,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])]),_:1,__:[4]}),a(M,null,{default:c(()=>m[5]||(m[5]=[e("div",{class:"formatting-help"},[e("div",{class:"help-section"},[e("h6",null,"Basic Formatting"),e("div",{class:"help-item"},[e("code",null,"**Bold Text**"),b(" → "),e("strong",null,"Bold Text")]),e("div",{class:"help-item"},[e("code",null,"*Italic Text*"),b(" → "),e("em",null,"Italic Text")]),e("div",{class:"help-item"},[e("code",null,"~~Strikethrough~~"),b(" → "),e("del",null,"Strikethrough")])]),e("div",{class:"help-section"},[e("h6",null,"Headers"),e("div",{class:"help-item"},[e("code",null,"# Large Header")]),e("div",{class:"help-item"},[e("code",null,"## Medium Header")]),e("div",{class:"help-item"},[e("code",null,"### Small Header")])]),e("div",{class:"help-section"},[e("h6",null,"Lists"),e("div",{class:"help-item"},[e("code",null,"• Bullet point"),b(" (use bullet button) ")]),e("div",{class:"help-item"},[e("code",null,"1. Numbered list"),b(" (use number button) ")])]),e("div",{class:"help-section"},[e("h6",null,"Links & Images"),e("div",{class:"help-item"}," Use the link button to add clickable links "),e("div",{class:"help-item"}," Add external images using the image section below ")])],-1)])),_:1,__:[5]})]),_:1})]),_:1},8,["modelValue"])]))}}),po=oe(mo,[["__scopeId","data-v-7660196e"]]);class vo{imageExtensions=[".jpg",".jpeg",".png",".gif",".webp",".bmp",".svg"];videoExtensions=[".mp4",".webm",".ogg",".mov",".avi",".wmv"];proxyConfig={enabled:!1,proxyUrl:"",maxWidth:800,maxHeight:600,quality:85};async validateMediaUrl(t){try{if(!t||!this.isValidUrl(t))return{isValid:!1,url:t,type:"unknown",error:"Invalid URL format"};const o=this.normalizeUrl(t),d=this.detectProvider(o),l=this.detectMediaType(o),s=this.processProviderUrl(o,d);return await this.testUrlAccessibility(s)?{isValid:!0,url:s,type:l,...d&&{provider:d}}:{isValid:!1,url:s,type:l,...d&&{provider:d},error:"URL is not publicly accessible"}}catch(o){return le.error("Media validation failed",{url:t,error:o}),{isValid:!1,url:t,type:"unknown",error:"Validation failed"}}}async createAttachmentFromUrl(t,o,d){try{const l=await this.validateMediaUrl(t);if(!l.isValid)throw new Error(l.error||"Invalid media URL");return{id:`external_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:l.type==="image"?"external_image":"external_video",externalUrl:l.url,...l.provider&&{hostingProvider:l.provider},...o&&{caption:o},...d&&{alt:d},isUserHosted:!0}}catch(l){return le.error("Failed to create attachment from URL",{url:t,error:l}),null}}async validateMultipleUrls(t){const o=t.map(d=>this.validateMediaUrl(d));return Promise.all(o)}getUrlSuggestions(t){const o=[];return t.includes("drive.google.com")&&(o.push('Make sure the Google Drive file is set to "Anyone with the link can view"'),o.push("Try using the direct download link format")),t.includes("photos.google.com")&&(o.push("Use the direct image link from Google Photos"),o.push("Ensure the photo album is publicly shared")),(t.includes("facebook.com")||t.includes("instagram.com"))&&(o.push("Social media links may not work reliably for embedding"),o.push("Consider uploading to Google Photos or Google Drive instead")),t.includes("http")||o.push("URL must start with http:// or https://"),o}isValidUrl(t){try{return new URL(t),!0}catch{return!1}}normalizeUrl(t){try{const o=new URL(t);if(o.hostname.includes("drive.google.com")&&t.includes("/file/d/")){const l=t.match(/\/file\/d\/([a-zA-Z0-9-_]+)/)?.[1];if(l)return`https://drive.google.com/uc?export=view&id=${l}`}if(o.hostname.includes("photos.google.com"))return t;const d=new URLSearchParams;return o.searchParams.forEach((l,s)=>{!s.startsWith("utm_")&&!s.startsWith("fb")&&s!=="ref"&&d.set(s,l)}),o.search=d.toString(),o.toString()}catch{return t}}detectProvider(t){const o=new URL(t).hostname.toLowerCase();return o.includes("drive.google.com")?"google_drive":o.includes("photos.google.com")?"google_photos":o.includes("instagram.com")?"instagram":o.includes("facebook.com")?"facebook":"other"}detectMediaType(t){const o=new URL(t).pathname.toLowerCase();return this.imageExtensions.some(d=>o.includes(d))?"image":this.videoExtensions.some(d=>o.includes(d))?"video":"unknown"}processProviderUrl(t,o){switch(o){case"google_drive":return t;case"google_photos":return t;default:return t}}async testUrlAccessibility(t){try{return await fetch(t,{method:"HEAD",mode:"no-cors"}),!0}catch{try{const o=new AbortController;return setTimeout(()=>o.abort(),3e3),await fetch(t,{method:"GET",mode:"no-cors",signal:o.signal}),!0}catch{return le.warn("URL accessibility test failed",{url:t}),!1}}}generateThumbnailUrl(t){}getOptimalImageUrl(t,o,d){if(!t.externalUrl)return t.firebaseUrl||"";if(this.proxyConfig.enabled&&t.type==="external_image"){const l=new URLSearchParams({url:t.externalUrl,w:String(o||this.proxyConfig.maxWidth),h:String(d||this.proxyConfig.maxHeight),q:String(this.proxyConfig.quality)});return`${this.proxyConfig.proxyUrl}?${l.toString()}`}return t.externalUrl}getHostingInstructions(){return{google_photos:["1. Upload your photos to Google Photos","2. Create a shared album or make individual photos public",'3. Right-click the photo and select "Copy image address"',"4. Paste the URL here"],google_drive:["1. Upload your image to Google Drive",'2. Right-click the file and select "Get link"','3. Change permissions to "Anyone with the link can view"',"4. Paste the sharing URL here"],general:["1. Upload your image to any public hosting service","2. Make sure the image is publicly accessible","3. Copy the direct image URL","4. Test the URL in a new browser tab to ensure it works"]}}}const Ce=new vo,go={class:"external-image-upload"},fo={class:"row q-mb-md"},ho={class:"col-12 col-md-8 q-pa-md"},yo={class:"col-12 col-md-4"},bo={key:0,class:"q-mb-md"},_o={class:"text-caption"},wo={class:"q-ma-none q-pl-md"},Co={key:1,class:"q-mb-md"},qo={class:"q-mt-none q-mb-md"},To={class:"row"},ko={class:"image-preview-container"},So={class:"absolute-full flex flex-center"},xo={class:"absolute-full flex flex-center bg-grey"},$o={class:"text-center text-grey-6"},Do={class:"text-caption text-grey-7 q-mb-xs"},Vo={key:2,class:"empty-state text-center q-pa-lg"},Uo={key:3,class:"q-mt-md"},Po={class:"text-caption text-grey-6"},Eo=J({__name:"ExternalImageUpload",props:{modelValue:{},maxAttachments:{default:10}},emits:["update:modelValue"],setup(n,{emit:t}){const o=n,d=t,l=Ne(),s=V([...o.modelValue]),v=V(""),_=V(""),y=V(""),i=V(!1),r=V("idle"),g=V(""),U=V("google_photos");let u=null;const m=L(()=>v.value?Ce.getUrlSuggestions(v.value):[]);ie(()=>o.modelValue,R=>{s.value=[...R]}),ie(s,R=>{d("update:modelValue",R)},{deep:!0});function k(R){const I=String(R||"");if(v.value=I,y.value="",u&&clearTimeout(u),!I.trim()){r.value="idle";return}u=setTimeout(()=>{Q(I)},500)}async function Q(R){if(R.trim()){i.value=!0,r.value="validating",g.value="Checking image URL...";try{const I=await Ce.validateMediaUrl(R);I.isValid?(y.value="",r.value="success",g.value=`✓ Valid ${I.type} from ${I.provider||"external source"}`):(y.value=I.error||"Invalid URL",r.value="error",g.value=I.error||"URL validation failed")}catch{y.value="Failed to validate URL",r.value="error",g.value="Could not validate URL"}finally{i.value=!1}}}async function S(){if(v.value.trim()){if(s.value.length>=o.maxAttachments){l.notify({type:"warning",message:`Maximum ${o.maxAttachments} images allowed`});return}i.value=!0;try{const R=await Ce.createAttachmentFromUrl(v.value,_.value||void 0);if(R)s.value.push(R),v.value="",_.value="",y.value="",r.value="idle",g.value="",l.notify({type:"positive",message:"Image added successfully"});else throw new Error("Failed to create attachment")}catch(R){l.notify({type:"negative",message:R instanceof Error?R.message:"Failed to add image"})}finally{i.value=!1}}}function $(R){s.value.splice(R,1),l.notify({type:"info",message:"Image removed"})}function x(R){return Ce.getOptimalImageUrl(R,300,200)}function G(R){switch(R.hostingProvider){case"google_photos":return"photo_library";case"google_drive":return"cloud";case"instagram":return"camera_alt";case"facebook":return"share";default:return"link"}}function H(R){switch(R.hostingProvider){case"google_photos":return"Google Photos";case"google_drive":return"Google Drive";case"instagram":return"Instagram";case"facebook":return"Facebook";default:return"External"}}function ce(R){console.warn("Failed to load image:",R.externalUrl)}return(R,I)=>(h(),C("div",go,[a(Ke,{icon:"info",label:"Image Hosting Instructions",class:"q-mb-md","header-class":"text-info"},{default:c(()=>[a(W,{flat:"",bordered:""},{default:c(()=>[a(M,null,{default:c(()=>[a(Bt,{modelValue:U.value,"onUpdate:modelValue":I[0]||(I[0]=O=>U.value=O),dense:"",class:"text-grey-6","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:c(()=>[a(Ue,{name:"google_photos",label:"Google Photos"}),a(Ue,{name:"google_drive",label:"Google Drive"}),a(Ue,{name:"general",label:"Other Services"})]),_:1},8,["modelValue"]),a(se,{class:"q-my-md"}),a(Ht,{modelValue:U.value,"onUpdate:modelValue":I[1]||(I[1]=O=>U.value=O),animated:""},{default:c(()=>[a(Pe,{name:"google_photos"},{default:c(()=>I[4]||(I[4]=[e("div",{class:"text-caption"},[e("div",{class:"text-weight-medium q-mb-sm"},"Recommended: Free & Easy"),e("ol",{class:"q-pl-md"},[e("li",null,"Upload your photos to Google Photos"),e("li",null,"Create a shared album or make individual photos public"),e("li",null,'Right-click the photo and select "Copy image address"'),e("li",null,"Paste the URL below")])],-1)])),_:1,__:[4]}),a(Pe,{name:"google_drive"},{default:c(()=>I[5]||(I[5]=[e("div",{class:"text-caption"},[e("ol",{class:"q-pl-md"},[e("li",null,"Upload your image to Google Drive"),e("li",null,'Right-click the file and select "Get link"'),e("li",null,'Change permissions to "Anyone with the link can view"'),e("li",null,"Paste the sharing URL below")])],-1)])),_:1,__:[5]}),a(Pe,{name:"general"},{default:c(()=>I[6]||(I[6]=[e("div",{class:"text-caption"},[e("ol",{class:"q-pl-md"},[e("li",null,"Upload your image to any public hosting service"),e("li",null,"Make sure the image is publicly accessible"),e("li",null,"Copy the direct image URL"),e("li",null,"Test the URL in a new browser tab to ensure it works")])],-1)])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e("div",fo,[e("div",ho,[a(F,{modelValue:v.value,"onUpdate:modelValue":[I[2]||(I[2]=O=>v.value=O),k],label:"Image URL",outlined:"",placeholder:"https://photos.google.com/... or https://drive.google.com/...",loading:i.value,error:!!y.value,"error-message":y.value,onKeyup:wt(S,["enter"])},{prepend:c(()=>[a(T,{name:"link"})]),append:c(()=>[a(B,{round:"",dense:"",flat:"",icon:"add",color:"primary",disable:!v.value||!!y.value||i.value,onClick:S},null,8,["disable"])]),_:1},8,["modelValue","loading","error","error-message"])]),e("div",yo,[a(F,{modelValue:_.value,"onUpdate:modelValue":I[3]||(I[3]=O=>_.value=O),label:"Caption (Optional)",outlined:"",placeholder:"Describe your image..."},null,8,["modelValue"])])]),m.value.length>0?(h(),C("div",bo,[a(de,{class:"bg-orange-1 text-orange-8",dense:""},{avatar:c(()=>[a(T,{name:"lightbulb"})]),default:c(()=>[e("div",_o,[I[7]||(I[7]=e("div",{class:"text-weight-medium q-mb-xs"},"Suggestions:",-1)),e("ul",wo,[(h(!0),C(fe,null,he(m.value,O=>(h(),C("li",{key:O},w(O),1))),128))])])]),_:1})])):D("",!0),s.value.length>0?(h(),C("div",Co,[e("h6",qo,"Added Images ("+w(s.value.length)+"/"+w(R.maxAttachments)+")",1),e("div",To,[(h(!0),C(fe,null,he(s.value,(O,me)=>(h(),C("div",{key:O.id,class:"col-12 col-sm-6 col-md-4 q-pa-md"},[a(W,{flat:"",bordered:"",class:"attachment-card"},{default:c(()=>[e("div",ko,[a(Ye,{src:x(O),alt:O.alt||O.caption||"User image",class:"image-preview",loading:"lazy",onError:ee=>ce(O)},{loading:c(()=>[e("div",So,[a(We,{color:"primary",size:"2em"})])]),error:c(()=>[e("div",xo,[e("div",$o,[a(T,{name:"broken_image",size:"2em",class:"q-mb-sm"}),I[8]||(I[8]=e("div",{class:"text-caption"},"Failed to load",-1))])])]),_:2},1032,["src","alt","onError"]),a(B,{round:"",dense:"",flat:"",icon:"close",color:"negative",class:"absolute-top-right q-ma-sm",onClick:ee=>$(me)},null,8,["onClick"])]),a(M,{class:"q-pa-sm"},{default:c(()=>[e("div",Do,[a(T,{name:G(O),size:"xs",class:"q-mr-xs"},null,8,["name"]),b(" "+w(H(O)),1)]),a(F,{modelValue:O.caption,"onUpdate:modelValue":ee=>O.caption=ee,label:"Caption",dense:"",outlined:"",class:"q-mb-xs"},null,8,["modelValue","onUpdate:modelValue"]),a(F,{modelValue:O.alt,"onUpdate:modelValue":ee=>O.alt=ee,label:"Alt text (for accessibility)",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128))])])):D("",!0),s.value.length===0?(h(),C("div",Vo,[a(T,{name:"photo_library",size:"3em",color:"grey-5",class:"q-mb-md"}),I[9]||(I[9]=e("div",{class:"text-h6 text-grey-6 q-mb-sm"},"No images added yet",-1)),I[10]||(I[10]=e("div",{class:"text-caption text-grey-5"}," Add external image URLs to include photos in your content ",-1))])):D("",!0),r.value?(h(),C("div",Uo,[r.value==="validating"?(h(),K(Ft,{key:0,indeterminate:"",color:"primary",class:"q-mb-sm"})):D("",!0),e("div",Po,w(g.value),1)])):D("",!0)]))}}),Io=oe(Eo,[["__scopeId","data-v-3fb263d9"]]),Ao={class:"metadata-preview"},Lo={key:0,class:"metadata-section"},Ro={key:0,class:"metadata-item"},No={key:1,class:"metadata-item"},zo={key:2,class:"metadata-item"},Oo={key:1,class:"metadata-section"},Mo={class:"metadata-item"},Fo={key:0,class:"metadata-item"},Bo={key:1,class:"metadata-item"},Ho={class:"metadata-item"},Qo={key:2,class:"metadata-item"},Go={key:2,class:"metadata-section"},jo={class:"metadata-item"},Wo={key:0,class:"metadata-item"},Ko={key:1,class:"metadata-item"},Yo={key:2,class:"metadata-item"},Jo={key:3,class:"metadata-section"},Zo={key:0,class:"metadata-item"},Xo={class:"metadata-item"},ea={class:"metadata-item"},ta={key:1,class:"metadata-item"},oa={key:4,class:"metadata-section"},aa={key:0,class:"metadata-item"},la={key:1,class:"metadata-item"},na={key:2,class:"metadata-item"},sa={key:3,class:"metadata-item"},ia={key:5,class:"metadata-section"},ra={class:"metadata-item"},da={key:0,class:"metadata-item"},ua={key:1,class:"metadata-item"},ca={class:"metadata-item"},ma=J({__name:"MetadataPreview",props:{metadata:{},contentType:{}},setup(n){function t(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function o(i){return{planning:"blue",in_progress:"orange",completed:"green"}[i]||"grey"}function d(i){return{planning:"Planning",in_progress:"In Progress",completed:"Completed"}[i]||i}function l(i){return{for_sale:"For Sale",wanted:"Wanted",services:"Services",housing:"Housing"}[i]||i}function s(i){return{email:"Email",phone:"Phone",both:"Email & Phone"}[i]||i}function v(i){return{new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"}[i]||i}function _(i){return{low:"green",medium:"orange",high:"red",urgent:"red-10"}[i]||"grey"}function y(i){return{low:"Low",medium:"Medium",high:"High",urgent:"Urgent"}[i]||i}return(i,r)=>(h(),C("div",Ao,[i.contentType==="article"?(h(),C("div",Lo,[i.metadata.subtitle?(h(),C("div",Ro,[a(T,{name:"subtitles",size:"sm",class:"q-mr-sm"}),r[0]||(r[0]=e("span",{class:"text-weight-medium"},"Subtitle:",-1)),b(" "+w(i.metadata.subtitle),1)])):D("",!0),i.metadata.readTime?(h(),C("div",No,[a(T,{name:"schedule",size:"sm",class:"q-mr-sm"}),r[1]||(r[1]=e("span",{class:"text-weight-medium"},"Estimated read time:",-1)),b(" "+w(i.metadata.readTime)+" minutes ",1)])):D("",!0),i.metadata.tags&&i.metadata.tags.length>0?(h(),C("div",zo,[a(T,{name:"label",size:"sm",class:"q-mr-sm"}),r[2]||(r[2]=e("span",{class:"text-weight-medium"},"Tags:",-1)),(h(!0),C(fe,null,he(i.metadata.tags,g=>(h(),K(ve,{key:g,size:"sm",color:"primary","text-color":"white",class:"q-ml-xs"},{default:c(()=>[b(w(g),1)]),_:2},1024))),128))])):D("",!0)])):D("",!0),i.contentType==="event"?(h(),C("div",Oo,[e("div",Mo,[a(T,{name:"event",size:"sm",class:"q-mr-sm"}),r[3]||(r[3]=e("span",{class:"text-weight-medium"},"Start Date:",-1)),b(" "+w(t(i.metadata.startDate)),1)]),i.metadata.endDate?(h(),C("div",Fo,[a(T,{name:"event_available",size:"sm",class:"q-mr-sm"}),r[4]||(r[4]=e("span",{class:"text-weight-medium"},"End Date:",-1)),b(" "+w(t(i.metadata.endDate)),1)])):D("",!0),i.metadata.location?(h(),C("div",Bo,[a(T,{name:"place",size:"sm",class:"q-mr-sm"}),r[5]||(r[5]=e("span",{class:"text-weight-medium"},"Location:",-1)),b(" "+w(i.metadata.location),1)])):D("",!0),e("div",Ho,[a(T,{name:"how_to_reg",size:"sm",class:"q-mr-sm"}),r[6]||(r[6]=e("span",{class:"text-weight-medium"},"Registration:",-1)),b(" "+w(i.metadata.registrationRequired?"Required":"Not required"),1)]),i.metadata.contactInfo?(h(),C("div",Qo,[a(T,{name:"contact_mail",size:"sm",class:"q-mr-sm"}),r[7]||(r[7]=e("span",{class:"text-weight-medium"},"Contact:",-1)),b(" "+w(i.metadata.contactInfo),1)])):D("",!0)])):D("",!0),i.contentType==="project"?(h(),C("div",Go,[e("div",jo,[a(T,{name:"flag",size:"sm",class:"q-mr-sm"}),r[8]||(r[8]=e("span",{class:"text-weight-medium"},"Status:",-1)),a(ve,{color:o(i.metadata.projectStatus),"text-color":"white",size:"sm",class:"q-ml-sm"},{default:c(()=>[b(w(d(i.metadata.projectStatus)),1)]),_:1},8,["color"])]),i.metadata.progressPercentage!==void 0?(h(),C("div",Wo,[a(T,{name:"trending_up",size:"sm",class:"q-mr-sm"}),r[9]||(r[9]=e("span",{class:"text-weight-medium"},"Progress:",-1)),b(" "+w(i.metadata.progressPercentage)+"% ",1)])):D("",!0),i.metadata.budget?(h(),C("div",Ko,[a(T,{name:"attach_money",size:"sm",class:"q-mr-sm"}),r[10]||(r[10]=e("span",{class:"text-weight-medium"},"Budget:",-1)),b(" $"+w(i.metadata.budget.toLocaleString()),1)])):D("",!0),i.metadata.completionDate?(h(),C("div",Yo,[a(T,{name:"event_available",size:"sm",class:"q-mr-sm"}),r[11]||(r[11]=e("span",{class:"text-weight-medium"},"Target Completion:",-1)),b(" "+w(t(i.metadata.completionDate)),1)])):D("",!0)])):D("",!0),i.contentType==="classified"?(h(),C("div",Jo,[i.metadata.price?(h(),C("div",Zo,[a(T,{name:"attach_money",size:"sm",class:"q-mr-sm"}),r[12]||(r[12]=e("span",{class:"text-weight-medium"},"Price:",-1)),b(" $"+w(i.metadata.price),1)])):D("",!0),e("div",Xo,[a(T,{name:"category",size:"sm",class:"q-mr-sm"}),r[13]||(r[13]=e("span",{class:"text-weight-medium"},"Category:",-1)),b(" "+w(l(i.metadata.category)),1)]),e("div",ea,[a(T,{name:"contact_mail",size:"sm",class:"q-mr-sm"}),r[14]||(r[14]=e("span",{class:"text-weight-medium"},"Contact:",-1)),b(" "+w(s(i.metadata.contactMethod)),1)]),i.metadata.condition?(h(),C("div",ta,[a(T,{name:"assessment",size:"sm",class:"q-mr-sm"}),r[15]||(r[15]=e("span",{class:"text-weight-medium"},"Condition:",-1)),b(" "+w(v(i.metadata.condition)),1)])):D("",!0)])):D("",!0),i.contentType==="photo_story"?(h(),C("div",oa,[i.metadata.photographerName?(h(),C("div",aa,[a(T,{name:"camera_alt",size:"sm",class:"q-mr-sm"}),r[16]||(r[16]=e("span",{class:"text-weight-medium"},"Photographer:",-1)),b(" "+w(i.metadata.photographerName),1)])):D("",!0),i.metadata.photographyDate?(h(),C("div",la,[a(T,{name:"event",size:"sm",class:"q-mr-sm"}),r[17]||(r[17]=e("span",{class:"text-weight-medium"},"Photo Date:",-1)),b(" "+w(t(i.metadata.photographyDate)),1)])):D("",!0),i.metadata.location?(h(),C("div",na,[a(T,{name:"place",size:"sm",class:"q-mr-sm"}),r[18]||(r[18]=e("span",{class:"text-weight-medium"},"Location:",-1)),b(" "+w(i.metadata.location),1)])):D("",!0),i.metadata.cameraInfo?(h(),C("div",sa,[a(T,{name:"camera",size:"sm",class:"q-mr-sm"}),r[19]||(r[19]=e("span",{class:"text-weight-medium"},"Camera:",-1)),b(" "+w(i.metadata.cameraInfo),1)])):D("",!0)])):D("",!0),i.contentType==="announcement"?(h(),C("div",ia,[e("div",ra,[a(T,{name:"priority_high",size:"sm",class:"q-mr-sm"}),r[20]||(r[20]=e("span",{class:"text-weight-medium"},"Urgency:",-1)),a(ve,{color:_(i.metadata.urgency),"text-color":"white",size:"sm",class:"q-ml-sm"},{default:c(()=>[b(w(y(i.metadata.urgency)),1)]),_:1},8,["color"])]),i.metadata.expirationDate?(h(),C("div",da,[a(T,{name:"schedule",size:"sm",class:"q-mr-sm"}),r[21]||(r[21]=e("span",{class:"text-weight-medium"},"Expires:",-1)),b(" "+w(t(i.metadata.expirationDate)),1)])):D("",!0),i.metadata.affectedAreas&&i.metadata.affectedAreas.length>0?(h(),C("div",ua,[a(T,{name:"place",size:"sm",class:"q-mr-sm"}),r[22]||(r[22]=e("span",{class:"text-weight-medium"},"Affected Areas:",-1)),b(" "+w(i.metadata.affectedAreas.join(", ")),1)])):D("",!0),e("div",ca,[a(T,{name:"assignment",size:"sm",class:"q-mr-sm"}),r[23]||(r[23]=e("span",{class:"text-weight-medium"},"Action Required:",-1)),b(" "+w(i.metadata.actionRequired?"Yes":"No"),1)])])):D("",!0)]))}}),pa=oe(ma,[["__scopeId","data-v-2819d5c4"]]),va={class:"preview-container"},ga={class:"content-header q-mb-lg"},fa={class:"content-type-badge q-mb-sm"},ha={class:"content-title q-mt-sm q-mb-sm"},ya={class:"content-meta text-grey-6"},ba={class:"row items-center"},_a={class:"flex items-center"},wa={class:"flex items-center"},Ca={class:"flex items-center"},qa={key:0,class:"flex items-center"},Ta={class:"content-body q-mb-lg"},ka=["innerHTML"],Sa={key:0,class:"content-metadata q-mb-lg"},xa={key:1,class:"content-attachments"},$a={class:"row"},Da={class:"absolute-full flex flex-center"},Va={class:"absolute-full flex flex-center bg-grey"},Ua={class:"text-center text-grey-6"},Pa={class:"text-caption"},Ea=J({__name:"ContentPreview",props:{modelValue:{type:Boolean},content:{}},emits:["update:modelValue"],setup(n,{emit:t}){const{getContentIcon:o}=Je(),d=u=>o(u),l=n,s=t,v=L({get:()=>l.modelValue,set:u=>s("update:modelValue",u)}),_=L(()=>Object.keys(l.content.metadata||{}).length>0);function y(u){return d(u).icon}function i(u){return d(u).label}function r(u){return d(u).color}function g(u){return{low:"grey",medium:"orange",high:"red"}[u]||"grey"}function U(u){return new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}return(u,m)=>(h(),K(ge,{modelValue:v.value,"onUpdate:modelValue":m[0]||(m[0]=k=>v.value=k),maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:c(()=>[a(W,{class:"preview-card"},{default:c(()=>[a(M,{class:"row items-center q-pb-none"},{default:c(()=>[m[1]||(m[1]=e("div",{class:"text-h6"},"Content Preview",-1)),a(ye),ue(a(B,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])]),_:1,__:[1]}),a(M,{class:"q-pt-none",style:{height:"calc(100vh - 100px)","overflow-y":"auto"}},{default:c(()=>[e("div",va,[e("div",ga,[e("div",fa,[a(ve,{icon:y(u.content.type),color:r(u.content.type),"text-color":"white",size:"sm"},{default:c(()=>[b(w(i(u.content.type)),1)]),_:1},8,["icon","color"]),a(ve,{color:g(u.content.priority),"text-color":"white",size:"sm",class:"q-ml-sm"},{default:c(()=>[b(w(u.content.priority.charAt(0).toUpperCase()+u.content.priority.slice(1))+" Priority ",1)]),_:1},8,["color"])]),e("h2",ha,w(u.content.title),1),e("div",ya,[e("div",ba,[e("div",_a,[a(T,{name:"person",size:"sm",class:"q-mr-xs"}),b(" "+w(u.content.author.displayName),1)]),e("div",wa,[a(T,{name:"schedule",size:"sm",class:"q-mr-xs"}),b(" "+w(U(u.content.createdAt)),1)]),e("div",Ca,[a(T,{name:"label",size:"sm",class:"q-mr-xs"}),b(" "+w(u.content.category),1)]),u.content.targetIssue?(h(),C("div",qa,[a(T,{name:"book",size:"sm",class:"q-mr-xs"}),b(" "+w(u.content.targetIssue),1)])):D("",!0)])])]),e("div",Ta,[e("div",{class:"content-html",innerHTML:u.content.content},null,8,ka)]),_.value?(h(),C("div",Sa,[a(se,{class:"q-mb-md"}),m[2]||(m[2]=e("h6",{class:"q-mt-none q-mb-md"},"Additional Information",-1)),a(pa,{metadata:u.content.metadata,"content-type":u.content.type},null,8,["metadata","content-type"])])):D("",!0),u.content.attachments.length>0?(h(),C("div",xa,[a(se,{class:"q-mb-md"}),m[4]||(m[4]=e("h6",{class:"q-mt-none q-mb-md"},"Images & Media",-1)),e("div",$a,[(h(!0),C(fe,null,he(u.content.attachments,k=>(h(),C("div",{key:k.id,class:"col-12 col-sm-6 col-md-4"},[a(W,{flat:"",bordered:""},{default:c(()=>[a(Ye,{src:k.externalUrl||k.firebaseUrl||"",alt:k.alt||k.caption||"Content image",class:"attachment-image",loading:"lazy"},{loading:c(()=>[e("div",Da,[a(We,{color:"primary",size:"2em"})])]),error:c(()=>[e("div",Va,[e("div",Ua,[a(T,{name:"broken_image",size:"2em",class:"q-mb-sm"}),m[3]||(m[3]=e("div",{class:"text-caption"},"Failed to load",-1))])])]),_:2},1032,["src","alt"]),k.caption?(h(),K(M,{key:0,class:"q-pa-sm"},{default:c(()=>[e("div",Pa,w(k.caption),1)]),_:2},1024)):D("",!0)]),_:2},1024)]))),128))])])):D("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ia=oe(Ea,[["__scopeId","data-v-6264f4c2"]]),Aa={class:"article-metadata-fields"},La={class:"row"},Ra={class:"col-12 col-md-6 q-pa-md"},Na={class:"col-12 col-md-6 q-pa-md"},za={class:"row q-mt-md"},Oa={class:"col-12 q-pa-md"},Ma=J({__name:"ArticleMetadataFields",props:{modelValue:{},contentType:{}},emits:["update:modelValue"],setup(n,{emit:t}){const o=n,d=t,l=V({subtitle:"",readTime:5,tags:[]}),s=V(["Community","Lake Life","Events","Recreation","Environment","Safety","History","Maintenance","Wildlife","Seasonal"]);X(()=>{o.modelValue&&(l.value={subtitle:o.modelValue.subtitle||"",readTime:o.modelValue.readTime||5,tags:o.modelValue.tags||[]})}),ie(()=>o.modelValue,_=>{_&&(l.value={subtitle:_.subtitle||"",readTime:_.readTime||5,tags:_.tags||[]})},{deep:!0});function v(){d("update:modelValue",{...l.value})}return(_,y)=>(h(),C("div",Aa,[e("div",La,[e("div",Ra,[a(F,{modelValue:l.value.subtitle,"onUpdate:modelValue":[y[0]||(y[0]=i=>l.value.subtitle=i),v],label:"Subtitle (Optional)",outlined:"",placeholder:"A brief subtitle for your article"},null,8,["modelValue"])]),e("div",Na,[a(F,{modelValue:l.value.readTime,"onUpdate:modelValue":[y[1]||(y[1]=i=>l.value.readTime=i),v],modelModifiers:{number:!0},label:"Estimated Read Time (minutes)",outlined:"",type:"number",min:"1",max:"60",placeholder:"5"},null,8,["modelValue"])])]),e("div",za,[e("div",Oa,[a(Z,{modelValue:l.value.tags,"onUpdate:modelValue":[y[2]||(y[2]=i=>l.value.tags=i),v],label:"Tags (Optional)",outlined:"",multiple:"","use-chips":"","use-input":"","input-debounce":"300","new-value-mode":"add-unique",options:s.value},{hint:c(()=>y[3]||(y[3]=[b(" Add relevant tags to help readers find your article ",-1)])),_:1},8,["modelValue","options"])])])]))}}),Fa=oe(Ma,[["__scopeId","data-v-86932f13"]]),Ba={class:"event-metadata-fields"},Ha={class:"text-h6 q-mb-md"},Qa={class:"row q-gutter-md"},Ga={class:"col-12"},ja={class:"text-h6 q-mb-md"},Wa={class:"row q-gutter-md"},Ka={class:"col-12 col-md-6"},Ya={class:"col-12 col-md-6"},Ja={class:"col-12"},Za={key:0,class:"col-12 col-md-6"},Xa={key:0,class:"text-caption text-grey-6 q-mt-xs"},el={key:1,class:"col-12 col-md-6"},tl={key:0,class:"text-caption text-grey-6 q-mt-xs"},ol={class:"text-h6 q-mb-md"},al={class:"row q-gutter-md"},ll={class:"col-12"},nl={class:"text-h6 q-mb-md"},sl={class:"row q-gutter-md"},il={class:"col-12 col-md-6"},rl={class:"col-12"},dl={key:0,class:"col-12 col-md-6"},ul=J({__name:"EventMetadataFields",props:{modelValue:{},contentType:{}},emits:["update:modelValue"],setup(n,{emit:t}){const o=n,d=t,l=V({startDate:Date.now(),location:"",registrationRequired:!1,contactInfo:"",onCalendar:!1,allDay:!1}),s=V(""),v=V("");X(()=>{if(o.modelValue)l.value={startDate:o.modelValue.startDate||Date.now(),location:o.modelValue.location||"",registrationRequired:o.modelValue.registrationRequired||!1,onCalendar:o.modelValue.onCalendar||!1,allDay:o.modelValue.allDay||!1,...o.modelValue.endDate&&{endDate:o.modelValue.endDate},...o.modelValue.contactInfo&&{contactInfo:o.modelValue.contactInfo},...o.modelValue.maxAttendees!==void 0&&{maxAttendees:o.modelValue.maxAttendees},...o.modelValue.currentAttendees!==void 0&&{currentAttendees:o.modelValue.currentAttendees},...o.modelValue.eventRecurrence&&{eventRecurrence:o.modelValue.eventRecurrence}},o.modelValue.eventTime!==void 0&&o.modelValue.eventTime!==""&&(l.value.eventTime=o.modelValue.eventTime),o.modelValue.eventEndTime!==void 0&&o.modelValue.eventEndTime!==""&&(l.value.eventEndTime=o.modelValue.eventEndTime),s.value=_(l.value.startDate),l.value.endDate&&(v.value=_(l.value.endDate));else{const u=new Date,m=u.toISOString().split("T")[0];s.value=m||"",l.value.startDate=u.getTime()}}),ie(()=>o.modelValue,u=>{if(u){const m=l.value.onCalendar,k=l.value.allDay,Q=l.value.eventTime,S=l.value.eventEndTime;l.value={startDate:u.startDate||Date.now(),location:u.location||"",registrationRequired:u.registrationRequired||!1,onCalendar:u.onCalendar!==void 0?u.onCalendar:m||!1,allDay:u.allDay!==void 0?u.allDay:k||!1,...u.endDate&&{endDate:u.endDate},...u.contactInfo&&{contactInfo:u.contactInfo},...u.maxAttendees!==void 0&&{maxAttendees:u.maxAttendees},...u.currentAttendees!==void 0&&{currentAttendees:u.currentAttendees}},u.eventTime!==void 0?l.value.eventTime=u.eventTime:Q!==void 0&&(l.value.eventTime=Q),u.eventEndTime!==void 0?l.value.eventEndTime=u.eventEndTime:S!==void 0&&(l.value.eventEndTime=S),console.log("👀 Watch triggered, preserved onCalendar:",l.value.onCalendar),s.value=_(l.value.startDate),l.value.endDate&&(v.value=_(l.value.endDate))}},{deep:!0});function _(u){return new Date(u).toISOString().split("T")[0]||""}function y(u){return new Date(u).getTime()}function i(u){const m=String(u||"");m&&(l.value.startDate=y(m),g())}function r(u){const m=String(u||"");m?l.value.endDate=y(m):delete l.value.endDate,g()}function g(){console.log("📊 updateMetadata called, localMetadata.onCalendar:",l.value.onCalendar),console.log("📊 Full localMetadata:",{...l.value}),d("update:modelValue",{...l.value})}function U(u){console.log("🔄 Calendar toggle changed:",u),l.value.onCalendar=u,g()}return(u,m)=>(h(),C("div",Ba,[a(W,{flat:"",bordered:"",class:"q-mb-md"},{default:c(()=>[a(M,null,{default:c(()=>[e("div",Ha,[a(T,{name:"mdi-calendar-plus",class:"q-mr-sm"}),m[10]||(m[10]=b(" Calendar Settings ",-1))]),e("div",Qa,[e("div",Ga,[a(qe,{modelValue:l.value.onCalendar,"onUpdate:modelValue":[m[0]||(m[0]=k=>l.value.onCalendar=k),U],label:"Show this event on the community calendar",color:"primary"},null,8,["modelValue"]),m[11]||(m[11]=e("div",{class:"text-caption text-grey-6 q-mt-xs"}," When enabled, this event will appear on the community calendar page ",-1))])])]),_:1})]),_:1}),a(W,{flat:"",bordered:"",class:"q-mb-md"},{default:c(()=>[a(M,null,{default:c(()=>[e("div",ja,[a(T,{name:"mdi-clock-outline",class:"q-mr-sm"}),m[12]||(m[12]=b(" Date & Time ",-1))]),e("div",Wa,[e("div",Ka,[a(F,{modelValue:s.value,"onUpdate:modelValue":[m[1]||(m[1]=k=>s.value=k),i],label:"Event Date",type:"date",outlined:"",rules:[k=>!!k||"Event date is required"]},{prepend:c(()=>[a(T,{name:"mdi-calendar"})]),_:1},8,["modelValue","rules"])]),e("div",Ya,[a(F,{modelValue:v.value,"onUpdate:modelValue":[m[2]||(m[2]=k=>v.value=k),r],label:"End Date (Optional)",type:"date",outlined:"",min:s.value},{prepend:c(()=>[a(T,{name:"mdi-calendar-end"})]),hint:c(()=>m[13]||(m[13]=[b(" Leave blank for single-day events ",-1)])),_:1},8,["modelValue","min"])]),e("div",Ja,[a(qe,{modelValue:l.value.allDay,"onUpdate:modelValue":[m[3]||(m[3]=k=>l.value.allDay=k),g],label:"All-day event",color:"primary"},null,8,["modelValue"])]),l.value.allDay?D("",!0):(h(),C("div",Za,[a(F,{modelValue:l.value.eventTime,"onUpdate:modelValue":[m[4]||(m[4]=k=>l.value.eventTime=k),g],label:"Start Time",type:"time",outlined:"",clearable:""},{prepend:c(()=>[a(T,{name:"mdi-clock-start"})]),_:1},8,["modelValue"]),l.value.eventTime?D("",!0):(h(),C("div",Xa," Click to set start time "))])),l.value.allDay?D("",!0):(h(),C("div",el,[a(F,{modelValue:l.value.eventEndTime,"onUpdate:modelValue":[m[5]||(m[5]=k=>l.value.eventEndTime=k),g],label:"End Time (Optional)",type:"time",outlined:"",clearable:""},{prepend:c(()=>[a(T,{name:"mdi-clock-end"})]),_:1},8,["modelValue"]),l.value.eventEndTime?D("",!0):(h(),C("div",tl," Click to set end time (optional) "))]))])]),_:1})]),_:1}),a(W,{flat:"",bordered:"",class:"q-mb-md"},{default:c(()=>[a(M,null,{default:c(()=>[e("div",ol,[a(T,{name:"mdi-map-marker",class:"q-mr-sm"}),m[14]||(m[14]=b(" Location ",-1))]),e("div",al,[e("div",ll,[a(F,{modelValue:l.value.location,"onUpdate:modelValue":[m[6]||(m[6]=k=>l.value.location=k),g],label:"Event Location",outlined:"",placeholder:"e.g., Community Center, Lake House, 123 Main Street",rules:[k=>!!k||"Location is required"]},{prepend:c(()=>[a(T,{name:"mdi-map-marker-outline"})]),hint:c(()=>m[15]||(m[15]=[b(" Provide a specific location to help attendees find the event ",-1)])),_:1},8,["modelValue","rules"])])])]),_:1})]),_:1}),a(W,{flat:"",bordered:""},{default:c(()=>[a(M,null,{default:c(()=>[e("div",nl,[a(T,{name:"mdi-information",class:"q-mr-sm"}),m[16]||(m[16]=b(" Event Details ",-1))]),e("div",sl,[e("div",il,[a(qe,{modelValue:l.value.registrationRequired,"onUpdate:modelValue":[m[7]||(m[7]=k=>l.value.registrationRequired=k),g],label:"Registration Required",color:"primary"},null,8,["modelValue"])]),e("div",rl,[a(F,{modelValue:l.value.contactInfo,"onUpdate:modelValue":[m[8]||(m[8]=k=>l.value.contactInfo=k),g],label:"Contact Information",outlined:"",placeholder:"Email, phone, or contact person for questions"},{prepend:c(()=>[a(T,{name:"mdi-account-circle"})]),_:1},8,["modelValue"])]),l.value.registrationRequired?(h(),C("div",dl,[a(F,{modelValue:l.value.maxAttendees,"onUpdate:modelValue":[m[9]||(m[9]=k=>l.value.maxAttendees=k),g],modelModifiers:{number:!0},label:"Maximum Attendees",type:"number",outlined:"",min:"1",placeholder:"No limit"},{prepend:c(()=>[a(T,{name:"mdi-account-group"})]),_:1},8,["modelValue"])])):D("",!0)])]),_:1})]),_:1})]))}}),cl=oe(ul,[["__scopeId","data-v-36898c7d"]]),ml={class:"project-metadata-fields"},pl={class:"row"},vl={class:"col-12 col-md-6 q-pa-md"},gl={class:"col-12 col-md-6 q-pa-md"},fl={class:"row q-mt-md"},hl={class:"col-12 col-md-6 q-pa-md"},yl={class:"col-12 col-md-6"},bl=J({__name:"ProjectMetadataFields",props:{modelValue:{},contentType:{}},emits:["update:modelValue"],setup(n,{emit:t}){const o=n,d=t,l=V({projectStatus:"planning",progressPercentage:0}),s=V(""),v=[{value:"planning",label:"Planning"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"}];X(()=>{if(o.modelValue&&(l.value={projectStatus:o.modelValue.projectStatus||"planning",...o.modelValue.progressPercentage!==void 0&&{progressPercentage:o.modelValue.progressPercentage},...o.modelValue.budget!==void 0&&{budget:o.modelValue.budget},...o.modelValue.completionDate&&{completionDate:o.modelValue.completionDate},...o.modelValue.startDate&&{startDate:o.modelValue.startDate},...o.modelValue.involvedResidents&&{involvedResidents:o.modelValue.involvedResidents}},l.value.completionDate)){const i=new Date(l.value.completionDate).toISOString().split("T")[0];s.value=i||""}});function _(i){const r=String(i||"");r?l.value.completionDate=new Date(r).getTime():delete l.value.completionDate,y()}function y(){d("update:modelValue",{...l.value})}return(i,r)=>(h(),C("div",ml,[e("div",pl,[e("div",vl,[a(Z,{modelValue:l.value.projectStatus,"onUpdate:modelValue":[r[0]||(r[0]=g=>l.value.projectStatus=g),y],options:v,"option-value":"value","option-label":"label",label:"Project Status",outlined:"","emit-value":"","map-options":""},null,8,["modelValue"])]),e("div",gl,[a(F,{modelValue:l.value.progressPercentage,"onUpdate:modelValue":[r[1]||(r[1]=g=>l.value.progressPercentage=g),y],modelModifiers:{number:!0},label:"Progress Percentage",outlined:"",type:"number",min:"0",max:"100",suffix:"%"},null,8,["modelValue"])])]),e("div",fl,[e("div",hl,[a(F,{modelValue:l.value.budget,"onUpdate:modelValue":[r[2]||(r[2]=g=>l.value.budget=g),y],modelModifiers:{number:!0},label:"Budget (Optional)",outlined:"",type:"number",min:"0",prefix:"$",placeholder:"0"},null,8,["modelValue"])]),e("div",yl,[a(F,{modelValue:s.value,"onUpdate:modelValue":[r[3]||(r[3]=g=>s.value=g),_],label:"Target Completion Date (Optional)",outlined:"",type:"date"},null,8,["modelValue"])])])]))}}),_l={class:"classified-metadata-fields"},wl={class:"row"},Cl={class:"col-12 col-md-4 q-pa-md"},ql={class:"col-12 col-md-4 q-pa-md"},Tl={class:"col-12 col-md-4 q-pa-md"},kl={key:0,class:"row q-mt-md"},Sl={class:"col-12 col-md-6 q-pa-md"},xl={class:"col-12 col-md-6"},$l=J({__name:"ClassifiedMetadataFields",props:{modelValue:{},contentType:{}},emits:["update:modelValue"],setup(n,{emit:t}){const o=n,d=t,l=V({category:"for_sale",contactMethod:"email"}),s=V(""),v=[{value:"for_sale",label:"For Sale"},{value:"wanted",label:"Wanted"},{value:"services",label:"Services"},{value:"housing",label:"Housing"}],_=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"both",label:"Email & Phone"}],y=[{value:"new",label:"New"},{value:"like_new",label:"Like New"},{value:"good",label:"Good"},{value:"fair",label:"Fair"},{value:"poor",label:"Poor"}],i=L(()=>l.value.category==="for_sale");X(()=>{if(o.modelValue&&(l.value={category:o.modelValue.category||"for_sale",contactMethod:o.modelValue.contactMethod||"email",...o.modelValue.price!==void 0&&{price:o.modelValue.price},...o.modelValue.condition&&{condition:o.modelValue.condition},...o.modelValue.location&&{location:o.modelValue.location},...o.modelValue.expirationDate&&{expirationDate:o.modelValue.expirationDate}},l.value.expirationDate)){const U=new Date(l.value.expirationDate).toISOString().split("T")[0];s.value=U||""}});function r(U){const u=String(U||"");u?l.value.expirationDate=new Date(u).getTime():delete l.value.expirationDate,g()}function g(){d("update:modelValue",{...l.value})}return(U,u)=>(h(),C("div",_l,[e("div",wl,[e("div",Cl,[a(F,{modelValue:l.value.price,"onUpdate:modelValue":[u[0]||(u[0]=m=>l.value.price=m),g],modelModifiers:{number:!0},label:"Price (Optional)",outlined:"",type:"number",min:"0",prefix:"$",placeholder:"0"},null,8,["modelValue"])]),e("div",ql,[a(Z,{modelValue:l.value.category,"onUpdate:modelValue":[u[1]||(u[1]=m=>l.value.category=m),g],options:v,"option-value":"value","option-label":"label",label:"Category",outlined:"","emit-value":"","map-options":""},null,8,["modelValue"])]),e("div",Tl,[a(Z,{modelValue:l.value.contactMethod,"onUpdate:modelValue":[u[2]||(u[2]=m=>l.value.contactMethod=m),g],options:_,"option-value":"value","option-label":"label",label:"Contact Method",outlined:"","emit-value":"","map-options":""},null,8,["modelValue"])])]),i.value?(h(),C("div",kl,[e("div",Sl,[a(Z,{modelValue:l.value.condition,"onUpdate:modelValue":[u[3]||(u[3]=m=>l.value.condition=m),g],options:y,"option-value":"value","option-label":"label",label:"Condition (Optional)",outlined:"","emit-value":"","map-options":""},null,8,["modelValue"])]),e("div",xl,[a(F,{modelValue:s.value,"onUpdate:modelValue":[u[4]||(u[4]=m=>s.value=m),r],label:"Expiration Date (Optional)",outlined:"",type:"date"},null,8,["modelValue"])])])):D("",!0)]))}}),Dl={class:"photo-story-metadata-fields"},Vl={class:"row"},Ul={class:"col-12 col-md-6 q-pa-md"},Pl={class:"col-12 col-md-6 q-pa-md"},El={class:"row q-mt-md"},Il={class:"col-12 col-md-6 q-pa-md"},Al={class:"col-12 col-md-6"},Ll=J({__name:"PhotoStoryMetadataFields",props:{modelValue:{},contentType:{}},emits:["update:modelValue"],setup(n,{emit:t}){const o=n,d=t,l=V({photographerName:"",location:""}),s=V("");X(()=>{if(o.modelValue&&(l.value={...o.modelValue.photographerName&&{photographerName:o.modelValue.photographerName},...o.modelValue.photographyDate&&{photographyDate:o.modelValue.photographyDate},...o.modelValue.location&&{location:o.modelValue.location},...o.modelValue.cameraInfo&&{cameraInfo:o.modelValue.cameraInfo},...o.modelValue.story&&{story:o.modelValue.story}},l.value.photographyDate)){const y=new Date(l.value.photographyDate).toISOString().split("T")[0];s.value=y||""}});function v(y){const i=String(y||"");i?l.value.photographyDate=new Date(i).getTime():delete l.value.photographyDate,_()}function _(){d("update:modelValue",{...l.value})}return(y,i)=>(h(),C("div",Dl,[e("div",Vl,[e("div",Ul,[a(F,{modelValue:l.value.photographerName,"onUpdate:modelValue":[i[0]||(i[0]=r=>l.value.photographerName=r),_],label:"Photographer Name (Optional)",outlined:"",placeholder:"Who took these photos?"},null,8,["modelValue"])]),e("div",Pl,[a(F,{modelValue:s.value,"onUpdate:modelValue":[i[1]||(i[1]=r=>s.value=r),v],label:"Photography Date (Optional)",outlined:"",type:"date"},null,8,["modelValue"])])]),e("div",El,[e("div",Il,[a(F,{modelValue:l.value.location,"onUpdate:modelValue":[i[2]||(i[2]=r=>l.value.location=r),_],label:"Location (Optional)",outlined:"",placeholder:"Where were these photos taken?"},null,8,["modelValue"])]),e("div",Al,[a(F,{modelValue:l.value.cameraInfo,"onUpdate:modelValue":[i[3]||(i[3]=r=>l.value.cameraInfo=r),_],label:"Camera Information (Optional)",outlined:"",placeholder:"Camera model, settings, etc."},null,8,["modelValue"])])])]))}}),Rl={class:"announcement-metadata-fields"},Nl={class:"row"},zl={class:"col-12 col-md-6 q-pa-md"},Ol={class:"col-12 col-md-6 q-pa-md"},Ml={class:"row q-mt-md"},Fl={class:"col-12 col-md-6 q-pa-md"},Bl={class:"col-12 col-md-6 q-pa-md"},Hl={class:"row q-mt-md"},Ql={class:"col-12 q-pa-md"},Gl=J({__name:"AnnouncementMetadataFields",props:{modelValue:{},contentType:{}},emits:["update:modelValue"],setup(n,{emit:t}){const o=n,d=t,l=V({urgency:"medium",actionRequired:!1}),s=V(""),v=[{value:"low",label:"Low - Informational"},{value:"medium",label:"Medium - Important"},{value:"high",label:"High - Urgent"},{value:"urgent",label:"Urgent - Immediate Action"}],_=V(["All Residents","Lake Shore","Main Road","Community Center","Beach Area","Boat Launch","Walking Trails","Private Roads","Common Areas"]);X(()=>{if(o.modelValue&&(l.value={urgency:o.modelValue.urgency||"medium",...o.modelValue.expirationDate&&{expirationDate:o.modelValue.expirationDate},...o.modelValue.affectedAreas&&{affectedAreas:o.modelValue.affectedAreas},...o.modelValue.contactPerson&&{contactPerson:o.modelValue.contactPerson},...o.modelValue.actionRequired!==void 0&&{actionRequired:o.modelValue.actionRequired}},l.value.expirationDate)){const r=new Date(l.value.expirationDate).toISOString().split("T")[0];s.value=r||""}});function y(r){const g=String(r||"");g?l.value.expirationDate=new Date(g).getTime():delete l.value.expirationDate,i()}function i(){d("update:modelValue",{...l.value})}return(r,g)=>(h(),C("div",Rl,[e("div",Nl,[e("div",zl,[a(Z,{modelValue:l.value.urgency,"onUpdate:modelValue":[g[0]||(g[0]=U=>l.value.urgency=U),i],options:v,"option-value":"value","option-label":"label",label:"Urgency Level",outlined:"","emit-value":"","map-options":""},null,8,["modelValue"])]),e("div",Ol,[a(F,{modelValue:s.value,"onUpdate:modelValue":[g[1]||(g[1]=U=>s.value=U),y],label:"Expiration Date (Optional)",outlined:"",type:"date"},null,8,["modelValue"])])]),e("div",Ml,[e("div",Fl,[a(F,{modelValue:l.value.contactPerson,"onUpdate:modelValue":[g[2]||(g[2]=U=>l.value.contactPerson=U),i],label:"Contact Person (Optional)",outlined:"",placeholder:"Who to contact for questions"},null,8,["modelValue"])]),e("div",Bl,[a(qe,{modelValue:l.value.actionRequired,"onUpdate:modelValue":[g[3]||(g[3]=U=>l.value.actionRequired=U),i],label:"Action Required from Residents"},null,8,["modelValue"])])]),e("div",Hl,[e("div",Ql,[a(Z,{modelValue:l.value.affectedAreas,"onUpdate:modelValue":[g[4]||(g[4]=U=>l.value.affectedAreas=U),i],label:"Affected Areas (Optional)",outlined:"",multiple:"","use-chips":"","use-input":"","input-debounce":"300","new-value-mode":"add-unique",options:_.value},{hint:c(()=>g[5]||(g[5]=[b(" Select or type areas that this announcement affects ",-1)])),_:1},8,["modelValue","options"])])])]))}}),jl={class:"row"},Wl={class:"col-12 q-pa-md"},Kl={class:"row"},Yl={class:"col-12 col-md-8 q-pa-md"},Jl={class:"col-12 col-md-4 q-pa-md"},Zl={class:"row"},Xl={class:"col-12 col-md-6 col-lg-6 q-pa-md"},en={key:0,class:"col-12 col-md-6 col-lg-6 q-pa-md"},tn={key:0,class:"q-mt-md"},on={class:"q-mt-none q-mb-md"},an={class:"q-mt-md"},ln={class:"q-mt-md"},nn={class:"row q-mt-lg"},sn={class:"col-12 col-sm-auto q-pa-md"},rn={class:"col-12 col-sm-auto q-pa-md"},dn={class:"col-12 col-sm-auto q-pa-md"},un={class:"row q-mt-md"},cn={class:"col-12 q-pa-md"},mn=J({__name:"ContentSubmissionForm",props:{editMode:{type:Boolean,default:!1},existingContent:{},initialType:{},quickMode:{type:Boolean,default:!1}},emits:["submitted","draftSaved","cancelled"],setup(n,{emit:t}){const o=n,d=t,l=Ne(),s=V({type:"article",title:"",content:"",category:"",priority:"medium",targetIssue:"",metadata:{},attachments:[]}),v=V(!1),_=V(!1),y=V(!1),i=V(!0);function r(P){if(console.log("📝 updateFormMetadata received:",P),s.value.metadata={...P},s.value.type==="event"){const q=P;if(console.log("📅 Processing event metadata:",q),q.startDate){const E=new Date(q.startDate).toISOString().split("T")[0];E&&(s.value.eventDate=E)}if(q.endDate){const E=new Date(q.endDate).toISOString().split("T")[0];E&&(s.value.eventEndDate=E)}else delete s.value.eventEndDate;q.onCalendar!==void 0&&(s.value.onCalendar=q.onCalendar),console.log("🔄 Setting onCalendar to:",s.value.onCalendar,"(eventMeta.onCalendar was:",q.onCalendar,")"),q.eventTime&&q.eventTime.trim()!==""?(s.value.eventTime=q.eventTime,console.log("⏰ Setting eventTime to:",s.value.eventTime)):(delete s.value.eventTime,console.log("⏰ Removing eventTime (was empty)")),q.eventEndTime&&q.eventEndTime.trim()!==""?(s.value.eventEndTime=q.eventEndTime,console.log("⏰ Setting eventEndTime to:",s.value.eventEndTime)):(delete s.value.eventEndTime,console.log("⏰ Removing eventEndTime (was empty)")),q.location&&q.location.trim()!==""?s.value.eventLocation=q.location:delete s.value.eventLocation,s.value.allDay=q.allDay||!1,q.eventRecurrence?s.value.eventRecurrence=q.eventRecurrence:delete s.value.eventRecurrence,console.log("📋 Final form data after update:",{onCalendar:s.value.onCalendar,eventTime:s.value.eventTime,eventEndTime:s.value.eventEndTime,allDay:s.value.allDay})}}const g=V([]),U=V([]),u=V([]),m=[{value:"article",label:"Article",icon:"article",description:"General articles, stories, and written content"},{value:"event",label:"Event",icon:"event",description:"Community events, meetings, and activities"},{value:"project",label:"Project",icon:"engineering",description:"Community projects and initiatives"},{value:"announcement",label:"Announcement",icon:"campaign",description:"Official announcements and notices"},{value:"classified",label:"Classified",icon:"local_offer",description:"For sale, wanted, services, and housing"},{value:"photo_story",label:"Photo Story",icon:"photo_library",description:"Photo collections with stories"}],k=[{value:"low",label:"Low Priority"},{value:"medium",label:"Medium Priority"},{value:"high",label:"High Priority"}],Q=L(()=>[...g.value,...U.value].filter(Boolean)),S=L(()=>!!(s.value.type&&s.value.title&&s.value.content&&s.value.category)),$=L(()=>({id:"preview",type:s.value.type,title:s.value.title,authorId:"current-user",author:{uid:"current-user",displayName:"You",email:""},content:s.value.content,status:"draft",metadata:s.value.metadata,attachments:s.value.attachments,reviewHistory:[],submittedAt:Date.now(),priority:s.value.priority,category:s.value.category,...s.value.targetIssue&&{targetIssue:s.value.targetIssue},createdAt:Date.now(),updatedAt:Date.now()}));X(()=>{x(),o.editMode&&o.existingContent?G():H()}),ie(()=>s.value.type,P=>{P&&(s.value.metadata=re.createMetadataTemplate(P))});function x(){try{g.value=re.getPredefinedCategories(),U.value=re.getUserDefinedCategories(),u.value=Q.value}catch{l.notify({type:"negative",message:"Failed to load categories"})}}function G(){if(!o.existingContent)return;const P=o.existingContent;s.value={type:P.type,title:P.title,content:P.content,category:P.category,priority:P.priority,targetIssue:P.targetIssue||"",metadata:P.metadata,attachments:P.attachments}}function H(){o.initialType&&(s.value.type=o.initialType),s.value.metadata=re.createMetadataTemplate(s.value.type),o.quickMode&&(s.value.priority="low",s.value.category="Photos")}function ce(P){s.value.metadata=re.createMetadataTemplate(P)}function R(){switch(s.value.type){case"article":return'e.g., "Summer Activities at the Lake"';case"event":return'e.g., "Annual Community BBQ"';case"project":return'e.g., "Dock Renovation Project"';case"announcement":return'e.g., "Important Lake Safety Notice"';case"classified":return'e.g., "Kayak for Sale - Excellent Condition"';case"photo_story":return'e.g., "Wildlife at Conashaugh Lakes"';default:return"Enter a descriptive title"}}function I(){switch(s.value.type){case"article":return"Share your story, thoughts, or experiences with the community...";case"event":return"Describe the event details, what to expect, and how to participate...";case"project":return"Explain the project goals, progress, and how residents can get involved...";case"announcement":return"Provide important information that the community needs to know...";case"classified":return"Describe the item or service, including condition, price, and contact details...";case"photo_story":return"Tell the story behind your photos...";default:return"Write your content here..."}}function O(){switch(s.value.type){case"article":return"Article Details";case"event":return"Event Information";case"project":return"Project Details";case"announcement":return"Announcement Settings";case"classified":return"Listing Details";case"photo_story":return"Photo Information";default:return"Additional Information"}}function me(){switch(s.value.type){case"article":return Fa;case"event":return cl;case"project":return bl;case"announcement":return Gl;case"classified":return $l;case"photo_story":return Ll;default:return"div"}}function ee(P,q){q(()=>{if(P==="")u.value=Q.value;else{const E=P.toLowerCase();u.value=Q.value.filter(we=>we.toLowerCase().includes(E))}})}function Te(P,q){P.length>0&&!Q.value.includes(P)?(U.value.push(P),q(P)):q()}async function ke(){if(S.value){v.value=!0,console.log("🚀 Starting content submission..."),console.log("📝 Form data:",JSON.stringify(s.value,null,2)),s.value.type==="event"&&(console.log("📅 Calendar event submission detected!"),console.log("📅 onCalendar:",s.value.onCalendar),console.log("📅 eventDate:",s.value.eventDate),console.log("📅 eventTime:",s.value.eventTime),console.log("📅 eventLocation:",s.value.eventLocation),console.log("📅 allDay:",s.value.allDay));try{console.log("📡 Calling contentSubmissionService.submitContent...");const P=await re.submitContent(s.value);console.log("✅ Content submitted successfully! ID:",P),l.notify({type:"positive",message:`Content submitted successfully! ID: ${P}. Check Firebase Console > Firestore > userContent collection.`,timeout:5e3,actions:[{label:"Copy ID",color:"white",handler:()=>{navigator.clipboard.writeText(P),l.notify({type:"info",message:"Content ID copied to clipboard",timeout:1e3})}}]}),d("submitted",P),_e()}catch(P){console.error("❌ Submission failed:",P),console.error("Error details:",{name:P instanceof Error?P.name:"Unknown",message:P instanceof Error?P.message:String(P),code:P?.code,stack:P instanceof Error?P.stack:void 0}),l.notify({type:"negative",message:P instanceof Error?P.message:"Failed to submit content",timeout:5e3,actions:[{label:"Details",color:"white",handler:()=>{console.log("Full error object:",P),l.notify({type:"info",message:`Error: ${P?.code||"Unknown"} - Check browser console for details`,timeout:3e3})}}]})}finally{v.value=!1}}}function Se(){if(s.value.title){_.value=!0;try{l.notify({type:"info",message:"Draft saved locally"})}catch{l.notify({type:"negative",message:"Failed to save draft"})}finally{_.value=!1}}}function _e(){s.value={type:"article",title:"",content:"",category:"",priority:"medium",targetIssue:"",metadata:{},attachments:[]},H()}return(P,q)=>(h(),K(At,{onSubmit:ke,onReset:_e},{default:c(()=>[e("div",jl,[e("div",Wl,[a(Z,{modelValue:s.value.type,"onUpdate:modelValue":[q[0]||(q[0]=E=>s.value.type=E),ce],options:m,"option-value":"value","option-label":"label",label:"Content Type","emit-value":"","map-options":"",outlined:"",rules:[E=>!!E||"Please select a content type"]},{option:c(E=>[a(ze,Ct(qt(E.itemProps)),{default:c(()=>[a(ne,{avatar:""},{default:c(()=>[a(T,{name:E.opt.icon},null,8,["name"])]),_:2},1024),a(ne,null,{default:c(()=>[a(pe,null,{default:c(()=>[b(w(E.opt.label),1)]),_:2},1024),a(pe,{caption:""},{default:c(()=>[b(w(E.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","rules"])])]),e("div",Kl,[e("div",Yl,[a(F,{modelValue:s.value.title,"onUpdate:modelValue":q[1]||(q[1]=E=>s.value.title=E),label:"Title",outlined:"",rules:[E=>!!E||"Title is required"],placeholder:R()},null,8,["modelValue","rules","placeholder"])]),e("div",Jl,[a(Z,{modelValue:s.value.priority,"onUpdate:modelValue":q[2]||(q[2]=E=>s.value.priority=E),options:k,"option-value":"value","option-label":"label",label:"Priority","emit-value":"","map-options":"",outlined:""},null,8,["modelValue"])])]),e("div",Zl,[e("div",Xl,[a(Z,{modelValue:s.value.category,"onUpdate:modelValue":q[3]||(q[3]=E=>s.value.category=E),options:Q.value,label:"Category",outlined:"","use-input":"","fill-input":"","hide-selected":"","input-debounce":"300","new-value-mode":"add-unique",rules:[E=>!!E||"Category is required"],onFilter:ee,onNewValue:Te},{prepend:c(()=>[a(T,{name:"label"})]),hint:c(()=>q[10]||(q[10]=[b(" Type to search existing categories or create a new one ",-1)])),_:1},8,["modelValue","options","rules"])]),i.value?(h(),C("div",en,[a(F,{modelValue:s.value.targetIssue,"onUpdate:modelValue":q[4]||(q[4]=E=>s.value.targetIssue=E),label:"Target Newsletter Issue (Optional)",outlined:"",placeholder:"e.g., 2025 Summer Issue"},null,8,["modelValue"])])):D("",!0)]),s.value.type?(h(),C("div",tn,[a(se,{class:"q-mb-md"}),e("h6",on,w(O()),1),(h(),K(Tt(me()),{modelValue:s.value.metadata,"onUpdate:modelValue":[q[5]||(q[5]=E=>s.value.metadata=E),r],"content-type":s.value.type},null,8,["modelValue","content-type"]))])):D("",!0),e("div",an,[a(se,{class:"q-mb-md"}),q[11]||(q[11]=e("h6",{class:"q-mt-none q-mb-md"},"Content",-1)),a(po,{modelValue:s.value.content,"onUpdate:modelValue":q[6]||(q[6]=E=>s.value.content=E),placeholder:I(),"min-height":"300px"},null,8,["modelValue","placeholder"])]),e("div",ln,[a(se,{class:"q-mb-md"}),q[12]||(q[12]=e("h6",{class:"q-mt-none q-mb-md"},"Images & Media",-1)),q[13]||(q[13]=e("p",{class:"text-caption text-grey-7 q-mb-md"}," We recommend hosting images on Google Photos or Google Drive to keep costs low and maintain quality. ",-1)),a(Io,{modelValue:s.value.attachments,"onUpdate:modelValue":q[7]||(q[7]=E=>s.value.attachments=E),"max-attachments":10},null,8,["modelValue"])]),e("div",nn,[e("div",sn,[a(B,{type:"submit",color:"primary",loading:v.value,disable:!S.value},{default:c(()=>[a(T,{name:"send",class:"q-mr-sm"}),q[14]||(q[14]=b(" Submit for Review ",-1))]),_:1,__:[14]},8,["loading","disable"])]),e("div",rn,[a(B,{type:"button",color:"grey-7",outline:"",onClick:Se,loading:_.value,disable:!s.value.title},{default:c(()=>[a(T,{name:"save",class:"q-mr-sm"}),q[15]||(q[15]=b(" Save Draft ",-1))]),_:1,__:[15]},8,["loading","disable"])]),e("div",dn,[a(B,{type:"reset",color:"grey-7",flat:"",disable:v.value||_.value},{default:c(()=>q[16]||(q[16]=[b(" Reset ",-1)])),_:1,__:[16]},8,["disable"])])]),e("div",un,[e("div",cn,[a(B,{color:"info",outline:"",icon:"preview",label:"Preview",onClick:q[8]||(q[8]=E=>y.value=!0),disable:!s.value.title||!s.value.content},null,8,["disable"])])]),a(Ia,{modelValue:y.value,"onUpdate:modelValue":q[9]||(q[9]=E=>y.value=E),content:$.value},null,8,["modelValue","content"])]),_:1}))}}),pn=oe(mn,[["__scopeId","data-v-32feee5c"]]),vn={class:"firebase-debug-panel q-pa-md"},gn={class:"row"},fn={class:"col-12"},hn={class:"row"},yn={class:"col-12 col-md-6"},bn={class:"col-12 col-md-6"},_n={key:0},wn={key:1},Cn={class:"text-h6 q-mb-md"},qn={class:"text-body2"},Tn=J({__name:"FirebaseDebugPanel",setup(n){const t=Ne(),{getContentIcon:o,getStatusIcon:d}=Je(),l=V(!1),s=V(!1),v=V(!1),_=V([]),y=V(""),i=V(null),r=V(!1),g=V(null);X(()=>{U()});function U(){const S=Ee.getCurrentUser();i.value={authenticated:!!S,user:S?{uid:S.uid,email:S.email,displayName:S.displayName}:null}}async function u(){l.value=!0,y.value="",v.value=!0;try{const S=Ee.getCurrentUser();if(!S)throw new Error("User not authenticated");console.log("🔍 Checking content for user:",S.uid);const $=St(Be(He,"userContent"),xt("author.uid","==",S.uid)),x=await $t($);console.log("📊 Query result:",x.size,"documents found");const G=[];x.forEach(H=>{console.log("📄 Document:",H.id,H.data()),G.push({id:H.id,...H.data()})}),_.value=G,t.notify({type:"positive",message:`Found ${G.length} submitted content items`})}catch(S){console.error("💥 Error checking content:",S),y.value=S instanceof Error?S.message:String(S),t.notify({type:"negative",message:`Error: ${S instanceof Error?S.message:String(S)}`})}finally{l.value=!1}}async function m(){s.value=!0,y.value="";try{const S=Ee.getCurrentUser();if(!S)throw new Error("User not authenticated");console.log("🧪 Creating test submission...");const $={type:"article",title:`Debug Test Article - ${new Date().toISOString()}`,author:{uid:S.uid,displayName:S.displayName||"Anonymous",email:S.email||""},content:"This is a test article created for debugging purposes.",status:"submitted",metadata:{subtitle:"Debug Test",readTime:1,tags:["debug","test"]},attachments:[],reviewHistory:[{id:`initial_${Date.now()}`,reviewerId:S.uid,reviewerName:S.displayName||"Author",timestamp:Date.now(),status:"submitted",feedback:"Initial submission"}],submittedAt:Date.now(),priority:"medium",category:"debug",createdAt:Date.now(),updatedAt:Date.now()},x=await Dt(Be(He,"userContent"),{...$,submittedAt:Ve(),createdAt:Ve(),updatedAt:Ve()});console.log("✅ Test submission successful! ID:",x.id),t.notify({type:"positive",message:`Test submission successful! Document ID: ${x.id}`,actions:[{label:"Copy ID",color:"white",handler:()=>void navigator.clipboard.writeText(x.id)}]}),await u()}catch(S){console.error("💥 Test submission failed:",S),y.value=S instanceof Error?S.message:String(S),t.notify({type:"negative",message:`Test failed: ${S instanceof Error?S.message:String(S)}`})}finally{s.value=!1}}function k(S){return new Date(S).toLocaleString()}function Q(S){g.value=S,r.value=!0}return(S,$)=>(h(),C("div",vn,[e("div",gn,[e("div",fn,[a(W,null,{default:c(()=>[a(M,null,{default:c(()=>$[1]||($[1]=[e("div",{class:"text-h6"},"🔍 Firebase Debug Panel",-1),e("div",{class:"text-subtitle2 text-grey-7"},"Check your submitted content",-1)])),_:1,__:[1]}),a(M,null,{default:c(()=>[e("div",hn,[e("div",yn,[a(B,{color:"primary",icon:"refresh",label:"Check My Content",onClick:u,loading:l.value,class:"full-width"},null,8,["loading"])]),e("div",bn,[a(B,{color:"secondary",icon:"bug_report",label:"Test Submission",onClick:m,loading:s.value,class:"full-width"},null,8,["loading"])])])]),_:1}),i.value?(h(),K(M,{key:0},{default:c(()=>[a(de,{class:kt(i.value.authenticated?"bg-positive":"bg-negative"),"text-color":"white"},{avatar:c(()=>[a(T,{name:i.value.authenticated?"check_circle":"error"},null,8,["name"])]),default:c(()=>[i.value.authenticated?(h(),C("div",_n,[$[2]||($[2]=e("strong",null,"✅ Authenticated",-1)),$[3]||($[3]=e("br",null,null,-1)),b(" UID: "+w(i.value.user?.uid),1),$[4]||($[4]=e("br",null,null,-1)),b(" Email: "+w(i.value.user?.email),1)])):(h(),C("div",wn,$[5]||($[5]=[e("strong",null,"❌ Not Authenticated",-1),e("br",null,null,-1),b(" Please log in to check your content ",-1)])))]),_:1},8,["class"])]),_:1})):D("",!0),_.value.length>0?(h(),K(M,{key:1},{default:c(()=>[e("div",Cn,"📝 Your Submitted Content ("+w(_.value.length)+")",1),a(Gt,{bordered:"",separator:""},{default:c(()=>[(h(!0),C(fe,null,he(_.value,x=>ue((h(),K(ze,{key:x.id,clickable:""},{default:c(()=>[a(ne,{avatar:""},{default:c(()=>[a(T,{name:A(o)(x.type).icon},null,8,["name"])]),_:2},1024),a(ne,null,{default:c(()=>[a(pe,null,{default:c(()=>[b(w(x.title),1)]),_:2},1024),a(pe,{caption:""},{default:c(()=>[b(" Type: "+w(x.type)+" | Status: "+w(x.status)+" | Category: "+w(x.category),1)]),_:2},1024),a(pe,{caption:""},{default:c(()=>[b(" Created: "+w(k(x.createdAt)),1)]),_:2},1024)]),_:2},1024),a(ne,{side:""},{default:c(()=>[a(Qt,{color:A(d)(x.status).color,label:x.status},null,8,["color","label"])]),_:2},1024),a(ne,{side:""},{default:c(()=>[a(B,{flat:"",round:"",dense:"",icon:"visibility",onClick:G=>Q(x)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[Vt]])),128))]),_:1})]),_:1})):v.value&&_.value.length===0?(h(),K(M,{key:2},{default:c(()=>[a(de,{class:"bg-info text-white"},{avatar:c(()=>[a(T,{name:"info"})]),default:c(()=>[$[6]||($[6]=e("strong",null,"No content found",-1)),$[7]||($[7]=e("br",null,null,-1)),$[8]||($[8]=b(" No submitted content found in the userContent collection. ",-1)),$[9]||($[9]=e("br",null,null,-1)),$[10]||($[10]=e("br",null,null,-1)),$[11]||($[11]=b(" This could mean: ",-1)),$[12]||($[12]=e("ul",{class:"q-mt-md"},[e("li",null,"You haven't submitted any content yet"),e("li",null,"There might be an authentication issue"),e("li",null,"Firebase security rules might be blocking access"),e("li",null,"The content is being stored in a different location")],-1))]),_:1,__:[6,7,8,9,10,11,12]})]),_:1})):D("",!0),y.value?(h(),K(M,{key:3},{default:c(()=>[a(de,{class:"bg-negative text-white"},{avatar:c(()=>[a(T,{name:"error"})]),default:c(()=>[$[13]||($[13]=e("strong",null,"Error occurred:",-1)),$[14]||($[14]=e("br",null,null,-1)),b(" "+w(y.value),1)]),_:1,__:[13,14]})]),_:1})):D("",!0)]),_:1})])]),a(ge,{modelValue:r.value,"onUpdate:modelValue":$[0]||($[0]=x=>r.value=x),maximized:""},{default:c(()=>[a(W,null,{default:c(()=>[a(M,{class:"row items-center q-pb-none"},{default:c(()=>[$[15]||($[15]=e("div",{class:"text-h6"},"Content Details",-1)),a(ye),ue(a(B,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])]),_:1,__:[15]}),a(M,null,{default:c(()=>[e("pre",qn,w(JSON.stringify(g.value,null,2)),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),kn=oe(Tn,[["__scopeId","data-v-d2c2598c"]]),Sn={class:"container q-pa-md"},xn={class:"page-header q-mb-xl"},$n={class:"page-title q-mt-none q-mb-md"},Dn={class:"page-description text-grey-7"},Vn={class:"text-subtitle1"},Un={class:"text-caption"},Pn={class:"text-subtitle1"},En={class:"text-caption"},In={key:2,class:"success-state text-center q-pa-xl"},An={class:"q-mt-none q-mb-md"},Ln={class:"row justify-center"},Rn={key:3,class:"submission-form"},Nn={key:4,class:"debug-section q-mt-xl"},zn={class:"help-section q-mt-xl"},On={class:"q-mt-none q-mb-md"},Mn={class:"row q-col-gutter-sm"},Fn={class:"col-12 col-md-4 q-pa-md"},Bn={class:"text-center"},Hn={class:"text-h6 q-mb-sm"},Qn={class:"text-caption text-grey-7"},Gn={class:"col-12 col-md-4 q-pa-md"},jn={class:"text-center"},Wn={class:"text-h6 q-mb-sm"},Kn={class:"text-caption text-grey-7"},Yn={class:"col-12 col-md-4 q-pa-md"},Jn={class:"text-center"},Zn={class:"text-h6 q-mb-sm"},Xn={class:"text-caption text-grey-7"},es=J({__name:"SubmitContentPage",setup(n){const t=Ut(),o=Et(),{t:d}=jt(),l=V(!1),s=V(!1),v=V(!1),_=V(null),y=L(()=>{switch(o.query.type){case"article":return"article";case"photo":return"photo_story";case"event":return"event";case"announcement":return"announcement";case"classified":return"classified";default:return}}),i=L(()=>o.query.mode==="quick"),r=L(()=>o.query.guided==="true"),g=L(()=>o.query.debug==="true"),U=L(()=>{switch(o.query.type){case"article":return"Submit Article";case"photo":return i.value?"Quick Photo Upload":"Submit Photos";case"event":return"Post Event";case"announcement":return"Share Community News";case"classified":return"Post Classified Ad";default:return"Submit Content"}}),u=L(()=>i.value?`Quick ${o.query.type==="photo"?"Photo Upload":"Submission"}`:r.value?`Guided ${U.value}`:U.value),m=L(()=>{const $=o.query.type,G={article:"Share your stories, experiences, or community insights with detailed articles and rich content.",photo:i.value?"Quickly upload and share photos with the community.":"Submit curated photo collections with detailed descriptions and context.",event:"Promote community events, meetings, or activities to keep everyone informed.",announcement:"Share important community news, updates, or general announcements.",classified:"Post items for sale, services offered, wanted items, or free giveaways."}[$]||"Share your content with the CLCA community. All submissions are reviewed by our editorial team before publication.";return r.value?`${G} You're using our guided submission process for the best results.`:G});function k($){_.value=$,l.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function Q(){t.push("/contribute")}function S(){l.value=!1,_.value=null,window.scrollTo({top:0,behavior:"smooth"})}return X(()=>{console.log("SubmitContentPage mounted with:",{contentType:y.value,quickMode:i.value})}),($,x)=>(h(),K(It,{class:"submit-content-page"},{default:c(()=>[e("div",Sn,[e("div",xn,[e("h3",$n,w(u.value),1),e("p",Dn,w(m.value),1),a(Kt,{class:"q-mt-md"},{default:c(()=>[a(Ie,{label:A(d)(A(Y).NAVIGATION.HOME),to:"/"},null,8,["label"]),a(Ie,{label:A(d)(A(Y).NAVIGATION.CONTRIBUTE),to:"/contribute"},null,8,["label"]),a(Ie,{label:U.value},null,8,["label"])]),_:1})]),i.value?(h(),K(de,{key:0,class:"bg-info text-white q-mb-lg",rounded:""},{avatar:c(()=>[a(T,{name:"mdi-flash"})]),default:c(()=>[e("div",Vn,w(A(d)("content.quickUpload")||"Quick Upload Mode"),1),e("div",Un,w(A(d)("content.quickUploadDescription")||"Streamlined submission for quick sharing"),1)]),_:1})):D("",!0),r.value?(h(),K(de,{key:1,class:"bg-primary text-white q-mb-lg",rounded:""},{avatar:c(()=>[a(T,{name:"mdi-map"})]),action:c(()=>[a(B,{flat:"",color:"white",label:A(d)("content.backToGuide")||"Back to Guide",onClick:x[0]||(x[0]=()=>A(t).push("/contribute")),size:"sm"},null,8,["label"])]),default:c(()=>[e("div",Pn,w(A(d)("content.guidedSubmission")||"Guided Submission Process"),1),e("div",En,w(A(d)("content.guidedSubmissionDescription")||"You're following our step-by-step guide for the best results"),1)]),_:1})):D("",!0),l.value?(h(),C("div",In,[a(T,{name:"check_circle",size:"4em",color:"positive",class:"q-mb-md"}),e("h4",An,w(A(d)(A(Y).SUCCESS.CONTENT_SUBMITTED)||"Content Submitted Successfully!"),1),x[5]||(x[5]=e("p",{class:"text-grey-7 q-mb-lg"}," Thank you for your submission. Our editorial team will review your content and provide feedback within 3-5 business days. ",-1)),e("div",Ln,[a(B,{color:"primary",label:"Submit Another",onClick:S}),a(B,{color:"grey-7",outline:"",label:"Back to Contribute",to:"/contribute"})])])):(h(),C("div",Rn,[a(pn,Pt({onSubmitted:k,onCancelled:Q},y.value?{initialType:y.value}:{},{"quick-mode":i.value}),null,16,["quick-mode"])])),g.value?(h(),C("div",Nn,[a(se,{class:"q-mb-lg"}),a(Ke,{icon:"bug_report",label:"Debug Panel (Development)"},{default:c(()=>[a(kn)]),_:1})])):D("",!0),e("div",zn,[a(se,{class:"q-mb-lg"}),e("h5",On,w(A(d)(A(Y).CONTENT.NEED_HELP)||"Need Help?"),1),e("div",Mn,[e("div",Fn,[a(W,{flat:"",bordered:"",class:"help-card"},{default:c(()=>[a(M,null,{default:c(()=>[e("div",Bn,[a(T,{name:"article",size:"2em",color:"primary",class:"q-mb-sm"}),e("div",Hn,w(A(d)(A(Y).CONTENT.CONTENT_GUIDELINES)||"Content Guidelines"),1),e("p",Qn,w(A(d)(A(Y).CONTENT.GUIDELINES_DESCRIPTION)||"Learn about our content standards and best practices for submissions."),1),a(B,{color:"primary",outline:"",size:"sm",label:A(d)(A(Y).CONTENT.VIEW_GUIDELINES)||"View Guidelines",onClick:x[1]||(x[1]=G=>s.value=!0)},null,8,["label"])])]),_:1})]),_:1})]),e("div",Gn,[a(W,{flat:"",bordered:"",class:"help-card"},{default:c(()=>[a(M,null,{default:c(()=>[e("div",jn,[a(T,{name:"image",size:"2em",color:"primary",class:"q-mb-sm"}),e("div",Wn,w(A(d)(A(Y).CONTENT.IMAGE_HOSTING)||"Image Hosting"),1),e("p",Kn,w(A(d)(A(Y).CONTENT.IMAGE_HOSTING_DESCRIPTION)||"Best practices for hosting images externally to keep costs low."),1),a(B,{color:"primary",outline:"",size:"sm",label:A(d)(A(Y).CONTENT.IMAGE_GUIDE)||"Image Guide",onClick:x[2]||(x[2]=G=>v.value=!0)},null,8,["label"])])]),_:1})]),_:1})]),e("div",Yn,[a(W,{flat:"",bordered:"",class:"help-card"},{default:c(()=>[a(M,null,{default:c(()=>[e("div",Jn,[a(T,{name:"support",size:"2em",color:"primary",class:"q-mb-sm"}),e("div",Zn,w(A(d)(A(Y).CONTENT.GET_SUPPORT)||"Get Support"),1),e("p",Xn,w(A(d)(A(Y).CONTENT.SUPPORT_DESCRIPTION)||"Contact our editorial team if you need assistance with your submission."),1),a(B,{color:"primary",outline:"",size:"sm",label:A(d)(A(Y).NAVIGATION.CONTACT),href:"mailto:editor@conashaughlakes.com"},null,8,["label"])])]),_:1})]),_:1})])])]),a(ge,{modelValue:s.value,"onUpdate:modelValue":x[3]||(x[3]=G=>s.value=G),"max-width":"800px"},{default:c(()=>[a(W,null,{default:c(()=>[a(M,{class:"row items-center q-pb-none"},{default:c(()=>[x[6]||(x[6]=e("div",{class:"text-h6"},"Content Guidelines",-1)),a(ye),ue(a(B,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])]),_:1,__:[6]}),a(M,null,{default:c(()=>x[7]||(x[7]=[e("div",{class:"guidelines-content"},[e("h6",null,"Content Standards"),e("ul",null,[e("li",null,"Keep content family-friendly and appropriate for all ages"),e("li",null,"Focus on topics relevant to the CLCA community"),e("li",null,"Provide accurate and verified information"),e("li",null,"Respect privacy and avoid sharing personal information without consent"),e("li",null,"Use clear, engaging writing that serves the community")]),e("h6",null,"Submission Process"),e("ol",null,[e("li",null,[e("strong",null,"Submit:"),b(" Fill out the form with your content")]),e("li",null,[e("strong",null,"Review:"),b(" Editorial team reviews for quality and appropriateness")]),e("li",null,[e("strong",null,"Feedback:"),b(" Receive feedback or approval within 3-5 business days ")]),e("li",null,[e("strong",null,"Revise:"),b(" Make any requested changes if needed")]),e("li",null,[e("strong",null,"Publish:"),b(" Approved content is included in the next newsletter")])]),e("h6",null,"Content Types"),e("ul",null,[e("li",null,[e("strong",null,"Articles:"),b(" Stories, experiences, informational pieces")]),e("li",null,[e("strong",null,"Events:"),b(" Community gatherings, meetings, activities")]),e("li",null,[e("strong",null,"Projects:"),b(" Community improvements, volunteer initiatives")]),e("li",null,[e("strong",null,"Announcements:"),b(" Important community notices")]),e("li",null,[e("strong",null,"Classifieds:"),b(" Items for sale, services offered, housing")]),e("li",null,[e("strong",null,"Photo Stories:"),b(" Visual narratives about community life")])])],-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"]),a(ge,{modelValue:v.value,"onUpdate:modelValue":x[4]||(x[4]=G=>v.value=G),"max-width":"700px"},{default:c(()=>[a(W,null,{default:c(()=>[a(M,{class:"row items-center q-pb-none"},{default:c(()=>[x[8]||(x[8]=e("div",{class:"text-h6"},"Image Hosting Guide",-1)),a(ye),ue(a(B,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])]),_:1,__:[8]}),a(M,null,{default:c(()=>x[9]||(x[9]=[e("div",{class:"image-guide-content"},[e("p",{class:"text-subtitle2 text-primary q-mb-md"}," We recommend external image hosting to keep the newsletter cost-effective while maintaining high quality. "),e("h6",null,"Recommended Services"),e("div",{class:"service-section q-mb-md"},[e("div",{class:"text-weight-medium"},"Google Photos (Recommended)"),e("ul",{class:"q-mt-xs"},[e("li",null,"Free with Google account"),e("li",null,"Easy sharing and high quality"),e("li",null,"Mobile app available"),e("li",null,"Automatic backup from phone")])]),e("div",{class:"service-section q-mb-md"},[e("div",{class:"text-weight-medium"},"Google Drive"),e("ul",{class:"q-mt-xs"},[e("li",null,"Good for document attachments"),e("li",null,"Easy permission management"),e("li",null,"Works with any file type")])]),e("h6",null,"Image Quality Tips"),e("ul",null,[e("li",null,"Use high resolution for print quality (300 DPI preferred)"),e("li",null,"Keep file sizes reasonable (under 10MB each)"),e("li",null,"Use JPEG format for photos, PNG for graphics"),e("li",null,"Include descriptive captions for accessibility")]),e("h6",null,"Troubleshooting"),e("ul",null,[e("li",null,"If image doesn't load, check sharing permissions"),e("li",null,"Test URLs in a private browser window"),e("li",null,"Contact us if you need help with hosting setup")])],-1)])),_:1,__:[9]})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}}),Us=oe(es,[["__scopeId","data-v-90d51010"]]);export{Us as default};
