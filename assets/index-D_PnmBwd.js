const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-storage.service-DpCzc1XB.js","assets/firebase-auth.service-CJhrW4PC.js","assets/firebase-firestore.service-DUd51tQY.js","assets/MainLayout-dxeguNRF.js","assets/QPage-nQH-DXuR.js","assets/QScrollObserver-DTklAcKz.js","assets/QResizeObserver-BcndQC3a.js","assets/site-store-simple-D14K2C5k.js","assets/useUserSettings-Mtl-bqLT.js","assets/QImg-DQlddIyM.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/QItem-Bjh9HIyu.js","assets/QList-CHRoxCYs.js","assets/QMenu-DtDpS83R.js","assets/format-Pp70c07r.js","assets/QBtnDropdown-keKfKAuD.js","assets/QBtnGroup-DS6x2v8G.js","assets/ClosePopup-DoExNbR6.js","assets/useLocale-Kiu3BGcI.js","assets/locale-detector-DBq1h1zO.js","assets/vue-i18n.runtime-BohY0i8c.js","assets/ui-icons-C2WSN06j.js","assets/translation-keys-CcbP-t_8.js","assets/QSpace-DbRYpapM.js","assets/TouchPan-C5J5x9zD.js","assets/touch-BjYP5sR0.js","assets/QTooltip-M8UKYEHc.js","assets/useSiteTheme-C69PhtAm.js","assets/useFirebase-DNSTS1tz.js","assets/QSpinnerDots-Bk70eOq_.js","assets/MainLayout-cagePBzE.css","assets/IndexPage-huJRwFu6.js","assets/useTheme-kHVGLq2f.js","assets/CommunityContentPage-DldCFNk5.js","assets/QSelect-DLXi3U4d.js","assets/QChip-CZ-mJB07.js","assets/QBtnToggle-BmXa13Ra.js","assets/useRoleAuth-DYeZD03L.js","assets/QBadge-6JYF_re4.js","assets/CommunityContentPage-BzRIpRaY.css","assets/CommunityCalendarPage-Dn3NxUjV.js","assets/QInnerLoading-DOhVtGLk.js","assets/QBanner-BevaaBnV.js","assets/use-render-cache-DLxPkVnQ.js","assets/CommunityCalendarPage-Dya6geRa.css","assets/AboutContactPage-J4TK9Mzn.js","assets/QForm-C4GylbRw.js","assets/MapRefactoredPage-DdqWbJ9P.js","assets/MapRefactoredPage-B8M5fWoB.css","assets/FirebaseNewsletterArchivePage-DTBuIRWN.js","assets/QSlideTransition-BaElmh0J.js","assets/useFirebaseNewsletterArchive-DYBhNiKE.js","assets/firebase-newsletter.service-Dn501ZH-.js","assets/FirebaseNewsletterArchivePage-DoRSm5lE.css","assets/FirebaseNewsletterDetailsPage-BcOukR9V.js","assets/FirebaseNewsletterDetailsPage-DvMiu40E.css","assets/ContributePage-kbweuqQB.js","assets/ContributePage-CtoTDepj.css","assets/SubmitContentPage-BbKX0lZE.js","assets/QExpansionItem-CHnq_Soy.js","assets/QLinearProgress-DYpiQxxf.js","assets/QTabPanels-D3X4LxmC.js","assets/SubmitContentPage-CpOPwFR7.css","assets/ContributeGuide-BgdA_Foi.js","assets/ContributeGuide-BeHwIPPF.css","assets/DashboardPage-BQl6IaA6.js","assets/DashboardPage-Ba50FLmr.css","assets/SettingsPage-BH1J2oxs.js","assets/QSlider-CaSVMYQW.js","assets/SettingsPage-Crxcty_F.css","assets/PrivacyPolicyPage-DSY2HtpF.js","assets/PrivacyPolicyPage-o51RGUqK.css","assets/TermsOfServicePage-CRUY0d8L.js","assets/TermsOfServicePage-B-njmS3l.css","assets/AccessibilityPage-D9NyAeAK.js","assets/AccessibilityPage-ChhvptL5.css","assets/AdminDashboardPage-RbXKWfcQ.js","assets/AdminDashboardPage-c1_vr2z8.css","assets/ContentManagementPage-vrUdexXl.js","assets/QTable-DrQA3Hlh.js","assets/ContentManagementPage-CKj2mSao.css","assets/NewsletterManagementPage-fNq4IhaX.js","assets/NewsletterManagementPage-B-k09uHX.css","assets/ThemeEditorPage-CsK2xI3t.js","assets/ThemeEditorPage-C3MLRrlp.css","assets/i18n-BPaMdBR6.js","assets/firebase-DsYJ9wjj.js"])))=>i.map(i=>d[i]);
var qT=Object.defineProperty;var BT=(t,e,n)=>e in t?qT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Np=(t,e,n)=>BT(t,typeof e!="symbol"?e+"":e,n);const jT=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),zT=function(t){return"/clca-courier/"+t},Op={},Be=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=o(n.map(u=>{if(u=zT(u),u in Op)return;Op[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":jT,h||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((w,I)=>{p.addEventListener("load",w),p.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const He={},si=[],Dn=()=>{},HT=()=>!1,ic=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),dd=t=>t.startsWith("onUpdate:"),pt=Object.assign,fd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WT=Object.prototype.hasOwnProperty,$e=(t,e)=>WT.call(t,e),ve=Array.isArray,ii=t=>Xo(t)==="[object Map]",ry=t=>Xo(t)==="[object Set]",KT=t=>Xo(t)==="[object RegExp]",Ie=t=>typeof t=="function",Xe=t=>typeof t=="string",cr=t=>typeof t=="symbol",Je=t=>t!==null&&typeof t=="object",sy=t=>(Je(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),iy=Object.prototype.toString,Xo=t=>iy.call(t),GT=t=>Xo(t).slice(8,-1),oy=t=>Xo(t)==="[object Object]",pd=t=>Xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,co=hd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},QT=/-(\w)/g,pn=oc(t=>t.replace(QT,(e,n)=>n?n.toUpperCase():"")),YT=/\B([A-Z])/g,ts=oc(t=>t.replace(YT,"-$1").toLowerCase()),ac=oc(t=>t.charAt(0).toUpperCase()+t.slice(1)),mu=oc(t=>t?`on${ac(t)}`:""),Lr=(t,e)=>!Object.is(t,e),uo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ch=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},XT=t=>{const e=parseFloat(t);return isNaN(e)?t:e},JT=t=>{const e=Xe(t)?Number(t):NaN;return isNaN(e)?t:e};let Vp;const lc=()=>Vp||(Vp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function cc(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Xe(r)?nI(r):cc(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Xe(t)||Je(t))return t}const ZT=/;(?![^(]*\))/g,eI=/:([^]+)/,tI=/\/\*[^]*?\*\//g;function nI(t){const e={};return t.replace(tI,"").split(ZT).forEach(n=>{if(n){const r=n.split(eI);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function uc(t){let e="";if(Xe(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const r=uc(t[n]);r&&(e+=r+" ")}else if(Je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function BM(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Xe(e)&&(t.class=uc(e)),n&&(t.style=cc(n)),t}const rI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sI=hd(rI);function ay(t){return!!t||t===""}const ly=t=>!!(t&&t.__v_isRef===!0),iI=t=>Xe(t)?t:t==null?"":ve(t)||Je(t)&&(t.toString===iy||!Ie(t.toString))?ly(t)?iI(t.value):JSON.stringify(t,cy,2):String(t),cy=(t,e)=>ly(e)?cy(t,e.value):ii(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[gu(r,i)+" =>"]=s,n),{})}:ry(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>gu(n))}:cr(e)?gu(e):Je(e)&&!ve(e)&&!oy(e)?String(e):e,gu=(t,e="")=>{var n;return cr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nt;class uy{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nt,!e&&Nt&&(this.index=(Nt.scopes||(Nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Nt;try{return Nt=this,e()}finally{Nt=n}}}on(){++this._on===1&&(this.prevScope=Nt,Nt=this)}off(){this._on>0&&--this._on===0&&(Nt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function hy(t){return new uy(t)}function dy(){return Nt}function oI(t,e=!1){Nt&&Nt.cleanups.push(t)}let Ke;const _u=new WeakSet;class fy{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nt&&Nt.active&&Nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_u.has(this)&&(_u.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||my(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Mp(this),gy(this);const e=Ke,n=En;Ke=this,En=!0;try{return this.fn()}finally{_y(this),Ke=e,En=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)_d(e);this.deps=this.depsTail=void 0,Mp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_u.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){uh(this)&&this.run()}get dirty(){return uh(this)}}let py=0,ho,fo;function my(t,e=!1){if(t.flags|=8,e){t.next=fo,fo=t;return}t.next=ho,ho=t}function md(){py++}function gd(){if(--py>0)return;if(fo){let e=fo;for(fo=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ho;){let e=ho;for(ho=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function gy(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function _y(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),_d(r),aI(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function uh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(yy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function yy(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Po)||(t.globalVersion=Po,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!uh(t))))return;t.flags|=2;const e=t.dep,n=Ke,r=En;Ke=t,En=!0;try{gy(t);const s=t.fn(t._value);(e.version===0||Lr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ke=n,En=r,_y(t),t.flags&=-3}}function _d(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)_d(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function aI(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let En=!0;const vy=[];function Zn(){vy.push(En),En=!1}function er(){const t=vy.pop();En=t===void 0?!0:t}function Mp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ke;Ke=void 0;try{e()}finally{Ke=n}}}let Po=0;class lI{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ke||!En||Ke===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ke)n=this.activeLink=new lI(Ke,this),Ke.deps?(n.prevDep=Ke.depsTail,Ke.depsTail.nextDep=n,Ke.depsTail=n):Ke.deps=Ke.depsTail=n,wy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ke.depsTail,n.nextDep=void 0,Ke.depsTail.nextDep=n,Ke.depsTail=n,Ke.deps===n&&(Ke.deps=r)}return n}trigger(e){this.version++,Po++,this.notify(e)}notify(e){md();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{gd()}}}function wy(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)wy(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const vl=new WeakMap,vs=Symbol(""),hh=Symbol(""),ko=Symbol("");function Vt(t,e,n){if(En&&Ke){let r=vl.get(t);r||vl.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new yd),s.map=r,s.key=n),s.track()}}function Kn(t,e,n,r,s,i){const o=vl.get(t);if(!o){Po++;return}const l=c=>{c&&c.trigger()};if(md(),e==="clear")o.forEach(l);else{const c=ve(t),u=c&&pd(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===ko||!cr(p)&&p>=h)&&l(f)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(ko)),e){case"add":c?u&&l(o.get("length")):(l(o.get(vs)),ii(t)&&l(o.get(hh)));break;case"delete":c||(l(o.get(vs)),ii(t)&&l(o.get(hh)));break;case"set":ii(t)&&l(o.get(vs));break}}gd()}function cI(t,e){const n=vl.get(t);return n&&n.get(e)}function Ws(t){const e=Ae(t);return e===t?e:(Vt(e,"iterate",ko),hn(t)?e:e.map(Tt))}function hc(t){return Vt(t=Ae(t),"iterate",ko),t}const uI={__proto__:null,[Symbol.iterator](){return yu(this,Symbol.iterator,Tt)},concat(...t){return Ws(this).concat(...t.map(e=>ve(e)?Ws(e):e))},entries(){return yu(this,"entries",t=>(t[1]=Tt(t[1]),t))},every(t,e){return zn(this,"every",t,e,void 0,arguments)},filter(t,e){return zn(this,"filter",t,e,n=>n.map(Tt),arguments)},find(t,e){return zn(this,"find",t,e,Tt,arguments)},findIndex(t,e){return zn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return zn(this,"findLast",t,e,Tt,arguments)},findLastIndex(t,e){return zn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return zn(this,"forEach",t,e,void 0,arguments)},includes(...t){return vu(this,"includes",t)},indexOf(...t){return vu(this,"indexOf",t)},join(t){return Ws(this).join(t)},lastIndexOf(...t){return vu(this,"lastIndexOf",t)},map(t,e){return zn(this,"map",t,e,void 0,arguments)},pop(){return zi(this,"pop")},push(...t){return zi(this,"push",t)},reduce(t,...e){return Lp(this,"reduce",t,e)},reduceRight(t,...e){return Lp(this,"reduceRight",t,e)},shift(){return zi(this,"shift")},some(t,e){return zn(this,"some",t,e,void 0,arguments)},splice(...t){return zi(this,"splice",t)},toReversed(){return Ws(this).toReversed()},toSorted(t){return Ws(this).toSorted(t)},toSpliced(...t){return Ws(this).toSpliced(...t)},unshift(...t){return zi(this,"unshift",t)},values(){return yu(this,"values",Tt)}};function yu(t,e,n){const r=hc(t),s=r[e]();return r!==t&&!hn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const hI=Array.prototype;function zn(t,e,n,r,s,i){const o=hc(t),l=o!==t&&!hn(t),c=o[e];if(c!==hI[e]){const f=c.apply(t,i);return l?Tt(f):f}let u=n;o!==t&&(l?u=function(f,p){return n.call(this,Tt(f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=c.call(o,u,r);return l&&s?s(h):h}function Lp(t,e,n,r){const s=hc(t);let i=n;return s!==t&&(hn(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,Tt(l),c,t)}),s[e](i,...r)}function vu(t,e,n){const r=Ae(t);Vt(r,"iterate",ko);const s=r[e](...n);return(s===-1||s===!1)&&bd(n[0])?(n[0]=Ae(n[0]),r[e](...n)):s}function zi(t,e,n=[]){Zn(),md();const r=Ae(t)[e].apply(t,n);return gd(),er(),r}const dI=hd("__proto__,__v_isRef,__isVue"),by=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(cr));function fI(t){cr(t)||(t=String(t));const e=Ae(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class Ey{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?TI:Ay:i?Sy:Iy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ve(e);if(!s){let c;if(o&&(c=uI[n]))return c;if(n==="hasOwnProperty")return fI}const l=Reflect.get(e,n,ot(e)?e:r);return(cr(n)?by.has(n):dI(n))||(s||Vt(e,"get",n),i)?l:ot(l)?o&&pd(n)?l:l.value:Je(l)?s?Cy(l):Ns(l):l}}class Ty extends Ey{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=zr(i);if(!hn(r)&&!zr(r)&&(i=Ae(i),r=Ae(r)),!ve(e)&&ot(i)&&!ot(r))return c?!1:(i.value=r,!0)}const o=ve(e)&&pd(n)?Number(n)<e.length:$e(e,n),l=Reflect.set(e,n,r,ot(e)?e:s);return e===Ae(s)&&(o?Lr(r,i)&&Kn(e,"set",n,r):Kn(e,"add",n,r)),l}deleteProperty(e,n){const r=$e(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Kn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!cr(n)||!by.has(n))&&Vt(e,"has",n),r}ownKeys(e){return Vt(e,"iterate",ve(e)?"length":vs),Reflect.ownKeys(e)}}class pI extends Ey{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mI=new Ty,gI=new pI,_I=new Ty(!0);const dh=t=>t,Da=t=>Reflect.getPrototypeOf(t);function yI(t,e,n){return function(...r){const s=this.__v_raw,i=Ae(s),o=ii(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?dh:e?wl:Tt;return!e&&Vt(i,"iterate",c?hh:vs),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:l?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Na(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function vI(t,e){const n={get(s){const i=this.__v_raw,o=Ae(i),l=Ae(s);t||(Lr(s,l)&&Vt(o,"get",s),Vt(o,"get",l));const{has:c}=Da(o),u=e?dh:t?wl:Tt;if(c.call(o,s))return u(i.get(s));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Vt(Ae(s),"iterate",vs),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Ae(i),l=Ae(s);return t||(Lr(s,l)&&Vt(o,"has",s),Vt(o,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const o=this,l=o.__v_raw,c=Ae(l),u=e?dh:t?wl:Tt;return!t&&Vt(c,"iterate",vs),l.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return pt(n,t?{add:Na("add"),set:Na("set"),delete:Na("delete"),clear:Na("clear")}:{add(s){!e&&!hn(s)&&!zr(s)&&(s=Ae(s));const i=Ae(this);return Da(i).has.call(i,s)||(i.add(s),Kn(i,"add",s,s)),this},set(s,i){!e&&!hn(i)&&!zr(i)&&(i=Ae(i));const o=Ae(this),{has:l,get:c}=Da(o);let u=l.call(o,s);u||(s=Ae(s),u=l.call(o,s));const h=c.call(o,s);return o.set(s,i),u?Lr(i,h)&&Kn(o,"set",s,i):Kn(o,"add",s,i),this},delete(s){const i=Ae(this),{has:o,get:l}=Da(i);let c=o.call(i,s);c||(s=Ae(s),c=o.call(i,s)),l&&l.call(i,s);const u=i.delete(s);return c&&Kn(i,"delete",s,void 0),u},clear(){const s=Ae(this),i=s.size!==0,o=s.clear();return i&&Kn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=yI(s,t,e)}),n}function vd(t,e){const n=vI(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get($e(n,s)&&s in r?n:r,s,i)}const wI={get:vd(!1,!1)},bI={get:vd(!1,!0)},EI={get:vd(!0,!1)};const Iy=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,TI=new WeakMap;function II(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function SI(t){return t.__v_skip||!Object.isExtensible(t)?0:II(GT(t))}function Ns(t){return zr(t)?t:wd(t,!1,mI,wI,Iy)}function Ry(t){return wd(t,!1,_I,bI,Sy)}function Cy(t){return wd(t,!0,gI,EI,Ay)}function wd(t,e,n,r,s){if(!Je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=SI(t);if(i===0)return t;const o=s.get(t);if(o)return o;const l=new Proxy(t,i===2?r:n);return s.set(t,l),l}function Fr(t){return zr(t)?Fr(t.__v_raw):!!(t&&t.__v_isReactive)}function zr(t){return!!(t&&t.__v_isReadonly)}function hn(t){return!!(t&&t.__v_isShallow)}function bd(t){return t?!!t.__v_raw:!1}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function Os(t){return!$e(t,"__v_skip")&&Object.isExtensible(t)&&ch(t,"__v_skip",!0),t}const Tt=t=>Je(t)?Ns(t):t,wl=t=>Je(t)?Cy(t):t;function ot(t){return t?t.__v_isRef===!0:!1}function Ce(t){return Py(t,!1)}function AI(t){return Py(t,!0)}function Py(t,e){return ot(t)?t:new RI(t,e)}class RI{constructor(e,n){this.dep=new yd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ae(e),this._value=n?e:Tt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||hn(e)||zr(e);e=r?e:Ae(e),Lr(e,n)&&(this._rawValue=e,this._value=r?e:Tt(e),this.dep.trigger())}}function ws(t){return ot(t)?t.value:t}const CI={get:(t,e,n)=>e==="__v_raw"?t:ws(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ot(s)&&!ot(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ky(t){return Fr(t)?t:new Proxy(t,CI)}function PI(t){const e=ve(t)?new Array(t.length):{};for(const n in t)e[n]=xI(t,n);return e}class kI{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return cI(Ae(this._object),this._key)}}function xI(t,e,n){const r=t[e];return ot(r)?r:new kI(t,e,n)}class DI{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new yd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Po-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ke!==this)return my(this,!0),!0}get value(){const e=this.dep.track();return yy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function NI(t,e,n=!1){let r,s;return Ie(t)?r=t:(r=t.get,s=t.set),new DI(r,s,n)}const Oa={},bl=new WeakMap;let fs;function OI(t,e=!1,n=fs){if(n){let r=bl.get(n);r||bl.set(n,r=[]),r.push(t)}}function VI(t,e,n=He){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:l,call:c}=n,u=D=>s?D:hn(D)||s===!1||s===0?Gn(D,1):Gn(D);let h,f,p,w,I=!1,k=!1;if(ot(t)?(f=()=>t.value,I=hn(t)):Fr(t)?(f=()=>u(t),I=!0):ve(t)?(k=!0,I=t.some(D=>Fr(D)||hn(D)),f=()=>t.map(D=>{if(ot(D))return D.value;if(Fr(D))return u(D);if(Ie(D))return c?c(D,2):D()})):Ie(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){Zn();try{p()}finally{er()}}const D=fs;fs=h;try{return c?c(t,3,[w]):t(w)}finally{fs=D}}:f=Dn,e&&s){const D=f,B=s===!0?1/0:s;f=()=>Gn(D(),B)}const P=dy(),F=()=>{h.stop(),P&&P.active&&fd(P.effects,h)};if(i&&e){const D=e;e=(...B)=>{D(...B),F()}}let A=k?new Array(t.length).fill(Oa):Oa;const x=D=>{if(!(!(h.flags&1)||!h.dirty&&!D))if(e){const B=h.run();if(s||I||(k?B.some((H,S)=>Lr(H,A[S])):Lr(B,A))){p&&p();const H=fs;fs=h;try{const S=[B,A===Oa?void 0:k&&A[0]===Oa?[]:A,w];A=B,c?c(e,3,S):e(...S)}finally{fs=H}}}else h.run()};return l&&l(x),h=new fy(f),h.scheduler=o?()=>o(x,!1):x,w=D=>OI(D,!1,h),p=h.onStop=()=>{const D=bl.get(h);if(D){if(c)c(D,4);else for(const B of D)B();bl.delete(h)}},e?r?x(!0):A=h.run():o?o(x.bind(null,!0),!0):h.run(),F.pause=h.pause.bind(h),F.resume=h.resume.bind(h),F.stop=F,F}function Gn(t,e=1/0,n){if(e<=0||!Je(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ot(t))Gn(t.value,e,n);else if(ve(t))for(let r=0;r<t.length;r++)Gn(t[r],e,n);else if(ry(t)||ii(t))t.forEach(r=>{Gn(r,e,n)});else if(oy(t)){for(const r in t)Gn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Gn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jo(t,e,n,r){try{return r?t(...r):t()}catch(s){dc(s,e,n)}}function In(t,e,n,r){if(Ie(t)){const s=Jo(t,e,n,r);return s&&sy(s)&&s.catch(i=>{dc(i,e,n)}),s}if(ve(t)){const s=[];for(let i=0;i<t.length;i++)s.push(In(t[i],e,n,r));return s}}function dc(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||He;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,u)===!1)return}l=l.parent}if(i){Zn(),Jo(i,null,10,[t,c,u]),er();return}}MI(t,n,s,r,o)}function MI(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Bt=[];let Cn=-1;const oi=[];let Sr=null,Js=0;const xy=Promise.resolve();let El=null;function Qt(t){const e=El||xy;return t?e.then(this?t.bind(this):t):e}function LI(t){let e=Cn+1,n=Bt.length;for(;e<n;){const r=e+n>>>1,s=Bt[r],i=xo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Ed(t){if(!(t.flags&1)){const e=xo(t),n=Bt[Bt.length-1];!n||!(t.flags&2)&&e>=xo(n)?Bt.push(t):Bt.splice(LI(e),0,t),t.flags|=1,Dy()}}function Dy(){El||(El=xy.then(Oy))}function FI(t){ve(t)?oi.push(...t):Sr&&t.id===-1?Sr.splice(Js+1,0,t):t.flags&1||(oi.push(t),t.flags|=1),Dy()}function Fp(t,e,n=Cn+1){for(;n<Bt.length;n++){const r=Bt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Bt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ny(t){if(oi.length){const e=[...new Set(oi)].sort((n,r)=>xo(n)-xo(r));if(oi.length=0,Sr){Sr.push(...e);return}for(Sr=e,Js=0;Js<Sr.length;Js++){const n=Sr[Js];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Sr=null,Js=0}}const xo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Oy(t){try{for(Cn=0;Cn<Bt.length;Cn++){const e=Bt[Cn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Jo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Cn<Bt.length;Cn++){const e=Bt[Cn];e&&(e.flags&=-2)}Cn=-1,Bt.length=0,Ny(),El=null,(Bt.length||oi.length)&&Oy()}}let At=null,Vy=null;function Tl(t){const e=At;return At=t,Vy=t&&t.type.__scopeId||null,e}function UI(t,e=At,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Xp(-1);const i=Tl(e);let o;try{o=t(...s)}finally{Tl(i),r._d&&Xp(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function My(t,e){if(At===null)return t;const n=vc(At),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,l,c=He]=e[s];i&&(Ie(i)&&(i={mounted:i,updated:i}),i.deep&&Gn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function cs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(Zn(),In(c,n,8,[t.el,l,t,e]),er())}}const Ly=Symbol("_vte"),Fy=t=>t.__isTeleport,po=t=>t&&(t.disabled||t.disabled===""),Up=t=>t&&(t.defer||t.defer===""),$p=t=>typeof SVGElement<"u"&&t instanceof SVGElement,qp=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,fh=(t,e)=>{const n=t&&t.to;return Xe(n)?e?e(n):null:n},Uy={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,l,c,u){const{mc:h,pc:f,pbc:p,o:{insert:w,querySelector:I,createText:k,createComment:P}}=u,F=po(e.props);let{shapeFlag:A,children:x,dynamicChildren:D}=e;if(t==null){const B=e.el=k(""),H=e.anchor=k("");w(B,n,r),w(H,n,r);const S=(y,E)=>{A&16&&(s&&s.isCE&&(s.ce._teleportTarget=y),h(x,y,E,s,i,o,l,c))},b=()=>{const y=e.target=fh(e.props,I),E=$y(y,e,k,w);y&&(o!=="svg"&&$p(y)?o="svg":o!=="mathml"&&qp(y)&&(o="mathml"),F||(S(y,E),Za(e,!1)))};F&&(S(n,H),Za(e,!0)),Up(e.props)?(e.el.__isMounted=!1,ht(()=>{b(),delete e.el.__isMounted},i)):b()}else{if(Up(e.props)&&t.el.__isMounted===!1){ht(()=>{Uy.process(t,e,n,r,s,i,o,l,c,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const B=e.anchor=t.anchor,H=e.target=t.target,S=e.targetAnchor=t.targetAnchor,b=po(t.props),y=b?n:H,E=b?B:S;if(o==="svg"||$p(H)?o="svg":(o==="mathml"||qp(H))&&(o="mathml"),D?(p(t.dynamicChildren,D,y,s,i,o,l),Cd(t,e,!0)):c||f(t,e,y,E,s,i,o,l,!1),F)b?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Va(e,n,B,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const v=e.target=fh(e.props,I);v&&Va(e,v,null,u,0)}else b&&Va(e,H,S,u,1);Za(e,F)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:f,props:p}=t;if(f&&(s(u),s(h)),i&&s(c),o&16){const w=i||!po(p);for(let I=0;I<l.length;I++){const k=l[I];r(k,e,n,w,!!k.dynamicChildren)}}},move:Va,hydrate:$I};function Va(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=t,f=i===2;if(f&&r(o,e,n),(!f||po(h))&&c&16)for(let p=0;p<u.length;p++)s(u[p],e,n,2);f&&r(l,e,n)}function $I(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},f){const p=e.target=fh(e.props,c);if(p){const w=po(e.props),I=p._lpa||p.firstChild;if(e.shapeFlag&16)if(w)e.anchor=f(o(t),e,l(t),n,r,s,i),e.targetStart=I,e.targetAnchor=I&&o(I);else{e.anchor=o(t);let k=I;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||$y(p,e,h,u),f(I&&o(I),e,p,n,r,s,i)}Za(e,w)}return e.anchor&&o(e.anchor)}const qI=Uy;function Za(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function $y(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[Ly]=i,t&&(r(s,t),r(i,t)),i}const Ar=Symbol("_leaveCb"),Ma=Symbol("_enterCb");function qy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hr(()=>{t.isMounted=!0}),mn(()=>{t.isUnmounting=!0}),t}const on=[Function,Array],By={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:on,onEnter:on,onAfterEnter:on,onEnterCancelled:on,onBeforeLeave:on,onLeave:on,onAfterLeave:on,onLeaveCancelled:on,onBeforeAppear:on,onAppear:on,onAfterAppear:on,onAppearCancelled:on},jy=t=>{const e=t.subTree;return e.component?jy(e.component):e},BI={name:"BaseTransition",props:By,setup(t,{slots:e}){const n=et(),r=qy();return()=>{const s=e.default&&Td(e.default(),!0);if(!s||!s.length)return;const i=zy(s),o=Ae(t),{mode:l}=o;if(r.isLeaving)return wu(i);const c=Bp(i);if(!c)return wu(i);let u=Do(c,o,r,n,f=>u=f);c.type!==It&&Hr(c,u);let h=n.subTree&&Bp(n.subTree);if(h&&h.type!==It&&!kr(c,h)&&jy(n).type!==It){let f=Do(h,o,r,n);if(Hr(h,f),l==="out-in"&&c.type!==It)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},wu(i);l==="in-out"&&c.type!==It?f.delayLeave=(p,w,I)=>{const k=Hy(r,h);k[String(h.key)]=h,p[Ar]=()=>{w(),p[Ar]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{I(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function zy(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==It){e=n;break}}return e}const jI=BI;function Hy(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Do(t,e,n,r,s){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:w,onAfterLeave:I,onLeaveCancelled:k,onBeforeAppear:P,onAppear:F,onAfterAppear:A,onAppearCancelled:x}=e,D=String(t.key),B=Hy(n,t),H=(y,E)=>{y&&In(y,r,9,E)},S=(y,E)=>{const v=E[1];H(y,E),ve(y)?y.every(g=>g.length<=1)&&v():y.length<=1&&v()},b={mode:o,persisted:l,beforeEnter(y){let E=c;if(!n.isMounted)if(i)E=P||c;else return;y[Ar]&&y[Ar](!0);const v=B[D];v&&kr(t,v)&&v.el[Ar]&&v.el[Ar](),H(E,[y])},enter(y){let E=u,v=h,g=f;if(!n.isMounted)if(i)E=F||u,v=A||h,g=x||f;else return;let _=!1;const N=y[Ma]=ee=>{_||(_=!0,ee?H(g,[y]):H(v,[y]),b.delayedLeave&&b.delayedLeave(),y[Ma]=void 0)};E?S(E,[y,N]):N()},leave(y,E){const v=String(t.key);if(y[Ma]&&y[Ma](!0),n.isUnmounting)return E();H(p,[y]);let g=!1;const _=y[Ar]=N=>{g||(g=!0,E(),N?H(k,[y]):H(I,[y]),y[Ar]=void 0,B[v]===t&&delete B[v])};B[v]=t,w?S(w,[y,_]):_()},clone(y){const E=Do(y,e,n,r,s);return s&&s(E),E}};return b}function wu(t){if(pc(t))return t=tr(t),t.children=null,t}function Bp(t){if(!pc(t))return Fy(t.type)&&t.children?zy(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ie(n.default))return n.default()}}function Hr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Hr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Td(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Gt?(o.patchFlag&128&&s++,r=r.concat(Td(o.children,e,l))):(e||o.type!==It)&&r.push(l!=null?tr(o,{key:l}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function fc(t,e){return Ie(t)?pt({name:t.name},e,{setup:t}):t}function Wy(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function mo(t,e,n,r,s=!1){if(ve(t)){t.forEach((I,k)=>mo(I,e&&(ve(e)?e[k]:e),n,r,s));return}if(bs(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&mo(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?vc(r.component):r.el,o=s?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===He?l.refs={}:l.refs,f=l.setupState,p=Ae(f),w=f===He?()=>!1:I=>$e(p,I);if(u!=null&&u!==c&&(Xe(u)?(h[u]=null,w(u)&&(f[u]=null)):ot(u)&&(u.value=null)),Ie(c))Jo(c,l,12,[o,h]);else{const I=Xe(c),k=ot(c);if(I||k){const P=()=>{if(t.f){const F=I?w(c)?f[c]:h[c]:c.value;s?ve(F)&&fd(F,i):ve(F)?F.includes(i)||F.push(i):I?(h[c]=[i],w(c)&&(f[c]=h[c])):(c.value=[i],t.k&&(h[t.k]=c.value))}else I?(h[c]=o,w(c)&&(f[c]=o)):k&&(c.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,ht(P,n)):P()}}}lc().requestIdleCallback;lc().cancelIdleCallback;const bs=t=>!!t.type.__asyncLoader,pc=t=>t.type.__isKeepAlive,zI={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=et(),r=n.ctx;if(!r.renderer)return()=>{const A=e.default&&e.default();return A&&A.length===1?A[0]:A};const s=new Map,i=new Set;let o=null;const l=n.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(A,x,D,B,H)=>{const S=A.component;u(A,x,D,0,l),c(S.vnode,A,x,D,S,l,B,A.slotScopeIds,H),ht(()=>{S.isDeactivated=!1,S.a&&uo(S.a);const b=A.props&&A.props.onVnodeMounted;b&&ln(b,S.parent,A)},l)},r.deactivate=A=>{const x=A.component;Sl(x.m),Sl(x.a),u(A,p,null,1,l),ht(()=>{x.da&&uo(x.da);const D=A.props&&A.props.onVnodeUnmounted;D&&ln(D,x.parent,A),x.isDeactivated=!0},l)};function w(A){bu(A),h(A,n,l,!0)}function I(A){s.forEach((x,D)=>{const B=vh(x.type);B&&!A(B)&&k(D)})}function k(A){const x=s.get(A);x&&(!o||!kr(x,o))?w(x):o&&bu(o),s.delete(A),i.delete(A)}We(()=>[t.include,t.exclude],([A,x])=>{A&&I(D=>eo(A,D)),x&&I(D=>!eo(x,D))},{flush:"post",deep:!0});let P=null;const F=()=>{P!=null&&(Al(n.subTree.type)?ht(()=>{s.set(P,La(n.subTree))},n.subTree.suspense):s.set(P,La(n.subTree)))};return hr(F),Id(F),mn(()=>{s.forEach(A=>{const{subTree:x,suspense:D}=n,B=La(x);if(A.type===B.type&&A.key===B.key){bu(B);const H=B.component.da;H&&ht(H,D);return}w(A)})}),()=>{if(P=null,!e.default)return o=null;const A=e.default(),x=A[0];if(A.length>1)return o=null,A;if(!hi(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let D=La(x);if(D.type===It)return o=null,D;const B=D.type,H=vh(bs(D)?D.type.__asyncResolved||{}:B),{include:S,exclude:b,max:y}=t;if(S&&(!H||!eo(S,H))||b&&H&&eo(b,H))return D.shapeFlag&=-257,o=D,x;const E=D.key==null?B:D.key,v=s.get(E);return D.el&&(D=tr(D),x.shapeFlag&128&&(x.ssContent=D)),P=E,v?(D.el=v.el,D.component=v.component,D.transition&&Hr(D,D.transition),D.shapeFlag|=512,i.delete(E),i.add(E)):(i.add(E),y&&i.size>parseInt(y,10)&&k(i.values().next().value)),D.shapeFlag|=256,o=D,Al(x.type)?x:D}}},jM=zI;function eo(t,e){return ve(t)?t.some(n=>eo(n,e)):Xe(t)?t.split(",").includes(e):KT(t)?(t.lastIndex=0,t.test(e)):!1}function Ky(t,e){Gy(t,"a",e)}function mc(t,e){Gy(t,"da",e)}function Gy(t,e,n=Lt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(gc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)pc(s.parent.vnode)&&HI(r,e,n,s),s=s.parent}}function HI(t,e,n,r){const s=gc(e,t,r,!0);Sd(()=>{fd(r[e],s)},n)}function bu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function La(t){return t.shapeFlag&128?t.ssContent:t}function gc(t,e,n=Lt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Zn();const l=Zo(n),c=In(e,n,t,o);return l(),er(),c});return r?s.unshift(i):s.push(i),i}}const ur=t=>(e,n=Lt)=>{(!Oo||t==="sp")&&gc(t,(...r)=>e(...r),n)},WI=ur("bm"),hr=ur("m"),Qy=ur("bu"),Id=ur("u"),mn=ur("bum"),Sd=ur("um"),KI=ur("sp"),GI=ur("rtg"),QI=ur("rtc");function YI(t,e=Lt){gc("ec",t,e)}const Yy="components";function XI(t,e){return Jy(Yy,t,!0,e)||t}const Xy=Symbol.for("v-ndc");function zM(t){return Xe(t)?Jy(Yy,t,!1)||t:t||Xy}function Jy(t,e,n=!0,r=!1){const s=At||Lt;if(s){const i=s.type;{const l=vh(i,!1);if(l&&(l===e||l===pn(e)||l===ac(pn(e))))return i}const o=jp(s[t]||i[t],e)||jp(s.appContext[t],e);return!o&&r?i:o}}function jp(t,e){return t&&(t[e]||t[pn(e)]||t[ac(pn(e))])}function HM(t,e,n,r){let s;const i=n,o=ve(t);if(o||Xe(t)){const l=o&&Fr(t);let c=!1,u=!1;l&&(c=!hn(t),u=zr(t),t=hc(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?u?wl(Tt(t[h])):Tt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,i)}else if(Je(t))if(t[Symbol.iterator])s=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);s=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function WM(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ve(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function KM(t,e,n={},r,s){if(At.ce||At.parent&&bs(At.parent)&&At.parent.ce)return e!=="default"&&(n.name=e),Rl(),Cl(Gt,null,[jt("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),Rl();const o=i&&Zy(i(n)),l=n.key||o&&o.key,c=Cl(Gt,{key:(l&&!cr(l)?l:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function Zy(t){return t.some(e=>hi(e)?!(e.type===It||e.type===Gt&&!Zy(e.children)):!0)?t:null}const ph=t=>t?yv(t)?vc(t):ph(t.parent):null,go=pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ph(t.parent),$root:t=>ph(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>tv(t),$forceUpdate:t=>t.f||(t.f=()=>{Ed(t.update)}),$nextTick:t=>t.n||(t.n=Qt.bind(t.proxy)),$watch:t=>v0.bind(t)}),Eu=(t,e)=>t!==He&&!t.__isScriptSetup&&$e(t,e),JI={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Eu(r,e))return o[e]=1,r[e];if(s!==He&&$e(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&$e(u,e))return o[e]=3,i[e];if(n!==He&&$e(n,e))return o[e]=4,n[e];mh&&(o[e]=0)}}const h=go[e];let f,p;if(h)return e==="$attrs"&&Vt(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==He&&$e(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,$e(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Eu(s,e)?(s[e]=n,!0):r!==He&&$e(r,e)?(r[e]=n,!0):$e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let l;return!!n[o]||t!==He&&$e(t,o)||Eu(e,o)||(l=i[0])&&$e(l,o)||$e(r,o)||$e(go,o)||$e(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:$e(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function zp(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let mh=!0;function ZI(t){const e=tv(t),n=t.proxy,r=t.ctx;mh=!1,e.beforeCreate&&Hp(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:w,updated:I,activated:k,deactivated:P,beforeDestroy:F,beforeUnmount:A,destroyed:x,unmounted:D,render:B,renderTracked:H,renderTriggered:S,errorCaptured:b,serverPrefetch:y,expose:E,inheritAttrs:v,components:g,directives:_,filters:N}=e;if(u&&e0(u,r,null),o)for(const L in o){const M=o[L];Ie(M)&&(r[L]=M.bind(n))}if(s){const L=s.call(n,n);Je(L)&&(t.data=Ns(L))}if(mh=!0,i)for(const L in i){const M=i[L],z=Ie(M)?M.bind(n,n):Ie(M.get)?M.get.bind(n,n):Dn,ce=!Ie(M)&&Ie(M.set)?M.set.bind(n):Dn,ie=q({get:z,set:ce});Object.defineProperty(r,L,{enumerable:!0,configurable:!0,get:()=>ie.value,set:U=>ie.value=U})}if(l)for(const L in l)ev(l[L],r,n,L);if(c){const L=Ie(c)?c.call(n):c;Reflect.ownKeys(L).forEach(M=>{el(M,L[M])})}h&&Hp(h,t,"c");function X(L,M){ve(M)?M.forEach(z=>L(z.bind(n))):M&&L(M.bind(n))}if(X(WI,f),X(hr,p),X(Qy,w),X(Id,I),X(Ky,k),X(mc,P),X(YI,b),X(QI,H),X(GI,S),X(mn,A),X(Sd,D),X(KI,y),ve(E))if(E.length){const L=t.exposed||(t.exposed={});E.forEach(M=>{Object.defineProperty(L,M,{get:()=>n[M],set:z=>n[M]=z,enumerable:!0})})}else t.exposed||(t.exposed={});B&&t.render===Dn&&(t.render=B),v!=null&&(t.inheritAttrs=v),g&&(t.components=g),_&&(t.directives=_),y&&Wy(t)}function e0(t,e,n=Dn){ve(t)&&(t=gh(t));for(const r in t){const s=t[r];let i;Je(s)?"default"in s?i=Jt(s.from||r,s.default,!0):i=Jt(s.from||r):i=Jt(s),ot(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Hp(t,e,n){In(ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ev(t,e,n,r){let s=r.includes(".")?fv(n,r):()=>n[r];if(Xe(t)){const i=e[t];Ie(i)&&We(s,i)}else if(Ie(t))We(s,t.bind(n));else if(Je(t))if(ve(t))t.forEach(i=>ev(i,e,n,r));else{const i=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(i)&&We(s,i,t)}}function tv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Il(c,u,o,!0)),Il(c,e,o)),Je(e)&&i.set(e,c),c}function Il(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Il(t,i,n,!0),s&&s.forEach(o=>Il(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const l=t0[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const t0={data:Wp,props:Kp,emits:Kp,methods:to,computed:to,beforeCreate:qt,created:qt,beforeMount:qt,mounted:qt,beforeUpdate:qt,updated:qt,beforeDestroy:qt,beforeUnmount:qt,destroyed:qt,unmounted:qt,activated:qt,deactivated:qt,errorCaptured:qt,serverPrefetch:qt,components:to,directives:to,watch:r0,provide:Wp,inject:n0};function Wp(t,e){return e?t?function(){return pt(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function n0(t,e){return to(gh(t),gh(e))}function gh(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function qt(t,e){return t?[...new Set([].concat(t,e))]:e}function to(t,e){return t?pt(Object.create(null),t,e):e}function Kp(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:pt(Object.create(null),zp(t),zp(e??{})):e}function r0(t,e){if(!t)return e;if(!e)return t;const n=pt(Object.create(null),t);for(const r in e)n[r]=qt(t[r],e[r]);return n}function nv(){return{app:null,config:{isNativeTag:HT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let s0=0;function i0(t,e){return function(r,s=null){Ie(r)||(r=pt({},r)),s!=null&&!Je(s)&&(s=null);const i=nv(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:s0++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:$0,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Ie(h.install)?(o.add(h),h.install(u,...f)):Ie(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!c){const w=u._ceVNode||jt(r,s);return w.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(w,h,p),c=!0,u._container=h,h.__vue_app__=u,vc(w.component)}},onUnmount(h){l.push(h)},unmount(){c&&(In(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=Es;Es=u;try{return h()}finally{Es=f}}};return u}}let Es=null;function el(t,e){if(Lt){let n=Lt.provides;const r=Lt.parent&&Lt.parent.provides;r===n&&(n=Lt.provides=Object.create(r)),n[t]=e}}function Jt(t,e,n=!1){const r=et();if(r||Es){let s=Es?Es._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ie(e)?e.call(r&&r.proxy):e}}function o0(){return!!(et()||Es)}const rv={},sv=()=>Object.create(rv),iv=t=>Object.getPrototypeOf(t)===rv;function a0(t,e,n,r=!1){const s={},i=sv();t.propsDefaults=Object.create(null),ov(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Ry(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function l0(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,l=Ae(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(_c(t.emitsOptions,p))continue;const w=e[p];if(c)if($e(i,p))w!==i[p]&&(i[p]=w,u=!0);else{const I=pn(p);s[I]=_h(c,l,I,w,t,!1)}else w!==i[p]&&(i[p]=w,u=!0)}}}else{ov(t,e,s,i)&&(u=!0);let h;for(const f in l)(!e||!$e(e,f)&&((h=ts(f))===f||!$e(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=_h(c,l,f,void 0,t,!0)):delete s[f]);if(i!==l)for(const f in i)(!e||!$e(e,f))&&(delete i[f],u=!0)}u&&Kn(t.attrs,"set","")}function ov(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(co(c))continue;const u=e[c];let h;s&&$e(s,h=pn(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:_c(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Ae(n),u=l||He;for(let h=0;h<i.length;h++){const f=i[h];n[f]=_h(s,c,f,u[f],t,!$e(u,f))}}return o}function _h(t,e,n,r,s,i){const o=t[n];if(o!=null){const l=$e(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Zo(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===ts(n))&&(r=!0))}return r}const c0=new WeakMap;function av(t,e,n=!1){const r=n?c0:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},l=[];let c=!1;if(!Ie(t)){const h=f=>{c=!0;const[p,w]=av(f,e,!0);pt(o,p),w&&l.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Je(t)&&r.set(t,si),si;if(ve(i))for(let h=0;h<i.length;h++){const f=pn(i[h]);Gp(f)&&(o[f]=He)}else if(i)for(const h in i){const f=pn(h);if(Gp(f)){const p=i[h],w=o[f]=ve(p)||Ie(p)?{type:p}:pt({},p),I=w.type;let k=!1,P=!0;if(ve(I))for(let F=0;F<I.length;++F){const A=I[F],x=Ie(A)&&A.name;if(x==="Boolean"){k=!0;break}else x==="String"&&(P=!1)}else k=Ie(I)&&I.name==="Boolean";w[0]=k,w[1]=P,(k||$e(w,"default"))&&l.push(f)}}const u=[o,l];return Je(t)&&r.set(t,u),u}function Gp(t){return t[0]!=="$"&&!co(t)}const Ad=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",Rd=t=>ve(t)?t.map(kn):[kn(t)],u0=(t,e,n)=>{if(e._n)return e;const r=UI((...s)=>Rd(e(...s)),n);return r._c=!1,r},lv=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ad(s))continue;const i=t[s];if(Ie(i))e[s]=u0(s,i,r);else if(i!=null){const o=Rd(i);e[s]=()=>o}}},cv=(t,e)=>{const n=Rd(e);t.slots.default=()=>n},uv=(t,e,n)=>{for(const r in e)(n||!Ad(r))&&(t[r]=e[r])},h0=(t,e,n)=>{const r=t.slots=sv();if(t.vnode.shapeFlag&32){const s=e.__;s&&ch(r,"__",s,!0);const i=e._;i?(uv(r,e,n),n&&ch(r,"_",i,!0)):lv(e,r)}else e&&cv(t,e)},d0=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=He;if(r.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:uv(s,e,n):(i=!e.$stable,lv(e,s)),o=e}else e&&(cv(t,e),o={default:1});if(i)for(const l in s)!Ad(l)&&o[l]==null&&delete s[l]},ht=A0;function f0(t){return p0(t)}function p0(t,e){const n=lc();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:w=Dn,insertStaticContent:I}=t,k=(R,C,O,G=null,J=null,Q=null,le=void 0,ne=null,te=!!C.dynamicChildren)=>{if(R===C)return;R&&!kr(R,C)&&(G=$(R),U(R,J,Q,!0),R=null),C.patchFlag===-2&&(te=!1,C.dynamicChildren=null);const{type:Z,ref:ge,shapeFlag:ae}=C;switch(Z){case yc:P(R,C,O,G);break;case It:F(R,C,O,G);break;case Iu:R==null&&A(C,O,G,le);break;case Gt:g(R,C,O,G,J,Q,le,ne,te);break;default:ae&1?B(R,C,O,G,J,Q,le,ne,te):ae&6?_(R,C,O,G,J,Q,le,ne,te):(ae&64||ae&128)&&Z.process(R,C,O,G,J,Q,le,ne,te,fe)}ge!=null&&J?mo(ge,R&&R.ref,Q,C||R,!C):ge==null&&R&&R.ref!=null&&mo(R.ref,null,Q,R,!0)},P=(R,C,O,G)=>{if(R==null)r(C.el=l(C.children),O,G);else{const J=C.el=R.el;C.children!==R.children&&u(J,C.children)}},F=(R,C,O,G)=>{R==null?r(C.el=c(C.children||""),O,G):C.el=R.el},A=(R,C,O,G)=>{[R.el,R.anchor]=I(R.children,C,O,G,R.el,R.anchor)},x=({el:R,anchor:C},O,G)=>{let J;for(;R&&R!==C;)J=p(R),r(R,O,G),R=J;r(C,O,G)},D=({el:R,anchor:C})=>{let O;for(;R&&R!==C;)O=p(R),s(R),R=O;s(C)},B=(R,C,O,G,J,Q,le,ne,te)=>{C.type==="svg"?le="svg":C.type==="math"&&(le="mathml"),R==null?H(C,O,G,J,Q,le,ne,te):y(R,C,J,Q,le,ne,te)},H=(R,C,O,G,J,Q,le,ne)=>{let te,Z;const{props:ge,shapeFlag:ae,transition:me,dirs:be}=R;if(te=R.el=o(R.type,Q,ge&&ge.is,ge),ae&8?h(te,R.children):ae&16&&b(R.children,te,null,G,J,Tu(R,Q),le,ne),be&&cs(R,null,G,"created"),S(te,R,R.scopeId,le,G),ge){for(const Re in ge)Re!=="value"&&!co(Re)&&i(te,Re,null,ge[Re],Q,G);"value"in ge&&i(te,"value",null,ge.value,Q),(Z=ge.onVnodeBeforeMount)&&ln(Z,G,R)}be&&cs(R,null,G,"beforeMount");const ye=m0(J,me);ye&&me.beforeEnter(te),r(te,C,O),((Z=ge&&ge.onVnodeMounted)||ye||be)&&ht(()=>{Z&&ln(Z,G,R),ye&&me.enter(te),be&&cs(R,null,G,"mounted")},J)},S=(R,C,O,G,J)=>{if(O&&w(R,O),G)for(let Q=0;Q<G.length;Q++)w(R,G[Q]);if(J){let Q=J.subTree;if(C===Q||Al(Q.type)&&(Q.ssContent===C||Q.ssFallback===C)){const le=J.vnode;S(R,le,le.scopeId,le.slotScopeIds,J.parent)}}},b=(R,C,O,G,J,Q,le,ne,te=0)=>{for(let Z=te;Z<R.length;Z++){const ge=R[Z]=ne?Rr(R[Z]):kn(R[Z]);k(null,ge,C,O,G,J,Q,le,ne)}},y=(R,C,O,G,J,Q,le)=>{const ne=C.el=R.el;let{patchFlag:te,dynamicChildren:Z,dirs:ge}=C;te|=R.patchFlag&16;const ae=R.props||He,me=C.props||He;let be;if(O&&us(O,!1),(be=me.onVnodeBeforeUpdate)&&ln(be,O,C,R),ge&&cs(C,R,O,"beforeUpdate"),O&&us(O,!0),(ae.innerHTML&&me.innerHTML==null||ae.textContent&&me.textContent==null)&&h(ne,""),Z?E(R.dynamicChildren,Z,ne,O,G,Tu(C,J),Q):le||M(R,C,ne,null,O,G,Tu(C,J),Q,!1),te>0){if(te&16)v(ne,ae,me,O,J);else if(te&2&&ae.class!==me.class&&i(ne,"class",null,me.class,J),te&4&&i(ne,"style",ae.style,me.style,J),te&8){const ye=C.dynamicProps;for(let Re=0;Re<ye.length;Re++){const Oe=ye[Re],gt=ae[Oe],_t=me[Oe];(_t!==gt||Oe==="value")&&i(ne,Oe,gt,_t,J,O)}}te&1&&R.children!==C.children&&h(ne,C.children)}else!le&&Z==null&&v(ne,ae,me,O,J);((be=me.onVnodeUpdated)||ge)&&ht(()=>{be&&ln(be,O,C,R),ge&&cs(C,R,O,"updated")},G)},E=(R,C,O,G,J,Q,le)=>{for(let ne=0;ne<C.length;ne++){const te=R[ne],Z=C[ne],ge=te.el&&(te.type===Gt||!kr(te,Z)||te.shapeFlag&198)?f(te.el):O;k(te,Z,ge,null,G,J,Q,le,!0)}},v=(R,C,O,G,J)=>{if(C!==O){if(C!==He)for(const Q in C)!co(Q)&&!(Q in O)&&i(R,Q,C[Q],null,J,G);for(const Q in O){if(co(Q))continue;const le=O[Q],ne=C[Q];le!==ne&&Q!=="value"&&i(R,Q,ne,le,J,G)}"value"in O&&i(R,"value",C.value,O.value,J)}},g=(R,C,O,G,J,Q,le,ne,te)=>{const Z=C.el=R?R.el:l(""),ge=C.anchor=R?R.anchor:l("");let{patchFlag:ae,dynamicChildren:me,slotScopeIds:be}=C;be&&(ne=ne?ne.concat(be):be),R==null?(r(Z,O,G),r(ge,O,G),b(C.children||[],O,ge,J,Q,le,ne,te)):ae>0&&ae&64&&me&&R.dynamicChildren?(E(R.dynamicChildren,me,O,J,Q,le,ne),(C.key!=null||J&&C===J.subTree)&&Cd(R,C,!0)):M(R,C,O,ge,J,Q,le,ne,te)},_=(R,C,O,G,J,Q,le,ne,te)=>{C.slotScopeIds=ne,R==null?C.shapeFlag&512?J.ctx.activate(C,O,G,le,te):N(C,O,G,J,Q,le,te):ee(R,C,te)},N=(R,C,O,G,J,Q,le)=>{const ne=R.component=O0(R,G,J);if(pc(R)&&(ne.ctx.renderer=fe),V0(ne,!1,le),ne.asyncDep){if(J&&J.registerDep(ne,X,le),!R.el){const te=ne.subTree=jt(It);F(null,te,C,O),R.placeholder=te.el}}else X(ne,R,C,O,J,Q,le)},ee=(R,C,O)=>{const G=C.component=R.component;if(I0(R,C,O))if(G.asyncDep&&!G.asyncResolved){L(G,C,O);return}else G.next=C,G.update();else C.el=R.el,G.vnode=C},X=(R,C,O,G,J,Q,le)=>{const ne=()=>{if(R.isMounted){let{next:ae,bu:me,u:be,parent:ye,vnode:Re}=R;{const Pt=hv(R);if(Pt){ae&&(ae.el=Re.el,L(R,ae,le)),Pt.asyncDep.then(()=>{R.isUnmounted||ne()});return}}let Oe=ae,gt;us(R,!1),ae?(ae.el=Re.el,L(R,ae,le)):ae=Re,me&&uo(me),(gt=ae.props&&ae.props.onVnodeBeforeUpdate)&&ln(gt,ye,ae,Re),us(R,!0);const _t=Qp(R),rn=R.subTree;R.subTree=_t,k(rn,_t,f(rn.el),$(rn),R,J,Q),ae.el=_t.el,Oe===null&&S0(R,_t.el),be&&ht(be,J),(gt=ae.props&&ae.props.onVnodeUpdated)&&ht(()=>ln(gt,ye,ae,Re),J)}else{let ae;const{el:me,props:be}=C,{bm:ye,m:Re,parent:Oe,root:gt,type:_t}=R,rn=bs(C);us(R,!1),ye&&uo(ye),!rn&&(ae=be&&be.onVnodeBeforeMount)&&ln(ae,Oe,C),us(R,!0);{gt.ce&&gt.ce._def.shadowRoot!==!1&&gt.ce._injectChildStyle(_t);const Pt=R.subTree=Qp(R);k(null,Pt,O,G,R,J,Q),C.el=Pt.el}if(Re&&ht(Re,J),!rn&&(ae=be&&be.onVnodeMounted)){const Pt=C;ht(()=>ln(ae,Oe,Pt),J)}(C.shapeFlag&256||Oe&&bs(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&R.a&&ht(R.a,J),R.isMounted=!0,C=O=G=null}};R.scope.on();const te=R.effect=new fy(ne);R.scope.off();const Z=R.update=te.run.bind(te),ge=R.job=te.runIfDirty.bind(te);ge.i=R,ge.id=R.uid,te.scheduler=()=>Ed(ge),us(R,!0),Z()},L=(R,C,O)=>{C.component=R;const G=R.vnode.props;R.vnode=C,R.next=null,l0(R,C.props,G,O),d0(R,C.children,O),Zn(),Fp(R),er()},M=(R,C,O,G,J,Q,le,ne,te=!1)=>{const Z=R&&R.children,ge=R?R.shapeFlag:0,ae=C.children,{patchFlag:me,shapeFlag:be}=C;if(me>0){if(me&128){ce(Z,ae,O,G,J,Q,le,ne,te);return}else if(me&256){z(Z,ae,O,G,J,Q,le,ne,te);return}}be&8?(ge&16&&he(Z,J,Q),ae!==Z&&h(O,ae)):ge&16?be&16?ce(Z,ae,O,G,J,Q,le,ne,te):he(Z,J,Q,!0):(ge&8&&h(O,""),be&16&&b(ae,O,G,J,Q,le,ne,te))},z=(R,C,O,G,J,Q,le,ne,te)=>{R=R||si,C=C||si;const Z=R.length,ge=C.length,ae=Math.min(Z,ge);let me;for(me=0;me<ae;me++){const be=C[me]=te?Rr(C[me]):kn(C[me]);k(R[me],be,O,null,J,Q,le,ne,te)}Z>ge?he(R,J,Q,!0,!1,ae):b(C,O,G,J,Q,le,ne,te,ae)},ce=(R,C,O,G,J,Q,le,ne,te)=>{let Z=0;const ge=C.length;let ae=R.length-1,me=ge-1;for(;Z<=ae&&Z<=me;){const be=R[Z],ye=C[Z]=te?Rr(C[Z]):kn(C[Z]);if(kr(be,ye))k(be,ye,O,null,J,Q,le,ne,te);else break;Z++}for(;Z<=ae&&Z<=me;){const be=R[ae],ye=C[me]=te?Rr(C[me]):kn(C[me]);if(kr(be,ye))k(be,ye,O,null,J,Q,le,ne,te);else break;ae--,me--}if(Z>ae){if(Z<=me){const be=me+1,ye=be<ge?C[be].el:G;for(;Z<=me;)k(null,C[Z]=te?Rr(C[Z]):kn(C[Z]),O,ye,J,Q,le,ne,te),Z++}}else if(Z>me)for(;Z<=ae;)U(R[Z],J,Q,!0),Z++;else{const be=Z,ye=Z,Re=new Map;for(Z=ye;Z<=me;Z++){const yt=C[Z]=te?Rr(C[Z]):kn(C[Z]);yt.key!=null&&Re.set(yt.key,Z)}let Oe,gt=0;const _t=me-ye+1;let rn=!1,Pt=0;const mr=new Array(_t);for(Z=0;Z<_t;Z++)mr[Z]=0;for(Z=be;Z<=ae;Z++){const yt=R[Z];if(gt>=_t){U(yt,J,Q,!0);continue}let sn;if(yt.key!=null)sn=Re.get(yt.key);else for(Oe=ye;Oe<=me;Oe++)if(mr[Oe-ye]===0&&kr(yt,C[Oe])){sn=Oe;break}sn===void 0?U(yt,J,Q,!0):(mr[sn-ye]=Z+1,sn>=Pt?Pt=sn:rn=!0,k(yt,C[sn],O,null,J,Q,le,ne,te),gt++)}const xi=rn?g0(mr):si;for(Oe=xi.length-1,Z=_t-1;Z>=0;Z--){const yt=ye+Z,sn=C[yt],ga=C[yt+1],qs=yt+1<ge?ga.el||ga.placeholder:G;mr[Z]===0?k(null,sn,O,qs,J,Q,le,ne,te):rn&&(Oe<0||Z!==xi[Oe]?ie(sn,O,qs,2):Oe--)}}},ie=(R,C,O,G,J=null)=>{const{el:Q,type:le,transition:ne,children:te,shapeFlag:Z}=R;if(Z&6){ie(R.component.subTree,C,O,G);return}if(Z&128){R.suspense.move(C,O,G);return}if(Z&64){le.move(R,C,O,fe);return}if(le===Gt){r(Q,C,O);for(let ae=0;ae<te.length;ae++)ie(te[ae],C,O,G);r(R.anchor,C,O);return}if(le===Iu){x(R,C,O);return}if(G!==2&&Z&1&&ne)if(G===0)ne.beforeEnter(Q),r(Q,C,O),ht(()=>ne.enter(Q),J);else{const{leave:ae,delayLeave:me,afterLeave:be}=ne,ye=()=>{R.ctx.isUnmounted?s(Q):r(Q,C,O)},Re=()=>{ae(Q,()=>{ye(),be&&be()})};me?me(Q,ye,Re):Re()}else r(Q,C,O)},U=(R,C,O,G=!1,J=!1)=>{const{type:Q,props:le,ref:ne,children:te,dynamicChildren:Z,shapeFlag:ge,patchFlag:ae,dirs:me,cacheIndex:be}=R;if(ae===-2&&(J=!1),ne!=null&&(Zn(),mo(ne,null,O,R,!0),er()),be!=null&&(C.renderCache[be]=void 0),ge&256){C.ctx.deactivate(R);return}const ye=ge&1&&me,Re=!bs(R);let Oe;if(Re&&(Oe=le&&le.onVnodeBeforeUnmount)&&ln(Oe,C,R),ge&6)Ne(R.component,O,G);else{if(ge&128){R.suspense.unmount(O,G);return}ye&&cs(R,null,C,"beforeUnmount"),ge&64?R.type.remove(R,C,O,fe,G):Z&&!Z.hasOnce&&(Q!==Gt||ae>0&&ae&64)?he(Z,C,O,!1,!0):(Q===Gt&&ae&384||!J&&ge&16)&&he(te,C,O),G&&pe(R)}(Re&&(Oe=le&&le.onVnodeUnmounted)||ye)&&ht(()=>{Oe&&ln(Oe,C,R),ye&&cs(R,null,C,"unmounted")},O)},pe=R=>{const{type:C,el:O,anchor:G,transition:J}=R;if(C===Gt){Me(O,G);return}if(C===Iu){D(R);return}const Q=()=>{s(O),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(R.shapeFlag&1&&J&&!J.persisted){const{leave:le,delayLeave:ne}=J,te=()=>le(O,Q);ne?ne(R.el,Q,te):te()}else Q()},Me=(R,C)=>{let O;for(;R!==C;)O=p(R),s(R),R=O;s(C)},Ne=(R,C,O)=>{const{bum:G,scope:J,job:Q,subTree:le,um:ne,m:te,a:Z,parent:ge,slots:{__:ae}}=R;Sl(te),Sl(Z),G&&uo(G),ge&&ve(ae)&&ae.forEach(me=>{ge.renderCache[me]=void 0}),J.stop(),Q&&(Q.flags|=8,U(le,R,C,O)),ne&&ht(ne,C),ht(()=>{R.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},he=(R,C,O,G=!1,J=!1,Q=0)=>{for(let le=Q;le<R.length;le++)U(R[le],C,O,G,J)},$=R=>{if(R.shapeFlag&6)return $(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const C=p(R.anchor||R.el),O=C&&C[Ly];return O?p(O):C};let oe=!1;const se=(R,C,O)=>{R==null?C._vnode&&U(C._vnode,null,null,!0):k(C._vnode||null,R,C,null,null,null,O),C._vnode=R,oe||(oe=!0,Fp(),Ny(),oe=!1)},fe={p:k,um:U,m:ie,r:pe,mt:N,mc:b,pc:M,pbc:E,n:$,o:t};return{render:se,hydrate:void 0,createApp:i0(se)}}function Tu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function us({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function m0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Cd(t,e,n=!1){const r=t.children,s=e.children;if(ve(r)&&ve(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=Rr(s[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Cd(o,l)),l.type===yc&&(l.el=o.el),l.type===It&&!l.el&&(l.el=o.el)}}function g0(t){const e=t.slice(),n=[0];let r,s,i,o,l;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function hv(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:hv(e)}function Sl(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const _0=Symbol.for("v-scx"),y0=()=>Jt(_0);function We(t,e,n){return dv(t,e,n)}function dv(t,e,n=He){const{immediate:r,deep:s,flush:i,once:o}=n,l=pt({},n),c=e&&r||!e&&i!=="post";let u;if(Oo){if(i==="sync"){const w=y0();u=w.__watcherHandles||(w.__watcherHandles=[])}else if(!c){const w=()=>{};return w.stop=Dn,w.resume=Dn,w.pause=Dn,w}}const h=Lt;l.call=(w,I,k)=>In(w,h,I,k);let f=!1;i==="post"?l.scheduler=w=>{ht(w,h&&h.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(w,I)=>{I?w():Ed(w)}),l.augmentJob=w=>{e&&(w.flags|=4),f&&(w.flags|=2,h&&(w.id=h.uid,w.i=h))};const p=VI(t,e,l);return Oo&&(u?u.push(p):c&&p()),p}function v0(t,e,n){const r=this.proxy,s=Xe(t)?t.includes(".")?fv(r,t):()=>r[t]:t.bind(r,r);let i;Ie(e)?i=e:(i=e.handler,n=e);const o=Zo(this),l=dv(s,i.bind(r),n);return o(),l}function fv(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const w0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${pn(e)}Modifiers`]||t[`${ts(e)}Modifiers`];function b0(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||He;let s=n;const i=e.startsWith("update:"),o=i&&w0(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Xe(h)?h.trim():h)),o.number&&(s=n.map(XT)));let l,c=r[l=mu(e)]||r[l=mu(pn(e))];!c&&i&&(c=r[l=mu(ts(e))]),c&&In(c,t,6,s);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,In(u,t,6,s)}}function pv(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},l=!1;if(!Ie(t)){const c=u=>{const h=pv(u,e,!0);h&&(l=!0,pt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Je(t)&&r.set(t,null),null):(ve(i)?i.forEach(c=>o[c]=null):pt(o,i),Je(t)&&r.set(t,o),o)}function _c(t,e){return!t||!ic(e)?!1:(e=e.slice(2).replace(/Once$/,""),$e(t,e[0].toLowerCase()+e.slice(1))||$e(t,ts(e))||$e(t,e))}function Qp(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:f,data:p,setupState:w,ctx:I,inheritAttrs:k}=t,P=Tl(t);let F,A;try{if(n.shapeFlag&4){const D=s||r,B=D;F=kn(u.call(B,D,h,f,w,p,I)),A=l}else{const D=e;F=kn(D.length>1?D(f,{attrs:l,slots:o,emit:c}):D(f,null)),A=e.props?l:E0(l)}}catch(D){_o.length=0,dc(D,t,1),F=jt(It)}let x=F;if(A&&k!==!1){const D=Object.keys(A),{shapeFlag:B}=x;D.length&&B&7&&(i&&D.some(dd)&&(A=T0(A,i)),x=tr(x,A,!1,!0))}return n.dirs&&(x=tr(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&Hr(x,n.transition),F=x,Tl(P),F}const E0=t=>{let e;for(const n in t)(n==="class"||n==="style"||ic(n))&&((e||(e={}))[n]=t[n]);return e},T0=(t,e)=>{const n={};for(const r in t)(!dd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function I0(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Yp(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!_c(u,p))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?Yp(r,o,u):!0:!!o;return!1}function Yp(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!_c(n,i))return!0}return!1}function S0({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Al=t=>t.__isSuspense;function A0(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):FI(t)}const Gt=Symbol.for("v-fgt"),yc=Symbol.for("v-txt"),It=Symbol.for("v-cmt"),Iu=Symbol.for("v-stc"),_o=[];let tn=null;function Rl(t=!1){_o.push(tn=t?null:[])}function R0(){_o.pop(),tn=_o[_o.length-1]||null}let No=1;function Xp(t,e=!1){No+=t,t<0&&tn&&e&&(tn.hasOnce=!0)}function mv(t){return t.dynamicChildren=No>0?tn||si:null,R0(),No>0&&tn&&tn.push(t),t}function GM(t,e,n,r,s,i){return mv(_v(t,e,n,r,s,i,!0))}function Cl(t,e,n,r,s){return mv(jt(t,e,n,r,s,!0))}function hi(t){return t?t.__v_isVNode===!0:!1}function kr(t,e){return t.type===e.type&&t.key===e.key}const gv=({key:t})=>t??null,tl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xe(t)||ot(t)||Ie(t)?{i:At,r:t,k:e,f:!!n}:t:null);function _v(t,e=null,n=null,r=0,s=null,i=t===Gt?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&gv(e),ref:e&&tl(e),scopeId:Vy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:At};return l?(Pd(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Xe(n)?8:16),No>0&&!o&&tn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&tn.push(c),c}const jt=C0;function C0(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Xy)&&(t=It),hi(t)){const l=tr(t,e,!0);return n&&Pd(l,n),No>0&&!i&&tn&&(l.shapeFlag&6?tn[tn.indexOf(t)]=l:tn.push(l)),l.patchFlag=-2,l}if(U0(t)&&(t=t.__vccOpts),e){e=P0(e);let{class:l,style:c}=e;l&&!Xe(l)&&(e.class=uc(l)),Je(c)&&(bd(c)&&!ve(c)&&(c=pt({},c)),e.style=cc(c))}const o=Xe(t)?1:Al(t)?128:Fy(t)?64:Je(t)?4:Ie(t)?2:0;return _v(t,e,n,r,s,o,i,!0)}function P0(t){return t?bd(t)||iv(t)?pt({},t):t:null}function tr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?x0(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&gv(u),ref:e&&e.ref?n&&i?ve(i)?i.concat(tl(e)):[i,tl(e)]:tl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Gt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&tr(t.ssContent),ssFallback:t.ssFallback&&tr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Hr(h,c.clone(h)),h}function k0(t=" ",e=0){return jt(yc,null,t,e)}function QM(t="",e=!1){return e?(Rl(),Cl(It,null,t)):jt(It,null,t)}function kn(t){return t==null||typeof t=="boolean"?jt(It):ve(t)?jt(Gt,null,t.slice()):hi(t)?Rr(t):jt(yc,null,String(t))}function Rr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:tr(t)}function Pd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Pd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!iv(e)?e._ctx=At:s===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:At},n=32):(e=String(e),r&64?(n=16,e=[k0(e)]):n=8);t.children=e,t.shapeFlag|=n}function x0(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=uc([e.class,r.class]));else if(s==="style")e.style=cc([e.style,r.style]);else if(ic(s)){const i=e[s],o=r[s];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function ln(t,e,n,r=null){In(t,e,7,[n,r])}const D0=nv();let N0=0;function O0(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||D0,i={uid:N0++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:av(r,s),emitsOptions:pv(r,s),emit:null,emitted:null,propsDefaults:He,inheritAttrs:r.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=b0.bind(null,i),t.ce&&t.ce(i),i}let Lt=null;const et=()=>Lt||At;let Pl,yh;{const t=lc(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Pl=e("__VUE_INSTANCE_SETTERS__",n=>Lt=n),yh=e("__VUE_SSR_SETTERS__",n=>Oo=n)}const Zo=t=>{const e=Lt;return Pl(t),t.scope.on(),()=>{t.scope.off(),Pl(e)}},Jp=()=>{Lt&&Lt.scope.off(),Pl(null)};function yv(t){return t.vnode.shapeFlag&4}let Oo=!1;function V0(t,e=!1,n=!1){e&&yh(e);const{props:r,children:s}=t.vnode,i=yv(t);a0(t,r,i,e),h0(t,s,n||e);const o=i?M0(t,e):void 0;return e&&yh(!1),o}function M0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,JI);const{setup:r}=n;if(r){Zn();const s=t.setupContext=r.length>1?F0(t):null,i=Zo(t),o=Jo(r,t,0,[t.props,s]),l=sy(o);if(er(),i(),(l||t.sp)&&!bs(t)&&Wy(t),l){if(o.then(Jp,Jp),e)return o.then(c=>{Zp(t,c)}).catch(c=>{dc(c,t,0)});t.asyncDep=o}else Zp(t,o)}else vv(t)}function Zp(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Je(e)&&(t.setupState=ky(e)),vv(t)}function vv(t,e,n){const r=t.type;t.render||(t.render=r.render||Dn);{const s=Zo(t);Zn();try{ZI(t)}finally{er(),s()}}}const L0={get(t,e){return Vt(t,"get",""),t[e]}};function F0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,L0),slots:t.slots,emit:t.emit,expose:e}}function vc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ky(Os(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in go)return go[n](t)},has(e,n){return n in e||n in go}})):t.proxy}function vh(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function U0(t){return Ie(t)&&"__vccOpts"in t}const q=(t,e)=>NI(t,e,Oo);function W(t,e,n){const r=arguments.length;return r===2?Je(e)&&!ve(e)?hi(e)?jt(t,null,[e]):jt(t,e):jt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&hi(n)&&(n=[n]),jt(t,e,n))}const $0="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wh;const em=typeof window<"u"&&window.trustedTypes;if(em)try{wh=em.createPolicy("vue",{createHTML:t=>t})}catch{}const wv=wh?t=>wh.createHTML(t):t=>t,q0="http://www.w3.org/2000/svg",B0="http://www.w3.org/1998/Math/MathML",Wn=typeof document<"u"?document:null,tm=Wn&&Wn.createElement("template"),j0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Wn.createElementNS(q0,t):e==="mathml"?Wn.createElementNS(B0,t):n?Wn.createElement(t,{is:n}):Wn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Wn.createTextNode(t),createComment:t=>Wn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Wn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{tm.innerHTML=wv(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=tm.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vr="transition",Hi="animation",di=Symbol("_vtc"),bv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ev=pt({},By,bv),z0=t=>(t.displayName="Transition",t.props=Ev,t),kl=z0((t,{slots:e})=>W(jI,Tv(t),e)),hs=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},nm=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function Tv(t){const e={};for(const g in t)g in bv||(e[g]=t[g]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:w=`${n}-leave-to`}=t,I=H0(s),k=I&&I[0],P=I&&I[1],{onBeforeEnter:F,onEnter:A,onEnterCancelled:x,onLeave:D,onLeaveCancelled:B,onBeforeAppear:H=F,onAppear:S=A,onAppearCancelled:b=x}=e,y=(g,_,N,ee)=>{g._enterCancelled=ee,Tr(g,_?h:l),Tr(g,_?u:o),N&&N()},E=(g,_)=>{g._isLeaving=!1,Tr(g,f),Tr(g,w),Tr(g,p),_&&_()},v=g=>(_,N)=>{const ee=g?S:A,X=()=>y(_,g,N);hs(ee,[_,X]),rm(()=>{Tr(_,g?c:i),Rn(_,g?h:l),nm(ee)||sm(_,r,k,X)})};return pt(e,{onBeforeEnter(g){hs(F,[g]),Rn(g,i),Rn(g,o)},onBeforeAppear(g){hs(H,[g]),Rn(g,c),Rn(g,u)},onEnter:v(!1),onAppear:v(!0),onLeave(g,_){g._isLeaving=!0;const N=()=>E(g,_);Rn(g,f),g._enterCancelled?(Rn(g,p),bh()):(bh(),Rn(g,p)),rm(()=>{g._isLeaving&&(Tr(g,f),Rn(g,w),nm(D)||sm(g,r,P,N))}),hs(D,[g,N])},onEnterCancelled(g){y(g,!1,void 0,!0),hs(x,[g])},onAppearCancelled(g){y(g,!0,void 0,!0),hs(b,[g])},onLeaveCancelled(g){E(g),hs(B,[g])}})}function H0(t){if(t==null)return null;if(Je(t))return[Su(t.enter),Su(t.leave)];{const e=Su(t);return[e,e]}}function Su(t){return JT(t)}function Rn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[di]||(t[di]=new Set)).add(e)}function Tr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[di];n&&(n.delete(e),n.size||(t[di]=void 0))}function rm(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let W0=0;function sm(t,e,n,r){const s=t._endId=++W0,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=Iv(t,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=w=>{w.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},l+1),t.addEventListener(u,p)}function Iv(t,e){const n=window.getComputedStyle(t),r=I=>(n[I]||"").split(", "),s=r(`${vr}Delay`),i=r(`${vr}Duration`),o=im(s,i),l=r(`${Hi}Delay`),c=r(`${Hi}Duration`),u=im(l,c);let h=null,f=0,p=0;e===vr?o>0&&(h=vr,f=o,p=i.length):e===Hi?u>0&&(h=Hi,f=u,p=c.length):(f=Math.max(o,u),h=f>0?o>u?vr:Hi:null,p=h?h===vr?i.length:c.length:0);const w=h===vr&&/\b(transform|all)(,|$)/.test(r(`${vr}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:w}}function im(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>om(n)+om(t[r])))}function om(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function bh(){return document.body.offsetHeight}function K0(t,e,n){const r=t[di];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const xl=Symbol("_vod"),Sv=Symbol("_vsh"),YM={beforeMount(t,{value:e},{transition:n}){t[xl]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Wi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Wi(t,!0),r.enter(t)):r.leave(t,()=>{Wi(t,!1)}):Wi(t,e))},beforeUnmount(t,{value:e}){Wi(t,e)}};function Wi(t,e){t.style.display=e?t[xl]:"none",t[Sv]=!e}const G0=Symbol(""),Q0=/(^|;)\s*display\s*:/;function Y0(t,e,n){const r=t.style,s=Xe(n);let i=!1;if(n&&!s){if(e)if(Xe(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&nl(r,l,"")}else for(const o in e)n[o]==null&&nl(r,o,"");for(const o in n)o==="display"&&(i=!0),nl(r,o,n[o])}else if(s){if(e!==n){const o=r[G0];o&&(n+=";"+o),r.cssText=n,i=Q0.test(n)}}else e&&t.removeAttribute("style");xl in t&&(t[xl]=i?r.display:"",t[Sv]&&(r.display="none"))}const am=/\s*!important$/;function nl(t,e,n){if(ve(n))n.forEach(r=>nl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=X0(t,e);am.test(n)?t.setProperty(ts(r),n.replace(am,""),"important"):t[r]=n}}const lm=["Webkit","Moz","ms"],Au={};function X0(t,e){const n=Au[e];if(n)return n;let r=pn(e);if(r!=="filter"&&r in t)return Au[e]=r;r=ac(r);for(let s=0;s<lm.length;s++){const i=lm[s]+r;if(i in t)return Au[e]=i}return e}const cm="http://www.w3.org/1999/xlink";function um(t,e,n,r,s,i=sI(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(cm,e.slice(6,e.length)):t.setAttributeNS(cm,e,n):n==null||i&&!ay(n)?t.removeAttribute(e):t.setAttribute(e,i?"":cr(n)?String(n):n)}function hm(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?wv(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=ay(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function J0(t,e,n,r){t.addEventListener(e,n,r)}function Z0(t,e,n,r){t.removeEventListener(e,n,r)}const dm=Symbol("_vei");function eS(t,e,n,r,s=null){const i=t[dm]||(t[dm]={}),o=i[e];if(r&&o)o.value=r;else{const[l,c]=tS(e);if(r){const u=i[e]=sS(r,s);J0(t,l,u,c)}else o&&(Z0(t,l,o,c),i[e]=void 0)}}const fm=/(?:Once|Passive|Capture)$/;function tS(t){let e;if(fm.test(t)){e={};let r;for(;r=t.match(fm);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ts(t.slice(2)),e]}let Ru=0;const nS=Promise.resolve(),rS=()=>Ru||(nS.then(()=>Ru=0),Ru=Date.now());function sS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;In(iS(r,n.value),e,5,[r])};return n.value=t,n.attached=rS(),n}function iS(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const pm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,oS=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?K0(t,r,o):e==="style"?Y0(t,n,r):ic(e)?dd(e)||eS(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):aS(t,e,r,o))?(hm(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&um(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Xe(r))?hm(t,pn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),um(t,e,r,o))};function aS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&pm(e)&&Ie(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return pm(e)&&Xe(n)?!1:e in t}const Av=new WeakMap,Rv=new WeakMap,Dl=Symbol("_moveCb"),mm=Symbol("_enterCb"),lS=t=>(delete t.props.mode,t),cS=lS({name:"TransitionGroup",props:pt({},Ev,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=et(),r=qy();let s,i;return Id(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!pS(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(hS),s.forEach(dS);const l=s.filter(fS);bh(),l.forEach(c=>{const u=c.el,h=u.style;Rn(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const f=u[Dl]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",f),u[Dl]=null,Tr(u,o))};u.addEventListener("transitionend",f)}),s=[]}),()=>{const o=Ae(t),l=Tv(o);let c=o.tag||Gt;if(s=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(s.push(h),Hr(h,Do(h,l,r,n)),Av.set(h,h.el.getBoundingClientRect()))}i=e.default?Td(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&Hr(h,Do(h,l,r,n))}return jt(c,null,i)}}}),uS=cS;function hS(t){const e=t.el;e[Dl]&&e[Dl](),e[mm]&&e[mm]()}function dS(t){Rv.set(t,t.el.getBoundingClientRect())}function fS(t){const e=Av.get(t),n=Rv.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function pS(t,e,n){const r=t.cloneNode(),s=t[di];s&&s.forEach(l=>{l.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Iv(r);return i.removeChild(r),o}const mS=["ctrl","shift","alt","meta"],gS={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>mS.some(n=>t[`${n}Key`]&&!e.includes(n))},XM=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const l=gS[e[o]];if(l&&l(s,e))return}return t(s,...i)})},_S={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},JM=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=ts(s.key);if(e.some(o=>o===i||_S[o]===i))return t(s)})},yS=pt({patchProp:oS},j0);let gm;function vS(){return gm||(gm=f0(yS))}const Cv=(...t)=>{const e=vS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=bS(r);if(!s)return;const i=e._component;!Ie(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,wS(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function wS(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bS(t){return Xe(t)?document.querySelector(t):t}function Vs(t,e,n,r){return Object.defineProperty(t,e,{get:n,set:r,enumerable:!0}),t}function ZM(t,e){for(const n in e)Vs(t,n,e[n]);return t}const Wr=Ce(!1);let Eh;function ES(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function TS(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const Pv="ontouchstart"in window||window.navigator.maxTouchPoints>0;function IS(t){const e=t.toLowerCase(),n=TS(e),r=ES(e,n),s={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(s[r.browser]=!0,s.version=r.version,s.versionNumber=parseInt(r.version,10)),r.platform&&(s[r.platform]=!0);const i=s.android||s.ios||s.bb||s.blackberry||s.ipad||s.iphone||s.ipod||s.kindle||s.playbook||s.silk||s["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?s.mobile=!0:s.desktop=!0,s["windows phone"]&&(s.winphone=!0,delete s["windows phone"]),s.edga||s.edgios||s.edg?(s.edge=!0,r.browser="edge"):s.crios?(s.chrome=!0,r.browser="chrome"):s.fxios&&(s.firefox=!0,r.browser="firefox"),(s.ipod||s.ipad||s.iphone)&&(s.ios=!0),s.vivaldi&&(r.browser="vivaldi",s.vivaldi=!0),(s.chrome||s.opr||s.safari||s.vivaldi||s.mobile===!0&&s.ios!==!0&&i!==!0)&&(s.webkit=!0),s.opr&&(r.browser="opera",s.opera=!0),s.safari&&(s.blackberry||s.bb?(r.browser="blackberry",s.blackberry=!0):s.playbook?(r.browser="playbook",s.playbook=!0):s.android?(r.browser="android",s.android=!0):s.kindle?(r.browser="kindle",s.kindle=!0):s.silk&&(r.browser="silk",s.silk=!0)),s.name=r.browser,s.platform=r.platform,e.indexOf("electron")!==-1)s.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)s.bex=!0;else{if(window.Capacitor!==void 0?(s.capacitor=!0,s.nativeMobile=!0,s.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(s.cordova=!0,s.nativeMobile=!0,s.nativeMobileWrapper="cordova"),Wr.value===!0&&(Eh={is:{...s}}),Pv===!0&&s.mac===!0&&(s.desktop===!0&&s.safari===!0||s.nativeMobile===!0&&s.android!==!0&&s.ios!==!0&&s.ipad!==!0)){delete s.mac,delete s.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(s,{mobile:!0,ios:!0,platform:o,[o]:!0})}s.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete s.desktop,s.mobile=!0)}return s}const _m=navigator.userAgent||navigator.vendor||window.opera,SS={has:{touch:!1,webStorage:!1},within:{iframe:!1}},dt={userAgent:_m,is:IS(_m),has:{touch:Pv},within:{iframe:window.self!==window.top}},Th={install(t){const{$q:e}=t;Wr.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,dt),Wr.value=!1}),e.platform=Ns(this)):e.platform=this}};{let t;Vs(dt.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(Th,dt),Wr.value===!0&&(Object.assign(Th,Eh,SS),Eh=null)}function Ct(t){return Os(fc(t))}function AS(t){return Os(t)}const wc=(t,e)=>{const n=Ns(t);for(const r in t)Vs(e,r,()=>n[r],s=>{n[r]=s});return e},Kt={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Kt,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function Vo(){}function eL(t){return t.button===0}function RS(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function CS(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function Nl(t){t.stopPropagation()}function xr(t){t.cancelable!==!1&&t.preventDefault()}function cn(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function tL(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",xr,Kt.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",xr,Kt.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function PS(t,e,n){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(n):n,n.forEach(s=>{s[0].addEventListener(s[1],t[s[2]],Kt[s[3]])})}function kS(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],Kt[r[3]])}),t[n]=void 0)}function kv(t,e=250,n){let r=null;function s(){const i=arguments,o=()=>{r=null,t.apply(this,i)};r!==null&&clearTimeout(r),r=setTimeout(o,e)}return s.cancel=()=>{r!==null&&clearTimeout(r)},s}const Cu=["sm","md","lg","xl"],{passive:ym}=Kt,xS=wc({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Vo,setDebounce:Vo,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,s=document.scrollingElement||document.documentElement,i=n===void 0||dt.is.mobile===!0?()=>[Math.max(window.innerWidth,s.clientWidth),Math.max(window.innerHeight,s.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-s.clientWidth,n.height*n.scale+window.innerHeight-s.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=f=>{const[p,w]=i();if(w!==this.height&&(this.height=w),p!==this.width)this.width=p;else if(f!==!0)return;let I=this.sizes;this.gt.xs=p>=I.sm,this.gt.sm=p>=I.md,this.gt.md=p>=I.lg,this.gt.lg=p>=I.xl,this.lt.sm=p<I.sm,this.lt.md=p<I.md,this.lt.lg=p<I.lg,this.lt.xl=p<I.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,I=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",I!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${I}`)),this.name=I)};let l,c={},u=16;this.setSizes=f=>{Cu.forEach(p=>{f[p]!==void 0&&(c[p]=f[p])})},this.setDebounce=f=>{u=f};const h=()=>{const f=getComputedStyle(document.body);f.getPropertyValue("--q-size-sm")&&Cu.forEach(p=>{this.sizes[p]=parseInt(f.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{Cu.forEach(w=>{p[w]&&(this.sizes[w]=p[w])}),this.__update(!0)},this.setDebounce=p=>{l!==void 0&&r.removeEventListener("resize",l,ym),l=p>0?kv(this.__update,p):this.__update,r.addEventListener("resize",l,ym)},this.setDebounce(u),Object.keys(c).length!==0?(this.setSizes(c),c=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Wr.value===!0?e.push(h):h()}}),bt=wc({isActive:!1,mode:!1},{__media:void 0,set(t){bt.mode=t,t==="auto"?(bt.__media===void 0&&(bt.__media=window.matchMedia("(prefers-color-scheme: dark)"),bt.__updateMedia=()=>{bt.set("auto")},bt.__media.addListener(bt.__updateMedia)),t=bt.__media.matches):bt.__media!==void 0&&(bt.__media.removeListener(bt.__updateMedia),bt.__media=void 0),bt.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){bt.set(bt.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function DS(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let xv=!1;function NS(t){xv=t.isComposing===!0}function Dv(t){return xv===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function Mo(t,e){return Dv(t)===!0?!1:[].concat(e).includes(t.keyCode)}function Nv(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function OS({is:t,has:e,within:n},r){const s=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=Nv(t);i!==void 0&&s.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;s.push(i),s.push("native-mobile"),t.ios===!0&&(r[i]===void 0||r[i].iosStatusBarPadding!==!1)&&s.push("q-ios-padding")}else t.electron===!0?s.push("electron"):t.bex===!0&&s.push("bex");return n.iframe===!0&&s.push("within-iframe"),s}function VS(){const{is:t}=dt,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const s=Nv(t);s!==void 0&&n.add(`platform-${s}`)}}dt.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),dt.within.iframe===!0&&n.add("within-iframe");const r=Array.from(n).join(" ");e!==r&&(document.body.className=r)}function MS(t){for(const e in t)DS(e,t[e])}const LS={install(t){if(this.__installed!==!0){if(Wr.value===!0)VS();else{const{$q:e}=t;e.config.brand!==void 0&&MS(e.config.brand);const n=OS(dt,e.config);document.body.classList.add.apply(document.body.classList,n)}dt.is.ios===!0&&document.body.addEventListener("touchstart",Vo),window.addEventListener("keydown",NS,!0)}}},Ov=()=>!0;function FS(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function US(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function $S(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return Ov;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(FS).map(US)),()=>e.includes(window.location.hash)}const Ih={__history:[],add:Vo,remove:Vo,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=dt.is;if(e!==!0&&n!==!0)return;const r=t.config[e===!0?"cordova":"capacitor"];if(r?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=Ov),this.__history.push(o)},this.remove=o=>{const l=this.__history.indexOf(o);l>=0&&this.__history.splice(l,1)};const s=$S(Object.assign({backButtonExit:!0},r)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else s()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},vm={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function wm(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Cr=wc({__qLang:{}},{getLocale:wm,set(t=vm,e){const n={...t,rtl:t.rtl===!0,getLocale:wm};{if(n.set=Cr.set,Cr.__langConfig===void 0||Cr.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName)}Object.assign(Cr.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Cr.__qLang,Cr.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(s=>s!=="set"&&s!=="getLocale")}}),this.set(e||vm))}}),qS={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},Ol=wc({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=Ol.set,Object.assign(Ol.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,Vs(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(s=>s!=="set")}}),this.set(e||qS))}}),Vv="_q_",nL="_q_t_",rL="_q_l_",sL="_q_pc_",BS="_q_fo_",iL="_q_tabs_";function oL(){}const Vl={};let Mv=!1;function jS(){Mv=!0}function Pu(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(Pu(t[r],e[r])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(r=i.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=i.next()}for(i=t.entries(),r=i.next();r.done!==!0;){if(Pu(r.value[1],e.get(r.value[0]))!==!0)return!1;r=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(r=i.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t).filter(i=>t[i]!==void 0);if(n=s.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(r=n;r--!==0;){const i=s[r];if(Pu(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function yn(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function aL(t){return Object.prototype.toString.call(t)==="[object Date]"}function lL(t){return typeof t=="number"&&isFinite(t)}const bm=[Th,LS,bt,xS,Ih,Cr,Ol];function Lv(t,e){const n=Cv(t);n.config.globalProperties=e.config.globalProperties;const{reload:r,...s}=e._context;return Object.assign(n._context,s),n}function Em(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function zS(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(Vv,n.$q),Em(n,bm),e.components!==void 0&&Object.values(e.components).forEach(r=>{yn(r)===!0&&r.name!==void 0&&t.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{yn(r)===!0&&r.name!==void 0&&t.directive(r.name,r)}),e.plugins!==void 0&&Em(n,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&bm.includes(r)===!1)),Wr.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}const HS=function(t,e={}){const n={version:"2.18.2"};Mv===!1?(e.config!==void 0&&Object.assign(Vl,e.config),n.config={...Vl},jS()):n.config=e.config||{},zS(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},WS={name:"Quasar",version:"2.18.2",install:HS,lang:Cr,iconSet:Ol};function KS(){return Jt(Vv)}const GS=()=>typeof window<"u"?"/clca-courier":"",QS=t=>{const e=GS(),n=t.startsWith("/")?t.slice(1):t;return`${e}/${n}`},Pe={debug:(t,...e)=>{},info:(t,...e)=>{console.info(`[INFO] ${t}`,...e)},warn:(t,...e)=>{console.warn(` [WARN] ${t}`,...e)},error:(t,e,...n)=>{e instanceof Error?console.error(` [ERROR] ${t}:`,e.message,e.stack,...n):e?console.error(` [ERROR] ${t}:`,e,...n):console.error(` [ERROR] ${t}`,...n)},success:(t,...e)=>{},drive:(t,...e)=>{},pdf:(t,...e)=>{},cache:(t,...e)=>{},auth:(t,...e)=>{}},Co=class Co{cache=new Map;localBasePath=QS("issues/");constructor(){this.initializeService()}static setPDFProcessing(e){Co.shouldProcessPDFs=e}initializeService(){Pe.info("Initializing lightweight newsletter service")}async getNewsletters(){const e="newsletters";if(this.cache.has(e))return Pe.debug("Returning cached newsletter data"),this.cache.get(e);Pe.info("Loading newsletters with lightweight approach...");try{const n=await this.discoverLocalPDFs();Pe.success(`Discovered ${n.length} PDF files`);const r=this.createBaseNewsletters(n);return this.enhanceWithCachedMetadata(),Co.shouldProcessPDFs?this.queueUnprocessedPDFs():Pe.info("PDF processing disabled - skipping background processing"),r.sort((s,i)=>new Date(i.publicationDate||"1900-01-01").getTime()-new Date(s.publicationDate||"1900-01-01").getTime()),this.cache.set(e,r),Pe.success(`Loaded ${r.length} newsletters (${r.filter(s=>s.isProcessed).length} with rich metadata)`),r}catch(n){return Pe.error("Failed to load newsletters:",n),[]}}async discoverLocalPDFs(){Pe.info(" Loading actual PDF files from manifest...");try{const e=await fetch("/data/pdf-manifest.json");if(!e.ok)throw new Error(`Failed to load PDF manifest: ${e.status}`);const n=await e.json(),r=n.files.map(s=>({url:`${this.localBasePath}${s.filename}`,filename:s.filename}));return Pe.success(` Loaded ${r.length} PDF files from manifest (generated: ${n.generated})`),r}catch(e){return Pe.error("Failed to load PDF manifest:",e),[]}}createBaseNewsletters(e){return e.map(n=>({id:this.generateStringId(n.filename),filename:n.filename,title:this.extractTitleFromFilename(n.filename),downloadUrl:n.url,fileSize:0,pageCount:0,isPublished:!0,featured:!1,year:this.extractYearFromFilename(n.filename),publicationDate:this.parsePublishDateFromFilename(n.filename),tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",updatedBy:"system",isProcessed:!1,isProcessing:!1}))}enhanceWithCachedMetadata(){Pe.debug("Metadata enhancement skipped - PDF processing removed")}queueUnprocessedPDFs(){Pe.debug("Background processing skipped - PDF processing removed")}extractTitleFromFilename(e){const n=e.replace(/\.pdf$/i,""),r=n.match(/^(\d{4})\.(\d{2})-(.+)$/);if(r){const[,i,o]=r,l=["","January","February","March","April","May","June","July","August","September","October","November","December"],c=parseInt(o,10);return`${l[c]} ${i}`}const s=n.match(/^(\d{4})\.(summer|winter|spring|fall)-(.+)$/);if(s){const[,i,o]=s;return`${{summer:"Summer",winter:"Winter",spring:"Spring",fall:"Fall"}[o]} ${i}`}if(n.includes("special")){const i=n.match(/(\d{4})/)?.[1];return i?`Special Edition ${i}`:"Special Edition"}if(n.includes("annual")){const i=n.match(/(\d{4})/)?.[1];return i?`Annual Report ${i}`:"Annual Report"}return n.replace(/[-_]/g," ").replace(/\b\w/g,i=>i.toUpperCase())}parsePublishDateFromFilename(e){const n=e.match(/^(\d{4})\.(\d{2})-/);if(n){const[,i,o]=n;return`${i}-${o}-01`}const r=e.match(/^(\d{4})\.(summer|winter|spring|fall)-/);if(r){const[,i,o]=r;return`${i}-${{winter:"12",spring:"03",summer:"06",fall:"09"}[o]}-01`}const s=e.match(/(\d{4})/);return s?`${s[1]}-06-01`:new Date().toISOString().split("T")[0]||"2024-01-01"}generateStringId(e){let n=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n).toString()}generateNumericId(e){let n=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n)}extractYearFromFilename(e){const n=e.match(/(\d{4})/);return n?.[1]?parseInt(n[1],10):new Date().getFullYear()}async getNewsletterByFilename(e){return(await this.getNewsletters()).find(r=>r.filename===e)||null}getProcessingStats(){const e=this.cache.get("newsletters")||[];return{total:e.length,processed:e.filter(n=>n.isProcessed).length,processing:e.filter(n=>n.isProcessing).length,pending:e.filter(n=>!n.isProcessed&&!n.isProcessing).length}}clearCache(){this.cache.clear(),Pe.info("Newsletter cache cleared")}async searchNewsletters(e){const n=await this.getNewsletters(),r=e.toLowerCase();return n.filter(s=>!!(s.title.toLowerCase().includes(r)||s.filename.toLowerCase().includes(r)||s.tags?.some(i=>i.toLowerCase().includes(r)))).sort((s,i)=>new Date(i.publicationDate||"1900-01-01").getTime()-new Date(s.publicationDate||"1900-01-01").getTime())}};Np(Co,"shouldProcessPDFs",!0);let Ml=Co;const YS=new Ml,Tm=t=>{Ml.setPDFProcessing(t)};class XS{dbName="newsletter-metadata";storeName="extracted-metadata";db=null;async initialize(){if(!this.db)return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,1);r.onerror=()=>n(new Error(r.error?.message||"Database initialization failed")),r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=s=>{const i=s.target.result;if(!i.objectStoreNames.contains(this.storeName)){const o=i.createObjectStore(this.storeName,{keyPath:"newsletterId"});o.createIndex("filename","filename",{unique:!0}),o.createIndex("status","status",{unique:!1}),o.createIndex("extractedAt","extractedAt",{unique:!1})}}})}async storeExtractedMetadata(e){return await this.initialize(),new Promise((n,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(e);o.onerror=()=>r(new Error(o.error?.message||"Failed to store metadata")),o.onsuccess=()=>n()})}async getExtractedMetadata(e){return await this.initialize(),new Promise((n,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const o=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);o.onerror=()=>r(new Error(o.error?.message||"Failed to get metadata")),o.onsuccess=()=>n(o.result||null)})}async getAllExtractedMetadata(){return await this.initialize(),new Promise((e,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const i=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();i.onerror=()=>n(new Error(i.error?.message||"Failed to get all metadata")),i.onsuccess=()=>e(i.result||[])})}async getPendingMetadata(){return await this.initialize(),new Promise((e,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const o=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("status").getAll("pending");o.onerror=()=>n(new Error(o.error?.message||"Failed to get pending metadata")),o.onsuccess=()=>e(o.result||[])})}async markAsSynced(e){const n=await this.getExtractedMetadata(e);n&&(n.status="synced",await this.storeExtractedMetadata(n))}async markAsError(e,n){const r=await this.getExtractedMetadata(e);r&&(r.status="error",r.errorMessage=n,await this.storeExtractedMetadata(r))}async deleteExtractedMetadata(e){return await this.initialize(),new Promise((n,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);o.onerror=()=>r(new Error(o.error?.message||"Failed to delete metadata")),o.onsuccess=()=>n()})}async clearAllMetadata(){return await this.initialize(),new Promise((e,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();i.onerror=()=>n(new Error(i.error?.message||"Failed to clear metadata")),i.onsuccess=()=>e()})}async getStorageStats(){const e=await this.getAllExtractedMetadata();return{total:e.length,pending:e.filter(n=>n.status==="pending").length,synced:e.filter(n=>n.status==="synced").length,errors:e.filter(n=>n.status==="error").length}}}const ku=new XS;function JS(t){if(!t)return"";const e=JSON.stringify(t,Object.keys(t).sort());let n=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return n.toString()}function ZS(t,e,n,r){return{localFile:!0,firebaseStorage:!!(n?.downloadUrl&&typeof n.downloadUrl=="string"&&!n.downloadUrl.includes("localhost")),firebaseMetadata:!!n,draftData:!!r,processedMetadata:!!(e?.wordCount||e?.searchableText)}}function eA(t){const{localFile:e,firebaseStorage:n,firebaseMetadata:r,draftData:s,processedMetadata:i}=t,o=e||s,l=n,c=(i||s)&&r;let u,h=!1,f=!1;return e&&n&&r?u=c?"needs-sync":"synced":e&&!n?(u="needs-upload",h=!0):!e&&n?(u="needs-download",f=!0):e&&n&&!r?u="needs-sync":s&&!n?(u="needs-upload",h=!0):u="unknown",{canUpload:o,canDownload:l,canSyncMetadata:c,needsUpload:h,needsDownload:f,status:u}}function Im(t,e){const n=!!t,r=!!e;if(!n&&!r)return"unknown";if(!n&&r)return"firebase";if(n&&!r)return"local";const s=t,i=e,o=u=>JS({displayDate:u?.displayDate,month:u?.month,season:u?.season,year:u?.year,wordCount:u?.wordCount,readingTimeMinutes:u?.readingTimeMinutes,searchableText:typeof u?.searchableText=="string"?u.searchableText.substring(0,100):"",title:u?.title,description:u?.description,summary:u?.summary,pageCount:u?.pageCount,articleCount:u?.articleCount,tags:Array.isArray(u?.tags)?u.tags.join(","):"",categories:Array.isArray(u?.categories)?u.categories.join(","):"",keyTerms:Array.isArray(u?.keyTerms)?u.keyTerms.join(","):"",version:u?.version,textExtractionVersion:u?.textExtractionVersion,featured:u?.featured,isPublished:u?.isPublished}),l=o(s),c=o(i);return l===c?"synced":"local"}function Fa(t){return t?t.toLowerCase().trim().replace(/\.pdf$/i,""):""}function tA(){const t=KS(),e=Ce([]),n=Ce({total:0,pending:0,synced:0,errors:0}),r=Ce(new Map),s=Ce(new Map),i=Ce({isLoading:!1,isExtracting:!1,isExtractingAllText:!1,isGeneratingThumbs:!1,isSaving:!1,isProcessingText:!1,isApplyingMetadata:!1,isSyncing:!1,extractingText:{},generatingThumb:{}}),o=Ce({searchText:"",filterYear:null,filterSeason:null,filterMonth:null}),l=Ce({showDialog:!1,currentFile:null,extractedContent:null,extractionProgress:0,extractionStatus:""}),c=Ce({showDialog:!1,editingNewsletter:null});function u(v,g=!1){const _=s.value.get(v.filename),N=Array.from(r.value.values()).find($=>$.newsletterId===v.id);let ee;try{const $=localStorage.getItem("newsletter-drafts");$&&(ee=JSON.parse($).find(se=>se.filename===v.filename))}catch{}const X=ZS(v.filename,N,_,ee),L=eA(X),M=[];X.localFile&&M.push("Local File"),X.firebaseStorage&&M.push("Firebase Storage"),X.firebaseMetadata&&M.push("Firebase Metadata"),X.draftData&&M.push("Draft Data"),X.processedMetadata&&M.push("Processed Metadata");const z=v.id.startsWith("draft-"),ce=v.downloadUrl?.startsWith("blob:")||v.downloadUrl?.startsWith("file:")||v.downloadUrl?.includes("localhost"),ie=!!(v.displayDate||v.month||v.wordCount||v.searchableText);let U,pe,Me,Ne,he;switch(L.status){case"synced":U="remote",pe="green",Me="cloud-check",Ne="synced",he=`Synced (${M.join(", ")})`;break;case"needs-upload":U="local",pe="orange",Me="cloud-upload",Ne="complete",he=`Needs Upload (${M.join(", ")})`;break;case"needs-download":U="remote",pe="blue",Me="cloud-download",Ne="file-only",he=`Available for Download (${M.join(", ")})`;break;case"needs-sync":U="saved",pe="amber",Me="sync",Ne="complete",he=`Needs Metadata Sync (${M.join(", ")})`;break;case"local-only":U="local",pe="purple",Me="folder",Ne=X.processedMetadata?"complete":"file-only",he=`Local Only (${M.join(", ")})`;break;case"remote-only":U="remote",pe="blue",Me="cloud",Ne="file-only",he=`Remote Only (${M.join(", ")})`;break;default:z&&ce&&g&&!ie?(U="local",pe="purple",Me="folder",Ne="complete",he=`Local file imported (${M.join(", ")})`):z&&!ie?(U="draft",pe="grey",Me="file-document-outline",Ne=g?"complete":"metadata-only",he=`Draft (${M.join(", ")})`):(U="metadata-only",pe="red",Me="alert",Ne="metadata-only",he=`Unknown Status (${M.join(", ")})`)}return{source:U,color:pe,icon:Me,status:Ne,description:he,locationStatus:X,syncActions:L,locations:M}}function h(v){const g=s.value.get(v.filename),_=!!g,N=!!(v.displayDate||v.month||v.wordCount);return!N&&!_?"unknown":!N&&_?"firebase":N&&!_?"local":_&&N&&g?v.displayDate===g.displayDate&&v.month===g.month&&v.season===g.season&&v.wordCount===g.wordCount?"synced":"local":"unknown"}const f=q(()=>{let v=e.value.map(g=>({...g,syncStatus:h(g),dataSource:u(g)}));if(o.value.searchText){const g=o.value.searchText.toLowerCase();v=v.filter(_=>_.title.toLowerCase().includes(g)||_.filename.toLowerCase().includes(g)||_.description&&_.description.toLowerCase().includes(g))}return o.value.filterYear&&(v=v.filter(g=>g.year===o.value.filterYear)),o.value.filterSeason&&(v=v.filter(g=>g.season===o.value.filterSeason)),o.value.filterMonth&&typeof o.value.filterMonth=="number"&&(v=v.filter(g=>g.month===o.value.filterMonth)),v}),p=q(()=>e.value.length),w=q(()=>e.value.filter(v=>v.searchableText).length),I=q(()=>e.value.filter(v=>v.thumbnailUrl).length),k=q(()=>{const v=e.value.reduce((g,_)=>g+(_.fileSize||0),0);return S(v)}),P=q(()=>{const v=e.value.flatMap(g=>g.tags||[]);return[...new Set(v)].sort()}),F=q(()=>{const v=e.value.flatMap(g=>g.categories||[]);return[...new Set(v)].sort()});function A(v){console.log(" Testing sync workflow for:",v),console.log(" BEFORE SYNC:"),H();const g=e.value.find(N=>N.filename===v);if(!g){console.error(" Newsletter not found:",v);return}const _=u(g);console.log(" File locations:",_.locations),console.log(" Sync status:",_.syncActions.status),console.log(" Available actions:",{canUpload:_.syncActions.canUpload,canDownload:_.syncActions.canDownload,canSyncMetadata:_.syncActions.canSyncMetadata,needsUpload:_.syncActions.needsUpload,needsDownload:_.syncActions.needsDownload}),_.syncActions.needsUpload&&console.log(" Would upload file to Firebase Storage"),_.syncActions.needsDownload&&console.log(" Would download file from Firebase Storage"),_.syncActions.canSyncMetadata&&console.log(" Would sync metadata bidirectionally"),console.log(" Sync simulation complete - ready for real implementation")}async function x(v){console.log(" Uploading newsletter to Firebase:",v);const g=e.value.find(_=>_.filename===v);if(!g)throw new Error(`Newsletter not found: ${v}`);i.value.isSyncing=!0;try{let _;try{const M=localStorage.getItem("newsletter-drafts");M&&(_=JSON.parse(M).find(ce=>ce.filename===v))}catch{}if(!_)throw new Error("No draft data found for upload");const{firebaseStorageService:N}=await Be(async()=>{const{firebaseStorageService:M}=await import("./firebase-storage.service-DpCzc1XB.js");return{firebaseStorageService:M}},__vite__mapDeps([0,1])),{firestoreService:ee}=await Be(async()=>{const{firestoreService:M}=await import("./firebase-firestore.service-DUd51tQY.js");return{firestoreService:M}},__vite__mapDeps([2,1]));let X=g.downloadUrl;if(_.fileData){console.log(" Uploading file to Firebase Storage...");const M={title:g.title,publicationDate:g.displayDate||`${g.year}.${g.season||"unknown"}`,year:g.year,tags:g.tags};g.season&&(M.season=g.season),X=(await N.uploadNewsletterPdf(_.fileData,M)).downloadUrl}const L={filename:v,title:g.title,publicationDate:g.displayDate||`${g.year}.${g.season}`,year:g.year,fileSize:g.fileSize||0,downloadUrl:X,storageRef:`newsletters/${v}`,tags:g.tags||[],featured:g.featured||!1,isPublished:g.isPublished??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",updatedBy:"user",actions:{canView:!0,canDownload:!0,canSearch:!!g.searchableText,hasThumbnail:!!g.thumbnailUrl}};g.description&&(L.description=g.description),g.issue&&(L.issueNumber=g.issue.toString()),g.season&&(L.season=g.season),g.month&&(L.month=g.month),g.pageCount&&(L.pageCount=g.pageCount),g.displayDate&&(L.displayDate=g.displayDate),g.sortValue&&(L.sortValue=g.sortValue),g.thumbnailUrl&&(L.thumbnailUrl=g.thumbnailUrl),g.searchableText&&(L.searchableText=g.searchableText),console.log(" Saving metadata to Firestore..."),await ee.saveNewsletterMetadata(L),await E(),console.log(" Upload completed successfully"),t.notify({type:"positive",message:"Newsletter uploaded successfully",caption:v,position:"top"})}catch(_){throw console.error(" Upload failed:",_),t.notify({type:"negative",message:"Upload failed",caption:_ instanceof Error?_.message:"Unknown error",position:"top"}),_}finally{i.value.isSyncing=!1}}async function D(v){console.log(" Downloading newsletter from Firebase:",v);const g=e.value.find(N=>N.filename===v);if(!g)throw new Error(`Newsletter not found: ${v}`);const _=s.value.get(v);if(!_?.downloadUrl)throw new Error("No Firebase download URL available");i.value.isSyncing=!0;try{console.log(" Downloading file from Firebase Storage...");const N=await fetch(_.downloadUrl);if(!N.ok)throw new Error(`Download failed: ${N.statusText}`);const ee=await N.blob(),X=new File([ee],v,{type:"application/pdf"}),L={id:`draft-${Date.now()}`,filename:v,title:_.title||g.title,description:_.description||"",year:_.year||g.year,season:_.season||g.season,month:_.month,fileData:X,downloadUrl:URL.createObjectURL(ee),createdAt:new Date().toISOString(),source:"firebase-download"};let M=[];try{const z=localStorage.getItem("newsletter-drafts");z&&(M=JSON.parse(z))}catch{}M=M.filter(z=>z.filename!==v),M.push(L),localStorage.setItem("newsletter-drafts",JSON.stringify(M)),await b(),console.log(" Download completed successfully"),t.notify({type:"positive",message:"Newsletter downloaded successfully",caption:v,position:"top"})}catch(N){throw console.error(" Download failed:",N),t.notify({type:"negative",message:"Download failed",caption:N instanceof Error?N.message:"Unknown error",position:"top"}),N}finally{i.value.isSyncing=!1}}async function B(v,g="auto"){console.log(" Syncing metadata for:",v,"direction:",g);const _=e.value.find(N=>N.filename===v);if(!_)throw new Error(`Newsletter not found: ${v}`);i.value.isSyncing=!0;try{const N=s.value.get(v);let ee;try{const X=localStorage.getItem("newsletter-drafts");X&&(ee=JSON.parse(X).find(M=>M.filename===v))}catch{}if(g==="auto"){const X=new Date(_.updatedAt).getTime(),L=N?.updatedAt?new Date(N.updatedAt).getTime():0;g=X>L?"upload":"download",console.log(" Auto-determined direction:",g)}if(g==="upload"){console.log(" Uploading metadata to Firebase...");const{firestoreService:X}=await Be(async()=>{const{firestoreService:M}=await import("./firebase-firestore.service-DUd51tQY.js");return{firestoreService:M}},__vite__mapDeps([2,1])),L={filename:v,title:_.title,publicationDate:_.displayDate||`${_.year}.${_.season}`,year:_.year,fileSize:_.fileSize||0,downloadUrl:N?.downloadUrl||_.downloadUrl,storageRef:`newsletters/${v}`,tags:_.tags||[],featured:_.featured||!1,isPublished:_.isPublished??!0,createdAt:_.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:_.createdBy||"system",updatedBy:"user",actions:{canView:!0,canDownload:!0,canSearch:!!_.searchableText,hasThumbnail:!!_.thumbnailUrl}};_.description&&(L.description=_.description),_.issue&&(L.issueNumber=_.issue.toString()),_.season&&(L.season=_.season),_.month&&(L.month=_.month),_.pageCount&&(L.pageCount=_.pageCount),_.displayDate&&(L.displayDate=_.displayDate),_.sortValue&&(L.sortValue=_.sortValue),_.thumbnailUrl&&(L.thumbnailUrl=_.thumbnailUrl),_.searchableText&&(L.searchableText=_.searchableText),await X.saveNewsletterMetadata(L)}else{if(console.log(" Downloading metadata from Firebase..."),!N)throw new Error("No Firebase metadata to download");if(ee){const X=JSON.parse(localStorage.getItem("newsletter-drafts")||"[]"),L=X.findIndex(M=>M.filename===v);L>=0&&(X[L]={...X[L],...N,updatedAt:new Date().toISOString()},localStorage.setItem("newsletter-drafts",JSON.stringify(X)))}}await E(),console.log(" Metadata sync completed successfully"),t.notify({type:"positive",message:"Metadata synced successfully",caption:`${v} (${g})`,position:"top"})}catch(N){throw console.error(" Metadata sync failed:",N),t.notify({type:"negative",message:"Metadata sync failed",caption:N instanceof Error?N.message:"Unknown error",position:"top"}),N}finally{i.value.isSyncing=!1}}function H(){console.log("=== DATA SOURCES DEBUG ==="),console.log("Total newsletters in UI:",e.value.length),console.log("Local metadata entries:",r.value.size),console.log("Firebase metadata entries:",s.value.size);let v=0;try{const g=localStorage.getItem("newsletter-drafts");g&&(v=JSON.parse(g).length)}catch{}console.log("Draft entries in localStorage:",v),e.value.forEach(g=>{const _=s.value.has(g.filename),N=Array.from(r.value.values()).some(X=>X.newsletterId===g.id);let ee=!1;try{const X=localStorage.getItem("newsletter-drafts");X&&(ee=JSON.parse(X).some(M=>M.filename===g.filename))}catch{}console.log(`File ${g.filename}:`,{inFirebase:_,inLocal:N,inDrafts:ee,hasFirebaseMetadata:!!s.value.get(g.filename)})})}function S(v){if(!v)return"0 B";const g=1024,_=["B","KB","MB","GB"],N=Math.floor(Math.log(v)/Math.log(g));return parseFloat((v/Math.pow(g,N)).toFixed(2))+" "+_[N]}async function b(){i.value.isLoading=!0;try{console.log(" Loading newsletters from multiple sources..."),console.trace(" loadNewsletters() called from:");const v=await YS.getNewsletters();let g=[];try{const z=localStorage.getItem("newsletter-drafts");z&&(g=JSON.parse(z),console.log(` Loaded ${g.length} drafts from localStorage`))}catch(z){console.warn("Failed to load drafts from localStorage:",z)}const _=await ku.getAllExtractedMetadata(),N=new Map(_.map(z=>[z.newsletterId,z]));let ee=[];try{const{firestoreService:z}=await Be(async()=>{const{firestoreService:ie}=await import("./firebase-firestore.service-DUd51tQY.js");return{firestoreService:ie}},__vite__mapDeps([2,1])),ce=await z.getAllNewslettersForAdmin();ee=ce,console.log(` Loaded ${ce.length} newsletters from Firebase`)}catch{console.log(" Firebase data not available (likely not authenticated)")}const X=new Map,L=new Map,M=new Map;_.forEach(z=>{const ce=v.find(ie=>String(ie.id)===z.newsletterId);ce&&X.set(ce.filename,z)}),g.forEach(z=>{const ce=z;ce.filename&&M.set(ce.filename,ce)}),ee.forEach(z=>{const ce=z,ie=Fa(ce.filename),U=v.find(pe=>Fa(pe.filename)===ie);U&&L.set(U.filename,ce)}),r.value=X,s.value=L,await y(),e.value=v.map(z=>{const ce=N.get(String(z.id)),ie=L.get(z.filename),U=M.get(z.filename);return{id:String(z.id),filename:z.filename,title:z.title,description:ie?.description||U?.description||void 0,summary:ie?.summary||U?.summary||void 0,year:ie?.year||U?.year||parseInt((z.date||"2024").split(".")[0]||"2024")||2024,season:ie?.season||U?.season||(z.date?.includes("summer")?"summer":z.date?.includes("winter")?"winter":z.date?.includes("spring")?"spring":z.date?.includes("fall")?"fall":"general"),month:ie?.month||U?.month||void 0,displayDate:ie?.displayDate||U?.displayDate||void 0,sortValue:ie?.sortValue||U?.sortValue||void 0,syncStatus:Im(ce||U,ie),volume:ie?.volume||U?.volume||void 0,issue:ie?.issue||U?.issue||void 0,fileSize:ie?.fileSize||U?.fileSize||0,pageCount:ie?.pageCount||U?.pageCount||z.pages,wordCount:ce?.wordCount||ie?.wordCount||U?.wordCount,downloadUrl:z.url,thumbnailUrl:z.thumbnailUrl||ie?.thumbnailUrl||U?.thumbnailUrl||"",searchableText:ce?.searchableText||ie?.searchableText||U?.searchableText,tags:ie?.tags||U?.tags||[],categories:ie?.categories||U?.categories||z.topics||[],contributors:ie?.contributors||U?.contributors||void 0,featured:ie?.featured||U?.featured||!1,isPublished:ie?.isPublished??!0,createdAt:ie?.createdAt||U?.createdAt||new Date().toISOString(),updatedAt:ie?.updatedAt||U?.updatedAt||new Date().toISOString(),createdBy:ie?.createdBy||U?.createdBy||"system",updatedBy:ie?.updatedBy||U?.updatedBy||"system",publicationDate:ie?.publicationDate||U?.publicationDate||new Date().toISOString(),keyTerms:ce?Object.keys(ce.keywordCounts||{}):void 0,keywordCounts:ce?.keywordCounts||void 0,readingTimeMinutes:ce?.readingTimeMinutes||U?.readingTimeMinutes||void 0,textExtractionVersion:ce?.textExtractionVersion||U?.textExtractionVersion||void 0,textExtractedAt:ce?.textExtractedAt||U?.textExtractedAt||void 0,version:ie?.version||U?.version||1}}),console.log(` Loaded ${e.value.length} newsletters (merged from manifest, local metadata, drafts, and Firebase)`),console.log(` With metadata: ${e.value.filter(z=>z.wordCount).length} have word counts, ${e.value.filter(z=>z.tags.length>0).length} have tags`),console.log(` Draft integration: ${g.length} drafts found, ${e.value.filter(z=>M.has(z.filename)).length} matched to newsletters`)}catch(v){console.error("Failed to load newsletters:",v),t.notify({type:"negative",message:"Failed to load newsletters",caption:v instanceof Error?v.message:"Unknown error",position:"top"})}finally{i.value.isLoading=!1}}async function y(){try{const v=await ku.getStorageStats();n.value=v}catch(v){console.error("Failed to refresh local storage stats:",v)}}async function E(){console.log(" Refreshing Firebase metadata only...");try{Tm(!1);let g=[];try{const{firestoreService:L}=await Be(async()=>{const{firestoreService:z}=await import("./firebase-firestore.service-DUd51tQY.js");return{firestoreService:z}},__vite__mapDeps([2,1])),M=await L.getAllNewslettersForAdmin();g=M,console.log(` Refreshed ${M.length} newsletters from Firebase`)}catch{console.log(" Firebase data not available (likely not authenticated)");return}finally{Tm(!0)}const _=e.value.map(L=>({id:L.id,filename:L.filename,title:L.title,url:L.downloadUrl,thumbnailUrl:L.thumbnailUrl,date:`${L.year}.${L.season}`,pages:L.pageCount||0,topics:L.categories||[],isProcessed:!0,isProcessing:!1})),N=new Map;g.forEach(L=>{const M=L,z=Fa(M.filename),ce=_.find(ie=>Fa(ie.filename)===z);ce&&N.set(ce.filename,M)}),s.value=N;const ee=await ku.getAllExtractedMetadata(),X=new Map(ee.map(L=>[L.newsletterId,L]));e.value=_.map(L=>{const M=X.get(String(L.id)),z=N.get(L.filename);return{id:String(L.id),filename:L.filename,title:L.title,description:z?.description||void 0,summary:z?.summary||void 0,year:z?.year||parseInt((L.date||"2024").split(".")[0]||"2024")||2024,season:z?.season||(L.date?.includes("summer")?"summer":L.date?.includes("winter")?"winter":L.date?.includes("spring")?"spring":L.date?.includes("fall")?"fall":"general"),month:z?.month||void 0,displayDate:z?.displayDate||void 0,sortValue:z?.sortValue||void 0,syncStatus:Im(M,z),volume:z?.volume||void 0,issue:z?.issue||void 0,fileSize:z?.fileSize||0,pageCount:z?.pageCount||L.pages,wordCount:M?.wordCount||z?.wordCount,downloadUrl:L.url,thumbnailUrl:L.thumbnailUrl||z?.thumbnailUrl||"",searchableText:M?.searchableText||z?.searchableText,tags:z?.tags||[],categories:z?.categories||L.topics||[],contributors:z?.contributors||void 0,featured:z?.featured||!1,isPublished:z?.isPublished??!0,createdAt:z?.createdAt||new Date().toISOString(),updatedAt:z?.updatedAt||new Date().toISOString(),createdBy:z?.createdBy||"system",updatedBy:z?.updatedBy||"system",publicationDate:z?.publicationDate||new Date().toISOString(),keyTerms:M?Object.keys(M.keywordCounts||{}):void 0,keywordCounts:M?.keywordCounts||void 0,readingTimeMinutes:M?.readingTimeMinutes||void 0,textExtractionVersion:M?.textExtractionVersion||void 0,textExtractedAt:M?.textExtractedAt||void 0,version:z?.version||1}}),console.log(" Firebase metadata refreshed without PDF processing")}catch(v){throw console.error("Failed to refresh Firebase metadata:",v),v}}return{newsletters:e,localStorageStats:n,processingStates:i,filters:o,textExtractionDialog:l,editDialog:c,filteredNewsletters:f,totalNewsletters:p,newslettersWithText:w,newslettersWithThumbnails:I,totalFileSize:k,availableTags:P,availableCategories:F,formatFileSize:S,loadNewsletters:b,refreshLocalStorageStats:y,refreshFirebaseDataOnly:E,getDataSource:u,debugDataFlow:H,testSyncWorkflow:A,uploadNewsletterToFirebase:x,downloadNewsletterFromFirebase:D,syncNewsletterMetadata:B}}const nA=()=>{};var Sm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Uv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,w=u&63;c||(w=64,o||(p=64)),r.push(n[h],n[f],n[p],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new sA;const p=i<<2|l>>4;if(r.push(p),u!==64){const w=l<<4&240|u>>2;if(r.push(w),f!==64){const I=u<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iA=function(t){const e=Fv(t);return Uv.encodeByteArray(e,!0)},Ll=function(t){return iA(t).replace(/\./g,"")},$v=function(t){try{return Uv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=()=>oA().__FIREBASE_DEFAULTS__,lA=()=>{if(typeof process>"u"||typeof Sm>"u")return;const t=Sm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$v(t[1]);return e&&JSON.parse(e)},bc=()=>{try{return nA()||aA()||lA()||cA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qv=t=>bc()?.emulatorHosts?.[t],kd=t=>{const e=qv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bv=()=>bc()?.config,jv=t=>bc()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ec(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ll(JSON.stringify(n)),Ll(JSON.stringify(o)),""].join(".")}const yo={};function hA(){const t={prod:[],emulator:[]};for(const e of Object.keys(yo))yo[e]?t.emulator.push(e):t.prod.push(e);return t}function dA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Am=!1;function Tc(t,e){if(typeof window>"u"||typeof document>"u"||!dr(window.location.host)||yo[t]===e||yo[t]||Am)return;yo[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=hA().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,w){p.setAttribute("width","24"),p.setAttribute("id",w),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Am=!0,o()},p}function h(p,w){p.setAttribute("id",w),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=dA(r),w=n("text"),I=document.getElementById(w)||document.createElement("span"),k=n("learnmore"),P=document.getElementById(k)||document.createElement("a"),F=n("preprendIcon"),A=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),h(P,k);const D=u();c(A,F),x.append(A,I,P,D),document.body.appendChild(x)}i?(I.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function pA(){const t=bc()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vA(){return!pA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function bA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EA,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ea.prototype.create)}}class ea{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?TA(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new qn(s,l,r)}}function TA(t,e){return t.replace(IA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const IA=/\{\$([^}]+)}/g;function SA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Rm(i)&&Rm(o)){if(!Cs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function AA(t,e){const n=new RA(t,e);return n.subscribe.bind(n)}class RA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xu),s.error===void 0&&(s.error=xu),s.complete===void 0&&(s.complete=xu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t){return t&&t._delegate?t._delegate:t}class nr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xA(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kA(t){return t===ps?void 0:t}function xA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const NA={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},OA=ke.INFO,VA={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},MA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xd{constructor(e){this.name=e,this._logLevel=OA,this._logHandler=MA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const LA=(t,e)=>e.some(n=>t instanceof n);let Cm,Pm;function FA(){return Cm||(Cm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UA(){return Pm||(Pm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hv=new WeakMap,Sh=new WeakMap,Wv=new WeakMap,Du=new WeakMap,Dd=new WeakMap;function $A(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Hv.set(n,t)}).catch(()=>{}),Dd.set(e,t),e}function qA(t){if(Sh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sh.set(t,e)}let Ah={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BA(t){Ah=t(Ah)}function jA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nu(this),e,...n);return Wv.set(r,e.sort?e.sort():[e]),Ur(r)}:UA().includes(t)?function(...e){return t.apply(Nu(this),e),Ur(Hv.get(this))}:function(...e){return Ur(t.apply(Nu(this),e))}}function zA(t){return typeof t=="function"?jA(t):(t instanceof IDBTransaction&&qA(t),LA(t,FA())?new Proxy(t,Ah):t)}function Ur(t){if(t instanceof IDBRequest)return $A(t);if(Du.has(t))return Du.get(t);const e=zA(t);return e!==t&&(Du.set(t,e),Dd.set(e,t)),e}const Nu=t=>Dd.get(t);function HA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ur(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ur(o.result),c.oldVersion,c.newVersion,Ur(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const WA=["get","getKey","getAll","getAllKeys","count"],KA=["put","add","delete","clear"],Ou=new Map;function km(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ou.get(e))return Ou.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||WA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Ou.set(e,i),i}BA(t=>({...t,get:(e,n,r)=>km(e,n)||t.get(e,n,r),has:(e,n)=>!!km(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QA(t){return t.getComponent()?.type==="VERSION"}const Rh="@firebase/app",xm="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new xd("@firebase/app"),YA="@firebase/app-compat",XA="@firebase/analytics-compat",JA="@firebase/analytics",ZA="@firebase/app-check-compat",eR="@firebase/app-check",tR="@firebase/auth",nR="@firebase/auth-compat",rR="@firebase/database",sR="@firebase/data-connect",iR="@firebase/database-compat",oR="@firebase/functions",aR="@firebase/functions-compat",lR="@firebase/installations",cR="@firebase/installations-compat",uR="@firebase/messaging",hR="@firebase/messaging-compat",dR="@firebase/performance",fR="@firebase/performance-compat",pR="@firebase/remote-config",mR="@firebase/remote-config-compat",gR="@firebase/storage",_R="@firebase/storage-compat",yR="@firebase/firestore",vR="@firebase/ai",wR="@firebase/firestore-compat",bR="firebase",ER="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="[DEFAULT]",TR={[Rh]:"fire-core",[YA]:"fire-core-compat",[JA]:"fire-analytics",[XA]:"fire-analytics-compat",[eR]:"fire-app-check",[ZA]:"fire-app-check-compat",[tR]:"fire-auth",[nR]:"fire-auth-compat",[rR]:"fire-rtdb",[sR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[oR]:"fire-fn",[aR]:"fire-fn-compat",[lR]:"fire-iid",[cR]:"fire-iid-compat",[uR]:"fire-fcm",[hR]:"fire-fcm-compat",[dR]:"fire-perf",[fR]:"fire-perf-compat",[pR]:"fire-rc",[mR]:"fire-rc-compat",[gR]:"fire-gcs",[_R]:"fire-gcs-compat",[yR]:"fire-fst",[wR]:"fire-fst-compat",[vR]:"fire-vertex","fire-js":"fire-js",[bR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,IR=new Map,Ph=new Map;function Dm(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kr(t){const e=t.name;if(Ph.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Ph.set(e,t);for(const n of Fl.values())Dm(n,t);for(const n of IR.values())Dm(n,t);return!0}function na(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new ea("app","Firebase",SR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=ER;function Kv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ch,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $r.create("bad-app-name",{appName:String(s)});if(n||(n=Bv()),!n)throw $r.create("no-options");const i=Fl.get(s);if(i){if(Cs(n,i.options)&&Cs(r,i.config))return i;throw $r.create("duplicate-app",{appName:s})}const o=new DA(s);for(const c of Ph.values())o.addComponent(c);const l=new AR(n,r,o);return Fl.set(s,l),l}function Ic(t=Ch){const e=Fl.get(t);if(!e&&t===Ch&&Bv())return Kv();if(!e)throw $r.create("no-app",{appName:t});return e}function dn(t,e,n){let r=TR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(o.join(" "));return}Kr(new nr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebase-heartbeat-database",CR=1,Lo="firebase-heartbeat-store";let Vu=null;function Gv(){return Vu||(Vu=HA(RR,CR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Vu}async function PR(t){try{const n=(await Gv()).transaction(Lo),r=await n.objectStore(Lo).get(Qv(t));return await n.done,r}catch(e){if(e instanceof qn)rr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e?.message});rr.warn(n.message)}}}async function Nm(t,e){try{const r=(await Gv()).transaction(Lo,"readwrite");await r.objectStore(Lo).put(e,Qv(t)),await r.done}catch(n){if(n instanceof qn)rr.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n?.message});rr.warn(r.message)}}}function Qv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=1024,xR=30;class DR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Om();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>xR){const s=VR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){rr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Om(),{heartbeatsToSend:n,unsentEntries:r}=NR(this._heartbeatsCache.heartbeats),s=Ll(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return rr.warn(e),""}}}function Om(){return new Date().toISOString().substring(0,10)}function NR(t,e=kR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?bA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Vm(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}function VR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){Kr(new nr("platform-logger",e=>new GA(e),"PRIVATE")),Kr(new nr("heartbeat",e=>new DR(e),"PRIVATE")),dn(Rh,xm,t),dn(Rh,xm,"esm2020"),dn("fire-js","")}MR("");var Mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,Yv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,b){function y(){}y.prototype=b.prototype,S.D=b.prototype,S.prototype=new y,S.prototype.constructor=S,S.C=function(E,v,g){for(var _=Array(arguments.length-2),N=2;N<arguments.length;N++)_[N-2]=arguments[N];return b.prototype[v].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,b,y){y||(y=0);var E=Array(16);if(typeof b=="string")for(var v=0;16>v;++v)E[v]=b.charCodeAt(y++)|b.charCodeAt(y++)<<8|b.charCodeAt(y++)<<16|b.charCodeAt(y++)<<24;else for(v=0;16>v;++v)E[v]=b[y++]|b[y++]<<8|b[y++]<<16|b[y++]<<24;b=S.g[0],y=S.g[1],v=S.g[2];var g=S.g[3],_=b+(g^y&(v^g))+E[0]+3614090360&4294967295;b=y+(_<<7&4294967295|_>>>25),_=g+(v^b&(y^v))+E[1]+3905402710&4294967295,g=b+(_<<12&4294967295|_>>>20),_=v+(y^g&(b^y))+E[2]+606105819&4294967295,v=g+(_<<17&4294967295|_>>>15),_=y+(b^v&(g^b))+E[3]+3250441966&4294967295,y=v+(_<<22&4294967295|_>>>10),_=b+(g^y&(v^g))+E[4]+4118548399&4294967295,b=y+(_<<7&4294967295|_>>>25),_=g+(v^b&(y^v))+E[5]+1200080426&4294967295,g=b+(_<<12&4294967295|_>>>20),_=v+(y^g&(b^y))+E[6]+2821735955&4294967295,v=g+(_<<17&4294967295|_>>>15),_=y+(b^v&(g^b))+E[7]+4249261313&4294967295,y=v+(_<<22&4294967295|_>>>10),_=b+(g^y&(v^g))+E[8]+1770035416&4294967295,b=y+(_<<7&4294967295|_>>>25),_=g+(v^b&(y^v))+E[9]+2336552879&4294967295,g=b+(_<<12&4294967295|_>>>20),_=v+(y^g&(b^y))+E[10]+4294925233&4294967295,v=g+(_<<17&4294967295|_>>>15),_=y+(b^v&(g^b))+E[11]+2304563134&4294967295,y=v+(_<<22&4294967295|_>>>10),_=b+(g^y&(v^g))+E[12]+1804603682&4294967295,b=y+(_<<7&4294967295|_>>>25),_=g+(v^b&(y^v))+E[13]+4254626195&4294967295,g=b+(_<<12&4294967295|_>>>20),_=v+(y^g&(b^y))+E[14]+2792965006&4294967295,v=g+(_<<17&4294967295|_>>>15),_=y+(b^v&(g^b))+E[15]+1236535329&4294967295,y=v+(_<<22&4294967295|_>>>10),_=b+(v^g&(y^v))+E[1]+4129170786&4294967295,b=y+(_<<5&4294967295|_>>>27),_=g+(y^v&(b^y))+E[6]+3225465664&4294967295,g=b+(_<<9&4294967295|_>>>23),_=v+(b^y&(g^b))+E[11]+643717713&4294967295,v=g+(_<<14&4294967295|_>>>18),_=y+(g^b&(v^g))+E[0]+3921069994&4294967295,y=v+(_<<20&4294967295|_>>>12),_=b+(v^g&(y^v))+E[5]+3593408605&4294967295,b=y+(_<<5&4294967295|_>>>27),_=g+(y^v&(b^y))+E[10]+38016083&4294967295,g=b+(_<<9&4294967295|_>>>23),_=v+(b^y&(g^b))+E[15]+3634488961&4294967295,v=g+(_<<14&4294967295|_>>>18),_=y+(g^b&(v^g))+E[4]+3889429448&4294967295,y=v+(_<<20&4294967295|_>>>12),_=b+(v^g&(y^v))+E[9]+568446438&4294967295,b=y+(_<<5&4294967295|_>>>27),_=g+(y^v&(b^y))+E[14]+3275163606&4294967295,g=b+(_<<9&4294967295|_>>>23),_=v+(b^y&(g^b))+E[3]+4107603335&4294967295,v=g+(_<<14&4294967295|_>>>18),_=y+(g^b&(v^g))+E[8]+1163531501&4294967295,y=v+(_<<20&4294967295|_>>>12),_=b+(v^g&(y^v))+E[13]+2850285829&4294967295,b=y+(_<<5&4294967295|_>>>27),_=g+(y^v&(b^y))+E[2]+4243563512&4294967295,g=b+(_<<9&4294967295|_>>>23),_=v+(b^y&(g^b))+E[7]+1735328473&4294967295,v=g+(_<<14&4294967295|_>>>18),_=y+(g^b&(v^g))+E[12]+2368359562&4294967295,y=v+(_<<20&4294967295|_>>>12),_=b+(y^v^g)+E[5]+4294588738&4294967295,b=y+(_<<4&4294967295|_>>>28),_=g+(b^y^v)+E[8]+2272392833&4294967295,g=b+(_<<11&4294967295|_>>>21),_=v+(g^b^y)+E[11]+1839030562&4294967295,v=g+(_<<16&4294967295|_>>>16),_=y+(v^g^b)+E[14]+4259657740&4294967295,y=v+(_<<23&4294967295|_>>>9),_=b+(y^v^g)+E[1]+2763975236&4294967295,b=y+(_<<4&4294967295|_>>>28),_=g+(b^y^v)+E[4]+1272893353&4294967295,g=b+(_<<11&4294967295|_>>>21),_=v+(g^b^y)+E[7]+4139469664&4294967295,v=g+(_<<16&4294967295|_>>>16),_=y+(v^g^b)+E[10]+3200236656&4294967295,y=v+(_<<23&4294967295|_>>>9),_=b+(y^v^g)+E[13]+681279174&4294967295,b=y+(_<<4&4294967295|_>>>28),_=g+(b^y^v)+E[0]+3936430074&4294967295,g=b+(_<<11&4294967295|_>>>21),_=v+(g^b^y)+E[3]+3572445317&4294967295,v=g+(_<<16&4294967295|_>>>16),_=y+(v^g^b)+E[6]+76029189&4294967295,y=v+(_<<23&4294967295|_>>>9),_=b+(y^v^g)+E[9]+3654602809&4294967295,b=y+(_<<4&4294967295|_>>>28),_=g+(b^y^v)+E[12]+3873151461&4294967295,g=b+(_<<11&4294967295|_>>>21),_=v+(g^b^y)+E[15]+530742520&4294967295,v=g+(_<<16&4294967295|_>>>16),_=y+(v^g^b)+E[2]+3299628645&4294967295,y=v+(_<<23&4294967295|_>>>9),_=b+(v^(y|~g))+E[0]+4096336452&4294967295,b=y+(_<<6&4294967295|_>>>26),_=g+(y^(b|~v))+E[7]+1126891415&4294967295,g=b+(_<<10&4294967295|_>>>22),_=v+(b^(g|~y))+E[14]+2878612391&4294967295,v=g+(_<<15&4294967295|_>>>17),_=y+(g^(v|~b))+E[5]+4237533241&4294967295,y=v+(_<<21&4294967295|_>>>11),_=b+(v^(y|~g))+E[12]+1700485571&4294967295,b=y+(_<<6&4294967295|_>>>26),_=g+(y^(b|~v))+E[3]+2399980690&4294967295,g=b+(_<<10&4294967295|_>>>22),_=v+(b^(g|~y))+E[10]+4293915773&4294967295,v=g+(_<<15&4294967295|_>>>17),_=y+(g^(v|~b))+E[1]+2240044497&4294967295,y=v+(_<<21&4294967295|_>>>11),_=b+(v^(y|~g))+E[8]+1873313359&4294967295,b=y+(_<<6&4294967295|_>>>26),_=g+(y^(b|~v))+E[15]+4264355552&4294967295,g=b+(_<<10&4294967295|_>>>22),_=v+(b^(g|~y))+E[6]+2734768916&4294967295,v=g+(_<<15&4294967295|_>>>17),_=y+(g^(v|~b))+E[13]+1309151649&4294967295,y=v+(_<<21&4294967295|_>>>11),_=b+(v^(y|~g))+E[4]+4149444226&4294967295,b=y+(_<<6&4294967295|_>>>26),_=g+(y^(b|~v))+E[11]+3174756917&4294967295,g=b+(_<<10&4294967295|_>>>22),_=v+(b^(g|~y))+E[2]+718787259&4294967295,v=g+(_<<15&4294967295|_>>>17),_=y+(g^(v|~b))+E[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(v+(_<<21&4294967295|_>>>11))&4294967295,S.g[2]=S.g[2]+v&4294967295,S.g[3]=S.g[3]+g&4294967295}r.prototype.u=function(S,b){b===void 0&&(b=S.length);for(var y=b-this.blockSize,E=this.B,v=this.h,g=0;g<b;){if(v==0)for(;g<=y;)s(this,S,g),g+=this.blockSize;if(typeof S=="string"){for(;g<b;)if(E[v++]=S.charCodeAt(g++),v==this.blockSize){s(this,E),v=0;break}}else for(;g<b;)if(E[v++]=S[g++],v==this.blockSize){s(this,E),v=0;break}}this.h=v,this.o+=b},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;var y=8*this.o;for(b=S.length-8;b<S.length;++b)S[b]=y&255,y/=256;for(this.u(S),S=Array(16),b=y=0;4>b;++b)for(var E=0;32>E;E+=8)S[y++]=this.g[b]>>>E&255;return S};function i(S,b){var y=l;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=b(S)}function o(S,b){this.h=b;for(var y=[],E=!0,v=S.length-1;0<=v;v--){var g=S[v]|0;E&&g==b||(y[v]=g,E=!1)}this.g=y}var l={};function c(S){return-128<=S&&128>S?i(S,function(b){return new o([b|0],0>b?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return P(u(-S));for(var b=[],y=1,E=0;S>=y;E++)b[E]=S/y|0,y*=4294967296;return new o(b,0)}function h(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return P(h(S.substring(1),b));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(b,8)),E=f,v=0;v<S.length;v+=8){var g=Math.min(8,S.length-v),_=parseInt(S.substring(v,v+g),b);8>g?(g=u(Math.pow(b,g)),E=E.j(g).add(u(_))):(E=E.j(y),E=E.add(u(_)))}return E}var f=c(0),p=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var S=0,b=1,y=0;y<this.g.length;y++){var E=this.i(y);S+=(0<=E?E:4294967296+E)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I(this))return"0";if(k(this))return"-"+P(this).toString(S);for(var b=u(Math.pow(S,6)),y=this,E="";;){var v=D(y,b).g;y=F(y,v.j(b));var g=((0<y.g.length?y.g[0]:y.h)>>>0).toString(S);if(y=v,I(y))return g+E;for(;6>g.length;)g="0"+g;E=g+E}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function I(S){if(S.h!=0)return!1;for(var b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=F(this,S),k(S)?-1:I(S)?0:1};function P(S){for(var b=S.g.length,y=[],E=0;E<b;E++)y[E]=~S.g[E];return new o(y,~S.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(S){for(var b=Math.max(this.g.length,S.g.length),y=[],E=0,v=0;v<=b;v++){var g=E+(this.i(v)&65535)+(S.i(v)&65535),_=(g>>>16)+(this.i(v)>>>16)+(S.i(v)>>>16);E=_>>>16,g&=65535,_&=65535,y[v]=_<<16|g}return new o(y,y[y.length-1]&-2147483648?-1:0)};function F(S,b){return S.add(P(b))}t.j=function(S){if(I(this)||I(S))return f;if(k(this))return k(S)?P(this).j(P(S)):P(P(this).j(S));if(k(S))return P(this.j(P(S)));if(0>this.l(w)&&0>S.l(w))return u(this.m()*S.m());for(var b=this.g.length+S.g.length,y=[],E=0;E<2*b;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(var v=0;v<S.g.length;v++){var g=this.i(E)>>>16,_=this.i(E)&65535,N=S.i(v)>>>16,ee=S.i(v)&65535;y[2*E+2*v]+=_*ee,A(y,2*E+2*v),y[2*E+2*v+1]+=g*ee,A(y,2*E+2*v+1),y[2*E+2*v+1]+=_*N,A(y,2*E+2*v+1),y[2*E+2*v+2]+=g*N,A(y,2*E+2*v+2)}for(E=0;E<b;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=b;E<2*b;E++)y[E]=0;return new o(y,0)};function A(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function x(S,b){this.g=S,this.h=b}function D(S,b){if(I(b))throw Error("division by zero");if(I(S))return new x(f,f);if(k(S))return b=D(P(S),b),new x(P(b.g),P(b.h));if(k(b))return b=D(S,P(b)),new x(P(b.g),b.h);if(30<S.g.length){if(k(S)||k(b))throw Error("slowDivide_ only works with positive integers.");for(var y=p,E=b;0>=E.l(S);)y=B(y),E=B(E);var v=H(y,1),g=H(E,1);for(E=H(E,2),y=H(y,2);!I(E);){var _=g.add(E);0>=_.l(S)&&(v=v.add(y),g=_),E=H(E,1),y=H(y,1)}return b=F(S,v.j(b)),new x(v,b)}for(v=f;0<=S.l(b);){for(y=Math.max(1,Math.floor(S.m()/b.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),g=u(y),_=g.j(b);k(_)||0<_.l(S);)y-=E,g=u(y),_=g.j(b);I(g)&&(g=p),v=v.add(g),S=F(S,_)}return new x(v,S)}t.A=function(S){return D(this,S).h},t.and=function(S){for(var b=Math.max(this.g.length,S.g.length),y=[],E=0;E<b;E++)y[E]=this.i(E)&S.i(E);return new o(y,this.h&S.h)},t.or=function(S){for(var b=Math.max(this.g.length,S.g.length),y=[],E=0;E<b;E++)y[E]=this.i(E)|S.i(E);return new o(y,this.h|S.h)},t.xor=function(S){for(var b=Math.max(this.g.length,S.g.length),y=[],E=0;E<b;E++)y[E]=this.i(E)^S.i(E);return new o(y,this.h^S.h)};function B(S){for(var b=S.g.length+1,y=[],E=0;E<b;E++)y[E]=S.i(E)<<1|S.i(E-1)>>>31;return new o(y,S.h)}function H(S,b){var y=b>>5;b%=32;for(var E=S.g.length-y,v=[],g=0;g<E;g++)v[g]=0<b?S.i(g+y)>>>b|S.i(g+y+1)<<32-b:S.i(g+y);return new o(v,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Yv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,qr=o}).apply(typeof Mm<"u"?Mm:typeof self<"u"?self:typeof window<"u"?window:{});var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xv,no,Jv,rl,kh,Zv,ew,tw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,m){return a==Array.prototype||a==Object.prototype||(a[d]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ua=="object"&&Ua];for(var d=0;d<a.length;++d){var m=a[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var m=r;a=a.split(".");for(var T=0;T<a.length-1;T++){var V=a[T];if(!(V in m))break e;m=m[V]}a=a[a.length-1],T=m[a],d=d(T),d!=T&&d!=null&&e(m,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var m=0,T=!1,V={next:function(){if(!T&&m<a.length){var j=m++;return{value:d(j,a[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,m){return a.call.apply(a.bind,arguments)}function f(a,d,m){if(!a)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,T),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function p(a,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function w(a,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),a.apply(this,T)}}function I(a,d){function m(){}m.prototype=d.prototype,a.aa=d.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(T,V,j){for(var re=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)re[ze-2]=arguments[ze];return d.prototype[V].apply(T,re)}}function k(a){const d=a.length;if(0<d){const m=Array(d);for(let T=0;T<d;T++)m[T]=a[T];return m}return[]}function P(a,d){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(c(T)){const V=a.length||0,j=T.length||0;a.length=V+j;for(let re=0;re<j;re++)a[V+re]=T[re]}else a.push(T)}}class F{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var B=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function H(a,d,m){for(const T in a)d.call(m,a[T],T,a)}function S(a,d){for(const m in a)d.call(void 0,a[m],m,a)}function b(a){const d={};for(const m in a)d[m]=a[m];return d}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let m,T;for(let V=1;V<arguments.length;V++){T=arguments[V];for(m in T)a[m]=T[m];for(let j=0;j<y.length;j++)m=y[j],Object.prototype.hasOwnProperty.call(T,m)&&(a[m]=T[m])}}function v(a){var d=1;a=a.split(":");const m=[];for(;0<d&&a.length;)m.push(a.shift()),d--;return a.length&&m.push(a.join(":")),m}function g(a){l.setTimeout(()=>{throw a},0)}function _(){var a=z;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class N{constructor(){this.h=this.g=null}add(d,m){const T=ee.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var ee=new F(()=>new X,a=>a.reset());class X{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let L,M=!1,z=new N,ce=()=>{const a=l.Promise.resolve(void 0);L=()=>{a.then(ie)}};var ie=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(m){g(m)}var d=ee;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}M=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Me=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,d),l.removeEventListener("test",m,d)}catch{}return a}();function Ne(a,d){if(pe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,T=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(B){e:{try{D(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else m=="mouseover"?d=a.fromElement:m=="mouseout"&&(d=a.toElement);this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:he[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ne.aa.h.call(this)}}I(Ne,pe);var he={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),oe=0;function se(a,d,m,T,V){this.listener=a,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=V,this.key=++oe,this.da=this.fa=!1}function fe(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Le(a){this.src=a,this.g={},this.h=0}Le.prototype.add=function(a,d,m,T,V){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var re=C(a,d,T,V);return-1<re?(d=a[re],m||(d.fa=!1)):(d=new se(d,this.src,j,!!T,V),d.fa=m,a.push(d)),d};function R(a,d){var m=d.type;if(m in a.g){var T=a.g[m],V=Array.prototype.indexOf.call(T,d,void 0),j;(j=0<=V)&&Array.prototype.splice.call(T,V,1),j&&(fe(d),a.g[m].length==0&&(delete a.g[m],a.h--))}}function C(a,d,m,T){for(var V=0;V<a.length;++V){var j=a[V];if(!j.da&&j.listener==d&&j.capture==!!m&&j.ha==T)return V}return-1}var O="closure_lm_"+(1e6*Math.random()|0),G={};function J(a,d,m,T,V){if(Array.isArray(d)){for(var j=0;j<d.length;j++)J(a,d[j],m,T,V);return null}return m=be(m),a&&a[$]?a.K(d,m,u(T)?!!T.capture:!1,V):Q(a,d,m,!1,T,V)}function Q(a,d,m,T,V,j){if(!d)throw Error("Invalid event type");var re=u(V)?!!V.capture:!!V,ze=ae(a);if(ze||(a[O]=ze=new Le(a)),m=ze.add(d,m,T,re,j),m.proxy)return m;if(T=le(),m.proxy=T,T.src=a,T.listener=m,a.addEventListener)Me||(V=re),V===void 0&&(V=!1),a.addEventListener(d.toString(),T,V);else if(a.attachEvent)a.attachEvent(Z(d.toString()),T);else if(a.addListener&&a.removeListener)a.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function le(){function a(m){return d.call(a.src,a.listener,m)}const d=ge;return a}function ne(a,d,m,T,V){if(Array.isArray(d))for(var j=0;j<d.length;j++)ne(a,d[j],m,T,V);else T=u(T)?!!T.capture:!!T,m=be(m),a&&a[$]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],m=C(j,m,T,V),-1<m&&(fe(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=ae(a))&&(d=a.g[d.toString()],a=-1,d&&(a=C(d,m,T,V)),(m=-1<a?d[a]:null)&&te(m))}function te(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[$])R(d.i,a);else{var m=a.type,T=a.proxy;d.removeEventListener?d.removeEventListener(m,T,a.capture):d.detachEvent?d.detachEvent(Z(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=ae(d))?(R(m,a),m.h==0&&(m.src=null,d[O]=null)):fe(a)}}}function Z(a){return a in G?G[a]:G[a]="on"+a}function ge(a,d){if(a.da)a=!0;else{d=new Ne(d,this);var m=a.listener,T=a.ha||a.src;a.fa&&te(a),a=m.call(T,d)}return a}function ae(a){return a=a[O],a instanceof Le?a:null}var me="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(a){return typeof a=="function"?a:(a[me]||(a[me]=function(d){return a.handleEvent(d)}),a[me])}function ye(){U.call(this),this.i=new Le(this),this.M=this,this.F=null}I(ye,U),ye.prototype[$]=!0,ye.prototype.removeEventListener=function(a,d,m,T){ne(this,a,d,m,T)};function Re(a,d){var m,T=a.F;if(T)for(m=[];T;T=T.F)m.push(T);if(a=a.M,T=d.type||d,typeof d=="string")d=new pe(d,a);else if(d instanceof pe)d.target=d.target||a;else{var V=d;d=new pe(T,a),E(d,V)}if(V=!0,m)for(var j=m.length-1;0<=j;j--){var re=d.g=m[j];V=Oe(re,T,!0,d)&&V}if(re=d.g=a,V=Oe(re,T,!0,d)&&V,V=Oe(re,T,!1,d)&&V,m)for(j=0;j<m.length;j++)re=d.g=m[j],V=Oe(re,T,!1,d)&&V}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var m=a.g[d],T=0;T<m.length;T++)fe(m[T]);delete a.g[d],a.h--}}this.F=null},ye.prototype.K=function(a,d,m,T){return this.i.add(String(a),d,!1,m,T)},ye.prototype.L=function(a,d,m,T){return this.i.add(String(a),d,!0,m,T)};function Oe(a,d,m,T){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,j=0;j<d.length;++j){var re=d[j];if(re&&!re.da&&re.capture==m){var ze=re.listener,vt=re.ha||re.src;re.fa&&R(a.i,re),V=ze.call(vt,T)!==!1&&V}}return V&&!T.defaultPrevented}function gt(a,d,m){if(typeof a=="function")m&&(a=p(a,m));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function _t(a){a.g=gt(()=>{a.g=null,a.i&&(a.i=!1,_t(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class rn extends U{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pt(a){U.call(this),this.h=a,this.g={}}I(Pt,U);var mr=[];function xi(a){H(a.g,function(d,m){this.g.hasOwnProperty(m)&&te(d)},a),a.g={}}Pt.prototype.N=function(){Pt.aa.N.call(this),xi(this)},Pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yt=l.JSON.stringify,sn=l.JSON.parse,ga=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function qs(){}qs.prototype.h=null;function Bf(a){return a.h||(a.h=a.i())}function jf(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tu(){pe.call(this,"d")}I(tu,pe);function nu(){pe.call(this,"c")}I(nu,pe);var is={},zf=null;function _a(){return zf=zf||new ye}is.La="serverreachability";function Hf(a){pe.call(this,is.La,a)}I(Hf,pe);function Ni(a){const d=_a();Re(d,new Hf(d))}is.STAT_EVENT="statevent";function Wf(a,d){pe.call(this,is.STAT_EVENT,a),this.stat=d}I(Wf,pe);function Ut(a){const d=_a();Re(d,new Wf(d,a))}is.Ma="timingevent";function Kf(a,d){pe.call(this,is.Ma,a),this.size=d}I(Kf,pe);function Oi(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Vi(){this.g=!0}Vi.prototype.xa=function(){this.g=!1};function yT(a,d,m,T,V,j){a.info(function(){if(a.g)if(j)for(var re="",ze=j.split("&"),vt=0;vt<ze.length;vt++){var Fe=ze[vt].split("=");if(1<Fe.length){var kt=Fe[0];Fe=Fe[1];var xt=kt.split("_");re=2<=xt.length&&xt[1]=="type"?re+(kt+"="+Fe+"&"):re+(kt+"=redacted&")}}else re=null;else re=j;return"XMLHTTP REQ ("+T+") [attempt "+V+"]: "+d+`
`+m+`
`+re})}function vT(a,d,m,T,V,j,re){a.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+V+"]: "+d+`
`+m+`
`+j+" "+re})}function Bs(a,d,m,T){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+bT(a,m)+(T?" "+T:"")})}function wT(a,d){a.info(function(){return"TIMEOUT: "+d})}Vi.prototype.info=function(){};function bT(a,d){if(!a.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var T=m[a];if(!(2>T.length)){var V=T[1];if(Array.isArray(V)&&!(1>V.length)){var j=V[0];if(j!="noop"&&j!="stop"&&j!="close")for(var re=1;re<V.length;re++)V[re]=""}}}}return yt(m)}catch{return d}}var ya={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ru;function va(){}I(va,qs),va.prototype.g=function(){return new XMLHttpRequest},va.prototype.i=function(){return{}},ru=new va;function gr(a,d,m,T){this.j=a,this.i=d,this.l=m,this.R=T||1,this.U=new Pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qf}function Qf(){this.i=null,this.g="",this.h=!1}var Yf={},su={};function iu(a,d,m){a.L=1,a.v=Ta(Bn(d)),a.m=m,a.P=!0,Xf(a,null)}function Xf(a,d){a.F=Date.now(),wa(a),a.A=Bn(a.v);var m=a.A,T=a.R;Array.isArray(T)||(T=[String(T)]),hp(m.i,"t",T),a.C=0,m=a.j.J,a.h=new Qf,a.g=Pp(a.j,m?d:null,!a.m),0<a.O&&(a.M=new rn(p(a.Y,a,a.g),a.O)),d=a.U,m=a.g,T=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(mr[0]=V.toString()),V=mr);for(var j=0;j<V.length;j++){var re=J(m,V[j],T||d.handleEvent,!1,d.h||d);if(!re)break;d.g[re.key]=re}d=a.H?b(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ni(),yT(a.i,a.u,a.A,a.l,a.R,a.m)}gr.prototype.ca=function(a){a=a.target;const d=this.M;d&&jn(a)==3?d.j():this.Y(a)},gr.prototype.Y=function(a){try{if(a==this.g)e:{const xt=jn(this.g);var d=this.g.Ba();const Hs=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||yp(this.g)))){this.J||xt!=4||d==7||(d==8||0>=Hs?Ni(3):Ni(2)),ou(this);var m=this.g.Z();this.X=m;t:if(Jf(this)){var T=yp(this.g);a="";var V=T.length,j=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),Mi(this);var re="";break t}this.h.i=new l.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(T[d],{stream:!(j&&d==V-1)});T.length=0,this.h.g+=a,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=m==200,vT(this.i,this.u,this.A,this.l,this.R,xt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,vt=this.g;if((ze=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(ze)){var Fe=ze;break t}}Fe=null}if(m=Fe)Bs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,au(this,m);else{this.o=!1,this.s=3,Ut(12),os(this),Mi(this);break e}}if(this.P){m=!0;let gn;for(;!this.J&&this.C<re.length;)if(gn=ET(this,re),gn==su){xt==4&&(this.s=4,Ut(14),m=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Yf){this.s=4,Ut(15),Bs(this.i,this.l,re,"[Invalid Chunk]"),m=!1;break}else Bs(this.i,this.l,gn,null),au(this,gn);if(Jf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||re.length!=0||this.h.h||(this.s=1,Ut(16),m=!1),this.o=this.o&&m,!m)Bs(this.i,this.l,re,"[Invalid Chunked Response]"),os(this),Mi(this);else if(0<re.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),fu(kt),kt.M=!0,Ut(11))}}else Bs(this.i,this.l,re,null),au(this,re);xt==4&&os(this),this.o&&!this.J&&(xt==4?Sp(this.j,this):(this.o=!1,wa(this)))}else UT(this.g),m==400&&0<re.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),os(this),Mi(this)}}}catch{}finally{}};function Jf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ET(a,d){var m=a.C,T=d.indexOf(`
`,m);return T==-1?su:(m=Number(d.substring(m,T)),isNaN(m)?Yf:(T+=1,T+m>d.length?su:(d=d.slice(T,T+m),a.C=T+m,d)))}gr.prototype.cancel=function(){this.J=!0,os(this)};function wa(a){a.S=Date.now()+a.I,Zf(a,a.I)}function Zf(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Oi(p(a.ba,a),d)}function ou(a){a.B&&(l.clearTimeout(a.B),a.B=null)}gr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(wT(this.i,this.A),this.L!=2&&(Ni(),Ut(17)),os(this),this.s=2,Mi(this)):Zf(this,this.S-a)};function Mi(a){a.j.G==0||a.J||Sp(a.j,a)}function os(a){ou(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,xi(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function au(a,d){try{var m=a.j;if(m.G!=0&&(m.g==a||lu(m.h,a))){if(!a.K&&lu(m.h,a)&&m.G==3){try{var T=m.Da.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var V=T;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Pa(m),Ra(m);else break e;du(m),Ut(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=Oi(p(m.Za,m),6e3));if(1>=np(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ls(m,11)}else if((a.K||m.g==a)&&Pa(m),!A(d))for(V=m.Da.g.parse(d),d=0;d<V.length;d++){let Fe=V[d];if(m.T=Fe[0],Fe=Fe[1],m.G==2)if(Fe[0]=="c"){m.K=Fe[1],m.ia=Fe[2];const kt=Fe[3];kt!=null&&(m.la=kt,m.j.info("VER="+m.la));const xt=Fe[4];xt!=null&&(m.Aa=xt,m.j.info("SVER="+m.Aa));const Hs=Fe[5];Hs!=null&&typeof Hs=="number"&&0<Hs&&(T=1.5*Hs,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const gn=a.g;if(gn){const xa=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var j=T.h;j.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(cu(j,j.h),j.h=null))}if(T.D){const pu=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(T.ya=pu,Qe(T.I,T.D,pu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var re=a;if(T.qa=Cp(T,T.J?T.ia:null,T.W),re.K){rp(T.h,re);var ze=re,vt=T.L;vt&&(ze.I=vt),ze.B&&(ou(ze),wa(ze)),T.g=re}else Tp(T);0<m.i.length&&Ca(m)}else Fe[0]!="stop"&&Fe[0]!="close"||ls(m,7);else m.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ls(m,7):hu(m):Fe[0]!="noop"&&m.l&&m.l.ta(Fe),m.v=0)}}Ni(4)}catch{}}var TT=class{constructor(a,d){this.g=a,this.map=d}};function ep(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function np(a){return a.h?1:a.g?a.g.size:0}function lu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function cu(a,d){a.g?a.g.add(d):a.h=d}function rp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}ep.prototype.cancel=function(){if(this.i=sp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function sp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const m of a.g.values())d=d.concat(m.D);return d}return k(a.i)}function IT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],m=a.length,T=0;T<m;T++)d.push(a[T]);return d}d=[],m=0;for(T in a)d[m++]=a[T];return d}function ST(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var m=0;m<a;m++)d.push(m);return d}d=[],m=0;for(const T in a)d[m++]=T;return d}}}function ip(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var m=ST(a),T=IT(a),V=T.length,j=0;j<V;j++)d.call(void 0,T[j],m&&m[j],a)}var op=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AT(a,d){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var T=a[m].indexOf("="),V=null;if(0<=T){var j=a[m].substring(0,T);V=a[m].substring(T+1)}else j=a[m];d(j,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function as(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof as){this.h=a.h,ba(this,a.j),this.o=a.o,this.g=a.g,Ea(this,a.s),this.l=a.l;var d=a.i,m=new Ui;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),ap(this,m),this.m=a.m}else a&&(d=String(a).match(op))?(this.h=!1,ba(this,d[1]||"",!0),this.o=Li(d[2]||""),this.g=Li(d[3]||"",!0),Ea(this,d[4]),this.l=Li(d[5]||"",!0),ap(this,d[6]||"",!0),this.m=Li(d[7]||"")):(this.h=!1,this.i=new Ui(null,this.h))}as.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Fi(d,lp,!0),":");var m=this.g;return(m||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Fi(d,lp,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Fi(m,m.charAt(0)=="/"?PT:CT,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Fi(m,xT)),a.join("")};function Bn(a){return new as(a)}function ba(a,d,m){a.j=m?Li(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Ea(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function ap(a,d,m){d instanceof Ui?(a.i=d,DT(a.i,a.h)):(m||(d=Fi(d,kT)),a.i=new Ui(d,a.h))}function Qe(a,d,m){a.i.set(d,m)}function Ta(a){return Qe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Li(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Fi(a,d,m){return typeof a=="string"?(a=encodeURI(a).replace(d,RT),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function RT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lp=/[#\/\?@]/g,CT=/[#\?:]/g,PT=/[#\?]/g,kT=/[#\?@]/g,xT=/#/g;function Ui(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&AT(a.i,function(d,m){a.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Ui.prototype,t.add=function(a,d){_r(this),this.i=null,a=js(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(d),this.h+=1,this};function cp(a,d){_r(a),d=js(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function up(a,d){return _r(a),d=js(a,d),a.g.has(d)}t.forEach=function(a,d){_r(this),this.g.forEach(function(m,T){m.forEach(function(V){a.call(d,V,T,this)},this)},this)},t.na=function(){_r(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let T=0;T<d.length;T++){const V=a[T];for(let j=0;j<V.length;j++)m.push(d[T])}return m},t.V=function(a){_r(this);let d=[];if(typeof a=="string")up(this,a)&&(d=d.concat(this.g.get(js(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)d=d.concat(a[m])}return d},t.set=function(a,d){return _r(this),this.i=null,a=js(this,a),up(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function hp(a,d,m){cp(a,d),0<m.length&&(a.i=null,a.g.set(js(a,d),k(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var T=d[m];const j=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var V=j;re[T]!==""&&(V+="="+encodeURIComponent(String(re[T]))),a.push(V)}}return this.i=a.join("&")};function js(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function DT(a,d){d&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(m,T){var V=T.toLowerCase();T!=V&&(cp(this,T),hp(this,V,m))},a)),a.j=d}function NT(a,d){const m=new Vi;if(l.Image){const T=new Image;T.onload=w(yr,m,"TestLoadImage: loaded",!0,d,T),T.onerror=w(yr,m,"TestLoadImage: error",!1,d,T),T.onabort=w(yr,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=w(yr,m,"TestLoadImage: timeout",!1,d,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=a}else d(!1)}function OT(a,d){const m=new Vi,T=new AbortController,V=setTimeout(()=>{T.abort(),yr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:T.signal}).then(j=>{clearTimeout(V),j.ok?yr(m,"TestPingServer: ok",!0,d):yr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),yr(m,"TestPingServer: error",!1,d)})}function yr(a,d,m,T,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),T(m)}catch{}}function VT(){this.g=new ga}function MT(a,d,m){const T=m||"";try{ip(a,function(V,j){let re=V;u(V)&&(re=yt(V)),d.push(T+j+"="+encodeURIComponent(re))})}catch(V){throw d.push(T+"type="+encodeURIComponent("_badmap")),V}}function Ia(a){this.l=a.Ub||null,this.j=a.eb||!1}I(Ia,qs),Ia.prototype.g=function(){return new Sa(this.l,this.j)},Ia.prototype.i=function(a){return function(){return a}}({});function Sa(a,d){ye.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Sa,ye),t=Sa.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,qi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function dp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?$i(this):qi(this),this.readyState==3&&dp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,$i(this))},t.Qa=function(a){this.g&&(this.response=a,$i(this))},t.ga=function(){this.g&&$i(this)};function $i(a){a.readyState=4,a.l=null,a.j=null,a.v=null,qi(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=d.next();return a.join(`\r
`)};function qi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fp(a){let d="";return H(a,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function uu(a,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=fp(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):Qe(a,d,m))}function rt(a){ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(rt,ye);var LT=/^https?$/i,FT=["POST","PUT"];t=rt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ru.g(),this.v=this.o?Bf(this.o):Bf(ru),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){pp(this,j);return}if(a=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var V in T)m.set(V,T[V]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())m.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(FT,d,void 0))||T||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,re]of m)this.g.setRequestHeader(j,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_p(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){pp(this,j)}};function pp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,mp(a),Aa(a)}function mp(a){a.A||(a.A=!0,Re(a,"complete"),Re(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Re(this,"complete"),Re(this,"abort"),Aa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Aa(this,!0)),rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gp(this):this.bb())},t.bb=function(){gp(this)};function gp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||jn(a)!=4||a.Z()!=2)){if(a.u&&jn(a)==4)gt(a.Ea,0,a);else if(Re(a,"readystatechange"),jn(a)==4){a.h=!1;try{const re=a.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=re===0){var V=String(a.D).match(op)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),T=!LT.test(V?V.toLowerCase():"")}m=T}if(m)Re(a,"complete"),Re(a,"success");else{a.m=6;try{var j=2<jn(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",mp(a)}}finally{Aa(a)}}}}function Aa(a,d){if(a.g){_p(a);const m=a.g,T=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Re(a,"ready");try{m.onreadystatechange=T}catch{}}}function _p(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function jn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),sn(d)}};function yp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function UT(a){const d={};a=(a.g&&2<=jn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<a.length;T++){if(A(a[T]))continue;var m=v(a[T]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const j=d[V]||[];d[V]=j,j.push(m)}S(d,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(a,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||d}function vp(a){this.Aa=0,this.i=[],this.j=new Vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bi("baseRetryDelayMs",5e3,a),this.cb=Bi("retryDelaySeedMs",1e4,a),this.Wa=Bi("forwardChannelMaxRetries",2,a),this.wa=Bi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ep(a&&a.concurrentRequestLimit),this.Da=new VT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vp.prototype,t.la=8,t.G=1,t.connect=function(a,d,m,T){Ut(0),this.W=a,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=Cp(this,null,this.W),Ca(this)};function hu(a){if(wp(a),a.G==3){var d=a.U++,m=Bn(a.I);if(Qe(m,"SID",a.K),Qe(m,"RID",d),Qe(m,"TYPE","terminate"),ji(a,m),d=new gr(a,a.j,d),d.L=2,d.v=Ta(Bn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=d.v,m=!0),m||(d.g=Pp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),wa(d)}Rp(a)}function Ra(a){a.g&&(fu(a),a.g.cancel(),a.g=null)}function wp(a){Ra(a),a.u&&(l.clearTimeout(a.u),a.u=null),Pa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ca(a){if(!tp(a.h)&&!a.s){a.s=!0;var d=a.Ga;L||ce(),M||(L(),M=!0),z.add(d,a),a.B=0}}function $T(a,d){return np(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Oi(p(a.Ga,a,d),Ap(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new gr(this,this.j,a);let j=this.o;if(this.S&&(j?(j=b(j),E(j,this.S)):j=this.S),this.m!==null||this.O||(V.H=j,j=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Ep(this,V,d),m=Bn(this.I),Qe(m,"RID",a),Qe(m,"CVER",22),this.D&&Qe(m,"X-HTTP-Session-Id",this.D),ji(this,m),j&&(this.O?d="headers="+encodeURIComponent(String(fp(j)))+"&"+d:this.m&&uu(m,this.m,j)),cu(this.h,V),this.Ua&&Qe(m,"TYPE","init"),this.P?(Qe(m,"$req",d),Qe(m,"SID","null"),V.T=!0,iu(V,m,null)):iu(V,m,d),this.G=2}}else this.G==3&&(a?bp(this,a):this.i.length==0||tp(this.h)||bp(this))};function bp(a,d){var m;d?m=d.l:m=a.U++;const T=Bn(a.I);Qe(T,"SID",a.K),Qe(T,"RID",m),Qe(T,"AID",a.T),ji(a,T),a.m&&a.o&&uu(T,a.m,a.o),m=new gr(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Ep(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),cu(a.h,m),iu(m,T,d)}function ji(a,d){a.H&&H(a.H,function(m,T){Qe(d,T,m)}),a.l&&ip({},function(m,T){Qe(d,T,m)})}function Ep(a,d,m){m=Math.min(a.i.length,m);var T=a.l?p(a.l.Na,a.l,a):null;e:{var V=a.i;let j=-1;for(;;){const re=["count="+m];j==-1?0<m?(j=V[0].g,re.push("ofs="+j)):j=0:re.push("ofs="+j);let ze=!0;for(let vt=0;vt<m;vt++){let Fe=V[vt].g;const kt=V[vt].map;if(Fe-=j,0>Fe)j=Math.max(0,V[vt].g-100),ze=!1;else try{MT(kt,re,"req"+Fe+"_")}catch{T&&T(kt)}}if(ze){T=re.join("&");break e}}}return a=a.i.splice(0,m),d.D=a,T}function Tp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;L||ce(),M||(L(),M=!0),z.add(d,a),a.v=0}}function du(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Oi(p(a.Fa,a),Ap(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ip(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Oi(p(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),Ra(this),Ip(this))};function fu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Ip(a){a.g=new gr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Bn(a.qa);Qe(d,"RID","rpc"),Qe(d,"SID",a.K),Qe(d,"AID",a.T),Qe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Qe(d,"TO",a.ja),Qe(d,"TYPE","xmlhttp"),ji(a,d),a.m&&a.o&&uu(d,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Ta(Bn(d)),m.m=null,m.P=!0,Xf(m,a)}t.Za=function(){this.C!=null&&(this.C=null,Ra(this),du(this),Ut(19))};function Pa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Sp(a,d){var m=null;if(a.g==d){Pa(a),fu(a),a.g=null;var T=2}else if(lu(a.h,d))m=d.D,rp(a.h,d),T=1;else return;if(a.G!=0){if(d.o)if(T==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;T=_a(),Re(T,new Kf(T,m)),Ca(a)}else Tp(a);else if(V=d.s,V==3||V==0&&0<d.X||!(T==1&&$T(a,d)||T==2&&du(a)))switch(m&&0<m.length&&(d=a.h,d.i=d.i.concat(m)),V){case 1:ls(a,5);break;case 4:ls(a,10);break;case 3:ls(a,6);break;default:ls(a,2)}}}function Ap(a,d){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*d}function ls(a,d){if(a.j.info("Error code "+d),d==2){var m=p(a.fb,a),T=a.Xa;const V=!T;T=new as(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ba(T,"https"),Ta(T),V?NT(T.toString(),m):OT(T.toString(),m)}else Ut(2);a.G=0,a.l&&a.l.sa(d),Rp(a),wp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Rp(a){if(a.G=0,a.ka=[],a.l){const d=sp(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Cp(a,d,m){var T=m instanceof as?Bn(m):new as(m);if(T.g!="")d&&(T.g=d+"."+T.g),Ea(T,T.s);else{var V=l.location;T=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var j=new as(null);T&&ba(j,T),d&&(j.g=d),V&&Ea(j,V),m&&(j.l=m),T=j}return m=a.D,d=a.ya,m&&d&&Qe(T,m,d),Qe(T,"VER",a.la),ji(a,T),T}function Pp(a,d,m){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new rt(new Ia({eb:m})):new rt(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kp(){}t=kp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ka(){}ka.prototype.g=function(a,d){return new en(a,d)};function en(a,d){ye.call(this),this.g=new vp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!A(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!A(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new zs(this)}I(en,ye),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){hu(this.g)},en.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=yt(a),a=m);d.i.push(new TT(d.Ya++,a)),d.G==3&&Ca(d)},en.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,en.aa.N.call(this)};function xp(a){tu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const m in d){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}I(xp,tu);function Dp(){nu.call(this),this.status=1}I(Dp,nu);function zs(a){this.g=a}I(zs,kp),zs.prototype.ua=function(){Re(this.g,"a")},zs.prototype.ta=function(a){Re(this.g,new xp(a))},zs.prototype.sa=function(a){Re(this.g,new Dp)},zs.prototype.ra=function(){Re(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,tw=function(){return new ka},ew=function(){return _a()},Zv=is,kh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ya.NO_ERROR=0,ya.TIMEOUT=8,ya.HTTP_ERROR=6,rl=ya,Gf.COMPLETE="complete",Jv=Gf,jf.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",ye.prototype.listen=ye.prototype.K,no=jf,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,Xv=rt}).apply(typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{});const Lm="@firebase/firestore",Fm="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new xd("@firebase/firestore");function Zs(){return Ps.logLevel}function de(t,...e){if(Ps.logLevel<=ke.DEBUG){const n=e.map(Nd);Ps.debug(`Firestore (${Ti}): ${t}`,...n)}}function sr(t,...e){if(Ps.logLevel<=ke.ERROR){const n=e.map(Nd);Ps.error(`Firestore (${Ti}): ${t}`,...n)}}function fi(t,...e){if(Ps.logLevel<=ke.WARN){const n=e.map(Nd);Ps.warn(`Firestore (${Ti}): ${t}`,...n)}}function Nd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,nw(t,r,n)}function nw(t,e,n){let r=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw sr(r),new Error(r)}function qe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||nw(e,s,r)}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class FR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UR{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new rw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}}class $R{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Um{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const r=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Um(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Um(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=jR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function xh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Mu(s)===Mu(i)?xe(s,i):Mu(s)?1:-1}return xe(t.length,e.length)}const zR=55296,HR=57343;function Mu(t){const e=t.charCodeAt(0);return e>=zR&&e<=HR}function pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="__name__";class Pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Pn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return xe(e.length,n.length)}static compareSegments(e,n){const r=Pn.isNumericId(e),s=Pn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Pn.extractNumericId(e).compare(Pn.extractNumericId(n)):xh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}}class Ge extends Pn{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const WR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Pn{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return WR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$m}static keyField(){return new St([$m])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ue(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ue(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new ue(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Ge.fromString(e))}static fromName(e){return new _e(Ge.fromString(e).popFirst(5))}static empty(){return new _e(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e,n){if(!n)throw new ue(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KR(t,e,n,r){if(e===!0&&r===!0)throw new ue(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qm(t){if(!_e.isDocumentKey(t))throw new ue(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bm(t){if(_e.isDocumentKey(t))throw new ue(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function Zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sc(t);throw new ue(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function GR(t,e){if(e<=0)throw new ue(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function ra(t,e){if(!iw(t))throw new ue(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ue(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-62135596800,zm=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zm);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jm)throw new ue(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zm}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ra(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:ut("string",Ye._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ye(0,0))}static max(){return new Te(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=-1;function QR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Te.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Gr(s,_e.empty(),e)}function YR(t){return new Gr(t.readTime,t.key,Fo)}class Gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gr(Te.min(),_e.empty(),Fo)}static max(){return new Gr(Te.max(),_e.empty(),Fo)}}function XR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==JR)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(s=>s?Y.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new Y((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function eC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Si(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ac.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=-1;function Rc(t){return t==null}function Ul(t){return t===0&&1/t==-1/0}function tC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="";function nC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Hm(e)),e=rC(t.get(n),e);return Hm(e)}function rC(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ow:n+="";break;default:n+=i}}return n}function Hm(t){return t+ow+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $a(this.root,e,this.comparator,!1)}getReverseIterator(){return new $a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $a(this.root,e,this.comparator,!0)}}class $a{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Et.RED,this.left=s??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Km(this.data.getIterator())}getIteratorFrom(e){return new Km(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Km{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new nn([])}unionWith(e){let n=new ft(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new lw("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const sC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(qe(!!t,39018),typeof t=="string"){let e=0;const n=sC.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yr(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="server_timestamp",uw="__type__",hw="__previous_value__",dw="__local_write_time__";function Md(t){return(t?.mapValue?.fields||{})[uw]?.stringValue===cw}function Cc(t){const e=t.mapValue.fields[hw];return Md(e)?Cc(e):e}function Uo(t){const e=Qr(t.mapValue.fields[dw].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const $l="(default)";class $o{constructor(e,n){this.projectId=e,this.database=n||$l}static empty(){return new $o("","")}get isDefaultDatabase(){return this.database===$l}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="__type__",oC="__max__",qa={mapValue:{}},pw="__vector__",ql="value";function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Md(t)?4:lC(t)?9007199254740991:aC(t)?10:11:we(28295,{value:t})}function Un(t,e){if(t===e)return!0;const n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uo(t).isEqual(Uo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Qr(s.timestampValue),l=Qr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Yr(s.bytesValue).isEqual(Yr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return it(s.geoPointValue.latitude)===it(i.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return it(s.integerValue)===it(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=it(s.doubleValue),l=it(i.doubleValue);return o===l?Ul(o)===Ul(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Wm(o)!==Wm(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Un(o[c],l[c])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function qo(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function mi(t,e){if(t===e)return 0;const n=Xr(t),r=Xr(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=it(i.integerValue||i.doubleValue),c=it(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Gm(t.timestampValue,e.timestampValue);case 4:return Gm(Uo(t),Uo(e));case 5:return xh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Yr(i),c=Yr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=xe(l[u],c[u]);if(h!==0)return h}return xe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=xe(it(i.latitude),it(o.latitude));return l!==0?l:xe(it(i.longitude),it(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qm(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},u=l[ql]?.arrayValue,h=c[ql]?.arrayValue,f=xe(u?.values?.length||0,h?.values?.length||0);return f!==0?f:Qm(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===qa.mapValue&&o===qa.mapValue)return 0;if(i===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=xh(c[f],h[f]);if(p!==0)return p;const w=mi(l[c[f]],u[h[f]]);if(w!==0)return w}return xe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Gm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=Qr(t),r=Qr(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function Qm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=mi(n[s],r[s]);if(i)return i}return xe(n.length,r.length)}function gi(t){return Dh(t)}function Dh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Dh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Dh(n.fields[o])}`;return s+"}"}(t.mapValue):we(61005,{value:t})}function sl(t){switch(Xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cc(t);return e?16+sl(e):16;case 5:return 2*t.stringValue.length;case 6:return Yr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+sl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ns(r.fields,(i,o)=>{s+=i.length+sl(o)}),s}(t.mapValue);default:throw we(13486,{value:t})}}function Ym(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nh(t){return!!t&&"integerValue"in t}function Ld(t){return!!t&&"arrayValue"in t}function Xm(t){return!!t&&"nullValue"in t}function Jm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function il(t){return!!t&&"mapValue"in t}function aC(t){return(t?.mapValue?.fields||{})[fw]?.stringValue===pw}function vo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ns(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vo(t.arrayValue.values[n]);return e}return{...t}}function lC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!il(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vo(n)}setAll(e){let n=St.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=vo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());il(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];il(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ns(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Xt(vo(this.value))}}function mw(t){const e=[];return ns(t.fields,(n,r)=>{const s=new St([n]);if(il(r)){const i=mw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Mt(e,0,Te.min(),Te.min(),Te.min(),Xt.empty(),0)}static newFoundDocument(e,n,r,s){return new Mt(e,1,n,Te.min(),r,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,Te.min(),Te.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,Te.min(),Te.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.position=e,this.inclusive=n}}function Zm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),n.key):r=mi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function eg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n="asc"){this.field=e,this.dir=n}}function cC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{}class ct extends gw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hC(e,n,r):n==="array-contains"?new pC(e,r):n==="in"?new mC(e,r):n==="not-in"?new gC(e,r):n==="array-contains-any"?new _C(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dC(e,r):new fC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(mi(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends gw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Sn(e,n)}matches(e){return _w(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _w(t){return t.op==="and"}function yw(t){return uC(t)&&_w(t)}function uC(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function Oh(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+gi(t.value);if(yw(t))return t.filters.map(e=>Oh(e)).join(",");{const e=t.filters.map(n=>Oh(n)).join(",");return`${t.op}(${e})`}}function vw(t,e){return t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.field.isEqual(s.field)&&Un(r.value,s.value)}(t,e):t instanceof Sn?function(r,s){return s instanceof Sn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&vw(o,s.filters[l]),!0):!1}(t,e):void we(19439)}function ww(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${gi(n.value)}`}(t):t instanceof Sn?function(n){return n.op.toString()+" {"+n.getFilters().map(ww).join(" ,")+"}"}(t):"Filter"}class hC extends ct{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class dC extends ct{constructor(e,n){super(e,"in",n),this.keys=bw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fC extends ct{constructor(e,n){super(e,"not-in",n),this.keys=bw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bw(t,e){return(e.arrayValue?.values||[]).map(n=>_e.fromName(n.referenceValue))}class pC extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ld(n)&&qo(n.arrayValue,this.value)}}class mC extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class gC extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class _C extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ld(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function tg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yC(t,e,n,r,s,i,o)}function Fd(t){const e=Se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Oh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gi(r)).join(",")),e.Te=n}return e.Te}function Ud(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eg(t.startAt,e.startAt)&&eg(t.endAt,e.endAt)}function Vh(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vC(t,e,n,r,s,i,o,l){return new Ai(t,e,n,r,s,i,o,l)}function Pc(t){return new Ai(t)}function ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ew(t){return t.collectionGroup!==null}function wo(t){const e=Se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ft(St.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Bo(i,r))}),n.has(St.keyField().canonicalString())||e.Ie.push(new Bo(St.keyField(),r))}return e.Ie}function Nn(t){const e=Se(t);return e.Ee||(e.Ee=wC(e,wo(t))),e.Ee}function wC(t,e){if(t.limitType==="F")return tg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bo(s.field,i)});const n=t.endAt?new Bl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bl(t.startAt.position,t.startAt.inclusive):null;return tg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Mh(t,e){const n=t.filters.concat([e]);return new Ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jl(t,e,n){return new Ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kc(t,e){return Ud(Nn(t),Nn(e))&&t.limitType===e.limitType}function Tw(t){return`${Fd(Nn(t))}|lt:${t.limitType}`}function ei(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ww(s)).join(", ")}]`),Rc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gi(s)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function xc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):_e.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of wo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=Zm(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,wo(r),s)||r.endAt&&!function(o,l,c){const u=Zm(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,wo(r),s))}(t,e)}function bC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Iw(t){return(e,n)=>{let r=!1;for(const s of wo(t)){const i=EC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function EC(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?mi(c,u):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ns(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return aw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new tt(_e.comparator);function ir(){return TC}const Sw=new tt(_e.comparator);function ro(...t){let e=Sw;for(const n of t)e=e.insert(n.key,n);return e}function Aw(t){let e=Sw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return bo()}function Rw(){return bo()}function bo(){return new Ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const IC=new tt(_e.comparator),SC=new ft(_e.comparator);function De(...t){let e=SC;for(const n of t)e=e.add(n);return e}const AC=new ft(xe);function RC(){return AC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function Cw(t){return{integerValue:""+t}}function CC(t,e){return tC(e)?Cw(e):$d(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this._=void 0}}function PC(t,e,n){return t instanceof jo?function(s,i){const o={fields:{[uw]:{stringValue:cw},[dw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Md(i)&&(i=Cc(i)),i&&(o.fields[hw]=i),{mapValue:o}}(n,e):t instanceof zo?kw(t,e):t instanceof Ho?xw(t,e):function(s,i){const o=Pw(s,i),l=rg(o)+rg(s.Ae);return Nh(o)&&Nh(s.Ae)?Cw(l):$d(s.serializer,l)}(t,e)}function kC(t,e,n){return t instanceof zo?kw(t,e):t instanceof Ho?xw(t,e):n}function Pw(t,e){return t instanceof zl?function(r){return Nh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class jo extends Dc{}class zo extends Dc{constructor(e){super(),this.elements=e}}function kw(t,e){const n=Dw(e);for(const r of t.elements)n.some(s=>Un(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ho extends Dc{constructor(e){super(),this.elements=e}}function xw(t,e){let n=Dw(e);for(const r of t.elements)n=n.filter(s=>!Un(s,r));return{arrayValue:{values:n}}}class zl extends Dc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rg(t){return it(t.integerValue||t.doubleValue)}function Dw(t){return Ld(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.field=e,this.transform=n}}function DC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof zo&&s instanceof zo||r instanceof Ho&&s instanceof Ho?pi(r.elements,s.elements,Un):r instanceof zl&&s instanceof zl?Un(r.Ae,s.Ae):r instanceof jo&&s instanceof jo}(t.transform,e.transform)}class NC{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nc{}function Nw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qd(t.key,fn.none()):new sa(t.key,t.data,fn.none());{const n=t.data,r=Xt.empty();let s=new ft(St.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new rs(t.key,r,new nn(s.toArray()),fn.none())}}function OC(t,e,n){t instanceof sa?function(s,i,o){const l=s.value.clone(),c=ig(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof rs?function(s,i,o){if(!ol(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ig(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Ow(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Eo(t,e,n,r){return t instanceof sa?function(i,o,l,c){if(!ol(i.precondition,o))return l;const u=i.value.clone(),h=og(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof rs?function(i,o,l,c){if(!ol(i.precondition,o))return l;const u=og(i.fieldTransforms,c,o),h=o.data;return h.setAll(Ow(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return ol(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function VC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pw(r.transform,s||null);i!=null&&(n===null&&(n=Xt.empty()),n.set(r.field,i))}return n||null}function sg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pi(r,s,(i,o)=>DC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sa extends Nc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rs extends Nc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ow(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ig(t,e,n){const r=new Map;qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,kC(o,l,n[s]))}return r}function og(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,PC(i,o,e))}return r}class qd extends Nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MC extends Nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&OC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Eo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Eo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Rw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=Nw(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),De())}isEqual(e){return this.batchId===e.batchId&&pi(this.mutations,e.mutations,(n,r)=>sg(n,r))&&pi(this.baseMutations,e.baseMutations,(n,r)=>sg(n,r))}}class Bd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return IC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Bd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ve;function $C(t){switch(t){case K.OK:return we(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function Vw(t){if(t===void 0)return sr("GRPC error has no .code"),K.UNKNOWN;switch(t){case lt.OK:return K.OK;case lt.CANCELLED:return K.CANCELLED;case lt.UNKNOWN:return K.UNKNOWN;case lt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case lt.INTERNAL:return K.INTERNAL;case lt.UNAVAILABLE:return K.UNAVAILABLE;case lt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case lt.NOT_FOUND:return K.NOT_FOUND;case lt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case lt.ABORTED:return K.ABORTED;case lt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case lt.DATA_LOSS:return K.DATA_LOSS;default:return we(39323,{code:t})}}(Ve=lt||(lt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new qr([4294967295,4294967295],0);function ag(t){const e=qC().encode(t),n=new Yv;return n.update(e),new Uint8Array(n.digest())}function lg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qr([n,r],0),new qr([s,i],0)]}class jd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new so(`Invalid padding: ${n}`);if(r<0)throw new so(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new so(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new so(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(qr.fromNumber(r)));return s.compare(BC)===1&&(s=new qr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ag(e),[r,s]=lg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new jd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=ag(e),[r,s]=lg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class so extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ia.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Oc(Te.min(),s,new tt(xe),ir(),De())}}class ia{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ia(r,n,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Mw{constructor(e,n){this.targetId=e,this.Ce=n}}class Lw{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cg{constructor(){this.ve=0,this.Fe=ug(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),n=De(),r=De();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we(38017,{changeType:i})}}),new ia(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ug()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=Ba(),this.He=Ba(),this.Ye=new tt(xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Vh(i))if(r===0){const o=new _e(i.path);this.et(n,o,Mt.newNoDocument(o,Te.min()))}else qe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Yr(r).toUint8Array()}catch(c){if(c instanceof lw)return fi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new jd(o,s,i)}catch(c){return fi(c instanceof so?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Vh(l.target)){const c=new _e(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Mt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=De();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Oc(e,n,this.Ye,this.je,r);return this.je=ir(),this.Je=Ba(),this.He=Ba(),this.Ye=new tt(xe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ba(){return new tt(_e.comparator)}function ug(){return new tt(_e.comparator)}const zC={asc:"ASCENDING",desc:"DESCENDING"},HC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WC={and:"AND",or:"OR"};class KC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lh(t,e){return t.useProto3Json||Rc(e)?e:{value:e}}function Hl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GC(t,e){return Hl(t,e.toTimestamp())}function On(t){return qe(!!t,49232),Te.fromTimestamp(function(n){const r=Qr(n);return new Ye(r.seconds,r.nanos)}(t))}function zd(t,e){return Fh(t,e).canonicalString()}function Fh(t,e){const n=function(s){return new Ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Uw(t){const e=Ge.fromString(t);return qe(zw(e),10190,{key:e.toString()}),e}function Uh(t,e){return zd(t.databaseId,e.path)}function Lu(t,e){const n=Uw(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(qw(n))}function $w(t,e){return zd(t.databaseId,e)}function QC(t){const e=Uw(t);return e.length===4?Ge.emptyPath():qw(e)}function $h(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qw(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hg(t,e,n){return{name:Uh(t,e),fields:n.value.mapValue.fields}}function YC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),Rt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?K.UNKNOWN:Vw(u.code);return new ue(h,u.message||"")}(o);n=new Lw(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lu(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):Te.min(),l=new Xt({mapValue:{fields:r.document.fields}}),c=Mt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new al(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lu(t,r.document),i=r.readTime?On(r.readTime):Te.min(),o=Mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new al([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lu(t,r.document),i=r.removedTargetIds||[];n=new al([],i,s,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new UC(s,i),l=r.targetId;n=new Mw(l,o)}}return n}function XC(t,e){let n;if(e instanceof sa)n={update:hg(t,e.key,e.value)};else if(e instanceof qd)n={delete:Uh(t,e.key)};else if(e instanceof rs)n={update:hg(t,e.key,e.data),updateMask:oP(e.fieldMask)};else{if(!(e instanceof MC))return we(16599,{Vt:e.type});n={verify:Uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof jo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ho)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw we(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:GC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we(27497)}(t,e.precondition)),n}function JC(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(Te.min())&&(o=On(i)),new NC(o,s.transformResults||[])}(n,e))):[]}function ZC(t,e){return{documents:[$w(t,e.path)]}}function eP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$w(t,s);const i=function(u){if(u.length!==0)return jw(Sn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ti(p.field),direction:rP(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Lh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function tP(t){let e=QC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){qe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=Bw(f);return p instanceof Sn&&yw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(I){return new Bo(ni(I.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Rc(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,w=f.values||[];return new Bl(w,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,w=f.values||[];return new Bl(w,p)}(n.endAt)),vC(e,s,o,i,l,"F",c,u)}function nP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ni(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ni(n.unaryFilter.field);return ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ni(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ni(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(ni(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Sn.create(n.compositeFilter.filters.map(r=>Bw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function rP(t){return zC[t]}function sP(t){return HC[t]}function iP(t){return WC[t]}function ti(t){return{fieldPath:t.canonicalString()}}function ni(t){return St.fromServerFormat(t.fieldPath)}function jw(t){return t instanceof ct?function(n){if(n.op==="=="){if(Jm(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NAN"}};if(Xm(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jm(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NOT_NAN"}};if(Xm(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ti(n.field),op:sP(n.op),value:n.value}}}(t):t instanceof Sn?function(n){const r=n.getFilters().map(s=>jw(s));return r.length===1?r[0]:{compositeFilter:{op:iP(n.op),filters:r}}}(t):we(54877,{filter:t})}function oP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r,s,i=Te.min(),o=Te.min(),l=Rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.yt=e}}function lP(t){const e=tP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.Cn=new uP}addToCollectionParentIndex(e,n){return this.Cn.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Gr.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class uP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ft(Ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ft(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hw=41943040;class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(Hw,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _i(0)}static cr(){return new _i(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LruGarbageCollector",hP=1048576;function pg([t,e],[n,r]){const s=xe(t,n);return s===0?xe(e,r):s}class dP{constructor(e){this.Ir=e,this.buffer=new ft(pg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(fg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Si(n)?de(fg,"Ignoring IndexedDB error during garbage collection: ",n):await Ii(n)}await this.Vr(3e5)})}}class pP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Y.resolve(Ac.ce);const r=new dP(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(dg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Zs()<=ke.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function mP(t,e){return new pP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Eo(r.mutation,s,nn.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,n,r=De()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ro();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,De()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ir();const o=bo(),l=function(){return bo()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof rs)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Eo(h.mutation,u,h.mutation.getFieldMask(),Ye.now())):o.set(u.key,nn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new _P(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=bo();let s=new tt((o,l)=>o-l),i=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||nn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||De()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=Rw();h.forEach(p=>{if(!i.has(p)){const w=Nw(n.get(p),r.get(p));w!==null&&f.set(p,w),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ew(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Y.resolve(ms());let l=Fo,c=i;return o.next(u=>Y.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?Y.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,De())).next(h=>({batchId:l,changes:Aw(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let s=ro();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ro();return this.indexManager.getCollectionParents(e,i).next(l=>Y.forEach(l,c=>{const u=function(f,p){return new Ai(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Mt.newInvalidDocument(h)))});let l=ro();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Eo(h.mutation,u,nn.empty(),Ye.now()),xc(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Y.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:lP(s.bundledQuery),readTime:On(s.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.overlays=new tt(_e.comparator),this.qr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return Y.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const s=ms(),i=n.length+1,o=new _e(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return Y.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new tt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ms(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=ms(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return Y.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FC(n,r));let i=this.qr.get(n);i===void 0&&(i=De(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this.Qr=new ft(mt.$r),this.Ur=new ft(mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new mt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new _e(new Ge([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new Ge([])),r=new mt(n,e),s=new mt(n,e+1);let i=De();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||xe(e.Yr,n.Yr)}static Kr(e,n){return xe(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(mt.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new LC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new mt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,n){return Y.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Vd:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(xe);return n.forEach(s=>{const i=new mt(s,0),o=new mt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),Y.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;_e.isDocumentKey(i)||(i=i.child(""));const o=new mt(new _e(i),0);let l=new ft(xe);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),Y.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Y.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new mt(n,0),s=this.Zr.firstAfterOrEqual(r);return Y.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.ri=e,this.docs=function(){return new tt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Mt.newInvalidDocument(s))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ir();const o=n.path,l=new _e(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||XR(YR(h),r)<=0||(s.has(h.key)||xc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we(9500)}ii(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IP(this)}getSize(e){return Y.resolve(this.size)}}class IP extends gP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.persistence=e,this.si=new Ls(n=>Fd(n),Ud),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Hd,this.targetCount=0,this.ai=_i.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Y.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new _i(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Pr(n),Y.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Y.waitFor(i).next(()=>s)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Y.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ac(0),this.li=!1,this.li=!0,this.hi=new bP,this.referenceDelegate=e(this),this.Pi=new SP(this),this.indexManager=new cP,this.remoteDocumentCache=function(s){return new TP(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new aP(n),this.Ii=new vP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new EP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new AP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return Y.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class AP extends ZR{constructor(e){super(),this.currentSequenceNumber=e}}class Wd{constructor(e){this.persistence=e,this.Ri=new Hd,this.Vi=null}static mi(e){return new Wd(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,r=>{const s=_e.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Y.or([()=>Y.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wl{constructor(e,n){this.persistence=e,this.pi=new Ls(r=>nC(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=mP(this,n)}static mi(e,n){return new Wl(e,n)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Y.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?Y.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Te.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sl(e.data.value)),n}br(e,n,r){return Y.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Y.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=De(),s=De();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Kd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vA()?8:eC(Ft())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new RP;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Zs()<=ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ei(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Zs()<=ke.DEBUG&&de("QueryEngine","Query:",ei(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Zs()<=ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ei(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):Y.resolve())}ys(e,n){if(ng(n))return Y.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jl(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=De(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,jl(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return ng(n)||s.isEqual(Te.min())?Y.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?Y.resolve(null):(Zs()<=ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ei(n)),this.vs(e,o,n,QR(s,Fo)).next(l=>l))})}Ds(e,n){let r=new ft(Iw(e));return n.forEach((s,i)=>{xc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Zs()<=ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ei(n)),this.ps.getDocumentsMatchingQuery(e,n,Gr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="LocalStore",PP=3e8;class kP{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new tt(xe),this.xs=new Ls(i=>Fd(i),Ud),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function xP(t,e,n,r){return new kP(t,e,n,r)}async function Kw(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=De();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function DP(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let w=Y.resolve();return p.forEach(I=>{w=w.next(()=>h.getEntry(c,I)).next(k=>{const P=u.docVersions.get(I);qe(P!==null,48541),k.version.compareTo(P)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=De();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Gw(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function NP(t,e){const n=Se(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let w=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Rt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(f,w),function(k,P,F){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=PP?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(p,w,h)&&l.push(n.Pi.updateTargetData(i,w))});let c=ir(),u=De();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(OP(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return Y.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function OP(t,e,n){let r=De(),s=De();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ir();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Te.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):de(Gd,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function VP(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MP(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,Y.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function qh(t,e,n){const r=Se(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Si(o))throw o;de(Gd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function mg(t,e,n){const r=Se(t);let s=Te.min(),i=De();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Se(c),p=f.xs.get(h);return p!==void 0?Y.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,Nn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Te.min(),n?i:De())).next(l=>(LP(r,bC(e),l),{documents:l,Qs:i})))}function LP(t,e,n){let r=t.Os.get(e)||Te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class gg{constructor(){this.activeTargetIds=RC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FP{constructor(){this.Mo=new gg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="ConnectivityMonitor";class yg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(_g,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(_g,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja=null;function Bh(){return ja===null?ja=function(){return 268435456+Math.round(2147483648*Math.random())}():ja++,"0x"+ja.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="RestConnection",$P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===$l?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Bh(),l=this.zo(e,n.toUriEncodedString());de(Fu,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=dr(u);return this.Jo(e,l,c,r,h).then(f=>(de(Fu,`Received RPC '${e}' ${o}: `,f),f),f=>{throw fi(Fu,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ti}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=$P[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class jP extends qP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Bh();return new Promise((l,c)=>{const u=new Xv;u.setWithCredentials(!0),u.listenOnce(Jv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case rl.NO_ERROR:const f=u.getResponseJson();de(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case rl.TIMEOUT:de(Dt,`RPC '${e}' ${o} timed out`),c(new ue(K.DEADLINE_EXCEEDED,"Request time out"));break;case rl.HTTP_ERROR:const p=u.getStatus();if(de(Dt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const I=w?.error;if(I&&I.status&&I.message){const k=function(F){const A=F.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(A)>=0?A:K.UNKNOWN}(I.status);c(new ue(k,I.message))}else c(new ue(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ue(K.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{de(Dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);de(Dt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Bh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tw(),l=ew(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");de(Dt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,w=!1;const I=new BP({Yo:P=>{w?de(Dt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(de(Dt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),de(Dt,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Zo:()=>f.close()}),k=(P,F,A)=>{P.listen(F,x=>{try{A(x)}catch(D){setTimeout(()=>{throw D},0)}})};return k(f,no.EventType.OPEN,()=>{w||(de(Dt,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),k(f,no.EventType.CLOSE,()=>{w||(w=!0,de(Dt,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(f))}),k(f,no.EventType.ERROR,P=>{w||(w=!0,fi(Dt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),I.a_(new ue(K.UNAVAILABLE,"The operation could not be completed")))}),k(f,no.EventType.MESSAGE,P=>{if(!w){const F=P.data[0];qe(!!F,16349);const A=F,x=A?.error||A[0]?.error;if(x){de(Dt,`RPC '${e}' stream ${s} received error:`,x);const D=x.status;let B=function(b){const y=lt[b];if(y!==void 0)return Vw(y)}(D),H=x.message;B===void 0&&(B=K.INTERNAL,H="Unknown error status: "+D+" with message "+x.message),w=!0,I.a_(new ue(B,H)),f.close()}else de(Dt,`RPC '${e}' stream ${s} received:`,F),I.u_(F)}}),k(l,Zv.STAT_EVENT,P=>{P.stat===kh.PROXY?de(Dt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===kh.NOPROXY&&de(Dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Uu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return new KC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="PersistentStream";class Yw{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ue(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(vg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(de(vg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zP extends Yw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YC(this.serializer,e),r=function(i){if(!("targetChange"in i))return Te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?On(o.readTime):Te.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=$h(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Vh(c)?{documents:ZC(i,c)}:{query:eP(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Fw(i,o.resumeToken);const u=Lh(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Te.min())>0){l.readTime=Hl(i,o.snapshotVersion.toTimestamp());const u=Lh(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=nP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=$h(this.serializer),n.removeTarget=e,this.q_(n)}}class HP extends Yw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=JC(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=$h(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>XC(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{}class KP extends WP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ue(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Fh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ue(K.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Fh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class GP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sr(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class QP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Fs(this)&&(de(ks,"Restarting streams for network reachability change."),await async function(c){const u=Se(c);u.Ea.add(4),await oa(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Mc(u)}(this))})}),this.Ra=new GP(r,s)}}async function Mc(t){if(Fs(t))for(const e of t.da)await e(!0)}async function oa(t){for(const e of t.da)await e(!1)}function Xw(t,e){const n=Se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jd(n)?Xd(n):Ri(n).O_()&&Yd(n,e))}function Qd(t,e){const n=Se(t),r=Ri(n);n.Ia.delete(e),r.O_()&&Jw(n,e),n.Ia.size===0&&(r.O_()?r.L_():Fs(n)&&n.Ra.set("Unknown"))}function Yd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ri(t).Y_(e)}function Jw(t,e){t.Va.Ue(e),Ri(t).Z_(e)}function Xd(t){t.Va=new jC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ri(t).start(),t.Ra.ua()}function Jd(t){return Fs(t)&&!Ri(t).x_()&&t.Ia.size>0}function Fs(t){return Se(t).Ea.size===0}function Zw(t){t.Va=void 0}async function YP(t){t.Ra.set("Online")}async function XP(t){t.Ia.forEach((e,n)=>{Yd(t,e)})}async function JP(t,e){Zw(t),Jd(t)?(t.Ra.ha(e),Xd(t)):t.Ra.set("Unknown")}async function ZP(t,e,n){if(t.Ra.set("Online"),e instanceof Lw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){de(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kl(t,r)}else if(e instanceof al?t.Va.Ze(e):e instanceof Mw?t.Va.st(e):t.Va.tt(e),!n.isEqual(Te.min()))try{const r=await Gw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Rt.EMPTY_BYTE_STRING,h.snapshotVersion)),Jw(i,c);const f=new Mr(h.target,c,u,h.sequenceNumber);Yd(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){de(ks,"Failed to raise snapshot:",r),await Kl(t,r)}}async function Kl(t,e,n){if(!Si(e))throw e;t.Ea.add(1),await oa(t),t.Ra.set("Offline"),n||(n=()=>Gw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(ks,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Mc(t)})}function eb(t,e){return e().catch(n=>Kl(t,n,e))}async function Lc(t){const e=Se(t),n=Jr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vd;for(;ek(e);)try{const s=await VP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,tk(e,s)}catch(s){await Kl(e,s)}tb(e)&&nb(e)}function ek(t){return Fs(t)&&t.Ta.length<10}function tk(t,e){t.Ta.push(e);const n=Jr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function tb(t){return Fs(t)&&!Jr(t).x_()&&t.Ta.length>0}function nb(t){Jr(t).start()}async function nk(t){Jr(t).ra()}async function rk(t){const e=Jr(t);for(const n of t.Ta)e.ea(n.mutations)}async function sk(t,e,n){const r=t.Ta.shift(),s=Bd.from(r,e,n);await eb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lc(t)}async function ik(t,e){e&&Jr(t).X_&&await async function(r,s){if(function(o){return $C(o)&&o!==K.ABORTED}(s.code)){const i=r.Ta.shift();Jr(r).B_(),await eb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lc(r)}}(t,e),tb(t)&&nb(t)}async function wg(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),de(ks,"RemoteStore received new credentials");const r=Fs(n);n.Ea.add(3),await oa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Mc(n)}async function ok(t,e){const n=Se(t);e?(n.Ea.delete(2),await Mc(n)):e||(n.Ea.add(2),await oa(n),n.Ra.set("Unknown"))}function Ri(t){return t.ma||(t.ma=function(n,r,s){const i=Se(n);return i.sa(),new zP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:YP.bind(null,t),t_:XP.bind(null,t),r_:JP.bind(null,t),H_:ZP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Jd(t)?Xd(t):t.Ra.set("Unknown")):(await t.ma.stop(),Zw(t))})),t.ma}function Jr(t){return t.fa||(t.fa=function(n,r,s){const i=Se(n);return i.sa(),new HP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:nk.bind(null,t),r_:ik.bind(null,t),ta:rk.bind(null,t),na:sk.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Lc(t)):(await t.fa.stop(),t.Ta.length>0&&(de(ks,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Zd(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ef(t,e){if(sr("AsyncQueue",`${e}: ${t}`),Si(t))return new ue(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{static emptySet(e){return new ai(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=ro(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ai;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.ga=new tt(_e.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class yi{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new yi(e,n,ai.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class lk{constructor(){this.queries=Eg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Se(n),i=s.queries;s.queries=Eg(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ue(K.ABORTED,"Firestore shutting down"))}}function Eg(){return new Ls(t=>Tw(t),kc)}async function tf(t,e){const n=Se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new ak,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ef(o,`Initialization of query '${ei(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&rf(n)}async function nf(t,e){const n=Se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ck(t,e){const n=Se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&rf(n)}function uk(t,e,n){const r=Se(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function rf(t){t.Ca.forEach(e=>{e.next()})}var jh,Tg;(Tg=jh||(jh={})).Ma="default",Tg.Cache="cache";class sf{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.key=e}}class sb{constructor(e){this.key=e}}class hk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=Iw(e),this.tu=new ai(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new bg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),w=xc(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;p&&w?p.data.isEqual(w.data)?I!==k&&(r.track({type:3,doc:w}),P=!0):this.su(p,w)||(r.track({type:2,doc:w}),P=!0,(c&&this.eu(w,c)>0||u&&this.eu(w,u)<0)&&(l=!0)):!p&&w?(r.track({type:0,doc:w}),P=!0):p&&!w&&(r.track({type:1,doc:p}),P=!0,(c||u)&&(l=!0)),P&&(w?(o=o.add(w),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(w,I){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:P})}};return k(w)-k(I)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new yi(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sb(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new rb(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=De();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const of="SyncEngine";class dk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fk{constructor(e){this.key=e,this.hu=!1}}class pk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ls(l=>Tw(l),kc),this.Iu=new Map,this.Eu=new Set,this.du=new tt(_e.comparator),this.Au=new Map,this.Ru=new Hd,this.Vu={},this.mu=new Map,this.fu=_i.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mk(t,e,n=!0){const r=ub(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ib(r,e,n,!0),s}async function gk(t,e){const n=ub(t);await ib(n,e,!0,!1)}async function ib(t,e,n,r){const s=await MP(t.localStore,Nn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await _k(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Xw(t.remoteStore,s),l}async function _k(t,e,n,r,s){t.pu=(f,p,w)=>async function(k,P,F,A){let x=P.view.ru(F);x.Cs&&(x=await mg(k.localStore,P.query,!1).then(({documents:S})=>P.view.ru(S,x)));const D=A&&A.targetChanges.get(P.targetId),B=A&&A.targetMismatches.get(P.targetId)!=null,H=P.view.applyChanges(x,k.isPrimaryClient,D,B);return Sg(k,P.targetId,H.au),H.snapshot}(t,f,p,w);const i=await mg(t.localStore,e,!0),o=new hk(e,i.Qs),l=o.ru(i.documents),c=ia.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);Sg(t,n,u.au);const h=new dk(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function yk(t,e,n){const r=Se(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!kc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qd(r.remoteStore,s.targetId),zh(r,s.targetId)}).catch(Ii)):(zh(r,s.targetId),await qh(r.localStore,s.targetId,!0))}async function vk(t,e){const n=Se(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qd(n.remoteStore,r.targetId))}async function wk(t,e,n){const r=Rk(t);try{const s=await function(o,l){const c=Se(o),u=Ye.now(),h=l.reduce((w,I)=>w.add(I.key),De());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=ir(),k=De();return c.Ns.getEntries(w,h).next(P=>{I=P,I.forEach((F,A)=>{A.isValidDocument()||(k=k.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,I)).next(P=>{f=P;const F=[];for(const A of l){const x=VC(A,f.get(A.key).overlayedDocument);x!=null&&F.push(new rs(A.key,x,mw(x.value.mapValue),fn.exists(!0)))}return c.mutationQueue.addMutationBatch(w,u,F,l)}).next(P=>{p=P;const F=P.applyToLocalDocumentSet(f,k);return c.documentOverlayCache.saveOverlays(w,P.batchId,F)})}).then(()=>({batchId:p.batchId,changes:Aw(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new tt(xe)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await aa(r,s.changes),await Lc(r.remoteStore)}catch(s){const i=ef(s,"Failed to persist write");n.reject(i)}}async function ob(t,e){const n=Se(t);try{const r=await NP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?qe(o.hu,14607):s.removedDocuments.size>0&&(qe(o.hu,42227),o.hu=!1))}),await aa(n,r,e)}catch(r){await Ii(r)}}function Ig(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Se(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&rf(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bk(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new tt(_e.comparator);o=o.insert(i,Mt.newNoDocument(i,Te.min()));const l=De().add(i),c=new Oc(Te.min(),new Map,new tt(xe),o,l);await ob(r,c),r.du=r.du.remove(i),r.Au.delete(e),af(r)}else await qh(r.localStore,e,!1).then(()=>zh(r,e,n)).catch(Ii)}async function Ek(t,e){const n=Se(t),r=e.batch.batchId;try{const s=await DP(n.localStore,e);lb(n,r,null),ab(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await aa(n,s)}catch(s){await Ii(s)}}async function Tk(t,e,n){const r=Se(t);try{const s=await function(o,l){const c=Se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(qe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);lb(r,e,n),ab(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await aa(r,s)}catch(s){await Ii(s)}}function ab(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function lb(t,e,n){const r=Se(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function zh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||cb(t,r)})}function cb(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),af(t))}function Sg(t,e,n){for(const r of n)r instanceof rb?(t.Ru.addReference(r.key,e),Ik(t,r)):r instanceof sb?(de(of,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||cb(t,r.key)):we(19791,{wu:r})}function Ik(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(de(of,"New document in limbo: "+n),t.Eu.add(r),af(t))}function af(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new _e(Ge.fromString(e)),r=t.fu.next();t.Au.set(r,new fk(n)),t.du=t.du.insert(n,r),Xw(t.remoteStore,new Mr(Nn(Pc(n.path)),r,"TargetPurposeLimboResolution",Ac.ce))}}async function aa(t,e,n){const r=Se(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Kd.As(c.targetId,u);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=Se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Y.forEach(u,p=>Y.forEach(p.Es,w=>h.persistence.referenceDelegate.addReference(f,p.targetId,w)).next(()=>Y.forEach(p.ds,w=>h.persistence.referenceDelegate.removeReference(f,p.targetId,w)))))}catch(f){if(!Si(f))throw f;de(Gd,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const w=h.Ms.get(p),I=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(p,k)}}}(r.localStore,i))}async function Sk(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){de(of,"User change. New user:",e.toKey());const r=await Kw(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new ue(K.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await aa(n,r.Ls)}}function Ak(t,e){const n=Se(t),r=n.Au.get(e);if(r&&r.hu)return De().add(r.key);{let s=De();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function ub(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ak.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bk.bind(null,e),e.Pu.H_=ck.bind(null,e.eventManager),e.Pu.yu=uk.bind(null,e.eventManager),e}function Rk(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tk.bind(null,e),e}class Gl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return xP(this.persistence,new CP,e.initialUser,this.serializer)}Cu(e){return new Ww(Wd.mi,this.serializer)}Du(e){return new FP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gl.provider={build:()=>new Gl};class Ck extends Gl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof Wl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Ww(r=>Wl.mi(r,n),this.serializer)}}class Hh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ig(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sk.bind(null,this.syncEngine),await ok(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lk}()}createDatastore(e){const n=Vc(e.databaseInfo.databaseId),r=function(i){return new jP(i)}(e.databaseInfo);return function(i,o,l,c){return new KP(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new QP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Ig(this.syncEngine,n,0),function(){return yg.v()?new yg:new UP}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new pk(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=Se(n);de(ks,"RemoteStore shutting down."),r.Ea.add(5),await oa(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hh.provider={build:()=>new Hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="FirestoreClient";class Pk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=Od.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{de(Zr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(de(Zr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ef(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $u(t,e){t.asyncQueue.verifyOperationInProgress(),de(Zr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Kw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ag(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kk(t);de(Zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wg(e.remoteStore,s)),t._onlineComponents=e}async function kk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(Zr,"Using user provided OfflineComponentProvider");try{await $u(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fi("Error using user provided cache. Falling back to memory cache: "+n),await $u(t,new Gl)}}else de(Zr,"Using default OfflineComponentProvider"),await $u(t,new Ck(void 0));return t._offlineComponents}async function hb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(Zr,"Using user provided OnlineComponentProvider"),await Ag(t,t._uninitializedComponentsProvider._online)):(de(Zr,"Using default OnlineComponentProvider"),await Ag(t,new Hh))),t._onlineComponents}function xk(t){return hb(t).then(e=>e.syncEngine)}async function Ql(t){const e=await hb(t),n=e.eventManager;return n.onListen=mk.bind(null,e.syncEngine),n.onUnlisten=yk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vk.bind(null,e.syncEngine),n}function Dk(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new lf({next:p=>{h.Nu(),o.enqueueAndForget(()=>nf(i,f));const w=p.docs.has(l);!w&&p.fromCache?u.reject(new ue(K.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&p.fromCache&&c&&c.source==="server"?u.reject(new ue(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new sf(Pc(l.path),h,{includeMetadataChanges:!0,qa:!0});return tf(i,f)}(await Ql(t),t.asyncQueue,e,n,r)),r.promise}function Nk(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new lf({next:p=>{h.Nu(),o.enqueueAndForget(()=>nf(i,f)),p.fromCache&&c.source==="server"?u.reject(new ue(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new sf(l,h,{includeMetadataChanges:!0,qa:!0});return tf(i,f)}(await Ql(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firestore.googleapis.com",Cg=!0;class Pg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fb,this.ssl=Cg}else this.host=e.host,this.ssl=e.ssl??Cg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hP)throw new ue(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=db(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LR;switch(r.type){case"firstParty":return new qR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Rg.get(n);r&&(de("ComponentProvider","Removing Datastore"),Rg.delete(n),r.terminate())}(this),Promise.resolve()}}function Ok(t,e,n,r={}){t=Zt(t,Fc);const s=dr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Ec(`https://${l}`),Tc("Firestore",!0)),i.host!==fb&&i.host!==l&&fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Cs(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Ot.MOCK_USER;else{u=zv(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ue(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ot(f)}t._authCredentials=new FR(new rw(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fr(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ra(n,st._jsonSchema))return new st(e,r||null,new _e(Ge.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:ut("string",st._jsonSchemaVersion),referencePath:ut("string")};class Br extends fr{constructor(e,n,r){super(e,n,Pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new _e(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function qu(t,e,...n){if(t=je(t),sw("collection","path",e),t instanceof Fc){const r=Ge.fromString(e,...n);return Bm(r),new Br(t,null,r)}{if(!(t instanceof st||t instanceof Br))throw new ue(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return Bm(r),new Br(t.firestore,null,r)}}function Vk(t,e,...n){if(t=je(t),arguments.length===1&&(e=Od.newId()),sw("doc","path",e),t instanceof Fc){const r=Ge.fromString(e,...n);return qm(r),new st(t,null,new _e(r))}{if(!(t instanceof st||t instanceof Br))throw new ue(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return qm(r),new st(t.firestore,t instanceof Br?t.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="AsyncQueue";class xg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qw(this,"async_queue_retry"),this._c=()=>{const r=Uu();r&&de(kg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Uu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Jn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Si(e))throw e;de(kg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,sr("INTERNAL UNHANDLED ERROR: ",Dg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Zd.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&we(47125,{Pc:Dg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Dg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class or extends Fc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new xg,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xg(e),this._firestoreClient=void 0,await e}}}function Mk(t,e){const n=typeof t=="object"?t:Ic(),r=typeof t=="string"?t:$l,s=na(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=kd("firestore");i&&Ok(s,...i)}return s}function Uc(t){if(t._terminated)throw new ue(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Lk(t),t._firestoreClient}function Lk(t){const e=t._freezeSettings(),n=function(s,i,o,l){return new iC(s,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,db(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Pk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new un(Rt.fromBase64String(e))}catch(n){throw new ue(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new un(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ra(e,un._jsonSchema))return un.fromBase64String(e.bytes)}}un._jsonSchemaVersion="firestore/bytes/1.0",un._jsonSchema={type:ut("string",un._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vn._jsonSchemaVersion}}static fromJSON(e){if(ra(e,Vn._jsonSchema))return new Vn(e.latitude,e.longitude)}}Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:ut("string",Vn._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ra(e,Mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Mn(e.vectorValues);throw new ue(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:ut("string",Mn._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=/^__.*__$/;class Uk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new sa(e,this.data,n,this.fieldTransforms)}}class pb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class cf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mb(this.Ac)&&Fk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $k{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vc(e)}Cc(e,n,r,s=!1){return new cf({Ac:e,methodName:n,Dc:r,path:St.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bc(t){const e=t._freezeSettings(),n=Vc(t._databaseId);return new $k(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gb(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);hf("Data must be an object, but it was:",o,r);const l=_b(r,o);let c,u;if(i.merge)c=new nn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Wh(e,f,n);if(!o.contains(p))throw new ue(K.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);vb(h,p)||h.push(p)}c=new nn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Uk(new Xt(l),c,u)}class la extends qc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof la}}class uf extends qc{_toFieldTransform(e){return new xC(e.path,new jo)}isEqual(e){return e instanceof uf}}function qk(t,e,n,r){const s=t.Cc(1,e,n);hf("Data must be an object, but it was:",s,r);const i=[],o=Xt.empty();ns(r,(c,u)=>{const h=df(e,c,n);u=je(u);const f=s.yc(h);if(u instanceof la)i.push(h);else{const p=ca(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new nn(i);return new pb(o,l,s.fieldTransforms)}function Bk(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Wh(e,r,n)],c=[s];if(i.length%2!=0)throw new ue(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Wh(e,i[p])),c.push(i[p+1]);const u=[],h=Xt.empty();for(let p=l.length-1;p>=0;--p)if(!vb(u,l[p])){const w=l[p];let I=c[p];I=je(I);const k=o.yc(w);if(I instanceof la)u.push(w);else{const P=ca(I,k);P!=null&&(u.push(w),h.set(w,P))}}const f=new nn(u);return new pb(h,f,o.fieldTransforms)}function jk(t,e,n,r=!1){return ca(n,t.Cc(r?4:3,e))}function ca(t,e){if(yb(t=je(t)))return hf("Unsupported field value:",e,t),_b(t,e);if(t instanceof qc)return function(r,s){if(!mb(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ca(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:Hl(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hl(s.serializer,i)}}if(r instanceof Vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof un)return{bytesValue:Fw(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Mn)return function(o,l){return{mapValue:{fields:{[fw]:{stringValue:pw},[ql]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return $d(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Sc(r)}`)}(t,e)}function _b(t,e){const n={};return aw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ns(t,(r,s)=>{const i=ca(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Vn||t instanceof un||t instanceof st||t instanceof qc||t instanceof Mn)}function hf(t,e,n){if(!yb(n)||!iw(n)){const r=Sc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Wh(t,e,n){if((e=je(e))instanceof $c)return e._internalPath;if(typeof e=="string")return df(t,e);throw Yl("Field path arguments must be of type string or ",t,!1,void 0,n)}const zk=new RegExp("[~\\*/\\[\\]]");function df(t,e,n){if(e.search(zk)>=0)throw Yl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $c(...e.split("."))._internalPath}catch{throw Yl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ue(K.INVALID_ARGUMENT,l+t+c)}function vb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Hk extends wb{data(){return super.data()}}function jc(t,e){return typeof e=="string"?df(t,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ff{}class pf extends ff{}function Ki(t,e,...n){let r=[];e instanceof ff&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof mf).length,l=i.filter(c=>c instanceof zc).length;if(o>1||o>0&&l>0)throw new ue(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class zc extends pf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zc(e,n,r)}_apply(e){const n=this._parse(e);return Eb(e._query,n),new fr(e.firestore,e.converter,Mh(e._query,n))}_parse(e){const n=Bc(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ue(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Vg(f,h);const I=[];for(const k of f)I.push(Og(c,i,k));p={arrayValue:{values:I}}}else p=Og(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Vg(f,h),p=jk(l,o,f,h==="in"||h==="not-in");return ct.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wr(t,e,n){const r=e,s=jc("where",t);return zc._create(s,r,n)}class mf extends ff{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Eb(o,c),o=Mh(o,c)}(e._query,n),new fr(e.firestore,e.converter,Mh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gf extends pf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ue(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bo(i,o)}(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ai(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function uL(t,e="asc"){const n=e,r=jc("orderBy",t);return gf._create(r,n)}class _f extends pf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _f(e,n,r)}_apply(e){return new fr(e.firestore,e.converter,jl(e._query,this._limit,this._limitType))}}function hL(t){return GR("limit",t),_f._create("limit",t,"F")}function Og(t,e,n){if(typeof(n=je(n))=="string"){if(n==="")throw new ue(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ew(e)&&n.indexOf("/")!==-1)throw new ue(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!_e.isDocumentKey(r))throw new ue(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ym(t,new _e(r))}if(n instanceof st)return Ym(t,n._key);throw new ue(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sc(n)}.`)}function Vg(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Eb(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Wk{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ns(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){const n=e.fields?.[ql].arrayValue?.values?.map(r=>it(r.doubleValue));return new Mn(n)}convertGeoPoint(e){return new Vn(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const n=Qr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);qe(zw(r),9688,{name:e});const s=new $o(r.get(1),r.get(3)),i=new _e(r.popFirst(5));return s.isEqual(n)||sr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends wb{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ll(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ts._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ts._jsonSchema={type:ut("string",Ts._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class ll extends Ts{data(e={}){return super.data(e)}}class Is{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new io(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ll(this._firestore,this._userDataWriter,r.key,r,new io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new ll(s._firestore,s._userDataWriter,l.doc.key,l.doc,new io(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ll(s._firestore,s._userDataWriter,l.doc.key,l.doc,new io(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:Kk(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Od.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Kk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){t=Zt(t,st);const e=Zt(t.firestore,or);return Dk(Uc(e),t._key).then(n=>Ib(e,t,n))}Is._jsonSchemaVersion="firestore/querySnapshot/1.0",Is._jsonSchema={type:ut("string",Is._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class yf extends Wk{constructor(e){super(),this.firestore=e}convertBytes(e){return new un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function Mg(t){t=Zt(t,fr);const e=Zt(t.firestore,or),n=Uc(e),r=new yf(e);return bb(t._query),Nk(n,t._query).then(s=>new Is(e,r,t,s))}function fL(t,e,n){t=Zt(t,st);const r=Zt(t.firestore,or),s=Tb(t.converter,e,n);return Hc(r,[gb(Bc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fn.none())])}function pL(t,e,n,...r){t=Zt(t,st);const s=Zt(t.firestore,or),i=Bc(s);let o;return o=typeof(e=je(e))=="string"||e instanceof $c?Bk(i,"updateDoc",t._key,e,n,r):qk(i,"updateDoc",t._key,e),Hc(s,[o.toMutation(t._key,fn.exists(!0))])}function mL(t){return Hc(Zt(t.firestore,or),[new qd(t._key,fn.none())])}function gL(t,e){const n=Zt(t.firestore,or),r=Vk(t),s=Tb(t.converter,e);return Hc(n,[gb(Bc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function Gk(t,...e){t=je(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ng(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ng(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let i,o,l;if(t instanceof st)o=Zt(t.firestore,or),l=Pc(t._key.path),i={next:c=>{e[r]&&e[r](Ib(o,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Zt(t,fr);o=Zt(c.firestore,or),l=c._query;const u=new yf(o);i={next:h=>{e[r]&&e[r](new Is(o,u,c,h))},error:e[r+1],complete:e[r+2]},bb(t._query)}return function(u,h,f,p){const w=new lf(p),I=new sf(h,w,f);return u.asyncQueue.enqueueAndForget(async()=>tf(await Ql(u),I)),()=>{w.Nu(),u.asyncQueue.enqueueAndForget(async()=>nf(await Ql(u),I))}}(Uc(o),l,s,i)}function Hc(t,e){return function(r,s){const i=new Jn;return r.asyncQueue.enqueueAndForget(async()=>wk(await xk(r),s,i)),i.promise}(Uc(t),e)}function Ib(t,e,n){const r=n.docs.get(e._key),s=new yf(t);return new Ts(t,s,e._key,r,new io(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(){return new la("deleteField")}function yL(){return new uf("serverTimestamp")}(function(e,n=!0){(function(s){Ti=s})(Ms),Kr(new nr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new or(new UR(r.getProvider("auth-internal")),new BR(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),dn(Lm,Fm,e),dn(Lm,Fm,"esm2020")})();var Qk="firebase",Yk="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn(Qk,Yk,"app");function Sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xk=Sb,Ab=new ea("auth","Firebase",Sb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new xd("@firebase/auth");function Jk(t,...e){Xl.logLevel<=ke.WARN&&Xl.warn(`Auth (${Ms}): ${t}`,...e)}function cl(t,...e){Xl.logLevel<=ke.ERROR&&Xl.error(`Auth (${Ms}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw wf(t,...e)}function Tn(t,...e){return wf(t,...e)}function vf(t,e,n){const r={...Xk(),[e]:n};return new ea("auth","Firebase",r).create(e,{appName:t.name})}function jr(t){return vf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$n(t,"argument-error"),vf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ab.create(t,...e)}function Ee(t,e,...n){if(!t)throw wf(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cl(e),new Error(e)}function ar(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){return typeof self<"u"&&self.location?.href||""}function Zk(){return Lg()==="http:"||Lg()==="https:"}function Lg(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zk()||gA()||"connection"in navigator)?navigator.onLine:!0}function t1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=fA()||_A()}get(){return e1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s1=new ua(3e4,6e4);function Ef(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ci(t,e,n,r,s={}){return Pb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ta({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return mA()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&dr(t.emulatorConfig.host)&&(u.credentials="include"),Cb.fetch()(await kb(t,t.config.apiHost,n,l),u)})}async function Pb(t,e,n){t._canInitEmulator=!1;const r={...n1,...e};try{const s=new o1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw za(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw za(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw za(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw za(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vf(t,h,u);$n(t,h)}}catch(s){if(s instanceof qn)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function i1(t,e,n,r,s={}){const i=await Ci(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function kb(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?bf(t.config,s):`${t.config.apiScheme}://${s}`;return r1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class o1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),s1.get())})}}function za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(t,e){return Ci(t,"POST","/v1/accounts:delete",e)}async function Jl(t,e){return Ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l1(t,e=!1){const n=je(t),r=await n.getIdToken(e),s=Tf(r);Ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:To(Bu(s.auth_time)),issuedAtTime:To(Bu(s.iat)),expirationTime:To(Bu(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Bu(t){return Number(t)*1e3}function Tf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cl("JWT malformed, contained fewer than 3 sections"),null;try{const s=$v(n);return s?JSON.parse(s):(cl("Failed to decode base64 JWT payload"),null)}catch(s){return cl("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Fg(t){const e=Tf(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&c1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function c1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=To(this.lastLoginAt),this.creationTime=To(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){const e=t.auth,n=await t.getIdToken(),r=await Wo(t,Jl(e,{idToken:n}));Ee(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?xb(s.providerUserInfo):[],o=d1(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Gh(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function h1(t){const e=je(t);await Zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t,e){const n=await Pb(t,{},async()=>{const r=ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await kb(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&dr(t.emulatorConfig.host)&&(c.credentials="include"),Cb.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function p1(t,e){return Ci(t,"POST","/v2/accounts:revokeToken",Ef(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=Fg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await f1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new li;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new li,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new u1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wo(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return l1(this,e)}reload(){return h1(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yt(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await Wo(this,a1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:w,providerData:I,stsTokenManager:k}=n;Ee(f&&k,e,"internal-error");const P=li.fromJSON(this.name,k);Ee(typeof f=="string",e,"internal-error"),br(r,e.name),br(s,e.name),Ee(typeof p=="boolean",e,"internal-error"),Ee(typeof w=="boolean",e,"internal-error"),br(i,e.name),br(o,e.name),br(l,e.name),br(c,e.name),br(u,e.name),br(h,e.name);const F=new wn({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:P,createdAt:u,lastLoginAt:h});return I&&Array.isArray(I)&&(F.providerData=I.map(A=>({...A}))),c&&(F._redirectEventId=c),F}static async _fromIdTokenResponse(e,n,r=!1){const s=new li;s.updateFromServerResponse(n);const i=new wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Zl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,l=new li;l.updateFromIdToken(r);const c=new wn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Gh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Map;function Xn(t){ar(t instanceof Function,"Expected a class definition");let e=Ug.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ug.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Db.type="NONE";const $g=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t,e,n){return`firebase:${t}:${e}:${n}`}class ci{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ul(this.userKey,s.apiKey,i),this.fullPersistenceKey=ul("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jl(this.auth,{idToken:e}).catch(()=>{});return n?wn._fromGetAccountInfoResponse(this.auth,n,e):null}return wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ci(Xn($g),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Xn($g);const o=ul(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Jl(e,{idToken:h}).catch(()=>{});if(!p)break;f=await wn._fromGetAccountInfoResponse(e,p,h)}else f=wn._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ci(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fb(e))return"Blackberry";if(Ub(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Vb(e))&&!e.includes("edge/"))return"Chrome";if(Lb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Nb(t=Ft()){return/firefox\//i.test(t)}function Ob(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vb(t=Ft()){return/crios\//i.test(t)}function Mb(t=Ft()){return/iemobile/i.test(t)}function Lb(t=Ft()){return/android/i.test(t)}function Fb(t=Ft()){return/blackberry/i.test(t)}function Ub(t=Ft()){return/webos/i.test(t)}function If(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function m1(t=Ft()){return If(t)&&!!window.navigator?.standalone}function g1(){return yA()&&document.documentMode===10}function $b(t=Ft()){return If(t)||Lb(t)||Ub(t)||Fb(t)||/windows phone/i.test(t)||Mb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e=[]){let n;switch(t){case"Browser":n=qg(Ft());break;case"Worker":n=`${qg(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ms}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",Ef(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=6;class w1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??v1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new _1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ab,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ci.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jl(this,{idToken:e}),r=await wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Yt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yt(this.app))return Promise.reject(jr(this));const n=e?je(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yt(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yt(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y1(this),n=new w1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ea("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await p1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await ci.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Jk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pi(t){return je(t)}class Bg{constructor(e){this.auth=e,this.observer=null,this.addObserver=AA(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E1(t){Sf=t}function T1(t){return Sf.loadJS(t)}function I1(){return Sf.gapiScript}function S1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){const n=na(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Cs(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function R1(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Xn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function C1(t,e,n){const r=Pi(t);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Bb(e),{host:o,port:l}=P1(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(Cs(u,r.config.emulator)&&Cs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,dr(o)?(Ec(`${i}//${o}${c}`),Tc("Auth",!0)):k1()}function Bb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P1(t){const e=Bb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:jg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:jg(o)}}}function jg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function k1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(t,e){return i1(t,"POST","/v1/accounts:signInWithIdp",Ef(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="http://localhost";class xs extends jb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new xs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ui(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ui(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ui(e,n)}buildRequest(){const e={requestUri:x1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Wc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends ha{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xs._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends ha{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends ha{constructor(){super("twitter.com")}static credential(e,n){return xs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vr.credential(n,r)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await wn._fromIdTokenResponse(e,r,s),o=zg(r);return new vi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zg(r);return new vi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends qn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ec(e,n,r,s)}}function zb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(t,i,e,r):i})}async function D1(t,e,n=!1){const r=await Wo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(t,e,n=!1){const{auth:r}=t;if(Yt(r.app))return Promise.reject(jr(r));const s="reauthenticate";try{const i=await Wo(t,zb(r,s,e,t),n);Ee(i.idToken,r,"internal-error");const o=Tf(i.idToken);Ee(o,r,"internal-error");const{sub:l}=o;return Ee(t.uid===l,r,"user-mismatch"),vi._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(t,e,n=!1){if(Yt(t.app))return Promise.reject(jr(t));const r="signIn",s=await zb(t,r,e),i=await vi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function V1(t,e,n,r){return je(t).onIdTokenChanged(e,n,r)}function M1(t,e,n){return je(t).beforeAuthStateChanged(e,n)}function vL(t,e,n,r){return je(t).onAuthStateChanged(e,n,r)}function wL(t){return je(t).signOut()}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1e3,F1=10;class Wb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$b(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);g1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,F1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},L1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wb.type="LOCAL";const U1=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kb.type="SESSION";const Gb=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Kc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await $1(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Af("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function B1(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function j1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z1(){return navigator?.serviceWorker?.controller||null}function H1(){return Qb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebaseLocalStorageDb",W1=1,nc="firebaseLocalStorage",Xb="fbase_key";class da{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gc(t,e){return t.transaction([nc],e?"readwrite":"readonly").objectStore(nc)}function K1(){const t=indexedDB.deleteDatabase(Yb);return new da(t).toPromise()}function Qh(){const t=indexedDB.open(Yb,W1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nc,{keyPath:Xb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nc)?e(r):(r.close(),await K1(),e(await Qh()))})})}async function Hg(t,e,n){const r=Gc(t,!0).put({[Xb]:e,value:n});return new da(r).toPromise()}async function G1(t,e){const n=Gc(t,!1).get(e),r=await new da(n).toPromise();return r===void 0?null:r.value}function Wg(t,e){const n=Gc(t,!0).delete(e);return new da(n).toPromise()}const Q1=800,Y1=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Y1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(H1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await j1(),!this.activeServiceWorker)return;this.sender=new q1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qh();return await Hg(e,tc,"1"),await Wg(e,tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>G1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gc(s,!1).getAll();return new da(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const X1=Jb;new ua(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){return e?Xn(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends jb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ui(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ui(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function J1(t){return O1(t.auth,new Cf(t),t.bypassAuthState)}function Z1(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),N1(n,new Cf(t),t.bypassAuthState)}async function ex(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),D1(n,new Cf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J1;case"linkViaPopup":case"linkViaRedirect":return ex;case"reauthViaPopup":case"reauthViaRedirect":return Z1;default:$n(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new ua(2e3,1e4);async function bL(t,e,n){if(Yt(t.app))return Promise.reject(Tn(t,"operation-not-supported-in-this-environment"));const r=Pi(t);Rb(t,e,Wc);const s=Rf(r,n);return new gs(r,"signInViaPopup",e,s).executeNotNull()}class gs extends Zb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tx.get())};e()}}gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="pendingRedirect",hl=new Map;class rx extends Zb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hl.get(this.auth._key());if(!e){try{const r=await sx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hl.set(this.auth._key(),e)}return this.bypassAuthState||hl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sx(t,e){const n=tE(e),r=eE(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function ix(t,e){return eE(t)._set(tE(e),"true")}function ox(t,e){hl.set(t._key(),e)}function eE(t){return Xn(t._redirectPersistence)}function tE(t){return ul(nx,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t,e,n){return ax(t,e,n)}async function ax(t,e,n){if(Yt(t.app))return Promise.reject(jr(t));const r=Pi(t);Rb(t,e,Wc),await r._initializationPromise;const s=Rf(r,n);return await ix(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function TL(t,e){return await Pi(t)._initializationPromise,nE(t,e,!1)}async function nE(t,e,n=!1){if(Yt(t.app))return Promise.reject(jr(t));const r=Pi(t),s=Rf(r,e),o=await new rx(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=600*1e3;class cx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ux(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!rE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Tn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(e))}saveEventToCache(e){this.cachedEventUids.add(Kg(e)),this.lastProcessedEventTime=Date.now()}}function Kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ux(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(t,e={}){return Ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fx=/^https?/;async function px(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hx(t);for(const n of e)try{if(mx(n))return}catch{}$n(t,"unauthorized-domain")}function mx(t){const e=Kh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!fx.test(n))return!1;if(dx.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=new ua(3e4,6e4);function Gg(){const t=Ln().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _x(t){return new Promise((e,n)=>{function r(){Gg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gg(),n(Tn(t,"network-request-failed"))},timeout:gx.get()})}if(Ln().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ln().gapi?.load)r();else{const s=S1("iframefcb");return Ln()[s]=()=>{gapi.load?r():n(Tn(t,"network-request-failed"))},T1(`${I1()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw dl=null,e})}let dl=null;function yx(t){return dl=dl||_x(t),dl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new ua(5e3,15e3),wx="__/auth/iframe",bx="emulator/auth/iframe",Ex={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ix(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bf(e,bx):`https://${t.config.authDomain}/${wx}`,r={apiKey:e.apiKey,appName:t.name,v:Ms},s=Tx.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ta(r).slice(1)}`}async function Sx(t){const e=await yx(t),n=Ln().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:Ix(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ex,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),l=Ln().setTimeout(()=>{i(o)},vx.get());function c(){Ln().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rx=500,Cx=600,Px="_blank",kx="http://localhost";class Qg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xx(t,e,n,r=Rx,s=Cx){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...Ax,width:r.toString(),height:s.toString(),top:i,left:o},u=Ft().toLowerCase();n&&(l=Vb(u)?Px:n),Nb(u)&&(e=e||kx,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[w,I])=>`${p}${w}=${I},`,"");if(m1(u)&&l!=="_self")return Dx(e||"",l),new Qg(null);const f=window.open(e||"",l,h);Ee(f,t,"popup-blocked");try{f.focus()}catch{}return new Qg(f)}function Dx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="__/auth/handler",Ox="emulator/auth/handler",Vx=encodeURIComponent("fac");async function Yg(t,e,n,r,s,i){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ms,eventId:s};if(e instanceof Wc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",SA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ha){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${Vx}=${encodeURIComponent(c)}`:"";return`${Mx(t)}?${ta(l).slice(1)}${u}`}function Mx({config:t}){return t.emulator?bf(t,Ox):`https://${t.authDomain}/${Nx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju="webStorageSupport";class Lx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gb,this._completeRedirectFn=nE,this._overrideRedirectResult=ox}async _openPopup(e,n,r,s){ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Yg(e,n,r,Kh(),s);return xx(e,i,Af())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Yg(e,n,r,Kh(),s);return B1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Sx(e),r=new cx(e);return n.register("authEvent",s=>(Ee(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ju,{type:ju},s=>{const i=s?.[0]?.[ju];i!==void 0&&n(!!i),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=px(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $b()||Ob()||If()}}const Fx=Lx;var Xg="@firebase/auth",Jg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qx(t){Kr(new nr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qb(t)},u=new b1(r,s,i,c);return R1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kr(new nr("auth-internal",e=>{const n=Pi(e.getProvider("auth").getImmediate());return(r=>new Ux(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dn(Xg,Jg,$x(t)),dn(Xg,Jg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=300,jx=jv("authIdTokenMaxAge")||Bx;let Zg=null;const zx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jx)return;const s=n?.token;Zg!==s&&(Zg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Hx(t=Ic()){const e=na(t,"auth");if(e.isInitialized())return e.getImmediate();const n=A1(t,{popupRedirectResolver:Fx,persistence:[X1,U1,Gb]}),r=jv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=zx(i.toString());M1(n,o,()=>o(n.currentUser)),V1(n,l=>o(l))}}const s=qv("auth");return s&&C1(n,`http://${s}`),n}function Wx(){return document.getElementsByTagName("head")?.[0]??document}E1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Wx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qx("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="firebasestorage.googleapis.com",iE="storageBucket",Kx=120*1e3,Gx=600*1e3,Qx=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt extends qn{constructor(e,n,r=0){super(zu(e),`Firebase Storage: ${n} (${zu(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ze;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ze||(Ze={}));function zu(t){return"storage/"+t}function Pf(){const t="An unknown error occurred, please check the error payload for server response.";return new nt(Ze.UNKNOWN,t)}function Yx(t){return new nt(Ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Xx(t){return new nt(Ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Jx(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nt(Ze.UNAUTHENTICATED,t)}function Zx(){return new nt(Ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function eD(t){return new nt(Ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function oE(){return new nt(Ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aE(){return new nt(Ze.CANCELED,"User canceled the upload/download.")}function tD(t){return new nt(Ze.INVALID_URL,"Invalid URL '"+t+"'.")}function nD(t){return new nt(Ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function rD(){return new nt(Ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iE+"' property when initializing the app?")}function lE(){return new nt(Ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sD(){return new nt(Ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function iD(){return new nt(Ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oD(t){return new nt(Ze.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yh(t){return new nt(Ze.INVALID_ARGUMENT,t)}function cE(){return new nt(Ze.APP_DELETED,"The Firebase app was deleted.")}function aD(t){return new nt(Ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Io(t,e){return new nt(Ze.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gi(t){throw new nt(Ze.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=zt.makeFromUrl(e,n)}catch{return new zt(e,"")}if(r.path==="")return r;throw nD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",w=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),I={bucket:1,path:3},k=n===sE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",F=new RegExp(`^https?://${k}/${s}/${P}`,"i"),x=[{regex:l,indices:c,postModify:i},{regex:w,indices:I,postModify:u},{regex:F,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<x.length;D++){const B=x[D],H=B.regex.exec(e);if(H){const S=H[B.indices.bucket];let b=H[B.indices.path];b||(b=""),r=new zt(S,b),B.postModify(r);break}}if(r==null)throw tD(e);return r}}class lD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function f(P){s=setTimeout(()=>{s=null,t(w,c())},P)}function p(){i&&clearTimeout(i)}function w(P,...F){if(u){p();return}if(P){p(),h.call(null,P,...F);return}if(c()||o){p(),h.call(null,P,...F);return}r<64&&(r*=2);let x;l===1?(l=2,x=0):x=(r+Math.random())*1e3,f(x)}let I=!1;function k(P){I||(I=!0,p(),!u&&(s!==null?(P||(l=2),clearTimeout(s),f(0)):P||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function uD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){return t!==void 0}function dD(t){return typeof t=="function"}function fD(t){return typeof t=="object"&&!Array.isArray(t)}function Qc(t){return typeof t=="string"||t instanceof String}function e_(t){return kf()&&t instanceof Blob}function kf(){return typeof Blob<"u"}function Xh(t,e,n,r){if(r<e)throw Yh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Yh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function uE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ss;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ss||(Ss={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r,s,i,o,l,c,u,h,f,p=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,k)=>{this.resolve_=I,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ha(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Ss.NO_ERROR,c=i.getStatus();if(!l||hE(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Ss.ABORT;r(!1,new Ha(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Ha(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());hD(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=Pf();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?cE():aE();o(c)}else{const c=oE();o(c)}};this.canceled_?n(!1,new Ha(!1,null,!0)):this.backoffId_=cD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ha{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function mD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function gD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _D(t,e){e&&(t["X-Firebase-GMPID"]=e)}function yD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vD(t,e,n,r,s,i,o=!0,l=!1){const c=uE(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return _D(h,e),mD(h,n),gD(h,i),yD(h,r),new pD(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function bD(...t){const e=wD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(kf())return new Blob(t);throw new nt(Ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ED(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(typeof atob>"u")throw oD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hu{constructor(e,n){this.data=e,this.contentType=n||null}}function ID(t,e){switch(t){case xn.RAW:return new Hu(dE(e));case xn.BASE64:case xn.BASE64URL:return new Hu(fE(t,e));case xn.DATA_URL:return new Hu(AD(e),RD(e))}throw Pf()}function dE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function SD(t){let e;try{e=decodeURIComponent(t)}catch{throw Io(xn.DATA_URL,"Malformed data URL.")}return dE(e)}function fE(t,e){switch(t){case xn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Io(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case xn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Io(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=TD(e)}catch(s){throw s.message.includes("polyfill")?s:Io(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class pE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Io(xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=CD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function AD(t){const e=new pE(t);return e.base64?fE(xn.BASE64,e.rest):SD(e.rest)}function RD(t){return new pE(t).contentType}function CD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){let r=0,s="";e_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(e_(this.data_)){const r=this.data_,s=ED(r,e,n);return s===null?null:new Qn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qn(r,!0)}}static getBlob(...e){if(kf()){const n=e.map(r=>r instanceof Qn?r.data_:r);return new Qn(bD.apply(null,n))}else{const n=e.map(o=>Qc(o)?ID(xn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Qn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){let e;try{e=JSON.parse(t)}catch{return null}return fD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e){return e}class $t{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||xD}}let Wa=null;function DD(t){return!Qc(t)||t.length<2?t:mE(t)}function fa(){if(Wa)return Wa;const t=[];t.push(new $t("bucket")),t.push(new $t("generation")),t.push(new $t("metageneration")),t.push(new $t("name","fullPath",!0));function e(i,o){return DD(o)}const n=new $t("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new $t("size");return s.xform=r,t.push(s),t.push(new $t("timeCreated")),t.push(new $t("updated")),t.push(new $t("md5Hash",null,!0)),t.push(new $t("cacheControl",null,!0)),t.push(new $t("contentDisposition",null,!0)),t.push(new $t("contentEncoding",null,!0)),t.push(new $t("contentLanguage",null,!0)),t.push(new $t("contentType",null,!0)),t.push(new $t("metadata","customMetadata",!0)),Wa=t,Wa}function ND(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new zt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function OD(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return ND(r,t),r}function gE(t,e,n){const r=xf(e);return r===null?null:OD(t,r,n)}function VD(t,e,n,r){const s=xf(e);if(s===null||!Qc(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),w=ss(p,n,r),I=uE({alt:"media",token:u});return w+I})[0]}function Df(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="prefixes",n_="items";function MD(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[t_])for(const s of n[t_]){const i=s.replace(/\/$/,""),o=t._makeStorageReference(new zt(e,i));r.prefixes.push(o)}if(n[n_])for(const s of n[n_]){const i=t._makeStorageReference(new zt(e,s.name));r.items.push(i)}return r}function LD(t,e,n){const r=xf(n);return r===null?null:MD(t,e,r)}class pr{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){if(!t)throw Pf()}function Yc(t,e){function n(r,s){const i=gE(t,s,e);return Fn(i!==null),i}return n}function FD(t,e){function n(r,s){const i=LD(t,e,s);return Fn(i!==null),i}return n}function UD(t,e){function n(r,s){const i=gE(t,s,e);return Fn(i!==null),VD(i,s,t.host,t._protocol)}return n}function ki(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=Zx():s=Jx():n.getStatus()===402?s=Xx(t.bucket):n.getStatus()===403?s=eD(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Xc(t){const e=ki(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=Yx(t.path)),i.serverResponse=s.serverResponse,i}return n}function _E(t,e,n){const r=e.fullServerUrl(),s=ss(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new pr(s,i,Yc(t,n),o);return l.errorHandler=Xc(e),l}function $D(t,e,n,r,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=e.bucketOnlyServerUrl(),l=ss(o,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,h=new pr(l,c,FD(t,e.bucket),u);return h.urlParams=i,h.errorHandler=ki(e),h}function qD(t,e,n){const r=e.fullServerUrl(),s=ss(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new pr(s,i,UD(t,n),o);return l.errorHandler=Xc(e),l}function BD(t,e,n,r){const s=e.fullServerUrl(),i=ss(s,t.host,t._protocol),o="PATCH",l=Df(n,r),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,h=new pr(i,o,Yc(t,r),u);return h.headers=c,h.body=l,h.errorHandler=Xc(e),h}function jD(t,e){const n=e.fullServerUrl(),r=ss(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(c,u){}const l=new pr(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=Xc(e),l}function zD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function yE(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=zD(null,e)),r}function vE(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let x="";for(let D=0;D<2;D++)x=x+Math.random().toString().slice(2);return x}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=yE(e,r,s),h=Df(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",w=Qn.getBlob(f,r,p);if(w===null)throw lE();const I={name:u.fullPath},k=ss(i,t.host,t._protocol),P="POST",F=t.maxUploadRetryTime,A=new pr(k,P,Yc(t,n),F);return A.urlParams=I,A.headers=o,A.body=w.uploadData(),A.errorHandler=ki(e),A}class rc{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Nf(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Fn(!1)}return Fn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function HD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=yE(e,r,s),l={name:o.fullPath},c=ss(i,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=Df(o,n),p=t.maxUploadRetryTime;function w(k){Nf(k);let P;try{P=k.getResponseHeader("X-Goog-Upload-URL")}catch{Fn(!1)}return Fn(Qc(P)),P}const I=new pr(c,u,w,p);return I.urlParams=l,I.headers=h,I.body=f,I.errorHandler=ki(e),I}function WD(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(u){const h=Nf(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fn(!1)}f||Fn(!1);const p=Number(f);return Fn(!isNaN(p)),new rc(p,r.size(),h==="final")}const o="POST",l=t.maxUploadRetryTime,c=new pr(n,o,i,l);return c.headers=s,c.errorHandler=ki(e),c}const r_=256*1024;function KD(t,e,n,r,s,i,o,l){const c=new rc(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw sD();const u=c.total-c.current;let h=u;s>0&&(h=Math.min(h,s));const f=c.current,p=f+h;let w="";h===0?w="finalize":u===h?w="upload, finalize":w="upload";const I={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${c.current}`},k=r.slice(f,p);if(k===null)throw lE();function P(D,B){const H=Nf(D,["active","final"]),S=c.current+h,b=r.size();let y;return H==="final"?y=Yc(e,i)(D,B):y=null,new rc(S,b,H==="final",y)}const F="POST",A=e.maxUploadRetryTime,x=new pr(n,F,P,A);return x.headers=I,x.body=k.uploadData(),x.progressCallback=l||null,x.errorHandler=ki(t),x}const Wt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Wu(t){switch(t){case"running":case"pausing":case"canceling":return Wt.RUNNING;case"paused":return Wt.PAUSED;case"success":return Wt.SUCCESS;case"canceled":return Wt.CANCELED;case"error":return Wt.ERROR;default:return Wt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r){if(dD(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class QD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ss.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ss.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ss.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Gi("cannot .send() more than once");if(dr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gi("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gi("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gi("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gi("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YD extends QD{initXhr(){this.xhr_.responseType="text"}}function vn(){return new YD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=fa(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(hE(s.status,[]))if(i)s=oE();else{this.sleepTime=Math.max(this.sleepTime*2,Qx),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ze.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=HD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,vn,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=WD(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,vn,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=r_*this._chunkMultiplier,n=new rc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=KD(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,vn,s,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){r_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=_E(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,vn,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=vE(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,vn,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=aE(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Wu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new GD(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Wu(this._state)){case Wt.SUCCESS:Ks(this._resolve.bind(null,this.snapshot))();break;case Wt.CANCELED:case Wt.ERROR:const n=this._reject;Ks(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Wu(this._state)){case Wt.RUNNING:case Wt.PAUSED:e.next&&Ks(e.next.bind(e,this.snapshot))();break;case Wt.SUCCESS:e.complete&&Ks(e.complete.bind(e))();break;case Wt.CANCELED:case Wt.ERROR:e.error&&Ks(e.error.bind(e,this._error))();break;default:e.error&&Ks(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this._service=e,n instanceof zt?this._location=n:this._location=zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ds(e,n)}get root(){const e=new zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mE(this._location.path)}get storage(){return this._service}get parent(){const e=PD(this._location.path);if(e===null)return null;const n=new zt(this._location.bucket,e);return new Ds(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw aD(e)}}function JD(t,e,n){t._throwIfRoot("uploadBytes");const r=vE(t.storage,t._location,fa(),new Qn(e,!0),n);return t.storage.makeRequestWithTokens(r,vn).then(s=>({metadata:s,ref:t}))}function ZD(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new XD(t,new Qn(e),n)}function eN(t){const e={prefixes:[],items:[]};return wE(t,e).then(()=>e)}async function wE(t,e,n){const s=await tN(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await wE(t,e,s.nextPageToken)}function tN(t,e){e!=null&&typeof e.maxResults=="number"&&Xh("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=$D(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,vn)}function nN(t){t._throwIfRoot("getMetadata");const e=_E(t.storage,t._location,fa());return t.storage.makeRequestWithTokens(e,vn)}function rN(t,e){t._throwIfRoot("updateMetadata");const n=BD(t.storage,t._location,e,fa());return t.storage.makeRequestWithTokens(n,vn)}function sN(t){t._throwIfRoot("getDownloadURL");const e=qD(t.storage,t._location,fa());return t.storage.makeRequestWithTokens(e,vn).then(n=>{if(n===null)throw iD();return n})}function iN(t){t._throwIfRoot("deleteObject");const e=jD(t.storage,t._location);return t.storage.makeRequestWithTokens(e,vn)}function oN(t,e){const n=kD(t._location.path,e),r=new zt(t._location.bucket,n);return new Ds(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){return/^[A-Za-z]+:\/\//.test(t)}function lN(t,e){return new Ds(t,e)}function bE(t,e){if(t instanceof Of){const n=t;if(n._bucket==null)throw rD();const r=new Ds(n,n._bucket);return e!=null?bE(r,e):r}else return e!==void 0?oN(t,e):t}function cN(t,e){if(e&&aN(e)){if(t instanceof Of)return lN(t,e);throw Yh("To use ref(service, url), the first argument must be a Storage instance.")}else return bE(t,e)}function s_(t,e){const n=e?.[iE];return n==null?null:zt.makeFromBucketSpec(n,t)}function uN(t,e,n,r={}){t.host=`${e}:${n}`;const s=dr(e);s&&(Ec(`https://${t.host}/b`),Tc("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:zv(i,t.app.options.projectId))}class Of{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=sE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Kx,this._maxUploadRetryTime=Gx,this._requests=new Set,s!=null?this._bucket=zt.makeFromBucketSpec(s,this._host):this._bucket=s_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zt.makeFromBucketSpec(this._url,e):this._bucket=s_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ds(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new lD(cE());{const o=vD(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const i_="@firebase/storage",o_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="storage";function IL(t,e,n){return t=je(t),JD(t,e,n)}function SL(t,e,n){return t=je(t),ZD(t,e,n)}function AL(t){return t=je(t),nN(t)}function RL(t,e){return t=je(t),rN(t,e)}function CL(t){return t=je(t),eN(t)}function PL(t){return t=je(t),sN(t)}function kL(t){return t=je(t),iN(t)}function xL(t,e){return t=je(t),cN(t,e)}function hN(t=Ic(),e){t=je(t);const r=na(t,EE).getImmediate({identifier:e}),s=kd("storage");return s&&dN(r,...s),r}function dN(t,e,n,r={}){uN(t,e,n,r)}function fN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Of(n,r,s,e,Ms)}function pN(){Kr(new nr(EE,fN,"PUBLIC").setMultipleInstances(!0)),dn(i_,o_,""),dn(i_,o_,"esm2020")}pN();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Yt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s?.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="us-central1";class gN{constructor(e,n,r,s,i=Jh,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new mN(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Jh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _N(t,e,n){const r=dr(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Ec(t.emulatorOrigin+"/backends"),Tc("Functions",!0))}const a_="@firebase/functions",l_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="auth-internal",vN="app-check-internal",wN="messaging-internal";function bN(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(yN),o=n.getProvider(wN),l=n.getProvider(vN);return new gN(s,i,o,l,r)};Kr(new nr(TE,e,"PUBLIC").setMultipleInstances(!0)),dn(a_,l_,t),dn(a_,l_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t=Ic(),e=Jh){const r=na(je(t),TE).getImmediate({identifier:e}),s=kd("functions");return s&&TN(r,...s),r}function TN(t,e,n){_N(je(t),e,n)}bN();const oo={apiKey:"AIzaSyACwH9AJZlSYVPdA4dNNb8G3iwIiFto9oY",authDomain:"clca-courier-27aed.firebaseapp.com",projectId:"clca-courier-27aed",storageBucket:"clca-courier-27aed.firebasestorage.app",messagingSenderId:"1008202516083",appId:"1:1008202516083:web:8b846c50c0a00c3e198c06",measurementId:"G-ZEE8YT3ZEN"},IN=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],fl=IN.filter(t=>!oo[t]);if(fl.length>0)throw console.error("Missing required Firebase configuration fields:",fl),typeof window<"u"&&(console.error(" Firebase Configuration Error:"),console.error("This usually means:"),console.error("1. Local development: Check your .env file exists and has all VITE_FIREBASE_* variables"),console.error("2. GitHub Pages: Check repository secrets are configured in Settings > Secrets and variables > Actions"),console.error("3. Other deployment: Ensure environment variables are set")),new Error(`Firebase configuration incomplete. Missing: ${fl.join(", ")}`);let Qi,SN,pl,AN,RN;try{console.log(" Initializing Firebase with config:",{projectId:oo.projectId,authDomain:oo.authDomain,storageBucket:oo.storageBucket}),Qi=Kv(oo),SN=Hx(Qi),pl=Mk(Qi),AN=hN(Qi),RN=EN(Qi),console.log(" Firebase services initialized successfully")}catch(t){throw console.error(" Firebase initialization failed:",t),t}const DL=()=>fl.length===0;function Ku(t){if(!/^\d{4}-\d{2}-\d{2}$/.test(t.trim()))return null;const n=t.trim().split("-").map(Number);if(n.length===3&&!n.some(r=>isNaN(r))){const r=n[0],s=n[1],i=n[2];return new Date(r,s-1,i)}return null}function NL(){return new Date().getFullYear()}function OL(){return new Date().getMonth()+1}const IE={SHORT:{month:"short",day:"numeric",year:"numeric"},LONG:{month:"long",day:"numeric",year:"numeric"},FULL:{weekday:"long",month:"long",day:"numeric",year:"numeric"},SHORT_WITH_TIME:{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},LONG_WITH_TIME:{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},TIME_12H:{hour:"numeric",minute:"2-digit",hour12:!0},TIME_24H:{hour:"2-digit",minute:"2-digit",hour12:!1},RELATIVE_SHORT:{dateStyle:"short"},RELATIVE_MEDIUM:{dateStyle:"medium"},NEWSLETTER_DISPLAY:{month:"long",year:"numeric"},NEWSLETTER_SEASON:{year:"numeric"}};function es(t){if(!t)return null;try{if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"){if(t==="Invalid Date"||t.trim()==="")return null;if(/^\d{4}-\d{2}-\d{2}$/.test(t.trim())){const r=t.trim().split("-").map(Number);if(r.length===3&&!r.some(s=>isNaN(s))){const s=r[0],i=r[1],o=r[2];return new Date(s,i-1,o)}}const n=new Date(t);return isNaN(n.getTime())?null:n}if(typeof t=="number"){const e=t>1e10?t:t*1e3,n=new Date(e);return isNaN(n.getTime())?null:n}if(t&&typeof t=="object"){if("toDate"in t&&typeof t.toDate=="function")return t.toDate();if("seconds"in t&&typeof t.seconds=="number"){const e=t;return new Date(e.seconds*1e3)}if("_seconds"in t&&typeof t._seconds=="number"){const e=t;return new Date(e._seconds*1e3)}}return Pe.warn("Unknown date format in normalizeDate:",{input:t,type:typeof t}),null}catch(e){return Pe.error("Error normalizing date:",{input:t,error:e}),null}}function c_(t,e="LONG",n="en-US"){const r=es(t);if(!r)return Pe.warn("Invalid date input in formatDate:",t),"Invalid Date";try{const s=IE[e];return r.toLocaleDateString(n,s)}catch(s){return Pe.error("Error formatting date:",{input:t,format:e,error:s}),r.toLocaleDateString()}}function VL(t,e="LONG_WITH_TIME",n="en-US"){const r=es(t);if(!r)return"Invalid Date";try{const s=IE[e];return r.toLocaleDateString(n,s)}catch(s){return Pe.error("Error formatting datetime:",{input:t,format:e,error:s}),r.toLocaleDateString()}}function CN(t){const e=es(t);return e?e.toISOString().split("T")[0]??null:null}function PN(t,e,n,r=!1){const s=es(t);if(!s)return"TBD";try{const i=c_(s,"FULL");if(r)return`${i} (All Day)`;if(e){let o=e;return n&&n!==e&&(o+=` - ${n}`),`${i} at ${o}`}return i}catch(i){return Pe.error("Error formatting event datetime:",{eventDate:t,eventTime:e,eventEndTime:n,allDay:r,error:i}),c_(s,"LONG")}}function ML(t,e){const n=es(t),r=es(e);return!n&&!r?0:n?r?r.getTime()-n.getTime():-1:1}function LL(t,e){const n=es(t),r=es(e);return!n&&!r?0:n?r?n.getTime()-r.getTime():-1:1}class kN{COLLECTION="userContent";normalizeEventDate(e){return CN(e)}isDateInRange(e,n,r){return!n&&!r?!0:!(n&&e<n||r&&e>r)}async getCalendarEvents(e={}){try{Pe.info("Fetching calendar events",{filters:e});let n=Ki(qu(pl,this.COLLECTION),wr("status","==","published"),wr("onCalendar","==",!0));Pe.debug("Calendar events query filters:",{status:"published",onCalendar:!0,...e}),e.types&&e.types.length>0&&(n=Ki(n,wr("type","in",e.types)));const r=await Mg(n),s=[];return Pe.debug(`Found ${r.docs.length} potential calendar events`),r.forEach(i=>{const o=i.data();if(Pe.debug("Processing document:",{id:i.id,title:o.title,type:o.type,status:o.status,onCalendar:o.onCalendar,eventDate:o.eventDate,dateInRange:e.startDate&&e.endDate?`${o.eventDate} between ${e.startDate} and ${e.endDate}`:"no date filter"}),o.eventDate){const l=this.normalizeEventDate(o.eventDate);if(!l){Pe.warn("Could not normalize eventDate for event:",{id:i.id,title:o.title,eventDate:o.eventDate});return}if(!this.isDateInRange(l,e.startDate,e.endDate)){Pe.debug("Event filtered out by date range:",{id:i.id,title:o.title,eventDate:l,startDate:e.startDate,endDate:e.endDate});return}const c={id:i.id,title:o.title,content:o.content,type:o.type,eventDate:l,allDay:o.allDay||!1,featured:o.featured||!1,tags:o.tags||[],authorName:o.authorName,authorEmail:o.authorEmail};if(o.eventEndDate&&(c.eventEndDate=o.eventEndDate),o.eventTime&&(c.eventTime=o.eventTime),o.eventEndTime&&(c.eventEndTime=o.eventEndTime),o.eventLocation&&(c.eventLocation=o.eventLocation),o.eventRecurrence&&(c.eventRecurrence=o.eventRecurrence),e.featured!==void 0&&c.featured!==e.featured||e.tags&&e.tags.length>0&&!e.tags.some(h=>c.tags.some(f=>f.toLowerCase().includes(h.toLowerCase()))))return;s.push(c)}}),s.sort((i,o)=>i.eventDate.localeCompare(o.eventDate)),Pe.success(`Loaded ${s.length} calendar events`),s}catch(n){throw Pe.error("Failed to fetch calendar events",{error:n,filters:e}),n}}async getEventsForMonth(e,n){const r=new Date(e,n-1,1),s=new Date(e,n,0),i=r.toISOString().split("T")[0]??"",o=s.toISOString().split("T")[0]??"";return Pe.debug(` getEventsForMonth called for ${n}/${e}:`),Pe.debug(` Calculated date range: ${i} to ${o}`),this.getCalendarEvents({startDate:i,endDate:o})}async getEventsForDate(e){return this.getCalendarEvents({startDate:e,endDate:e})}subscribeToCalendarEvents(e={},n){try{let r=Ki(qu(pl,this.COLLECTION),wr("status","==","published"),wr("onCalendar","==",!0));return e.types&&e.types.length>0&&(r=Ki(r,wr("type","in",e.types))),Gk(r,s=>{const i=[];s.forEach(o=>{const l=o.data();if(l.eventDate){const c=this.normalizeEventDate(l.eventDate);if(!c){Pe.warn("Could not normalize eventDate for event in subscription:",{id:o.id,title:l.title,eventDate:l.eventDate});return}if(!this.isDateInRange(c,e.startDate,e.endDate))return;const u={id:o.id,title:l.title,content:l.content,type:l.type,eventDate:c,allDay:l.allDay||!1,featured:l.featured||!1,tags:l.tags||[],authorName:l.authorName,authorEmail:l.authorEmail};if(l.eventEndDate&&(u.eventEndDate=l.eventEndDate),l.eventTime&&(u.eventTime=l.eventTime),l.eventEndTime&&(u.eventEndTime=l.eventEndTime),l.eventLocation&&(u.eventLocation=l.eventLocation),l.eventRecurrence&&(u.eventRecurrence=l.eventRecurrence),e.featured!==void 0&&u.featured!==e.featured||e.tags&&e.tags.length>0&&!e.tags.some(f=>u.tags.some(p=>p.toLowerCase().includes(f.toLowerCase()))))return;i.push(u)}}),i.sort((o,l)=>o.eventDate.localeCompare(l.eventDate)),n(i)})}catch(r){throw Pe.error("Failed to subscribe to calendar events",{error:r,filters:e}),r}}generateRecurringEvents(e,n,r){if(!e.eventRecurrence||e.eventRecurrence.type==="none")return[e];const s=[],i=e.eventRecurrence,o=Ku(e.eventDate);if(!o)return Pe.warn("Invalid event date for recurrence generation:",e.eventDate),[e];let l=new Date(Math.max(o.getTime(),n.getTime()));const c=i.endDate&&Ku(i.endDate)||r;for(;l<=r&&l<=c;){const u={id:`${e.id}_${l.toISOString().split("T")[0]??""}`,title:e.title,content:e.content,type:e.type,eventDate:l.toISOString().split("T")[0]??"",allDay:e.allDay,featured:e.featured,tags:e.tags,authorName:e.authorName,authorEmail:e.authorEmail};if(e.eventTime!==void 0&&(u.eventTime=e.eventTime),e.eventEndTime!==void 0&&(u.eventEndTime=e.eventEndTime),e.eventLocation!==void 0&&(u.eventLocation=e.eventLocation),e.eventRecurrence!==void 0&&(u.eventRecurrence=e.eventRecurrence),e.eventEndDate!==void 0){const h=Ku(e.eventEndDate);if(h){const f=h.getTime()-o.getTime(),p=new Date(l.getTime()+f);u.eventEndDate=p.toISOString().split("T")[0]??""}}switch(s.push(u),i.type){case"daily":l=new Date(l.getTime()+1440*60*1e3*(i.interval||1));break;case"weekly":l=new Date(l.getTime()+10080*60*1e3*(i.interval||1));break;case"monthly":{const h=new Date(l);h.setMonth(h.getMonth()+(i.interval||1)),l=h;break}case"yearly":{const h=new Date(l);h.setFullYear(h.getFullYear()+(i.interval||1)),l=h;break}}}return s}formatEventTime(e){return PN(e.eventDate,e.eventTime,e.eventEndTime,e.allDay)}getEventTypeIcon(e){switch(e){case"event":return"mdi-calendar-star";case"announcement":return"mdi-bullhorn";case"article":return"mdi-newspaper-variant";case"classified":return"mdi-tag";case"photo":return"mdi-camera";default:return"mdi-calendar"}}getEventTypeColor(e){switch(e){case"event":return"accent";case"announcement":return"positive";case"article":return"primary";case"classified":return"orange";case"photo":return"secondary";default:return"grey-6"}}async debugCalendarEvents(){try{Pe.debug(" DEBUG: Fetching ALL calendar events from Firebase...");const e=Ki(qu(pl,this.COLLECTION),wr("status","==","published"),wr("onCalendar","==",!0)),n=await Mg(e);Pe.debug(` DEBUG: Found ${n.docs.length} total calendar events`),n.forEach(r=>{const s=r.data();Pe.debug(" DEBUG: Calendar event found:",{id:r.id,title:s.title,eventDate:s.eventDate,status:s.status,onCalendar:s.onCalendar,submissionDate:s.submissionDate})})}catch(e){Pe.error(" DEBUG: Error fetching calendar events:",e)}}}const u_=new kN,xN=fc({__name:"App",setup(t){const e=tA();return hr(()=>{const n=window;n.debugDataFlow=e.debugDataFlow,n.testSyncWorkflow=e.testSyncWorkflow,n.loadNewsletters=e.loadNewsletters,n.uploadNewsletterToFirebase=e.uploadNewsletterToFirebase,n.downloadNewsletterFromFirebase=e.downloadNewsletterFromFirebase,n.syncNewsletterMetadata=e.syncNewsletterMetadata,n.inspectLocalStorage=function(){console.log(" LocalStorage inspection:"),console.log("Total items:",localStorage.length);for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);if(s){const i=localStorage.getItem(s);console.log(`${s}:`,i&&i.substring(0,100)+"...")}}},n.inspectDrafts=function(){console.log("=== NEWSLETTER DRAFTS INSPECTION ===");const r=localStorage.getItem("newsletter-drafts");if(r)try{const s=JSON.parse(r);return console.log(`Found ${s.length} drafts in localStorage:`),s.forEach((i,o)=>{const l=i;console.log(`Draft ${o+1}:`,{id:l.id,filename:l.filename,title:l.title,hasEnhancedData:!!(l.displayDate||l.month||l.wordCount),downloadUrl:l.downloadUrl?.toString().substring(0,50)+"..."})}),s}catch(s){console.error("Failed to parse newsletter-drafts:",s)}else console.log("No newsletter-drafts found in localStorage")},n.debugCalendarEvents=u_.debugCalendarEvents.bind(u_),console.log(" ENHANCED SYNC DEBUG FUNCTIONS AVAILABLE:"),console.log(" Data Analysis:"),console.log("  - debugDataFlow(): Show data source counts and file matching status"),console.log("  - inspectLocalStorage(): Show localStorage contents"),console.log("  - inspectDrafts(): Show draft data structure"),console.log("  - debugCalendarEvents(): Show all calendar events in Firebase"),console.log(""),console.log(" Data Management:"),console.log("  - loadNewsletters(): Reload all newsletter data"),console.log(""),console.log(" Sync Operations:"),console.log("  - testSyncWorkflow(filename): Test sync actions for a specific file"),console.log("  - uploadNewsletterToFirebase(filename): Upload local file to Firebase"),console.log("  - downloadNewsletterFromFirebase(filename): Download Firebase file locally"),console.log("  - syncNewsletterMetadata(filename, direction): Sync metadata (auto/upload/download)"),console.log(""),console.log(' Example: testSyncWorkflow("2015.summer-conashaugh-courier.pdf")')}),(n,r)=>{const s=XI("router-view");return Rl(),Cl(s)}}}),Vf=t=>t,FL=Vf,DN=Vf,NN=Vf;/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let SE;const Jc=t=>SE=t,AE=Symbol();function Zh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var So;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(So||(So={}));function ON(){const t=hy(!0),e=t.run(()=>Ce({}));let n=[],r=[];const s=Os({install(i){Jc(s),s._a=i,i.provide(AE,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const RE=()=>{};function h_(t,e,n,r=RE){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&dy()&&oI(s),s}function Gs(t,...e){t.slice().forEach(n=>{n(...e)})}const VN=t=>t(),d_=Symbol(),Gu=Symbol();function ed(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Zh(s)&&Zh(r)&&t.hasOwnProperty(n)&&!ot(r)&&!Fr(r)?t[n]=ed(s,r):t[n]=r}return t}const MN=Symbol();function LN(t){return!Zh(t)||!Object.prototype.hasOwnProperty.call(t,MN)}const{assign:Ir}=Object;function FN(t){return!!(ot(t)&&t.effect)}function UN(t,e,n,r){const{state:s,actions:i,getters:o}=e,l=n.state.value[t];let c;function u(){l||(n.state.value[t]=s?s():{});const h=PI(n.state.value[t]);return Ir(h,i,Object.keys(o||{}).reduce((f,p)=>(f[p]=Os(q(()=>{Jc(n);const w=n._s.get(t);return o[p].call(w,w)})),f),{}))}return c=CE(t,u,e,n,r,!0),c}function CE(t,e,n={},r,s,i){let o;const l=Ir({actions:{}},n),c={deep:!0};let u,h,f=[],p=[],w;const I=r.state.value[t];!i&&!I&&(r.state.value[t]={}),Ce({});let k;function P(b){let y;u=h=!1,typeof b=="function"?(b(r.state.value[t]),y={type:So.patchFunction,storeId:t,events:w}):(ed(r.state.value[t],b),y={type:So.patchObject,payload:b,storeId:t,events:w});const E=k=Symbol();Qt().then(()=>{k===E&&(u=!0)}),h=!0,Gs(f,y,r.state.value[t])}const F=i?function(){const{state:y}=n,E=y?y():{};this.$patch(v=>{Ir(v,E)})}:RE;function A(){o.stop(),f=[],p=[],r._s.delete(t)}const x=(b,y="")=>{if(d_ in b)return b[Gu]=y,b;const E=function(){Jc(r);const v=Array.from(arguments),g=[],_=[];function N(L){g.push(L)}function ee(L){_.push(L)}Gs(p,{args:v,name:E[Gu],store:B,after:N,onError:ee});let X;try{X=b.apply(this&&this.$id===t?this:B,v)}catch(L){throw Gs(_,L),L}return X instanceof Promise?X.then(L=>(Gs(g,L),L)).catch(L=>(Gs(_,L),Promise.reject(L))):(Gs(g,X),X)};return E[d_]=!0,E[Gu]=y,E},D={_p:r,$id:t,$onAction:h_.bind(null,p),$patch:P,$reset:F,$subscribe(b,y={}){const E=h_(f,b,y.detached,()=>v()),v=o.run(()=>We(()=>r.state.value[t],g=>{(y.flush==="sync"?h:u)&&b({storeId:t,type:So.direct,events:w},g)},Ir({},c,y)));return E},$dispose:A},B=Ns(D);r._s.set(t,B);const S=(r._a&&r._a.runWithContext||VN)(()=>r._e.run(()=>(o=hy()).run(()=>e({action:x}))));for(const b in S){const y=S[b];if(ot(y)&&!FN(y)||Fr(y))i||(I&&LN(y)&&(ot(y)?y.value=I[b]:ed(y,I[b])),r.state.value[t][b]=y);else if(typeof y=="function"){const E=x(y,b);S[b]=E,l.actions[b]=y}}return Ir(B,S),Ir(Ae(B),S),Object.defineProperty(B,"$state",{get:()=>r.state.value[t],set:b=>{P(y=>{Ir(y,b)})}}),r._p.forEach(b=>{Ir(B,o.run(()=>b({store:B,app:r._a,pinia:r,options:l})))}),I&&i&&n.hydrate&&n.hydrate(B.$state,I),u=!0,h=!0,B}/*! #__NO_SIDE_EFFECTS__ */function UL(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,l){const c=o0();return o=o||(c?Jt(AE,null):null),o&&Jc(o),o=SE,o._s.has(t)||(s?CE(t,e,r,o):UN(t,r,o)),o._s.get(t)}return i.$id=t,i}const Qu=NN(()=>ON());/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ri=typeof document<"u";function PE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function $N(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&PE(t.default)}const Ue=Object.assign;function Yu(t,e){const n={};for(const r in e){const s=e[r];n[r]=An(s)?s.map(t):t(s)}return n}const Ao=()=>{},An=Array.isArray,kE=/#/g,qN=/&/g,BN=/\//g,jN=/=/g,zN=/\?/g,xE=/\+/g,HN=/%5B/g,WN=/%5D/g,DE=/%5E/g,KN=/%60/g,NE=/%7B/g,GN=/%7C/g,OE=/%7D/g,QN=/%20/g;function Mf(t){return encodeURI(""+t).replace(GN,"|").replace(HN,"[").replace(WN,"]")}function YN(t){return Mf(t).replace(NE,"{").replace(OE,"}").replace(DE,"^")}function td(t){return Mf(t).replace(xE,"%2B").replace(QN,"+").replace(kE,"%23").replace(qN,"%26").replace(KN,"`").replace(NE,"{").replace(OE,"}").replace(DE,"^")}function XN(t){return td(t).replace(jN,"%3D")}function JN(t){return Mf(t).replace(kE,"%23").replace(zN,"%3F")}function ZN(t){return t==null?"":JN(t).replace(BN,"%2F")}function Ko(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const eO=/\/$/,tO=t=>t.replace(eO,"");function Xu(t,e,n="/"){let r,s={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),s=t(i)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=iO(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Ko(o)}}function nO(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function f_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function rO(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&wi(e.matched[r],n.matched[s])&&VE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function wi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function VE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!sO(t[n],e[n]))return!1;return!0}function sO(t,e){return An(t)?p_(t,e):An(e)?p_(e,t):t===e}function p_(t,e){return An(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function iO(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Er={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Go;(function(t){t.pop="pop",t.push="push"})(Go||(Go={}));var Ro;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ro||(Ro={}));function oO(t){if(!t)if(ri){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),tO(t)}const aO=/^[^#]+#/;function lO(t,e){return t.replace(aO,"#")+e}function cO(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Zc=()=>({left:window.scrollX,top:window.scrollY});function uO(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=cO(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function m_(t,e){return(history.state?history.state.position-e:-1)+t}const nd=new Map;function hO(t,e){nd.set(t,e)}function dO(t){const e=nd.get(t);return nd.delete(t),e}let fO=()=>location.protocol+"//"+location.host;function ME(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let l=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),f_(c,"")}return f_(n,t)+r+s}function pO(t,e,n,r){let s=[],i=[],o=null;const l=({state:p})=>{const w=ME(t,location),I=n.value,k=e.value;let P=0;if(p){if(n.value=w,e.value=p,o&&o===I){o=null;return}P=k?p.position-k.position:0}else r(w);s.forEach(F=>{F(n.value,I,{delta:P,type:Go.pop,direction:P?P>0?Ro.forward:Ro.back:Ro.unknown})})};function c(){o=n.value}function u(p){s.push(p);const w=()=>{const I=s.indexOf(p);I>-1&&s.splice(I,1)};return i.push(w),w}function h(){const{history:p}=window;p.state&&p.replaceState(Ue({},p.state,{scroll:Zc()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function g_(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Zc():null}}function mO(t){const{history:e,location:n}=window,r={value:ME(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:fO()+t+c;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(w){console.error(w),n[h?"replace":"assign"](p)}}function o(c,u){const h=Ue({},e.state,g_(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,h,!0),r.value=c}function l(c,u){const h=Ue({},s.value,e.state,{forward:c,scroll:Zc()});i(h.current,h,!0);const f=Ue({},g_(r.value,c,null),{position:h.position+1},u);i(c,f,!1),r.value=c}return{location:r,state:s,push:l,replace:o}}function gO(t){t=oO(t);const e=mO(t),n=pO(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ue({location:"",base:t,go:r,createHref:lO.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function _O(t){return typeof t=="string"||t&&typeof t=="object"}function LE(t){return typeof t=="string"||typeof t=="symbol"}const FE=Symbol("");var __;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(__||(__={}));function bi(t,e){return Ue(new Error,{type:t,[FE]:!0},e)}function Hn(t,e){return t instanceof Error&&FE in t&&(e==null||!!(t.type&e))}const y_="[^/]+?",yO={sensitive:!1,strict:!1,start:!0,end:!0},vO=/[.+*?^${}()[\]/\\]/g;function wO(t,e){const n=Ue({},yO,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const p=u[f];let w=40+(n.sensitive?.25:0);if(p.type===0)f||(s+="/"),s+=p.value.replace(vO,"\\$&"),w+=40;else if(p.type===1){const{value:I,repeatable:k,optional:P,regexp:F}=p;i.push({name:I,repeatable:k,optional:P});const A=F||y_;if(A!==y_){w+=10;try{new RegExp(`(${A})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${I}" (${A}): `+D.message)}}let x=k?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;f||(x=P&&u.length<2?`(?:/${x})`:"/"+x),P&&(x+="?"),s+=x,w+=20,P&&(w+=-8),k&&(w+=-20),A===".*"&&(w+=-50)}h.push(w)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function l(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const w=h[p]||"",I=i[p-1];f[I.name]=w&&I.repeatable?w.split("/"):w}return f}function c(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const w of p)if(w.type===0)h+=w.value;else if(w.type===1){const{value:I,repeatable:k,optional:P}=w,F=I in u?u[I]:"";if(An(F)&&!k)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const A=An(F)?F.join("/"):F;if(!A)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${I}"`);h+=A}}return h||"/"}return{re:o,score:r,keys:i,parse:l,stringify:c}}function bO(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function UE(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=bO(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(v_(r))return 1;if(v_(s))return-1}return s.length-r.length}function v_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const EO={type:0,value:""},TO=/[a-zA-Z0-9_]/;function IO(t){if(!t)return[[]];if(t==="/")return[[EO]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${n})/"${u}": ${w}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let l=0,c,u="",h="";function f(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:c==="("?n=2:TO.test(c)?p():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}function SO(t,e,n){const r=wO(IO(t.path),n),s=Ue(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function AO(t,e){const n=[],r=new Map;e=T_({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function i(f,p,w){const I=!w,k=b_(f);k.aliasOf=w&&w.record;const P=T_(e,f),F=[k];if("alias"in f){const D=typeof f.alias=="string"?[f.alias]:f.alias;for(const B of D)F.push(b_(Ue({},k,{components:w?w.record.components:k.components,path:B,aliasOf:w?w.record:k})))}let A,x;for(const D of F){const{path:B}=D;if(p&&B[0]!=="/"){const H=p.record.path,S=H[H.length-1]==="/"?"":"/";D.path=p.record.path+(B&&S+B)}if(A=SO(D,p,P),w?w.alias.push(A):(x=x||A,x!==A&&x.alias.push(A),I&&f.name&&!E_(A)&&o(f.name)),$E(A)&&c(A),k.children){const H=k.children;for(let S=0;S<H.length;S++)i(H[S],A,w&&w.children[S])}w=w||A}return x?()=>{o(x)}:Ao}function o(f){if(LE(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return n}function c(f){const p=PO(f,n);n.splice(p,0,f),f.record.name&&!E_(f)&&r.set(f.record.name,f)}function u(f,p){let w,I={},k,P;if("name"in f&&f.name){if(w=r.get(f.name),!w)throw bi(1,{location:f});P=w.record.name,I=Ue(w_(p.params,w.keys.filter(x=>!x.optional).concat(w.parent?w.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&w_(f.params,w.keys.map(x=>x.name))),k=w.stringify(I)}else if(f.path!=null)k=f.path,w=n.find(x=>x.re.test(k)),w&&(I=w.parse(k),P=w.record.name);else{if(w=p.name?r.get(p.name):n.find(x=>x.re.test(p.path)),!w)throw bi(1,{location:f,currentLocation:p});P=w.record.name,I=Ue({},p.params,f.params),k=w.stringify(I)}const F=[];let A=w;for(;A;)F.unshift(A.record),A=A.parent;return{name:P,path:k,params:I,matched:F,meta:CO(F)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:s}}function w_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function b_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:RO(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function RO(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function E_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function CO(t){return t.reduce((e,n)=>Ue(e,n.meta),{})}function T_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function PO(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;UE(t,e[i])<0?r=i:n=i+1}const s=kO(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function kO(t){let e=t;for(;e=e.parent;)if($E(e)&&UE(t,e)===0)return e}function $E({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function xO(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(xE," "),o=i.indexOf("="),l=Ko(o<0?i:i.slice(0,o)),c=o<0?null:Ko(i.slice(o+1));if(l in e){let u=e[l];An(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function I_(t){let e="";for(let n in t){const r=t[n];if(n=XN(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(An(r)?r.map(i=>i&&td(i)):[r&&td(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function DO(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=An(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const NO=Symbol(""),S_=Symbol(""),eu=Symbol(""),Lf=Symbol(""),rd=Symbol("");function Yi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Pr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const u=p=>{p===!1?c(bi(4,{from:n,to:e})):p instanceof Error?c(p):_O(p)?c(bi(2,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),l())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function Ju(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(PE(c)){const h=(c.__vccOpts||c)[e];h&&i.push(Pr(h,n,r,o,l,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=$N(h)?h.default:h;o.mods[l]=h,o.components[l]=f;const w=(f.__vccOpts||f)[e];return w&&Pr(w,n,r,o,l,s)()}))}}return i}function A_(t){const e=Jt(eu),n=Jt(Lf),r=q(()=>{const c=ws(t.to);return e.resolve(c)}),s=q(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(wi.bind(null,h));if(p>-1)return p;const w=R_(c[u-2]);return u>1&&R_(h)===w&&f[f.length-1].path!==w?f.findIndex(wi.bind(null,c[u-2])):p}),i=q(()=>s.value>-1&&FO(n.params,r.value.params)),o=q(()=>s.value>-1&&s.value===n.matched.length-1&&VE(n.params,r.value.params));function l(c={}){if(LO(c)){const u=e[ws(t.replace)?"replace":"push"](ws(t.to)).catch(Ao);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:q(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}function OO(t){return t.length===1?t[0]:t}const VO=fc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:A_,setup(t,{slots:e}){const n=Ns(A_(t)),{options:r}=Jt(eu),s=q(()=>({[C_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[C_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&OO(e.default(n));return t.custom?i:W("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),MO=VO;function LO(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function FO(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!An(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function R_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const C_=(t,e,n)=>t??e??n,UO=fc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Jt(rd),s=q(()=>t.route||r.value),i=Jt(S_,0),o=q(()=>{let u=ws(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),l=q(()=>s.value.matched[o.value]);el(S_,q(()=>o.value+1)),el(NO,l),el(rd,s);const c=Ce();return We(()=>[c.value,l.value,t.name],([u,h,f],[p,w,I])=>{h&&(h.instances[f]=u,w&&w!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=w.leaveGuards),h.updateGuards.size||(h.updateGuards=w.updateGuards))),u&&h&&(!w||!wi(h,w)||!p)&&(h.enterCallbacks[f]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,f=l.value,p=f&&f.components[h];if(!p)return P_(n.default,{Component:p,route:u});const w=f.props[h],I=w?w===!0?u.params:typeof w=="function"?w(u):w:null,P=W(p,Ue({},I,e,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return P_(n.default,{Component:P,route:u})||P}}});function P_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const $O=UO;function qO(t){const e=AO(t.routes,t),n=t.parseQuery||xO,r=t.stringifyQuery||I_,s=t.history,i=Yi(),o=Yi(),l=Yi(),c=AI(Er);let u=Er;ri&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Yu.bind(null,$=>""+$),f=Yu.bind(null,ZN),p=Yu.bind(null,Ko);function w($,oe){let se,fe;return LE($)?(se=e.getRecordMatcher($),fe=oe):fe=$,e.addRoute(fe,se)}function I($){const oe=e.getRecordMatcher($);oe&&e.removeRoute(oe)}function k(){return e.getRoutes().map($=>$.record)}function P($){return!!e.getRecordMatcher($)}function F($,oe){if(oe=Ue({},oe||c.value),typeof $=="string"){const O=Xu(n,$,oe.path),G=e.resolve({path:O.path},oe),J=s.createHref(O.fullPath);return Ue(O,G,{params:p(G.params),hash:Ko(O.hash),redirectedFrom:void 0,href:J})}let se;if($.path!=null)se=Ue({},$,{path:Xu(n,$.path,oe.path).path});else{const O=Ue({},$.params);for(const G in O)O[G]==null&&delete O[G];se=Ue({},$,{params:f(O)}),oe.params=f(oe.params)}const fe=e.resolve(se,oe),Le=$.hash||"";fe.params=h(p(fe.params));const R=nO(r,Ue({},$,{hash:YN(Le),path:fe.path})),C=s.createHref(R);return Ue({fullPath:R,hash:Le,query:r===I_?DO($.query):$.query||{}},fe,{redirectedFrom:void 0,href:C})}function A($){return typeof $=="string"?Xu(n,$,c.value.path):Ue({},$)}function x($,oe){if(u!==$)return bi(8,{from:oe,to:$})}function D($){return S($)}function B($){return D(Ue(A($),{replace:!0}))}function H($){const oe=$.matched[$.matched.length-1];if(oe&&oe.redirect){const{redirect:se}=oe;let fe=typeof se=="function"?se($):se;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=A(fe):{path:fe},fe.params={}),Ue({query:$.query,hash:$.hash,params:fe.path!=null?{}:$.params},fe)}}function S($,oe){const se=u=F($),fe=c.value,Le=$.state,R=$.force,C=$.replace===!0,O=H(se);if(O)return S(Ue(A(O),{state:typeof O=="object"?Ue({},Le,O.state):Le,force:R,replace:C}),oe||se);const G=se;G.redirectedFrom=oe;let J;return!R&&rO(r,fe,se)&&(J=bi(16,{to:G,from:fe}),ie(fe,fe,!0,!1)),(J?Promise.resolve(J):E(G,fe)).catch(Q=>Hn(Q)?Hn(Q,2)?Q:ce(Q):M(Q,G,fe)).then(Q=>{if(Q){if(Hn(Q,2))return S(Ue({replace:C},A(Q.to),{state:typeof Q.to=="object"?Ue({},Le,Q.to.state):Le,force:R}),oe||G)}else Q=g(G,fe,!0,C,Le);return v(G,fe,Q),Q})}function b($,oe){const se=x($,oe);return se?Promise.reject(se):Promise.resolve()}function y($){const oe=Me.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext($):$()}function E($,oe){let se;const[fe,Le,R]=BO($,oe);se=Ju(fe.reverse(),"beforeRouteLeave",$,oe);for(const O of fe)O.leaveGuards.forEach(G=>{se.push(Pr(G,$,oe))});const C=b.bind(null,$,oe);return se.push(C),he(se).then(()=>{se=[];for(const O of i.list())se.push(Pr(O,$,oe));return se.push(C),he(se)}).then(()=>{se=Ju(Le,"beforeRouteUpdate",$,oe);for(const O of Le)O.updateGuards.forEach(G=>{se.push(Pr(G,$,oe))});return se.push(C),he(se)}).then(()=>{se=[];for(const O of R)if(O.beforeEnter)if(An(O.beforeEnter))for(const G of O.beforeEnter)se.push(Pr(G,$,oe));else se.push(Pr(O.beforeEnter,$,oe));return se.push(C),he(se)}).then(()=>($.matched.forEach(O=>O.enterCallbacks={}),se=Ju(R,"beforeRouteEnter",$,oe,y),se.push(C),he(se))).then(()=>{se=[];for(const O of o.list())se.push(Pr(O,$,oe));return se.push(C),he(se)}).catch(O=>Hn(O,8)?O:Promise.reject(O))}function v($,oe,se){l.list().forEach(fe=>y(()=>fe($,oe,se)))}function g($,oe,se,fe,Le){const R=x($,oe);if(R)return R;const C=oe===Er,O=ri?history.state:{};se&&(fe||C?s.replace($.fullPath,Ue({scroll:C&&O&&O.scroll},Le)):s.push($.fullPath,Le)),c.value=$,ie($,oe,se,C),ce()}let _;function N(){_||(_=s.listen(($,oe,se)=>{if(!Ne.listening)return;const fe=F($),Le=H(fe);if(Le){S(Ue(Le,{replace:!0,force:!0}),fe).catch(Ao);return}u=fe;const R=c.value;ri&&hO(m_(R.fullPath,se.delta),Zc()),E(fe,R).catch(C=>Hn(C,12)?C:Hn(C,2)?(S(Ue(A(C.to),{force:!0}),fe).then(O=>{Hn(O,20)&&!se.delta&&se.type===Go.pop&&s.go(-1,!1)}).catch(Ao),Promise.reject()):(se.delta&&s.go(-se.delta,!1),M(C,fe,R))).then(C=>{C=C||g(fe,R,!1),C&&(se.delta&&!Hn(C,8)?s.go(-se.delta,!1):se.type===Go.pop&&Hn(C,20)&&s.go(-1,!1)),v(fe,R,C)}).catch(Ao)}))}let ee=Yi(),X=Yi(),L;function M($,oe,se){ce($);const fe=X.list();return fe.length?fe.forEach(Le=>Le($,oe,se)):console.error($),Promise.reject($)}function z(){return L&&c.value!==Er?Promise.resolve():new Promise(($,oe)=>{ee.add([$,oe])})}function ce($){return L||(L=!$,N(),ee.list().forEach(([oe,se])=>$?se($):oe()),ee.reset()),$}function ie($,oe,se,fe){const{scrollBehavior:Le}=t;if(!ri||!Le)return Promise.resolve();const R=!se&&dO(m_($.fullPath,0))||(fe||!se)&&history.state&&history.state.scroll||null;return Qt().then(()=>Le($,oe,R)).then(C=>C&&uO(C)).catch(C=>M(C,$,oe))}const U=$=>s.go($);let pe;const Me=new Set,Ne={currentRoute:c,listening:!0,addRoute:w,removeRoute:I,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:F,options:t,push:D,replace:B,go:U,back:()=>U(-1),forward:()=>U(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:X.add,isReady:z,install($){const oe=this;$.component("RouterLink",MO),$.component("RouterView",$O),$.config.globalProperties.$router=oe,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>ws(c)}),ri&&!pe&&c.value===Er&&(pe=!0,D(s.location).catch(Le=>{}));const se={};for(const Le in Er)Object.defineProperty(se,Le,{get:()=>c.value[Le],enumerable:!0});$.provide(eu,oe),$.provide(Lf,Ry(se)),$.provide(rd,c);const fe=$.unmount;Me.add($),$.unmount=function(){Me.delete($),Me.size<1&&(u=Er,_&&_(),_=null,c.value=Er,pe=!1,L=!1),fe()}}};function he($){return $.reduce((oe,se)=>oe.then(()=>y(se)),Promise.resolve())}return Ne}function BO(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>wi(u,l))?r.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>wi(u,c))||s.push(c))}return[n,r,s]}function $L(){return Jt(eu)}function qL(t){return Jt(Lf)}const jO=[{path:"/",component:()=>Be(()=>import("./MainLayout-dxeguNRF.js"),__vite__mapDeps([3,4,5,6,7,8,2,1,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,0,29,30])),children:[{path:"",component:()=>Be(()=>import("./IndexPage-huJRwFu6.js"),__vite__mapDeps([31,11,12,4,32,8,7,2,1]))},{path:"/community",component:()=>Be(()=>import("./CommunityContentPage-DldCFNk5.js"),__vite__mapDeps([33,34,35,11,13,14,36,16,29,23,4,17,7,8,2,1,37,28,0,12,38,27,10,21,39]))},{path:"/calendar",component:()=>Be(()=>import("./CommunityCalendarPage-Dn3NxUjV.js"),__vite__mapDeps([40,11,34,35,13,14,29,41,42,43,23,38,4,17,12,10,44]))},{path:"/about",component:()=>Be(()=>import("./AboutContactPage-J4TK9Mzn.js"),__vite__mapDeps([45,11,12,34,35,13,14,46,4,7,8,2,1,22,20]))},{path:"/contact",redirect:"/about"},{path:"/map",component:()=>Be(()=>import("./MapRefactoredPage-DdqWbJ9P.js"),__vite__mapDeps([47,23,34,35,11,13,14,12,4,29,32,8,10,48]))},{path:"/archive",component:()=>Be(()=>import("./FirebaseNewsletterArchivePage-DTBuIRWN.js"),__vite__mapDeps([49,35,23,26,13,14,34,11,50,36,16,51,52,2,1,0,4,7,8,9,38,41,22,20,10,37,28,53]))},{path:"/archive/:id",component:()=>Be(()=>import("./FirebaseNewsletterDetailsPage-BcOukR9V.js"),__vite__mapDeps([54,51,52,2,1,0,9,38,35,4,7,8,10,55]))},{path:"/contribute",component:()=>Be(()=>import("./ContributePage-kbweuqQB.js"),__vite__mapDeps([56,50,35,11,12,4,7,8,2,1,27,10,57]))},{path:"/contribute/submit",component:()=>Be(()=>import("./SubmitContentPage-BbKX0lZE.js"),__vite__mapDeps([58,42,59,11,50,23,4,17,34,35,13,14,46,2,1,15,16,26,60,10,61,6,25,43,9,27,38,12,22,20,62]))},{path:"/contribute/guide",component:()=>Be(()=>import("./ContributeGuide-BgdA_Foi.js"),__vite__mapDeps([63,11,12,35,38,59,50,4,7,8,2,1,10,64]))},{path:"/dashboard",component:()=>Be(()=>import("./DashboardPage-BQl6IaA6.js"),__vite__mapDeps([65,11,12,4,28,1,2,0,10,66]))},{path:"/settings",component:()=>Be(()=>import("./SettingsPage-BH1J2oxs.js"),__vite__mapDeps([67,35,59,11,50,68,24,25,14,4,32,8,18,19,20,22,10,69]))},{path:"/account",redirect:"/settings"},{path:"/privacy",component:()=>Be(()=>import("./PrivacyPolicyPage-DSY2HtpF.js"),__vite__mapDeps([70,4,7,8,2,1,10,71]))},{path:"/terms",component:()=>Be(()=>import("./TermsOfServicePage-CRUY0d8L.js"),__vite__mapDeps([72,4,7,8,2,1,10,73]))},{path:"/accessibility",component:()=>Be(()=>import("./AccessibilityPage-D9NyAeAK.js"),__vite__mapDeps([74,4,7,8,2,1,10,75]))},{path:"/admin",component:()=>Be(()=>import("./AdminDashboardPage-RbXKWfcQ.js"),__vite__mapDeps([76,11,35,12,4,17,2,1,23,59,50,27,21,10,77]))},{path:"/admin/dashboard",redirect:"/admin"},{path:"/admin/content",component:()=>Be(()=>import("./ContentManagementPage-vrUdexXl.js"),__vite__mapDeps([78,23,61,6,34,35,11,13,14,25,43,38,12,4,17,37,28,1,2,0,79,60,26,27,10,21,22,20,80]))},{path:"/admin/newsletters",component:()=>Be(()=>import("./NewsletterManagementPage-fNq4IhaX.js"),__vite__mapDeps([81,4,37,28,1,2,0,52,34,35,11,13,14,26,61,6,25,43,50,23,16,79,12,60,38,10,17,29,42,59,82]))},{path:"/admin/theme",component:()=>Be(()=>import("./ThemeEditorPage-CsK2xI3t.js"),__vite__mapDeps([83,35,61,6,34,11,13,14,25,43,59,50,38,4,27,21,23,26,24,68,10,5,84]))}]},{path:"/:catchAll(.*)*",component:()=>Be(()=>import("./ErrorNotFound-DrsNcdVK.js"),[])}],Zu=DN(function(){return qO({scrollBehavior:()=>({left:0,top:0}),routes:jO,history:gO("/clca-courier/")})});async function zO(t,e){const n=t(xN);n.use(WS,e);const r=typeof Qu=="function"?await Qu({}):Qu;n.use(r);const s=Os(typeof Zu=="function"?await Zu({store:r}):Zu);return r.use(({store:i})=>{i.router=s}),{app:n,store:r,router:s}}const HO={name:"mdi-v7",type:{positive:"mdi-check-circle",negative:"mdi-alert",info:"mdi-information",warning:"mdi-exclamation"},arrow:{up:"mdi-arrow-up",right:"mdi-arrow-right",down:"mdi-arrow-down",left:"mdi-arrow-left",dropdown:"mdi-menu-down"},chevron:{left:"mdi-chevron-left",right:"mdi-chevron-right"},colorPicker:{spectrum:"mdi-gradient-vertical",tune:"mdi-tune",palette:"mdi-palette-swatch"},pullToRefresh:{icon:"mdi-refresh"},carousel:{left:"mdi-chevron-left",right:"mdi-chevron-right",up:"mdi-chevron-up",down:"mdi-chevron-down",navigationIcon:"mdi-circle"},chip:{remove:"mdi-close-circle",selected:"mdi-check"},datetime:{arrowLeft:"mdi-chevron-left",arrowRight:"mdi-chevron-right",now:"mdi-clock-outline",today:"mdi-calendar-today"},editor:{bold:"mdi-format-bold",italic:"mdi-format-italic",strikethrough:"mdi-format-strikethrough-variant",underline:"mdi-format-underline",unorderedList:"mdi-format-list-bulleted",orderedList:"mdi-format-list-numbered",subscript:"mdi-format-subscript",superscript:"mdi-format-superscript",hyperlink:"mdi-link",toggleFullscreen:"mdi-fullscreen",quote:"mdi-format-quote-close",left:"mdi-format-align-left",center:"mdi-format-align-center",right:"mdi-format-align-right",justify:"mdi-format-align-justify",print:"mdi-printer",outdent:"mdi-format-indent-decrease",indent:"mdi-format-indent-increase",removeFormat:"mdi-format-clear",formatting:"mdi-format-color-text",fontSize:"mdi-format-size",align:"mdi-format-align-left",hr:"mdi-minus",undo:"mdi-undo",redo:"mdi-redo",heading:"mdi-format-size",heading1:"mdi-format-header-1",heading2:"mdi-format-header-2",heading3:"mdi-format-header-3",heading4:"mdi-format-header-4",heading5:"mdi-format-header-5",heading6:"mdi-format-header-6",code:"mdi-code-tags",size:"mdi-format-size",size1:"mdi-numeric-1-box",size2:"mdi-numeric-2-box",size3:"mdi-numeric-3-box",size4:"mdi-numeric-4-box",size5:"mdi-numeric-5-box",size6:"mdi-numeric-6-box",size7:"mdi-numeric-7-box",font:"mdi-format-font",viewSource:"mdi-code-tags"},expansionItem:{icon:"mdi-chevron-down",denseIcon:"mdi-menu-down"},fab:{icon:"mdi-plus",activeIcon:"mdi-close"},field:{clear:"mdi-close-circle",error:"mdi-alert-circle"},pagination:{first:"mdi-chevron-double-left",prev:"mdi-chevron-left",next:"mdi-chevron-right",last:"mdi-chevron-double-right"},rating:{icon:"mdi-star"},stepper:{done:"mdi-check",active:"mdi-pencil",error:"mdi-alert"},tabs:{left:"mdi-chevron-left",right:"mdi-chevron-right",up:"mdi-chevron-up",down:"mdi-chevron-down"},table:{arrowUp:"mdi-arrow-up",warning:"mdi-alert",firstPage:"mdi-chevron-double-left",prevPage:"mdi-chevron-left",nextPage:"mdi-chevron-right",lastPage:"mdi-chevron-double-right"},tree:{icon:"mdi-play"},uploader:{done:"mdi-check",clear:"mdi-close",add:"mdi-plus-box",upload:"mdi-cloud-upload",removeQueue:"mdi-notification-clear-all",removeUploaded:"mdi-check-all"}};function WO(t,e,n){let r;function s(){r!==void 0&&(Ih.remove(r),r=void 0)}return mn(()=>{t.value===!0&&s()}),{removeFromHistory:s,addToHistory(){r={condition:()=>n.value===!0,handler:e},Ih.add(r)}}}function ml(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function qE(t,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(n=>{qE(t,n)}):t.add(e)}function BL(t){const e=new Set;return t.forEach(n=>{qE(e,n)}),Array.from(e)}function BE(t){return t.appContext.config.globalProperties.$router!==void 0}function jE(t){return t.isUnmounted===!0||t.isDeactivated===!0}function KO(){let t=null;const e=et();function n(){t!==null&&(clearTimeout(t),t=null)}return mc(n),mn(n),{removeTimeout:n,registerTimeout(r,s){n(),jE(e)===!1&&(t=setTimeout(()=>{t=null,r()},s))}}}function GO(){let t;const e=et();function n(){t=void 0}return mc(n),mn(n),{removeTick:n,registerTick(r){t=r,Qt(()=>{t===r&&(jE(e)===!1&&t(),t=void 0)})}}}const QO={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},YO=["beforeShow","show","beforeHide","hide"];function XO({showing:t,canShow:e,hideOnRouteChange:n,handleShow:r,handleHide:s,processOnMount:i}){const o=et(),{props:l,emit:c,proxy:u}=o;let h;function f(A){t.value===!0?I(A):p(A)}function p(A){if(l.disable===!0||A?.qAnchorHandled===!0||e!==void 0&&e(A)!==!0)return;const x=l["onUpdate:modelValue"]!==void 0;x===!0&&(c("update:modelValue",!0),h=A,Qt(()=>{h===A&&(h=void 0)})),(l.modelValue===null||x===!1)&&w(A)}function w(A){t.value!==!0&&(t.value=!0,c("beforeShow",A),r!==void 0?r(A):c("show",A))}function I(A){if(l.disable===!0)return;const x=l["onUpdate:modelValue"]!==void 0;x===!0&&(c("update:modelValue",!1),h=A,Qt(()=>{h===A&&(h=void 0)})),(l.modelValue===null||x===!1)&&k(A)}function k(A){t.value!==!1&&(t.value=!1,c("beforeHide",A),s!==void 0?s(A):c("hide",A))}function P(A){l.disable===!0&&A===!0?l["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!1):A===!0!==t.value&&(A===!0?w:k)(h)}We(()=>l.modelValue,P),n!==void 0&&BE(o)===!0&&We(()=>u.$route.fullPath,()=>{n.value===!0&&t.value===!0&&I()}),i===!0&&hr(()=>{P(l.modelValue)});const F={show:p,hide:I,toggle:f};return Object.assign(u,F),F}const JO={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function ZO(t,e=()=>{},n=()=>{}){return{transitionProps:q(()=>{const r=`q-transition--${t.transitionShow||e()}`,s=`q-transition--${t.transitionHide||n()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:q(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}let _s=[],Qo=[];function zE(t){Qo=Qo.filter(e=>e!==t)}function eV(t){zE(t),Qo.push(t)}function k_(t){zE(t),Qo.length===0&&_s.length!==0&&(_s[_s.length-1](),_s=[])}function Ff(t){Qo.length===0?t():_s.push(t)}function tV(t){_s=_s.filter(e=>e!==t)}let nV=1,rV=document.body;function Uf(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${nV++}`:t,Vl.globalNodes!==void 0){const r=Vl.globalNodes.class;r!==void 0&&(n.className=r)}return rV.appendChild(n),n}function HE(t){t.remove()}const gl=[];function jL(t){return gl.find(e=>e.contentEl!==null&&e.contentEl.contains(t))}function sV(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return ml(t)}else if(t.__qPortal===!0){const n=ml(t);return n?.$options.name==="QPopupProxy"?(t.hide(e),n):t}t=ml(t)}while(t!=null)}function zL(t,e,n){for(;n!==0&&t!==void 0&&t!==null;){if(t.__qPortal===!0){if(n--,t.$options.name==="QMenu"){t=sV(t,e);continue}t.hide(e)}t=ml(t)}}const iV=Ct({name:"QPortal",setup(t,{slots:e}){return()=>e.default()}});function oV(t){for(t=t.parent;t!=null;){if(t.type.name==="QGlobalDialog")return!0;if(t.type.name==="QDialog"||t.type.name==="QMenu")return!1;t=t.parent}return!1}function aV(t,e,n,r){const s=Ce(!1),i=Ce(!1);let o=null;const l={},c=r==="dialog"&&oV(t);function u(f){if(f===!0){k_(l),i.value=!0;return}i.value=!1,s.value===!1&&(c===!1&&o===null&&(o=Uf(!1,r)),s.value=!0,gl.push(t.proxy),eV(l))}function h(f){if(i.value=!1,f!==!0)return;k_(l),s.value=!1;const p=gl.indexOf(t.proxy);p!==-1&&gl.splice(p,1),o!==null&&(HE(o),o=null)}return Sd(()=>{h(!0)}),t.proxy.__qPortal=!0,Vs(t.proxy,"contentEl",()=>e.value),{showPortal:u,hidePortal:h,portalIsActive:s,portalIsAccessible:i,renderPortal:()=>c===!0?n():s.value===!0?[W(qI,{to:o},W(iV,n))]:void 0}}function sd(t,e){const n=t.style;for(const r in e)n[r]=e[r]}function lV(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=ws(t);if(e)return e.$el||e}function cV(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}const HL=[Element,String],uV=[null,document,document.body,document.scrollingElement,document.documentElement];function WL(t,e){let n=lV(e);if(n===void 0){if(t==null)return window;n=t.closest(".scroll,.scroll-y,.overflow-auto")}return uV.includes(n)?window:n}function WE(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function KE(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function GE(t,e,n=0){const r=arguments[3]===void 0?performance.now():arguments[3],s=WE(t);if(n<=0){s!==e&&id(t,e);return}requestAnimationFrame(i=>{const o=i-r,l=s+(e-s)/Math.max(o,n)*o;id(t,l),l!==e&&GE(t,e,n-o,i)})}function QE(t,e,n=0){const r=arguments[3]===void 0?performance.now():arguments[3],s=KE(t);if(n<=0){s!==e&&od(t,e);return}requestAnimationFrame(i=>{const o=i-r,l=s+(e-s)/Math.max(o,n)*o;od(t,l),l!==e&&QE(t,e,n-o,i)})}function id(t,e){if(t===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e);return}t.scrollTop=e}function od(t,e){if(t===window){window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}t.scrollLeft=e}function KL(t,e,n){if(n){GE(t,e,n);return}id(t,e)}function GL(t,e,n){if(n){QE(t,e,n);return}od(t,e)}let Ka;function QL(){if(Ka!==void 0)return Ka;const t=document.createElement("p"),e=document.createElement("div");sd(t,{width:"100%",height:"200px"}),sd(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return n===r&&(r=e.clientWidth),e.remove(),Ka=n-r,Ka}function hV(t,e=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}let Xi=0,eh,th,ao,nh=!1,x_,D_,N_,ds=null;function dV(t){fV(t)&&cn(t)}function fV(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=CS(t),n=t.shiftKey&&!t.deltaX,r=!n&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),s=n||r?t.deltaY:t.deltaX;for(let i=0;i<e.length;i++){const o=e[i];if(hV(o,r))return r?s<0&&o.scrollTop===0?!0:s>0&&o.scrollTop+o.clientHeight===o.scrollHeight:s<0&&o.scrollLeft===0?!0:s>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function O_(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ga(t){nh!==!0&&(nh=!0,requestAnimationFrame(()=>{nh=!1;const{height:e}=t.target,{clientHeight:n,scrollTop:r}=document.scrollingElement;(ao===void 0||e!==window.innerHeight)&&(ao=n-e,document.scrollingElement.scrollTop=r),r>ao&&(document.scrollingElement.scrollTop-=Math.ceil((r-ao)/8))}))}function V_(t){const e=document.body,n=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:s}=window.getComputedStyle(e);eh=KE(window),th=WE(window),x_=e.style.left,D_=e.style.top,N_=window.location.href,e.style.left=`-${eh}px`,e.style.top=`-${th}px`,s!=="hidden"&&(s==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,dt.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ga,Kt.passiveCapture),window.visualViewport.addEventListener("scroll",Ga,Kt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",O_,Kt.passiveCapture))}dt.is.desktop===!0&&dt.is.mac===!0&&window[`${t}EventListener`]("wheel",dV,Kt.notPassive),t==="remove"&&(dt.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Ga,Kt.passiveCapture),window.visualViewport.removeEventListener("scroll",Ga,Kt.passiveCapture)):window.removeEventListener("scroll",O_,Kt.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=x_,e.style.top=D_,window.location.href===N_&&window.scrollTo(eh,th),ao=void 0)}function pV(t){let e="add";if(t===!0){if(Xi++,ds!==null){clearTimeout(ds),ds=null;return}if(Xi>1)return}else{if(Xi===0||(Xi--,Xi>0))return;if(e="remove",dt.is.ios===!0&&dt.is.nativeMobile===!0){ds!==null&&clearTimeout(ds),ds=setTimeout(()=>{V_(e),ds=null},100);return}}V_(e)}function mV(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,pV(e))}}}function bn(t,e){return t!==void 0&&t()||e}function YL(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function ys(t,e){return t!==void 0?e.concat(t()):e}function gV(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function XL(t,e,n,r,s,i){e.key=r+s;const o=W(t,e,n);return s===!0?My(o,i()):o}const As=[];let Ei;function _V(t){Ei=t.keyCode===27}function yV(){Ei===!0&&(Ei=!1)}function vV(t){Ei===!0&&(Ei=!1,Mo(t,27)===!0&&As[As.length-1](t))}function YE(t){window[t]("keydown",_V),window[t]("blur",yV),window[t]("keyup",vV),Ei=!1}function wV(t){dt.is.desktop===!0&&(As.push(t),As.length===1&&YE("addEventListener"))}function M_(t){const e=As.indexOf(t);e!==-1&&(As.splice(e,1),As.length===0&&YE("removeEventListener"))}const Rs=[];function XE(t){Rs[Rs.length-1](t)}function bV(t){dt.is.desktop===!0&&(Rs.push(t),Rs.length===1&&document.body.addEventListener("focusin",XE))}function L_(t){const e=Rs.indexOf(t);e!==-1&&(Rs.splice(e,1),Rs.length===0&&document.body.removeEventListener("focusin",XE))}let Qa=0;const EV={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},F_={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},TV=Ct({name:"QDialog",inheritAttrs:!1,props:{...QO,...JO,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:t=>["standard","top","bottom","left","right"].includes(t)}},emits:[...YO,"shake","click","escapeKey"],setup(t,{slots:e,emit:n,attrs:r}){const s=et(),i=Ce(null),o=Ce(!1),l=Ce(!1);let c=null,u=null,h,f;const p=q(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:w}=mV(),{registerTimeout:I}=KO(),{registerTick:k,removeTick:P}=GO(),{transitionProps:F,transitionStyle:A}=ZO(t,()=>F_[t.position][0],()=>F_[t.position][1]),x=q(()=>A.value+(t.backdropFilter!==void 0?`;backdrop-filter:${t.backdropFilter};-webkit-backdrop-filter:${t.backdropFilter}`:"")),{showPortal:D,hidePortal:B,portalIsAccessible:H,renderPortal:S}=aV(s,i,Ne,"dialog"),{hide:b}=XO({showing:o,hideOnRouteChange:p,handleShow:ee,handleHide:X,processOnMount:!0}),{addToHistory:y,removeFromHistory:E}=WO(o,b,p),v=q(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${EV[t.position]}`+(l.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),g=q(()=>o.value===!0&&t.seamless!==!0),_=q(()=>t.autoClose===!0?{onClick:U}:{}),N=q(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${g.value===!0?"modal":"seamless"}`,r.class]);We(()=>t.maximized,he=>{o.value===!0&&ie(he)}),We(g,he=>{w(he),he===!0?(bV(Me),wV(z)):(L_(Me),M_(z))});function ee(he){y(),u=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,ie(t.maximized),D(),l.value=!0,t.noFocus!==!0?(document.activeElement?.blur(),k(L)):P(),I(()=>{if(s.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:$,bottom:oe}=document.activeElement.getBoundingClientRect(),{innerHeight:se}=window,fe=window.visualViewport!==void 0?window.visualViewport.height:se;$>0&&oe>fe/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-fe,oe>=se?1/0:Math.ceil(document.scrollingElement.scrollTop+oe-fe/2))),document.activeElement.scrollIntoView()}f=!0,i.value.click(),f=!1}D(!0),l.value=!1,n("show",he)},t.transitionDuration)}function X(he){P(),E(),ce(!0),l.value=!0,B(),u!==null&&(((he?.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),I(()=>{B(!0),l.value=!1,n("hide",he)},t.transitionDuration)}function L(he){Ff(()=>{let $=i.value;if($!==null){if(he!==void 0){const oe=$.querySelector(he);if(oe!==null){oe.focus({preventScroll:!0});return}}$.contains(document.activeElement)!==!0&&($=$.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||$.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||$.querySelector("[autofocus], [data-autofocus]")||$,$.focus({preventScroll:!0}))}})}function M(he){he&&typeof he.focus=="function"?he.focus({preventScroll:!0}):L(),n("shake");const $=i.value;$!==null&&($.classList.remove("q-animate--scale"),$.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,i.value!==null&&($.classList.remove("q-animate--scale"),L())},170))}function z(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&M():(n("escapeKey"),b()))}function ce(he){c!==null&&(clearTimeout(c),c=null),(he===!0||o.value===!0)&&(ie(!1),t.seamless!==!0&&(w(!1),L_(Me),M_(z))),he!==!0&&(u=null)}function ie(he){he===!0?h!==!0&&(Qa<1&&document.body.classList.add("q-body--dialog"),Qa++,h=!0):h===!0&&(Qa<2&&document.body.classList.remove("q-body--dialog"),Qa--,h=!1)}function U(he){f!==!0&&(b(he),n("click",he))}function pe(he){t.persistent!==!0&&t.noBackdropDismiss!==!0?b(he):t.noShake!==!0&&M()}function Me(he){t.allowFocusOutside!==!0&&H.value===!0&&cV(i.value,he.target)!==!0&&L('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:L,shake:M,__updateRefocusTarget(he){u=he||null}}),mn(ce);function Ne(){return W("div",{role:"dialog","aria-modal":g.value===!0?"true":"false",...r,class:N.value},[W(kl,{name:"q-transition--fade",appear:!0},()=>g.value===!0?W("div",{class:"q-dialog__backdrop fixed-full",style:x.value,"aria-hidden":"true",tabindex:-1,onClick:pe}):null),W(kl,F.value,()=>o.value===!0?W("div",{ref:i,class:v.value,style:A.value,tabindex:-1,..._.value},bn(e.default)):null)])}return S}}),ad={xs:18,sm:24,md:32,lg:38,xl:46},pa={size:String};function ma(t,e=ad){return q(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}const U_="0 0 24 24",rh=t=>t,sh=t=>`ionicons ${t}`,JE={"mdi-":t=>`mdi ${t}`,"icon-":rh,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":sh,"ion-ios":sh,"ion-logo":sh,"iconfont ":rh,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":rh},ZE={o_:"-outlined",r_:"-round",s_:"-sharp"},eT={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},IV=new RegExp("^("+Object.keys(JE).join("|")+")"),SV=new RegExp("^("+Object.keys(ZE).join("|")+")"),$_=new RegExp("^("+Object.keys(eT).join("|")+")"),AV=/^[Mm]\s?[-+]?\.?\d/,RV=/^img:/,CV=/^svguse:/,PV=/^ion-/,kV=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,lr=Ct({name:"QIcon",props:{...pa,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=et(),r=ma(t),s=q(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=q(()=>{let o,l=t.name;if(l==="none"||!l)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(l);if(h!==void 0)if(h.icon!==void 0){if(l=h.icon,l==="none"||!l)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(AV.test(l)===!0){const[h,f=U_]=l.split("|");return{svg:!0,viewBox:f,nodes:h.split("&&").map(p=>{const[w,I,k]=p.split("@@");return W("path",{style:I,d:w,transform:k})})}}if(RV.test(l)===!0)return{img:!0,src:l.substring(4)};if(CV.test(l)===!0){const[h,f=U_]=l.split("|");return{svguse:!0,src:h.substring(7),viewBox:f}}let c=" ";const u=l.match(IV);if(u!==null)o=JE[u[1]](l);else if(kV.test(l)===!0)o=l;else if(PV.test(l)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${l.substring(3)}`;else if($_.test(l)===!0){o="notranslate material-symbols";const h=l.match($_);h!==null&&(l=l.substring(6),o+=eT[h[1]]),c=l}else{o="notranslate material-icons";const h=l.match(SV);h!==null&&(l=l.substring(2),o+=ZE[h[1]]),c=l}return{cls:o,content:c}});return()=>{const o={class:s.value,style:r.value,"aria-hidden":"true"};return i.value.none===!0?W(t.tag,o,bn(e.default)):i.value.img===!0?W(t.tag,o,ys(e.default,[W("img",{src:i.value.src})])):i.value.svg===!0?W(t.tag,o,ys(e.default,[W("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?W(t.tag,o,ys(e.default,[W("svg",{viewBox:i.value.viewBox},[W("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),W(t.tag,o,ys(e.default,[i.value.content])))}}}),xV={size:{type:[String,Number],default:"1em"},color:String};function DV(t){return{cSize:q(()=>t.size in ad?`${ad[t.size]}px`:t.size),classes:q(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const Yo=Ct({name:"QSpinner",props:{...xV,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=DV(t);return()=>W("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[W("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function NV(t,e=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),r=t.apply(this,arguments)),r}}function q_(t,e,n,r){n.modifiers.stop===!0&&Nl(t);const s=n.modifiers.color;let i=n.modifiers.center;i=i===!0||r===!0;const o=document.createElement("span"),l=document.createElement("span"),c=RS(t),{left:u,top:h,width:f,height:p}=e.getBoundingClientRect(),w=Math.sqrt(f*f+p*p),I=w/2,k=`${(f-w)/2}px`,P=i?k:`${c.left-u-I}px`,F=`${(p-w)/2}px`,A=i?F:`${c.top-h-I}px`;l.className="q-ripple__inner",sd(l,{height:`${w}px`,width:`${w}px`,transform:`translate3d(${P},${A},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${s?" text-"+s:""}`,o.setAttribute("dir","ltr"),o.appendChild(l),e.appendChild(o);const x=()=>{o.remove(),clearTimeout(D)};n.abort.push(x);let D=setTimeout(()=>{l.classList.add("q-ripple__inner--enter"),l.style.transform=`translate3d(${k},${F},0) scale3d(1,1,1)`,l.style.opacity=.2,D=setTimeout(()=>{l.classList.remove("q-ripple__inner--enter"),l.classList.add("q-ripple__inner--leave"),l.style.opacity=0,D=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(x),1)},275)},250)},50)}function B_(t,{modifiers:e,value:n,arg:r}){const s=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:s.early===!0,stop:s.stop===!0,center:s.center===!0,color:s.color||r,keyCodes:[].concat(s.keyCodes||13)}}const OV=AS({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(s){r.enabled===!0&&s.qSkipRipple!==!0&&s.type===(r.modifiers.early===!0?"pointerdown":"click")&&q_(s,t,r,s.qKeyEvent===!0)},keystart:NV(s=>{r.enabled===!0&&s.qSkipRipple!==!0&&Mo(s,r.modifiers.keyCodes)===!0&&s.type===`key${r.modifiers.early===!0?"down":"up"}`&&q_(s,t,r,!0)},300)};B_(r,e),t.__qripple=r,PS(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&B_(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),kS(e,"main"),delete t._qripple)}}),tT={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},VV=Object.keys(tT),nT={align:{type:String,validator:t=>VV.includes(t)}};function rT(t){return q(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${tT[e]}`})}function j_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function z_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function MV(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(Array.isArray(s)===!1||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function H_(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function LV(t,e){return Array.isArray(t)===!0?H_(t,e):Array.isArray(e)===!0?H_(e,t):t===e}function FV(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(LV(t[n],e[n])===!1)return!1;return!0}const sT={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},JL={...sT,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function UV({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=et(),{props:r,proxy:s,emit:i}=n,o=BE(n),l=q(()=>r.disable!==!0&&r.href!==void 0),c=q(e===!0?()=>o===!0&&r.disable!==!0&&l.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>o===!0&&l.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),u=q(()=>c.value===!0?A(r.to):null),h=q(()=>u.value!==null),f=q(()=>l.value===!0||h.value===!0),p=q(()=>r.type==="a"||f.value===!0?"a":r.tag||t||"div"),w=q(()=>l.value===!0?{href:r.href,target:r.target}:h.value===!0?{href:u.value.href,target:r.target}:{}),I=q(()=>{if(h.value===!1)return-1;const{matched:B}=u.value,{length:H}=B,S=B[H-1];if(S===void 0)return-1;const b=s.$route.matched;if(b.length===0)return-1;const y=b.findIndex(z_.bind(null,S));if(y!==-1)return y;const E=j_(B[H-2]);return H>1&&j_(S)===E&&b[b.length-1].path!==E?b.findIndex(z_.bind(null,B[H-2])):y}),k=q(()=>h.value===!0&&I.value!==-1&&MV(s.$route.params,u.value.params)),P=q(()=>k.value===!0&&I.value===s.$route.matched.length-1&&FV(s.$route.params,u.value.params)),F=q(()=>h.value===!0?P.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":k.value===!0?` ${r.activeClass}`:"":"");function A(B){try{return s.$router.resolve(B)}catch{}return null}function x(B,{returnRouterError:H,to:S=r.to,replace:b=r.replace}={}){if(r.disable===!0)return B.preventDefault(),Promise.resolve(!1);if(B.metaKey||B.altKey||B.ctrlKey||B.shiftKey||B.button!==void 0&&B.button!==0||r.target==="_blank")return Promise.resolve(!1);B.preventDefault();const y=s.$router[b===!0?"replace":"push"](S);return H===!0?y:y.then(()=>{}).catch(()=>{})}function D(B){if(h.value===!0){const H=S=>x(B,S);i("click",B,H),B.defaultPrevented!==!0&&H()}else i("click",B)}return{hasRouterLink:h,hasHrefLink:l,hasLink:f,linkTag:p,resolvedLink:u,linkIsActive:k,linkIsExactActive:P,linkClass:F,linkAttrs:w,getLink:A,navigateToRouterLink:x,navigateOnClick:D}}const W_={none:0,xs:4,sm:8,md:16,lg:24,xl:32},$V={xs:8,sm:10,md:14,lg:20,xl:24},qV=["button","submit","reset"],BV=/[^\s]\/[^\s]/,jV=["flat","outline","push","unelevated"];function iT(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}function ZL(t){const e=iT(t);return e!==void 0?{[e]:!0}:{}}const zV={...pa,...sT,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...jV.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...nT.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},HV={...zV,round:Boolean};function WV(t){const e=ma(t,$V),n=rT(t),{hasRouterLink:r,hasLink:s,linkTag:i,linkAttrs:o,navigateOnClick:l}=UV({fallbackTag:"button"}),c=q(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(F=>F in W_?W_[F]+"px":F).join(" "),minWidth:"0",minHeight:"0"}):P}),u=q(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=q(()=>t.disable!==!0&&t.loading!==!0),f=q(()=>h.value===!0?t.tabindex||0:-1),p=q(()=>iT(t,"standard")),w=q(()=>{const P={tabindex:f.value};return s.value===!0?Object.assign(P,o.value):qV.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),r.value!==!0&&BV.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),I=q(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const F=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${F}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=q(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:I,style:c,innerClasses:k,attributes:w,hasLink:s,linkTag:i,navigateOnClick:l,isActionable:h}}const{passiveCapture:an}=Kt;let Qs=null,Ys=null,Xs=null;const ld=Ct({name:"QBtn",props:{...HV,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:r}=et(),{classes:s,style:i,innerClasses:o,attributes:l,hasLink:c,linkTag:u,navigateOnClick:h,isActionable:f}=WV(t),p=Ce(null),w=Ce(null);let I=null,k,P=null;const F=q(()=>t.label!==void 0&&t.label!==null&&t.label!==""),A=q(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:c.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),x=q(()=>({center:t.round})),D=q(()=>{const N=Math.max(0,Math.min(100,t.percentage));return N>0?{transition:"transform 0.6s",transform:`translateX(${N-100}%)`}:{}}),B=q(()=>{if(t.loading===!0)return{onMousedown:_,onTouchstart:_,onClick:_,onKeydown:_,onKeyup:_};if(f.value===!0){const N={onClick:S,onKeydown:b,onMousedown:E};if(r.$q.platform.has.touch===!0){const ee=t.onTouchstart!==void 0?"":"Passive";N[`onTouchstart${ee}`]=y}return N}return{onClick:cn}}),H=q(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+s.value,style:i.value,...l.value,...B.value}));function S(N){if(p.value!==null){if(N!==void 0){if(N.defaultPrevented===!0)return;const ee=document.activeElement;if(t.type==="submit"&&ee!==document.body&&p.value.contains(ee)===!1&&ee.contains(p.value)===!1){N.qAvoidFocus!==!0&&p.value.focus();const X=()=>{document.removeEventListener("keydown",cn,!0),document.removeEventListener("keyup",X,an),p.value?.removeEventListener("blur",X,an)};document.addEventListener("keydown",cn,!0),document.addEventListener("keyup",X,an),p.value.addEventListener("blur",X,an)}}h(N)}}function b(N){p.value!==null&&(n("keydown",N),Mo(N,[13,32])===!0&&Ys!==p.value&&(Ys!==null&&g(),N.defaultPrevented!==!0&&(N.qAvoidFocus!==!0&&p.value.focus(),Ys=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",v,!0),p.value.addEventListener("blur",v,an)),cn(N)))}function y(N){p.value!==null&&(n("touchstart",N),N.defaultPrevented!==!0&&(Qs!==p.value&&(Qs!==null&&g(),Qs=p.value,I=N.target,I.addEventListener("touchcancel",v,an),I.addEventListener("touchend",v,an)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function E(N){p.value!==null&&(N.qSkipRipple=k===!0,n("mousedown",N),N.defaultPrevented!==!0&&Xs!==p.value&&(Xs!==null&&g(),Xs=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",v,an)))}function v(N){if(p.value!==null&&!(N?.type==="blur"&&document.activeElement===p.value)){if(N?.type==="keyup"){if(Ys===p.value&&Mo(N,[13,32])===!0){const ee=new MouseEvent("click",N);ee.qKeyEvent=!0,N.defaultPrevented===!0&&xr(ee),N.cancelBubble===!0&&Nl(ee),p.value.dispatchEvent(ee),cn(N),N.qKeyEvent=!0}n("keyup",N)}g()}}function g(N){const ee=w.value;N!==!0&&(Qs===p.value||Xs===p.value)&&ee!==null&&ee!==document.activeElement&&(ee.setAttribute("tabindex",-1),ee.focus()),Qs===p.value&&(I!==null&&(I.removeEventListener("touchcancel",v,an),I.removeEventListener("touchend",v,an)),Qs=I=null),Xs===p.value&&(document.removeEventListener("mouseup",v,an),Xs=null),Ys===p.value&&(document.removeEventListener("keyup",v,!0),p.value?.removeEventListener("blur",v,an),Ys=null),p.value?.classList.remove("q-btn--active")}function _(N){cn(N),N.qSkipRipple=!0}return mn(()=>{g(!0)}),Object.assign(r,{click:N=>{f.value===!0&&S(N)}}),()=>{let N=[];t.icon!==void 0&&N.push(W(lr,{name:t.icon,left:t.stack!==!0&&F.value===!0,role:"img"})),F.value===!0&&N.push(W("span",{class:"block"},[t.label])),N=ys(e.default,N),t.iconRight!==void 0&&t.round===!1&&N.push(W(lr,{name:t.iconRight,right:t.stack!==!0&&F.value===!0,role:"img"}));const ee=[W("span",{class:"q-focus-helper",ref:w})];return t.loading===!0&&t.percentage!==void 0&&ee.push(W("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[W("span",{class:"q-btn__progress-indicator fit block",style:D.value})])),ee.push(W("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},N)),t.loading!==null&&ee.push(W(kl,{name:"q-transition--fade"},()=>t.loading===!0?[W("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[W(Yo)])]:null)),My(W(u.value,H.value,ee),[[OV,A.value,void 0,x.value]])}}}),Us={dark:{type:Boolean,default:null}};function $s(t,e){return q(()=>t.dark===null?e.dark.isActive:t.dark)}const KV=Ct({name:"QCard",props:{...Us,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=et(),r=$s(t,n),s=q(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>W(t.tag,{class:s.value},bn(e.default))}}),Ji=Ct({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const n=q(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>W(t.tag,{class:n.value},bn(e.default))}}),GV=Ct({name:"QCardActions",props:{...nT,vertical:Boolean},setup(t,{slots:e}){const n=rT(t),r=q(()=>`q-card__actions ${n.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>W("div",{class:r.value},bn(e.default))}}),QV={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},ih={xs:2,sm:4,md:8,lg:16,xl:24},K_=Ct({name:"QSeparator",props:{...Us,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=et(),n=$s(t,e.proxy.$q),r=q(()=>t.vertical===!0?"vertical":"horizontal"),s=q(()=>` q-separator--${r.value}`),i=q(()=>t.inset!==!1?`${s.value}-${QV[t.inset]}`:""),o=q(()=>`q-separator${s.value}${i.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(n.value===!0?" q-separator--dark":"")),l=q(()=>{const c={};if(t.size!==void 0&&(c[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${ih.md}px`:t.spaced in ih?`${ih[t.spaced]}px`:t.spaced,h=t.vertical===!0?["Left","Right"]:["Top","Bottom"];c[`margin${h[0]}`]=c[`margin${h[1]}`]=u}return c});return()=>W("hr",{class:o.value,style:l.value,"aria-orientation":r.value})}});let oh,Ya=0;const wt=new Array(256);for(let t=0;t<256;t++)wt[t]=(t+256).toString(16).substring(1);const YV=(()=>{const t=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let r=e;r>0;r--)n.push(Math.floor(Math.random()*256));return n}})(),G_=4096;function cd(){(oh===void 0||Ya+16>G_)&&(Ya=0,oh=YV(G_));const t=Array.prototype.slice.call(oh,Ya,Ya+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,wt[t[0]]+wt[t[1]]+wt[t[2]]+wt[t[3]]+"-"+wt[t[4]]+wt[t[5]]+"-"+wt[t[6]]+wt[t[7]]+"-"+wt[t[8]]+wt[t[9]]+"-"+wt[t[10]]+wt[t[11]]+wt[t[12]]+wt[t[13]]+wt[t[14]]+wt[t[15]]}function XV(t){return t??null}function Q_(t,e){return t??(e===!0?`f_${cd()}`:null)}function JV({getValue:t,required:e=!0}={}){if(Wr.value===!0){const n=Ce(t!==void 0?XV(t()):null);return e===!0&&n.value===null&&hr(()=>{n.value=`f_${cd()}`}),t!==void 0&&We(t,r=>{n.value=Q_(r,e)}),n}return t!==void 0?q(()=>Q_(t(),e)):Ce(`f_${cd()}`)}const Y_=/^on[A-Z]/;function ZV(){const{attrs:t,vnode:e}=et(),n={listeners:Ce({}),attributes:Ce({})};function r(){const s={},i={};for(const o in t)o!=="class"&&o!=="style"&&Y_.test(o)===!1&&(s[o]=t[o]);for(const o in e.props)Y_.test(o)===!0&&(i[o]=e.props[o]);n.attributes.value=s,n.listeners.value=i}return Qy(r),r(),n}function eM({validate:t,resetValidation:e,requiresQForm:n}){const r=Jt(BS,!1);if(r!==!1){const{props:s,proxy:i}=et();Object.assign(i,{validate:t,resetValidation:e}),We(()=>s.disable,o=>{o===!0?(typeof e=="function"&&e(),r.unbindComponent(i)):r.bindComponent(i)}),hr(()=>{s.disable!==!0&&r.bindComponent(i)}),mn(()=>{s.disable!==!0&&r.unbindComponent(i)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const X_=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,J_=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Z_=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Xa=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Ja=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,ah={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>X_.test(t),hexaColor:t=>J_.test(t),hexOrHexaColor:t=>Z_.test(t),rgbColor:t=>Xa.test(t),rgbaColor:t=>Ja.test(t),rgbOrRgbaColor:t=>Xa.test(t)||Ja.test(t),hexOrRgbColor:t=>X_.test(t)||Xa.test(t),hexaOrRgbaColor:t=>J_.test(t)||Ja.test(t),anyColor:t=>Z_.test(t)||Xa.test(t)||Ja.test(t)},tM=[!0,!1,"ondemand"],nM={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:t=>tM.includes(t)}};function rM(t,e){const{props:n,proxy:r}=et(),s=Ce(!1),i=Ce(null),o=Ce(!1);eM({validate:k,resetValidation:I});let l=0,c;const u=q(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),h=q(()=>n.disable!==!0&&u.value===!0&&e.value===!1),f=q(()=>n.error===!0||s.value===!0),p=q(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:i.value);We(()=>n.modelValue,()=>{o.value=!0,h.value===!0&&n.lazyRules===!1&&P()});function w(){n.lazyRules!=="ondemand"&&h.value===!0&&o.value===!0&&P()}We(()=>n.reactiveRules,F=>{F===!0?c===void 0&&(c=We(()=>n.rules,w,{immediate:!0,deep:!0})):c!==void 0&&(c(),c=void 0)},{immediate:!0}),We(()=>n.lazyRules,w),We(t,F=>{F===!0?o.value=!0:h.value===!0&&n.lazyRules!=="ondemand"&&P()});function I(){l++,e.value=!1,o.value=!1,s.value=!1,i.value=null,P.cancel()}function k(F=n.modelValue){if(n.disable===!0||u.value===!1)return!0;const A=++l,x=e.value!==!0?()=>{o.value=!0}:()=>{},D=(H,S)=>{H===!0&&x(),s.value=H,i.value=S||null,e.value=!1},B=[];for(let H=0;H<n.rules.length;H++){const S=n.rules[H];let b;if(typeof S=="function"?b=S(F,ah):typeof S=="string"&&ah[S]!==void 0&&(b=ah[S](F)),b===!1||typeof b=="string")return D(!0,b),!1;b!==!0&&b!==void 0&&B.push(b)}return B.length===0?(D(!1),!0):(e.value=!0,Promise.all(B).then(H=>{if(H===void 0||Array.isArray(H)===!1||H.length===0)return A===l&&D(!1),!0;const S=H.find(b=>b===!1||typeof b=="string");return A===l&&D(S!==void 0,S),S===void 0},H=>(A===l&&(console.error(H),D(!0)),!1)))}const P=kv(k,0);return mn(()=>{c?.(),P.cancel()}),Object.assign(r,{resetValidation:I,validate:k}),Vs(r,"hasError",()=>f.value),{isDirtyModel:o,hasRules:u,hasError:f,errorMessage:p,validate:k,resetValidation:I}}function ud(t){return t!=null&&(""+t).length!==0}const sM={...Us,...nM,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},iM={...sM,maxlength:[Number,String]},oM=["update:modelValue","clear","focus","blur"];function aM({requiredForAttr:t=!0,tagProp:e,changeEvent:n=!1}={}){const{props:r,proxy:s}=et(),i=$s(r,s.$q),o=JV({required:t,getValue:()=>r.for});return{requiredForAttr:t,changeEvent:n,tag:e===!0?q(()=>r.tag):{value:"label"},isDark:i,editable:q(()=>r.disable!==!0&&r.readonly!==!0),innerLoading:Ce(!1),focused:Ce(!1),hasPopupOpen:!1,splitAttrs:ZV(),targetUid:o,rootRef:Ce(null),targetRef:Ce(null),controlRef:Ce(null)}}function lM(t){const{props:e,emit:n,slots:r,attrs:s,proxy:i}=et(),{$q:o}=i;let l=null;t.hasValue===void 0&&(t.hasValue=q(()=>ud(e.modelValue))),t.emitValue===void 0&&(t.emitValue=M=>{n("update:modelValue",M)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:y,onFocusout:E}),Object.assign(t,{clearValue:v,onControlFocusin:y,onControlFocusout:E,focus:S}),t.computedCounter===void 0&&(t.computedCounter=q(()=>{if(e.counter!==!1){const M=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,z=e.maxlength!==void 0?e.maxlength:e.maxValues;return M+(z!==void 0?" / "+z:"")}}));const{isDirtyModel:c,hasRules:u,hasError:h,errorMessage:f,resetValidation:p}=rM(t.focused,t.innerLoading),w=t.floatingLabel!==void 0?q(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):q(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),I=q(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),k=q(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),P=q(()=>`q-field row no-wrap items-start q-field--${k.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(w.value===!0?" q-field--float":"")+(A.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(h.value===!0?" q-field--error":"")+(h.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&I.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),F=q(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(h.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),A=q(()=>e.labelSlot===!0||e.label!==void 0),x=q(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&h.value!==!0?` text-${e.labelColor}`:"")),D=q(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:w.value,modelValue:e.modelValue,emitValue:t.emitValue})),B=q(()=>{const M={};return t.targetUid.value&&(M.for=t.targetUid.value),e.disable===!0&&(M["aria-disabled"]="true"),M});function H(){const M=document.activeElement;let z=t.targetRef?.value;z&&(M===null||M.id!==t.targetUid.value)&&(z.hasAttribute("tabindex")===!0||(z=z.querySelector("[tabindex]")),z!==M&&z?.focus({preventScroll:!0}))}function S(){Ff(H)}function b(){tV(H);const M=document.activeElement;M!==null&&t.rootRef.value.contains(M)&&M.blur()}function y(M){l!==null&&(clearTimeout(l),l=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,n("focus",M))}function E(M,z){l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,!(document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1))&&(t.focused.value===!0&&(t.focused.value=!1,n("blur",M)),z?.())})}function v(M){cn(M),o.platform.is.mobile!==!0?(t.targetRef?.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),n("update:modelValue",null),t.changeEvent===!0&&n("change",null),n("clear",e.modelValue),Qt(()=>{const z=c.value;p(),c.value=z})}function g(M){[13,32].includes(M.keyCode)&&v(M)}function _(){const M=[];return r.prepend!==void 0&&M.push(W("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:xr},r.prepend())),M.push(W("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},N())),h.value===!0&&e.noErrorIcon===!1&&M.push(X("error",[W(lr,{name:o.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?M.push(X("inner-loading-append",r.loading!==void 0?r.loading():[W(Yo,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&M.push(X("inner-clearable-append",[W(lr,{class:"q-field__focusable-action",name:e.clearIcon||o.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":o.lang.label.clear,onKeyup:g,onClick:v})])),r.append!==void 0&&M.push(W("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:xr},r.append())),t.getInnerAppend!==void 0&&M.push(X("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&M.push(t.getControlChild()),M}function N(){const M=[];return e.prefix!==void 0&&e.prefix!==null&&M.push(W("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&M.push(t.getShadowControl()),t.getControl!==void 0?M.push(t.getControl()):r.rawControl!==void 0?M.push(r.rawControl()):r.control!==void 0&&M.push(W("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},r.control(D.value))),A.value===!0&&M.push(W("div",{class:x.value},bn(r.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&M.push(W("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),M.concat(bn(r.default))}function ee(){let M,z;h.value===!0?f.value!==null?(M=[W("div",{role:"alert"},f.value)],z=`q--slot-error-${f.value}`):(M=bn(r.error),z="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(M=[W("div",e.hint)],z=`q--slot-hint-${e.hint}`):(M=bn(r.hint),z="q--slot-hint"));const ce=e.counter===!0||r.counter!==void 0;if(e.hideBottomSpace===!0&&ce===!1&&M===void 0)return;const ie=W("div",{key:z,class:"q-field__messages col"},M);return W("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:xr},[e.hideBottomSpace===!0?ie:W(kl,{name:"q-transition--field-message"},()=>ie),ce===!0?W("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():t.computedCounter.value):null])}function X(M,z){return z===null?null:W("div",{key:M,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},z)}let L=!1;return mc(()=>{L=!0}),Ky(()=>{L===!0&&e.autofocus===!0&&i.focus()}),e.autofocus===!0&&hr(()=>{i.focus()}),mn(()=>{l!==null&&clearTimeout(l)}),Object.assign(i,{focus:S,blur:b}),function(){const z=t.getControl===void 0&&r.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...B.value}:B.value;return W(t.tag.value,{ref:t.rootRef,class:[P.value,s.class],style:s.style,...z},[r.before!==void 0?W("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:xr},r.before()):null,W("div",{class:"q-field__inner relative-position col self-stretch"},[W("div",{ref:t.controlRef,class:F.value,tabindex:-1,...t.controlEvents},_()),I.value===!0?ee():null]),r.after!==void 0?W("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:xr},r.after()):null])}}const ey={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},sc={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},oT=Object.keys(sc);oT.forEach(t=>{sc[t].regex=new RegExp(sc[t].pattern)});const cM=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+oT.join("")+"])|(.)","g"),ty=/[.*+?^${}()|[\]\\]/g,at="",uM={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function hM(t,e,n,r){let s,i,o,l,c,u;const h=Ce(null),f=Ce(w());function p(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}We(()=>t.type+t.autogrow,k),We(()=>t.mask,y=>{if(y!==void 0)P(f.value,!0);else{const E=S(f.value);k(),t.modelValue!==E&&e("update:modelValue",E)}}),We(()=>t.fillMask+t.reverseFillMask,()=>{h.value===!0&&P(f.value,!0)}),We(()=>t.unmaskedValue,()=>{h.value===!0&&P(f.value)});function w(){if(k(),h.value===!0){const y=B(S(t.modelValue));return t.fillMask!==!1?b(y):y}return t.modelValue}function I(y){if(y<s.length)return s.slice(-y);let E="",v=s;const g=v.indexOf(at);if(g!==-1){for(let _=y-v.length;_>0;_--)E+=at;v=v.slice(0,g)+E+v.slice(g)}return v}function k(){if(h.value=t.mask!==void 0&&t.mask.length!==0&&p(),h.value===!1){l=void 0,s="",i="";return}const y=ey[t.mask]===void 0?t.mask:ey[t.mask],E=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",v=E.replace(ty,"\\$&"),g=[],_=[],N=[];let ee=t.reverseFillMask===!0,X="",L="";y.replace(cM,(ie,U,pe,Me,Ne)=>{if(Me!==void 0){const he=sc[Me];N.push(he),L=he.negate,ee===!0&&(_.push("(?:"+L+"+)?("+he.pattern+"+)?(?:"+L+"+)?("+he.pattern+"+)?"),ee=!1),_.push("(?:"+L+"+)?("+he.pattern+")?")}else if(pe!==void 0)X="\\"+(pe==="\\"?"":pe),N.push(pe),g.push("([^"+X+"]+)?"+X+"?");else{const he=U!==void 0?U:Ne;X=he==="\\"?"\\\\\\\\":he.replace(ty,"\\\\$&"),N.push(he),g.push("([^"+X+"]+)?"+X+"?")}});const M=new RegExp("^"+g.join("")+"("+(X===""?".":"[^"+X+"]")+"+)?"+(X===""?"":"["+X+"]*")+"$"),z=_.length-1,ce=_.map((ie,U)=>U===0&&t.reverseFillMask===!0?new RegExp("^"+v+"*"+ie):U===z?new RegExp("^"+ie+"("+(L===""?".":L)+"+)?"+(t.reverseFillMask===!0?"$":v+"*")):new RegExp("^"+ie));o=N,l=ie=>{const U=M.exec(t.reverseFillMask===!0?ie:ie.slice(0,N.length+1));U!==null&&(ie=U.slice(1).join(""));const pe=[],Me=ce.length;for(let Ne=0,he=ie;Ne<Me;Ne++){const $=ce[Ne].exec(he);if($===null)break;he=he.slice($.shift().length),pe.push(...$)}return pe.length!==0?pe.join(""):ie},s=N.map(ie=>typeof ie=="string"?ie:at).join(""),i=s.split(at).join(E)}function P(y,E,v){const g=r.value,_=g.selectionEnd,N=g.value.length-_,ee=S(y);E===!0&&k();const X=B(ee),L=t.fillMask!==!1?b(X):X,M=f.value!==L;g.value!==L&&(g.value=L),M===!0&&(f.value=L),document.activeElement===g&&Qt(()=>{if(L===i){const ce=t.reverseFillMask===!0?i.length:0;g.setSelectionRange(ce,ce,"forward");return}if(v==="insertFromPaste"&&t.reverseFillMask!==!0){const ce=g.selectionEnd;let ie=_-1;for(let U=c;U<=ie&&U<ce;U++)s[U]!==at&&ie++;A.right(g,ie);return}if(["deleteContentBackward","deleteContentForward"].indexOf(v)!==-1){const ce=t.reverseFillMask===!0?_===0?L.length>X.length?1:0:Math.max(0,L.length-(L===i?0:Math.min(X.length,N)+1))+1:_;g.setSelectionRange(ce,ce,"forward");return}if(t.reverseFillMask===!0)if(M===!0){const ce=Math.max(0,L.length-(L===i?0:Math.min(X.length,N+1)));ce===1&&_===1?g.setSelectionRange(ce,ce,"forward"):A.rightReverse(g,ce)}else{const ce=L.length-N;g.setSelectionRange(ce,ce,"backward")}else if(M===!0){const ce=Math.max(0,s.indexOf(at),Math.min(X.length,_)-1);A.right(g,ce)}else{const ce=_-1;A.right(g,ce)}});const z=t.unmaskedValue===!0?S(L):L;String(t.modelValue)!==z&&(t.modelValue!==null||z!=="")&&n(z,!0)}function F(y,E,v){const g=B(S(y.value));E=Math.max(0,s.indexOf(at),Math.min(g.length,E)),c=E,y.setSelectionRange(E,v,"forward")}const A={left(y,E){const v=s.slice(E-1).indexOf(at)===-1;let g=Math.max(0,E-1);for(;g>=0;g--)if(s[g]===at){E=g,v===!0&&E++;break}if(g<0&&s[E]!==void 0&&s[E]!==at)return A.right(y,0);E>=0&&y.setSelectionRange(E,E,"backward")},right(y,E){const v=y.value.length;let g=Math.min(v,E+1);for(;g<=v;g++)if(s[g]===at){E=g;break}else s[g-1]===at&&(E=g);if(g>v&&s[E-1]!==void 0&&s[E-1]!==at)return A.left(y,v);y.setSelectionRange(E,E,"forward")},leftReverse(y,E){const v=I(y.value.length);let g=Math.max(0,E-1);for(;g>=0;g--)if(v[g-1]===at){E=g;break}else if(v[g]===at&&(E=g,g===0))break;if(g<0&&v[E]!==void 0&&v[E]!==at)return A.rightReverse(y,0);E>=0&&y.setSelectionRange(E,E,"backward")},rightReverse(y,E){const v=y.value.length,g=I(v),_=g.slice(0,E+1).indexOf(at)===-1;let N=Math.min(v,E+1);for(;N<=v;N++)if(g[N-1]===at){E=N,E>0&&_===!0&&E--;break}if(N>v&&g[E-1]!==void 0&&g[E-1]!==at)return A.leftReverse(y,v);y.setSelectionRange(E,E,"forward")}};function x(y){e("click",y),u=void 0}function D(y){if(e("keydown",y),Dv(y)===!0||y.altKey===!0)return;const E=r.value,v=E.selectionStart,g=E.selectionEnd;if(y.shiftKey||(u=void 0),y.keyCode===37||y.keyCode===39){y.shiftKey&&u===void 0&&(u=E.selectionDirection==="forward"?v:g);const _=A[(y.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(y.preventDefault(),_(E,u===v?g:v),y.shiftKey){const N=E.selectionStart;E.setSelectionRange(Math.min(u,N),Math.max(u,N),"forward")}}else y.keyCode===8&&t.reverseFillMask!==!0&&v===g?(A.left(E,v),E.setSelectionRange(E.selectionStart,g,"backward")):y.keyCode===46&&t.reverseFillMask===!0&&v===g&&(A.rightReverse(E,g),E.setSelectionRange(v,E.selectionEnd,"forward"))}function B(y){if(y==null||y==="")return"";if(t.reverseFillMask===!0)return H(y);const E=o;let v=0,g="";for(let _=0;_<E.length;_++){const N=y[v],ee=E[_];if(typeof ee=="string")g+=ee;else if(N!==void 0&&ee.regex.test(N))g+=ee.transform!==void 0?ee.transform(N):N,v++;else return g}return g}function H(y){const E=o,v=s.indexOf(at);let g=y.length-1,_="";for(let N=E.length-1;N>=0&&g!==-1;N--){const ee=E[N];let X=y[g];if(typeof ee=="string")_=ee+_;else if(X!==void 0&&ee.regex.test(X))do _=(ee.transform!==void 0?ee.transform(X):X)+_,g--,X=y[g];while(v===N&&X!==void 0&&ee.regex.test(X));else return _}return _}function S(y){return typeof y!="string"||l===void 0?typeof y=="number"?l(""+y):y:l(y)}function b(y){return i.length-y.length<=0?y:t.reverseFillMask===!0&&y.length!==0?i.slice(0,-y.length)+y:y+i.slice(y.length)}return{innerValue:f,hasMask:h,moveCursorForPaste:F,updateMaskValue:P,onMaskedKeydown:D,onMaskedClick:x}}const $f={name:String};function eF(t){return q(()=>({type:"hidden",name:t.name,value:t.modelValue}))}function aT(t={}){return(e,n,r)=>{e[n](W("input",{class:"hidden"+(r||""),...t.value}))}}function dM(t){return q(()=>t.name||t.for)}function fM(t,e){function n(){const r=t.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(i=>{s.items.add(i)}),{files:s.files}}catch{return{files:void 0}}}return q(e===!0?()=>{if(t.type==="file")return n()}:n)}const pM=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,mM=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,gM=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,_M=/[a-z0-9_ -]$/i;function yM(t){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,t(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(dt.is.firefox===!0?_M.test(n.data)===!1:pM.test(n.data)===!0||mM.test(n.data)===!0||gM.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}const vM=Ct({name:"QInput",inheritAttrs:!1,props:{...iM,...uM,...$f,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...oM,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:n}){const{proxy:r}=et(),{$q:s}=r,i={};let o=NaN,l,c,u=null,h;const f=Ce(null),p=dM(t),{innerValue:w,hasMask:I,moveCursorForPaste:k,updateMaskValue:P,onMaskedKeydown:F,onMaskedClick:A}=hM(t,e,X,f),x=fM(t,!0),D=q(()=>ud(w.value)),B=yM(N),H=aM({changeEvent:!0}),S=q(()=>t.type==="textarea"||t.autogrow===!0),b=q(()=>S.value===!0||["text","search","url","tel","password"].includes(t.type)),y=q(()=>{const U={...H.splitAttrs.listeners.value,onInput:N,onPaste:_,onChange:M,onBlur:z,onFocus:Nl};return U.onCompositionstart=U.onCompositionupdate=U.onCompositionend=B,I.value===!0&&(U.onKeydown=F,U.onClick=A),t.autogrow===!0&&(U.onAnimationend=ee),U}),E=q(()=>{const U={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:p.value,...H.splitAttrs.attributes.value,id:H.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return S.value===!1&&(U.type=t.type),t.autogrow===!0&&(U.rows=1),U});We(()=>t.type,()=>{f.value&&(f.value.value=t.modelValue)}),We(()=>t.modelValue,U=>{if(I.value===!0){if(c===!0&&(c=!1,String(U)===o))return;P(U)}else w.value!==U&&(w.value=U,t.type==="number"&&i.hasOwnProperty("value")===!0&&(l===!0?l=!1:delete i.value));t.autogrow===!0&&Qt(L)}),We(()=>t.autogrow,U=>{U===!0?Qt(L):f.value!==null&&n.rows>0&&(f.value.style.height="auto")}),We(()=>t.dense,()=>{t.autogrow===!0&&Qt(L)});function v(){Ff(()=>{const U=document.activeElement;f.value!==null&&f.value!==U&&(U===null||U.id!==H.targetUid.value)&&f.value.focus({preventScroll:!0})})}function g(){f.value?.select()}function _(U){if(I.value===!0&&t.reverseFillMask!==!0){const pe=U.target;k(pe,pe.selectionStart,pe.selectionEnd)}e("paste",U)}function N(U){if(!U||!U.target)return;if(t.type==="file"){e("update:modelValue",U.target.files);return}const pe=U.target.value;if(U.target.qComposing===!0){i.value=pe;return}if(I.value===!0)P(pe,!1,U.inputType);else if(X(pe),b.value===!0&&U.target===document.activeElement){const{selectionStart:Me,selectionEnd:Ne}=U.target;Me!==void 0&&Ne!==void 0&&Qt(()=>{U.target===document.activeElement&&pe.indexOf(U.target.value)===0&&U.target.setSelectionRange(Me,Ne)})}t.autogrow===!0&&L()}function ee(U){e("animationend",U),L()}function X(U,pe){h=()=>{u=null,t.type!=="number"&&i.hasOwnProperty("value")===!0&&delete i.value,t.modelValue!==U&&o!==U&&(o=U,pe===!0&&(c=!0),e("update:modelValue",U),Qt(()=>{o===U&&(o=NaN)})),h=void 0},t.type==="number"&&(l=!0,i.value=U),t.debounce!==void 0?(u!==null&&clearTimeout(u),i.value=U,u=setTimeout(h,t.debounce)):h()}function L(){requestAnimationFrame(()=>{const U=f.value;if(U!==null){const pe=U.parentNode.style,{scrollTop:Me}=U,{overflowY:Ne,maxHeight:he}=s.platform.is.firefox===!0?{}:window.getComputedStyle(U),$=Ne!==void 0&&Ne!=="scroll";$===!0&&(U.style.overflowY="hidden"),pe.marginBottom=U.scrollHeight-1+"px",U.style.height="1px",U.style.height=U.scrollHeight+"px",$===!0&&(U.style.overflowY=parseInt(he,10)<U.scrollHeight?"auto":"hidden"),pe.marginBottom="",U.scrollTop=Me}})}function M(U){B(U),u!==null&&(clearTimeout(u),u=null),h?.(),e("change",U.target.value)}function z(U){U!==void 0&&Nl(U),u!==null&&(clearTimeout(u),u=null),h?.(),l=!1,c=!1,delete i.value,t.type!=="file"&&setTimeout(()=>{f.value!==null&&(f.value.value=w.value!==void 0?w.value:"")})}function ce(){return i.hasOwnProperty("value")===!0?i.value:w.value!==void 0?w.value:""}mn(()=>{z()}),hr(()=>{t.autogrow===!0&&L()}),Object.assign(H,{innerValue:w,fieldClass:q(()=>`q-${S.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:q(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:f,emitValue:X,hasValue:D,floatingLabel:q(()=>D.value===!0&&(t.type!=="number"||isNaN(w.value)===!1)||ud(t.displayValue)),getControl:()=>W(S.value===!0?"textarea":"input",{ref:f,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...E.value,...y.value,...t.type!=="file"?{value:ce()}:x.value}),getShadowControl:()=>W("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(S.value===!0?"":" text-no-wrap")},[W("span",{class:"invisible"},ce()),W("span",t.shadowText)])});const ie=lM(H);return Object.assign(r,{focus:v,select:g,getNativeElement:()=>f.value}),Vs(r,"nativeEl",()=>f.value),ie}});function lT(t,e){const n=Ce(null),r=q(()=>t.disable===!0?null:W("span",{ref:n,class:"no-outline",tabindex:-1}));function s(i){const o=e.value;i?.qAvoidFocus!==!0&&(i?.type.indexOf("key")===0?document.activeElement!==o&&o?.contains(document.activeElement)===!0&&o.focus():n.value!==null&&(i===void 0||o?.contains(i.target)===!0)&&n.value.focus())}return{refocusTargetEl:r,refocusTarget:s}}const cT={xs:30,sm:35,md:40,lg:50,xl:60},wM=()=>W("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[W("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),W("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),bM=Ct({name:"QRadio",props:{...Us,...pa,...$f,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:n}){const{proxy:r}=et(),s=$s(t,r.$q),i=ma(t,cT),o=Ce(null),{refocusTargetEl:l,refocusTarget:c}=lT(t,o),u=q(()=>Ae(t.modelValue)===Ae(t.val)),h=q(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(s.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),f=q(()=>{const D=t.color!==void 0&&(t.keepColor===!0||u.value===!0)?` text-${t.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${D}`}),p=q(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),w=q(()=>t.disable===!0?-1:t.tabindex||0),I=q(()=>{const D={type:"radio"};return t.name!==void 0&&Object.assign(D,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),D}),k=aT(I);function P(D){D!==void 0&&(cn(D),c(D)),t.disable!==!0&&u.value!==!0&&n("update:modelValue",t.val,D)}function F(D){(D.keyCode===13||D.keyCode===32)&&cn(D)}function A(D){(D.keyCode===13||D.keyCode===32)&&P(D)}Object.assign(r,{set:P});const x=wM();return()=>{const D=p.value!==null?[W("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[W(lr,{class:"q-radio__icon",name:p.value})])]:[x];t.disable!==!0&&k(D,"unshift"," q-radio__native q-ma-none q-pa-none");const B=[W("div",{class:f.value,style:i.value,"aria-hidden":"true"},D)];l.value!==null&&B.push(l.value);const H=t.label!==void 0?ys(e.default,[t.label]):bn(e.default);return H!==void 0&&B.push(W("div",{class:"q-radio__label q-anchor--skip"},H)),W("div",{ref:o,class:h.value,tabindex:w.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:P,onKeydown:F,onKeyup:A},B)}}}),uT={...Us,...pa,...$f,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},hT=["update:modelValue"];function dT(t,e){const{props:n,slots:r,emit:s,proxy:i}=et(),{$q:o}=i,l=$s(n,o),c=Ce(null),{refocusTargetEl:u,refocusTarget:h}=lT(n,c),f=ma(n,cT),p=q(()=>n.val!==void 0&&Array.isArray(n.modelValue)),w=q(()=>{const g=Ae(n.val);return p.value===!0?n.modelValue.findIndex(_=>Ae(_)===g):-1}),I=q(()=>p.value===!0?w.value!==-1:Ae(n.modelValue)===Ae(n.trueValue)),k=q(()=>p.value===!0?w.value===-1:Ae(n.modelValue)===Ae(n.falseValue)),P=q(()=>I.value===!1&&k.value===!1),F=q(()=>n.disable===!0?-1:n.tabindex||0),A=q(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(l.value===!0?` q-${t}--dark`:"")+(n.dense===!0?` q-${t}--dense`:"")+(n.leftLabel===!0?" reverse":"")),x=q(()=>{const g=I.value===!0?"truthy":k.value===!0?"falsy":"indet",_=n.color!==void 0&&(n.keepColor===!0||(t==="toggle"?I.value===!0:k.value!==!0))?` text-${n.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${g}${_}`}),D=q(()=>{const g={type:"checkbox"};return n.name!==void 0&&Object.assign(g,{".checked":I.value,"^checked":I.value===!0?"checked":void 0,name:n.name,value:p.value===!0?n.val:n.trueValue}),g}),B=aT(D),H=q(()=>{const g={tabindex:F.value,role:t==="toggle"?"switch":"checkbox","aria-label":n.label,"aria-checked":P.value===!0?"mixed":I.value===!0?"true":"false"};return n.disable===!0&&(g["aria-disabled"]="true"),g});function S(g){g!==void 0&&(cn(g),h(g)),n.disable!==!0&&s("update:modelValue",b(),g)}function b(){if(p.value===!0){if(I.value===!0){const g=n.modelValue.slice();return g.splice(w.value,1),g}return n.modelValue.concat([n.val])}if(I.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(k.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function y(g){(g.keyCode===13||g.keyCode===32)&&cn(g)}function E(g){(g.keyCode===13||g.keyCode===32)&&S(g)}const v=e(I,P);return Object.assign(i,{toggle:S}),()=>{const g=v();n.disable!==!0&&B(g,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const _=[W("div",{class:x.value,style:f.value,"aria-hidden":"true"},g)];u.value!==null&&_.push(u.value);const N=n.label!==void 0?ys(r.default,[n.label]):bn(r.default);return N!==void 0&&_.push(W("div",{class:`q-${t}__label q-anchor--skip`},N)),W("div",{ref:c,class:A.value,...H.value,onClick:S,onKeydown:y,onKeyup:E},_)}}const EM=()=>W("div",{key:"svg",class:"q-checkbox__bg absolute"},[W("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[W("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),W("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),TM=Ct({name:"QCheckbox",props:uT,emits:hT,setup(t){const e=EM();function n(r,s){const i=q(()=>(r.value===!0?t.checkedIcon:s.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>i.value!==null?[W("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[W(lr,{class:"q-checkbox__icon",name:i.value})])]:[e]}return dT("checkbox",n)}}),IM=Ct({name:"QToggle",props:{...uT,icon:String,iconColor:String},emits:hT,setup(t){function e(n,r){const s=q(()=>(n.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),i=q(()=>n.value===!0?t.iconColor:null);return()=>[W("div",{class:"q-toggle__track"}),W("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[W(lr,{name:s.value,color:i.value})]:void 0)]}return dT("toggle",e)}}),fT={radio:bM,checkbox:TM,toggle:IM},SM=Object.keys(fT);function lh(t,e){if(typeof t=="function")return t;const n=t!==void 0?t:e;return r=>r[n]}const AM=Ct({name:"QOptionGroup",props:{...Us,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(yn),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:t=>SM.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const{proxy:{$q:r}}=et(),s=Array.isArray(t.modelValue);t.type==="radio"?s===!0&&console.error("q-option-group: model should not be array"):s===!1&&console.error("q-option-group: model should be array in your case");const i=$s(t,r),o=q(()=>fT[t.type]),l=q(()=>lh(t.optionValue,"value")),c=q(()=>lh(t.optionLabel,"label")),u=q(()=>lh(t.optionDisable,"disable")),h=q(()=>t.options.map(I=>({val:l.value(I),name:I.name===void 0?t.name:I.name,disable:t.disable||u.value(I),leftLabel:I.leftLabel===void 0?t.leftLabel:I.leftLabel,color:I.color===void 0?t.color:I.color,checkedIcon:I.checkedIcon,uncheckedIcon:I.uncheckedIcon,dark:I.dark===void 0?i.value:I.dark,size:I.size===void 0?t.size:I.size,dense:t.dense,keepColor:I.keepColor===void 0?t.keepColor:I.keepColor}))),f=q(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),p=q(()=>{const I={role:"group"};return t.type==="radio"&&(I.role="radiogroup",t.disable===!0&&(I["aria-disabled"]="true")),I});function w(I){e("update:modelValue",I)}return()=>W("div",{class:f.value,...p.value},t.options.map((I,k)=>{const P=n["label-"+k]!==void 0?()=>n["label-"+k](I):n.label!==void 0?()=>n.label(I):void 0;return W("div",[W(o.value,{label:P===void 0?c.value(I):null,modelValue:t.modelValue,"onUpdate:modelValue":w,...h.value[k]},P)])}))}}),RM=Ct({name:"DialogPluginComponent",props:{...Us,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:n}=et(),{$q:r}=n,s=$s(t,r),i=Ce(null),o=Ce(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),l=q(()=>"q-dialog-plugin"+(s.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),c=q(()=>t.color||(s.value===!0?"amber":"primary")),u=q(()=>t.progress===!1?null:yn(t.progress)===!0?{component:t.progress.spinner||Yo,props:{color:t.progress.color||c.value}}:{component:Yo,props:{color:c.value}}),h=q(()=>t.prompt!==void 0||t.options!==void 0),f=q(()=>{if(h.value!==!0)return{};const{model:N,isValid:ee,items:X,...L}=t.prompt!==void 0?t.prompt:t.options;return L}),p=q(()=>yn(t.ok)===!0||t.ok===!0?r.lang.label.ok:t.ok),w=q(()=>yn(t.cancel)===!0||t.cancel===!0?r.lang.label.cancel:t.cancel),I=q(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(o.value)!==!0:t.options!==void 0?t.options.isValid!==void 0&&t.options.isValid(o.value)!==!0:!1),k=q(()=>({color:c.value,label:p.value,ripple:!1,disable:I.value,...yn(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&h.value!==!0||void 0,onClick:x})),P=q(()=>({color:c.value,label:w.value,ripple:!1,...yn(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&h.value!==!0||void 0,onClick:D}));We(()=>t.prompt&&t.prompt.model,H),We(()=>t.options&&t.options.model,H);function F(){i.value.show()}function A(){i.value.hide()}function x(){e("ok",Ae(o.value)),A()}function D(){A()}function B(){e("hide")}function H(N){o.value=N}function S(N){I.value!==!0&&t.prompt.type!=="textarea"&&Mo(N,13)===!0&&x()}function b(N,ee){return t.html===!0?W(Ji,{class:N,innerHTML:ee}):W(Ji,{class:N},()=>ee)}function y(){return[W(vM,{color:c.value,dense:!0,autofocus:!0,dark:s.value,...f.value,modelValue:o.value,"onUpdate:modelValue":H,onKeyup:S})]}function E(){return[W(AM,{color:c.value,options:t.options.items,dark:s.value,...f.value,modelValue:o.value,"onUpdate:modelValue":H})]}function v(){const N=[];return t.cancel&&N.push(W(ld,P.value)),t.ok&&N.push(W(ld,k.value)),W(GV,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>N)}function g(){const N=[];return t.title&&N.push(b("q-dialog__title",t.title)),t.progress!==!1&&N.push(W(Ji,{class:"q-dialog__progress"},()=>W(u.value.component,u.value.props))),t.message&&N.push(b("q-dialog__message",t.message)),t.prompt!==void 0?N.push(W(Ji,{class:"scroll q-dialog-plugin__form"},y)):t.options!==void 0&&N.push(W(K_,{dark:s.value}),W(Ji,{class:"scroll q-dialog-plugin__form"},E),W(K_,{dark:s.value})),(t.ok||t.cancel)&&N.push(v()),N}function _(){return[W(KV,{class:[l.value,t.cardClass],style:t.cardStyle,dark:s.value},g)]}return Object.assign(n,{show:F,hide:A}),()=>W(TV,{ref:i,onHide:B},_)}});function pT(t,e){for(const n in e)n!=="spinner"&&Object(e[n])===e[n]?(t[n]=Object(t[n])!==t[n]?{}:{...t[n]},pT(t[n],e[n])):t[n]=e[n]}function CM(t,e,n){return r=>{let s,i;const o=r.component!==void 0;if(o===!0){const{component:A,componentProps:x}=r;s=typeof A=="string"?n.component(A):A,i=x||{}}else{const{class:A,style:x,...D}=r;s=t,i=D,A!==void 0&&(D.cardClass=A),x!==void 0&&(D.cardStyle=x)}let l,c=!1;const u=Ce(null),h=Uf(!1,"dialog"),f=A=>{if(u.value?.[A]!==void 0){u.value[A]();return}const x=l.$.subTree;if(x?.component){if(x.component.proxy&&x.component.proxy[A]){x.component.proxy[A]();return}if(x.component.subTree&&x.component.subTree.component&&x.component.subTree.component.proxy&&x.component.subTree.component.proxy[A]){x.component.subTree.component.proxy[A]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},p=[],w=[],I={onOk(A){return p.push(A),I},onCancel(A){return w.push(A),I},onDismiss(A){return p.push(A),w.push(A),I},hide(){return f("hide"),I},update(A){if(l!==null){if(o===!0)Object.assign(i,A);else{const{class:x,style:D,...B}=A;x!==void 0&&(B.cardClass=x),D!==void 0&&(B.cardStyle=D),pT(i,B)}l.$forceUpdate()}return I}},k=A=>{c=!0,p.forEach(x=>{x(A)})},P=()=>{F.unmount(h),HE(h),F=null,l=null,c!==!0&&w.forEach(A=>{A()})};let F=Lv({name:"QGlobalDialog",setup:()=>()=>W(s,{...i,ref:u,onOk:k,onHide:P,onVnodeMounted(...A){typeof i.onVnodeMounted=="function"&&i.onVnodeMounted(...A),Qt(()=>f("show"))}})},n);return l=F.mount(h),I}}const PM={install({$q:t,parentApp:e}){t.dialog=this.create=CM(RM,!0,e)}},kM=Ct({name:"QAvatar",props:{...pa,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=ma(t),r=q(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),s=q(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[W(lr,{name:t.icon})]:void 0;return W("div",{class:r.value,style:n.value},[W("div",{class:"q-avatar__content row flex-center overflow-hidden",style:s.value},gV(e.default,i))])}}});let xM=0;const _l={},yl={},_n={},mT={},DM=/^\s*$/,gT=[],NM=[void 0,null,!0,!1,""],qf=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],OM=["top-left","top-right","bottom-left","bottom-right"],lo={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function _T(t,e,n){if(!t)return Zi("parameter required");let r;const s={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(s,_l),yn(t)===!1&&(s.type&&Object.assign(s,lo[s.type]),t={message:t}),Object.assign(s,lo[t.type||s.type],t),typeof s.icon=="function"&&(s.icon=s.icon(e)),s.spinner?(s.spinner===!0&&(s.spinner=Yo),s.spinner=Os(s.spinner)):s.spinner=!1,s.meta={hasMedia:!!(s.spinner!==!1||s.icon||s.avatar),hasText:ny(s.message)||ny(s.caption)},s.position){if(qf.includes(s.position)===!1)return Zi("wrong position",t)}else s.position="bottom";if(NM.includes(s.timeout)===!0)s.timeout=5e3;else{const c=Number(s.timeout);if(isNaN(c)||c<0)return Zi("wrong timeout",t);s.timeout=Number.isFinite(c)?c:0}s.timeout===0?s.progress=!1:s.progress===!0&&(s.meta.progressClass="q-notification__progress"+(s.progressClass?` ${s.progressClass}`:""),s.meta.progressStyle={animationDuration:`${s.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(_l.actions)===!0?_l.actions:[]).concat(Array.isArray(lo[t.type]?.actions)===!0?lo[t.type].actions:[]),{closeBtn:o}=s;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),s.actions=i.map(({handler:c,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof c=="function"?()=>{c(),u!==!0&&l()}:()=>{l()}})),s.multiLine===void 0&&(s.multiLine=s.actions.length>1),Object.assign(s.meta,{class:`q-notification row items-stretch q-notification--${s.multiLine===!0?"multi-line":"standard"}`+(s.color!==void 0?` bg-${s.color}`:"")+(s.textColor!==void 0?` text-${s.textColor}`:"")+(s.classes!==void 0?` ${s.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(s.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(s.multiLine===!0?"":" col"),leftClass:s.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...s.attrs}}),s.group===!1?(s.group=void 0,s.meta.group=void 0):((s.group===void 0||s.group===!0)&&(s.group=[s.message,s.caption,s.multiline].concat(s.actions.map(c=>`${c.label}*${c.icon}`)).join("|")),s.meta.group=s.group+"|"+s.position),s.actions.length===0?s.actions=void 0:s.meta.actionsClass="q-notification__actions row items-center "+(s.multiLine===!0?"justify-end":"col-auto")+(s.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),s.meta.uid=n.notif.meta.uid;const c=_n[s.position].value.indexOf(n.notif);_n[s.position].value[c]=s}else{const c=yl[s.meta.group];if(c===void 0){if(s.meta.uid=xM++,s.meta.badge=1,["left","right","center"].indexOf(s.position)!==-1)_n[s.position].value.splice(Math.floor(_n[s.position].value.length/2),0,s);else{const u=s.position.indexOf("top")!==-1?"unshift":"push";_n[s.position].value[u](s)}s.group!==void 0&&(yl[s.meta.group]=s)}else{if(c.meta.timer&&(clearTimeout(c.meta.timer),c.meta.timer=void 0),s.badgePosition!==void 0){if(OM.includes(s.badgePosition)===!1)return Zi("wrong badgePosition",t)}else s.badgePosition=`top-${s.position.indexOf("left")!==-1?"right":"left"}`;s.meta.uid=c.meta.uid,s.meta.badge=c.meta.badge+1,s.meta.badgeClass=`q-notification__badge q-notification__badge--${s.badgePosition}`+(s.badgeColor!==void 0?` bg-${s.badgeColor}`:"")+(s.badgeTextColor!==void 0?` text-${s.badgeTextColor}`:"")+(s.badgeClass?` ${s.badgeClass}`:"");const u=_n[s.position].value.indexOf(c);_n[s.position].value[u]=yl[s.meta.group]=s}}const l=()=>{VM(s),r=void 0};if(s.timeout>0&&(s.meta.timer=setTimeout(()=>{s.meta.timer=void 0,l()},s.timeout+1e3)),s.group!==void 0)return c=>{c!==void 0?Zi("trying to update a grouped one which is forbidden",t):l()};if(r={dismiss:l,config:t,notif:s},n!==void 0){Object.assign(n,r);return}return c=>{if(r!==void 0)if(c===void 0)r.dismiss();else{const u=Object.assign({},r.config,c,{group:!1,position:s.position});_T(u,e,r)}}}function VM(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=_n[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete yl[t.meta.group];const n=gT[""+t.meta.uid];if(n){const{width:r,height:s}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=r,n.style.height=s}_n[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function ny(t){return t!=null&&DM.test(t)!==!0}function Zi(t,e){return console.error(`Notify: ${t}`,e),!1}function MM(){return Ct({name:"QNotifications",devtools:{hide:!0},setup(){return()=>W("div",{class:"q-notifications"},qf.map(t=>W(uS,{key:t,class:mT[t],tag:"div",name:`q-notification--${t}`},()=>_n[t].value.map(e=>{const n=e.meta,r=[];if(n.hasMedia===!0&&(e.spinner!==!1?r.push(W(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(W(lr,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(W(kM,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>W("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const l=[e.message];i=e.caption?[W("div",l),W("div",{class:"q-notification__caption"},[e.caption])]:l}r.push(W("div",o,i))}const s=[W("div",{class:n.contentClass},r)];return e.progress===!0&&s.push(W("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&s.push(W("div",{class:n.actionsClass},e.actions.map(i=>W(ld,i)))),n.badge>1&&s.push(W("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),W("div",{ref:i=>{gT[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[W("div",{class:n.wrapperClass},s)])}))))}})}const LM={setDefaults(t){yn(t)===!0&&Object.assign(_l,t)},registerType(t,e){yn(e)===!0&&(lo[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>_T(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){qf.forEach(r=>{_n[r]=Ce([]);const s=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",i=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${i}`;mT[r]=`q-notifications__list q-notifications__list--${s} fixed column no-wrap ${o}`});const n=Uf("q-notify");Lv(MM(),e).mount(n)}}},FM={config:{dark:"auto",brand:{primary:"#1976d2",secondary:"#9E3E3B",accent:"#3E3E3E",dark:"#1D1D1D",positive:"#2AC98C",negative:"#FF5252",info:"#2196F3",warning:"#FB8C00",background:"#161616",clcablue:"#00537C"}},iconSet:HO,plugins:{Dialog:PM,Notify:LM,Dark:bt}},UM="/clca-courier/";async function $M({app:t,router:e,store:n},r){let s=!1;const i=c=>{try{return e.resolve(c).href}catch{}return Object(c)===c?null:c},o=c=>{if(s=!0,typeof c=="string"&&/^https?:\/\//.test(c)){window.location.href=c;return}const u=i(c);u!==null&&(window.location.href=u)},l=window.location.href.replace(window.location.origin,"");for(let c=0;s===!1&&c<r.length;c++)try{await r[c]({app:t,router:e,store:n,ssrContext:null,redirect:o,urlPath:l,publicPath:UM})}catch(u){if(u&&u.url){o(u.url);return}console.error("[Quasar] boot error:",u);return}s!==!0&&(t.use(e),t.mount("#q-app"))}zO(Cv,FM).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",r=>r.map(s=>{if(s.status==="rejected"){console.error("[Quasar] boot error:",s.reason);return}return s.value.default})]:["all",r=>r.map(s=>s.default)];return Promise[e]([Be(()=>import("./i18n-BPaMdBR6.js"),__vite__mapDeps([85,19,20])),Be(()=>import("./axios-BIKo2XHT.js"),[]),Be(()=>import("./firebase-DsYJ9wjj.js"),__vite__mapDeps([86,1]))]).then(r=>{const s=n(r).filter(i=>typeof i=="function");$M(t,s)})});export{XL as $,WM as A,UI as B,jt as C,lr as D,GM as E,ld as F,_v as G,iI as H,ws as I,Gt as J,HM as K,My as L,QM as M,k0 as N,QS as O,XI as P,vM as Q,YO as R,Us as S,QO as T,$s as U,KO as V,XO as W,WO as X,mV as Y,Qt as Z,hr as _,Jt as a,JV as a$,OV as a0,Cy as a1,$L as a2,KS as a3,Yo as a4,KV as a5,XM as a6,kM as a7,K_ as a8,KM as a9,ZL as aA,JO as aB,ZO as aC,xV as aD,DV as aE,JL as aF,UV as aG,nT as aH,rT as aI,BL as aJ,Vo as aK,Dv as aL,xr as aM,Nl as aN,ZV as aO,cn as aP,Ff as aQ,zM as aR,Ki as aS,qu as aT,pl as aU,wr as aV,Mg as aW,gL as aX,yL as aY,x0 as aZ,zV as a_,YM as aa,TV as ab,Ji as ac,cc as ad,c_ as ae,GV as af,qL as ag,ML as ah,Cr as ai,vm as aj,$f as ak,eF as al,yn as am,kl as an,aT as ao,NL as ap,OL as aq,u_ as ar,PN as as,Ku as at,BM as au,P0 as av,IM as aw,UL as ax,TM as ay,JM as az,rL as b,bL as b$,mc as b0,Ky as b1,jE as b2,BS as b3,nL as b4,AM as b5,VL as b6,hy as b7,AI as b8,ot as b9,PL as bA,IL as bB,kL as bC,AL as bD,RL as bE,CL as bF,AN as bG,AS as bH,Mo as bI,jL as bJ,zL as bK,Vk as bL,dL as bM,fL as bN,uL as bO,hL as bP,mL as bQ,pL as bR,es as bS,Gk as bT,LL as bU,vL as bV,Or as bW,Vr as bX,Dr as bY,Nr as bZ,SN as b_,yc as ba,dt as bb,oM as bc,sM as bd,aM as be,dM as bf,fM as bg,ud as bh,Vs as bi,lM as bj,pa as bk,ma as bl,gV as bm,Be as bn,_L as bo,HL as bp,WL as bq,Kt as br,WI as bs,lL as bt,aL as bu,ZM as bv,BE as bw,Ih as bx,xL as by,SL as bz,Ct as c,EL as c0,TL as c1,wL as c2,ah as c3,NV as c4,kv as c5,GL as c6,KL as c7,WE as c8,KE as c9,RS as ca,kS as cb,tL as cc,PS as cd,eL as ce,Ry as cf,cd as cg,iL as ch,GO as ci,jM as cj,aV as ck,iM as cl,yM as cm,Pu as cn,Qy as co,Id as cp,gl as cq,wV as cr,M_ as cs,bV as ct,L_ as cu,sV as cv,cV as cw,Th as cx,FL as d,oL as e,q as f,et as g,W as h,DL as i,bn as j,sL as k,Pe as l,QL as m,Wr as n,Ns as o,el as p,Sd as q,Ce as r,ys as s,mn as t,YL as u,fc as v,We as w,Cl as x,Rl as y,uc as z};
