import{k as Re,ah as Xe,ai as We,h as Ge,r as A,c as N,aj as Te,ak as Fe,al as Je,d as Ne,o as Ve,I as Y,J as h,a6 as te,M as d,f as n,a5 as o,a3 as D,a7 as j,K as I,a4 as x,R as U,a2 as _,P as k,a8 as qe,af as Ke,N as z,am as et,F as de,a9 as ce,ag as xe,an as tt,$ as ze,ae as at,E as st,w as lt,aa as $,Q as nt,ad as rt,ab as ot}from"./index-DDm66URI.js";import{u as it,Q as Se}from"./useAdvancedSearch-g9y02jOW.js";import{Q as oe}from"./QSpace-RdkjzttB.js";import{Q as Z,u as ut}from"./usePdfViewer-D3PHhNKO.js";import{Q as se}from"./QSelect-C7R3kyp3.js";import{Q as R}from"./QChip-D9zTuX27.js";import{Q as dt}from"./QSlideTransition-XGKoz7st.js";import{u as ct,Q as mt}from"./use-quasar-DnrUhEV4.js";import{a as ft,u as vt}from"./site-store-simple-BllaRc6x.js";import{l as gt,g as ht,a as O}from"./lightweight-newsletter-service-N3_P_kRl.js";import{Q as pt,a as yt}from"./QBtnDropdown-z4468E6W.js";import{Q as ge,a as J,b as K}from"./QItem-DDt1hfY7.js";import{Q as wt}from"./QList-Dyy8tMi-.js";import{Q as ie}from"./QBadge-Byax9Z2T.js";import{C as bt}from"./ClosePopup-DWJ-Oc9i.js";import{p as F,c as Dt}from"./format-hlGAdIUH.js";import{_ as Qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QBtnGroup-Y3E2aR4E.js";import"./pdf-metadata-service-CsES0isO.js";import"./position-engine-BLFvuBSe.js";import"./selection-DY8u9fNx.js";import"./QMenu-CdApXZTA.js";import"./useUserSettings-BbY-dedZ.js";const _t='<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>',Mt=Re({name:"QSpinnerHourglass",props:Xe,setup(e){const{cSize:t,classes:l}=We(e);return()=>Ge("svg",{class:l.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:_t})}});function kt(){const e=A([]),t=A(!1),l=A(null),s=A(null),r=async()=>{try{t.value=!0,l.value=null,console.log("[useHybridNewsletters] Loading newsletters...");const w=await gt.getNewsletters();e.value=w,s.value={totalNewsletters:w.length,sourceCounts:{local:w.length,drive:0,hybrid:0},cacheSize:0,lastUpdated:new Date().toISOString()},console.log(`[useHybridNewsletters] Loaded ${w.length} newsletters`)}catch(w){console.error("[useHybridNewsletters] Error loading newsletters:",w),l.value="Failed to load newsletters"}finally{t.value=!1}},i=w=>{const V=[];return w.url.includes("/issues/")&&V.push({type:"local",url:w.url,available:!0}),w.url.includes("drive.google.com")&&V.push({type:"drive",url:w.url,available:!0}),V},S=w=>w.url,g=w=>w.url,p=w=>w.url.includes("/issues/"),Q=w=>w.url.includes("drive.google.com"),c=w=>w.isProcessed,f=async()=>{await r()},T=N(()=>{const w={};e.value.forEach(q=>{const H=q.date?new Date(q.date).getFullYear().toString():"Unknown";w[H]||(w[H]=[]),w[H].push(q)});const V=Object.keys(w).sort((q,H)=>q==="Unknown"?1:H==="Unknown"?-1:parseInt(H)-parseInt(q)),L={};return V.forEach(q=>{const H=w[q];H&&(L[q]=H.sort((P,E)=>P.date?E.date?new Date(E.date).getTime()-new Date(P.date).getTime():-1:1))}),L}),C=N(()=>e.value.slice().sort((w,V)=>w.date?V.date?new Date(V.date).getTime()-new Date(w.date).getTime():-1:1).slice(0,5)),y=N(()=>{const w={newsletter:[],special:[],annual:[]};return e.value.forEach(V=>{const L=V.contentType||"newsletter";w[L]&&w[L].push(V)}),w});return{newsletters:e,loading:t,error:l,serviceStats:s,loadNewsletters:r,getNewsletterSources:i,getWebViewUrl:S,getDownloadUrl:g,hasLocalSource:p,hasDriveSource:Q,hasHybridSources:c,refresh:f,newslettersByYear:T,recentNewsletters:C,newslettersByContentType:y}}const He=864e5,xt=36e5,ye=6e4,Ie="YYYY-MM-DDTHH:mm:ss.SSSZ",St=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ct=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,he={};function Yt(e,t){const l="("+t.days.join("|")+")",s=e+l;if(he[s]!==void 0)return he[s];const r="("+t.daysShort.join("|")+")",i="("+t.months.join("|")+")",S="("+t.monthsShort.join("|")+")",g={};let p=0;const Q=e.replace(Ct,f=>{switch(p++,f){case"YY":return g.YY=p,"(-?\\d{1,2})";case"YYYY":return g.YYYY=p,"(-?\\d{1,4})";case"M":return g.M=p,"(\\d{1,2})";case"Mo":return g.M=p++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return g.M=p,"(\\d{2})";case"MMM":return g.MMM=p,S;case"MMMM":return g.MMMM=p,i;case"D":return g.D=p,"(\\d{1,2})";case"Do":return g.D=p++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return g.D=p,"(\\d{2})";case"H":return g.H=p,"(\\d{1,2})";case"HH":return g.H=p,"(\\d{2})";case"h":return g.h=p,"(\\d{1,2})";case"hh":return g.h=p,"(\\d{2})";case"m":return g.m=p,"(\\d{1,2})";case"mm":return g.m=p,"(\\d{2})";case"s":return g.s=p,"(\\d{1,2})";case"ss":return g.s=p,"(\\d{2})";case"S":return g.S=p,"(\\d{1})";case"SS":return g.S=p,"(\\d{2})";case"SSS":return g.S=p,"(\\d{3})";case"A":return g.A=p,"(AM|PM)";case"a":return g.a=p,"(am|pm)";case"aa":return g.aa=p,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return l;case"Q":case"d":case"E":return"(\\d{1})";case"do":return p++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return p++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return p++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return g.Z=p,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return g.ZZ=p,"(Z|[+-]\\d{2}\\d{2})";case"X":return g.X=p,"(-?\\d+)";case"x":return g.x=p,"(-?\\d{4,})";default:return p--,f[0]==="["&&(f=f.substring(1,f.length-1)),f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:g,regex:new RegExp("^"+Q)};return he[s]=c,c}function Ae(e,t){return e!==void 0?e:t!==void 0?t.date:Je.date}function Ce(e,t=""){const l=e>0?"-":"+",s=Math.abs(e),r=Math.floor(s/60),i=s%60;return l+F(r)+t+F(i)}function $t(e,t,l){let s=e.getFullYear(),r=e.getMonth();const i=e.getDate();return t.year!==void 0&&(s+=l*t.year,delete t.year),t.month!==void 0&&(r+=l*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(s),e.setMonth(r),e.setDate(Math.min(i,be(e))),t.date!==void 0&&(e.setDate(e.getDate()+l*t.date),delete t.date),e}function Tt(e,t,l){const s=t.year!==void 0?t.year:e[`get${l}FullYear`](),r=t.month!==void 0?t.month-1:e[`get${l}Month`](),i=new Date(s,r+1,0).getDate(),S=Math.min(i,t.date!==void 0?t.date:e[`get${l}Date`]());return e[`set${l}Date`](1),e[`set${l}Month`](2),e[`set${l}FullYear`](s),e[`set${l}Month`](r),e[`set${l}Date`](S),delete t.year,delete t.month,delete t.date,e}function we(e,t,l){const s=Le(t),r=new Date(e),i=s.year!==void 0||s.month!==void 0||s.date!==void 0?$t(r,s,l):r;for(const S in s){const g=Dt(S);i[`set${g}`](i[`get${g}`]()+l*s[S])}return i}function Le(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function Oe(e,t,l){const s=Le(t),r=l===!0?"UTC":"",i=new Date(e),S=s.year!==void 0||s.month!==void 0||s.date!==void 0?Tt(i,s,r):i;for(const g in s){const p=g.charAt(0).toUpperCase()+g.slice(1);S[`set${r}${p}`](s[g])}return S}function Ft(e,t,l){const s=Nt(e,t,l),r=new Date(s.year,s.month===null?null:s.month-1,s.day===null?1:s.day,s.hour,s.minute,s.second,s.millisecond),i=r.getTimezoneOffset();return s.timezoneOffset===null||s.timezoneOffset===i?r:we(r,{minutes:s.timezoneOffset-i},1)}function Nt(e,t,l,s,r){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(e==null||e===""||typeof e!="string")return i;t===void 0&&(t=Ie);const S=Ae(l,Te.props),g=S.months,p=S.monthsShort,{regex:Q,map:c}=Yt(t,S),f=e.match(Q);if(f===null)return i;let T="";if(c.X!==void 0||c.x!==void 0){const C=parseInt(f[c.X!==void 0?c.X:c.x],10);if(isNaN(C)===!0||C<0)return i;const y=new Date(C*(c.X!==void 0?1e3:1));i.year=y.getFullYear(),i.month=y.getMonth()+1,i.day=y.getDate(),i.hour=y.getHours(),i.minute=y.getMinutes(),i.second=y.getSeconds(),i.millisecond=y.getMilliseconds()}else{if(c.YYYY!==void 0)i.year=parseInt(f[c.YYYY],10);else if(c.YY!==void 0){const C=parseInt(f[c.YY],10);i.year=C<0?C:2e3+C}if(c.M!==void 0){if(i.month=parseInt(f[c.M],10),i.month<1||i.month>12)return i}else c.MMM!==void 0?i.month=p.indexOf(f[c.MMM])+1:c.MMMM!==void 0&&(i.month=g.indexOf(f[c.MMMM])+1);if(c.D!==void 0){if(i.day=parseInt(f[c.D],10),i.year===null||i.month===null||i.day<1)return i;const C=new Date(i.year,i.month,0).getDate();if(i.day>C)return i}c.H!==void 0?i.hour=parseInt(f[c.H],10)%24:c.h!==void 0&&(i.hour=parseInt(f[c.h],10)%12,(c.A&&f[c.A]==="PM"||c.a&&f[c.a]==="pm"||c.aa&&f[c.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),c.m!==void 0&&(i.minute=parseInt(f[c.m],10)%60),c.s!==void 0&&(i.second=parseInt(f[c.s],10)%60),c.S!==void 0&&(i.millisecond=parseInt(f[c.S],10)*10**(3-f[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(T=c.Z!==void 0?f[c.Z].replace(":",""):f[c.ZZ],i.timezoneOffset=(T[0]==="+"?-1:1)*(60*T.slice(1,3)+1*T.slice(3,5)))}return i.dateHash=F(i.year,4)+"/"+F(i.month)+"/"+F(i.day),i.timeHash=F(i.hour)+":"+F(i.minute)+":"+F(i.second)+T,i}function Vt(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function qt(e,t){return Oe(new Date,e,t)}function zt(e){const t=new Date(e).getDay();return t===0?7:t}function me(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const l=new Date(t.getFullYear(),0,4);l.setDate(l.getDate()-(l.getDay()+6)%7+3);const s=t.getTimezoneOffset()-l.getTimezoneOffset();t.setHours(t.getHours()-s);const r=(t-l)/(He*7);return 1+Math.floor(r)}function Qt(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function pe(e,t){const l=new Date(e);return t===!0?Qt(l):l.getTime()}function Ht(e,t,l,s={}){const r=pe(t,s.onlyDate),i=pe(l,s.onlyDate),S=pe(e,s.onlyDate);return(S>r||s.inclusiveFrom===!0&&S===r)&&(S<i||s.inclusiveTo===!0&&S===i)}function It(e,t){return we(e,t,1)}function At(e,t){return we(e,t,-1)}function B(e,t,l){const s=new Date(e),r=`set${l===!0?"UTC":""}`;switch(t){case"year":case"years":s[`${r}Month`](0);case"month":case"months":s[`${r}Date`](1);case"day":case"days":case"date":s[`${r}Hours`](0);case"hour":case"hours":s[`${r}Minutes`](0);case"minute":case"minutes":s[`${r}Seconds`](0);case"second":case"seconds":s[`${r}Milliseconds`](0)}return s}function Lt(e,t,l){const s=new Date(e),r=`set${l===!0?"UTC":""}`;switch(t){case"year":case"years":s[`${r}Month`](11);case"month":case"months":s[`${r}Date`](be(s));case"day":case"days":case"date":s[`${r}Hours`](23);case"hour":case"hours":s[`${r}Minutes`](59);case"minute":case"minutes":s[`${r}Seconds`](59);case"second":case"seconds":s[`${r}Milliseconds`](999)}return s}function Ot(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(l=>{t=Math.max(t,new Date(l))}),t}function Et(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(l=>{t=Math.min(t,new Date(l))}),t}function ue(e,t,l){return(e.getTime()-e.getTimezoneOffset()*ye-(t.getTime()-t.getTimezoneOffset()*ye))/l}function Ee(e,t,l="days"){const s=new Date(e),r=new Date(t);switch(l){case"years":case"year":return s.getFullYear()-r.getFullYear();case"months":case"month":return(s.getFullYear()-r.getFullYear())*12+s.getMonth()-r.getMonth();case"days":case"day":case"date":return ue(B(s,"day"),B(r,"day"),He);case"hours":case"hour":return ue(B(s,"hour"),B(r,"hour"),xt);case"minutes":case"minute":return ue(B(s,"minute"),B(r,"minute"),ye);case"seconds":case"second":return ue(B(s,"second"),B(r,"second"),1e3)}}function fe(e){return Ee(e,B(e,"year"),"days")+1}function Pt(e){return Fe(e)===!0?"date":typeof e=="number"?"number":"string"}function Ut(e,t,l){const s=new Date(e);if(t){const r=new Date(t);if(s<r)return r}if(l){const r=new Date(l);if(s>r)return r}return s}function Zt(e,t,l){const s=new Date(e),r=new Date(t);if(l===void 0)return s.getTime()===r.getTime();switch(l){case"second":case"seconds":if(s.getSeconds()!==r.getSeconds())return!1;case"minute":case"minutes":if(s.getMinutes()!==r.getMinutes())return!1;case"hour":case"hours":if(s.getHours()!==r.getHours())return!1;case"day":case"days":case"date":if(s.getDate()!==r.getDate())return!1;case"month":case"months":if(s.getMonth()!==r.getMonth())return!1;case"year":case"years":if(s.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${l}`)}return!0}function be(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function ee(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ye={YY(e,t,l){const s=this.YYYY(e,t,l)%100;return s>=0?F(s):"-"+F(Math.abs(s))},YYYY(e,t,l){return l??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return ee(e.getMonth()+1)},MM(e){return F(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return ee(this.Q(e))},D(e){return e.getDate()},Do(e){return ee(e.getDate())},DD(e){return F(e.getDate())},DDD(e){return fe(e)},DDDo(e){return ee(fe(e))},DDDD(e){return F(fe(e),3)},d(e){return e.getDay()},do(e){return ee(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return me(e)},wo(e){return ee(me(e))},ww(e){return F(me(e))},H(e){return e.getHours()},HH(e){return F(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return F(this.h(e))},m(e){return e.getMinutes()},mm(e){return F(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return F(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return F(Math.floor(e.getMilliseconds()/10))},SSS(e){return F(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,l,s){const r=s??e.getTimezoneOffset();return Ce(r,":")},ZZ(e,t,l,s){const r=s??e.getTimezoneOffset();return Ce(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Bt(e,t,l,s,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const i=new Date(e);if(isNaN(i))return;t===void 0&&(t=Ie);const S=Ae(l,Te.props);return t.replace(St,(g,p)=>g in Ye?Ye[g](i,S,s,r):p===void 0?g:p.split("\\]").join("]"))}function jt(e){return Fe(e)===!0?new Date(e.getTime()):e}const Rt={isValid:Vt,extractDate:Ft,buildDate:qt,getDayOfWeek:zt,getWeekOfYear:me,isBetweenDates:Ht,addToDate:It,subtractFromDate:At,adjustDate:Oe,startOfDate:B,endOfDate:Lt,getMaxDate:Ot,getMinDate:Et,getDateDiff:Ee,getDayOfYear:fe,inferDateFormat:Pt,getDateBetween:Ut,isSameDate:Zt,daysInMonth:be,formatDate:Bt,clone:jt};async function Xt(e){try{const t=await fetch(e,{method:"HEAD",cache:"no-cache"});if(!t.ok)return{isValid:!1,error:`HTTP ${t.status}: ${t.statusText}`};const l=t.headers.get("content-type");if(l&&!l.includes("application/pdf"))return{isValid:!1,error:`Invalid content type: ${l}`};const s=t.headers.get("content-length"),r=s?parseInt(s,10):void 0;return r&&r<1024?{isValid:!1,error:"File is too small to be a valid PDF"}:{isValid:!0,...r!==void 0&&{size:r}}}catch(t){return{isValid:!1,error:t instanceof Error?t.message:"Network error"}}}const Wt={class:"row items-start justify-between"},Gt={class:"col-12"},Jt={class:"text-h6 q-mb-xs line-clamp-2 text-break"},Kt={class:"text-subtitle2 text-grey-6"},ea={class:"thumbnail-container"},ta={class:"absolute-full newsletter-overlay flex flex-center"},aa={class:"absolute-full newsletter-overlay flex flex-center"},sa={key:0,class:"absolute-full flex flex-center bg-black-50"},la={key:2,class:"fallback-thumbnail rounded-borders newsletter-thumbnail flex flex-center column"},na={class:"text-caption text-grey-6 q-mt-sm"},ra={class:"text-caption text-grey-7"},oa={class:"absolute-full newsletter-overlay flex flex-center"},ia={class:"absolute-bottom-right q-pa-sm"},ua={class:"row items-center justify-between text-body2 text-grey-7"},da={class:"col-12"},ca={class:"row items-center q-gutter-md"},ma={key:0,class:"flex items-center no-wrap"},fa={class:"text-nowrap"},va={key:1,class:"flex items-center no-wrap"},ga={class:"text-nowrap"},ha={key:0,class:"q-mt-sm"},pa={class:"row q-gutter-xs"},ya={class:"q-gutter-sm"},wa={key:0},ba={key:1},Da={key:2},_a={key:3},Ma={key:4},ka={class:"q-mt-xs q-gutter-xs"},xa={key:5},Sa={class:"q-mt-xs"},Ca=Ne({__name:"AdvancedNewsletterCard",props:{newsletter:{},showSourceIndicators:{type:Boolean,default:!1}},setup(e){const t=e,l=ct(),s=A(!1),{getThumbnail:r,regenerateThumbnail:i}=ft(),S=ut(),g=A(null),p=A(!1),Q=A({local:!1,generated:!1}),c=A({localFileExists:null,isValidating:!1,lastChecked:null}),f=N(()=>t.newsletter.url&&t.newsletter.url.includes("/issues/")),T=N(()=>t.newsletter.url&&t.newsletter.url.includes("drive.google.com")),C=N(()=>f.value&&!g.value&&!p.value),y=N(()=>{if(t.newsletter.thumbnailUrl)return t.newsletter.thumbnailUrl;if(f.value){const v=t.newsletter.filename.replace(".pdf",".jpg");return ht(`thumbnails/${v}`)}return null}),w=N(()=>f.value?"View Newsletter":T.value?"View from Cloud":"Newsletter not available"),V=N(()=>{const m=t.newsletter.pages;return m&&m>0?m:null}),L=N(()=>t.newsletter.fileSize||null),q=m=>{try{const v=new Date(m);return Rt.formatDate(v,"MMMM YYYY")}catch{return m}},H=()=>{O.debug("Local thumbnail failed to load, trying generation"),Q.value.local=!0,C.value&&P()},P=async()=>{if(!(!f.value||p.value))try{p.value=!0,O.debug("Generating thumbnail for:",t.newsletter.title);const m=await i(t.newsletter.url);m?(g.value=m,O.success("Generated thumbnail for:",t.newsletter.title)):(Q.value.generated=!0,O.warn("Failed to generate thumbnail for:",t.newsletter.title))}catch(m){O.error("Error generating thumbnail:",m),Q.value.generated=!0}finally{p.value=!1}},E=()=>{if(t.newsletter.url){console.log("Opening PDF with URL:",t.newsletter.url),console.log("Newsletter data:",t.newsletter),S.openDocument({id:t.newsletter.id,title:t.newsletter.title,date:t.newsletter.date,pages:t.newsletter.pages||0,url:t.newsletter.url,filename:t.newsletter.filename});return}O.warn("No source available for viewing:",t.newsletter.title),l.notify({type:"warning",message:"Newsletter not available for viewing",caption:"This newsletter is currently not available in local storage or cloud.",icon:"warning",position:"bottom",timeout:3e3})},le=()=>{if(!T.value){O.warn("No Google Drive source available");return}window.open(t.newsletter.url,"_blank")},ne=()=>{if(!f.value){O.warn("No local source available for download");return}const m=document.createElement("a");m.href=t.newsletter.url,m.download=t.newsletter.filename,document.body.appendChild(m),m.click(),document.body.removeChild(m)},ve=async()=>{try{const m=f.value?`${window.location.origin}/archive?view=${t.newsletter.filename}`:t.newsletter.url;await navigator.clipboard.writeText(m),l.notify({type:"positive",message:"Link copied to clipboard!",position:"bottom"})}catch(m){O.error("Failed to copy link:",m),l.notify({type:"negative",message:"Failed to copy link",position:"bottom"})}},W=async()=>{if(!f.value)return c.value.localFileExists=!1,!1;if(c.value.isValidating)return c.value.localFileExists||!1;c.value.isValidating=!0;try{const m=await Xt(t.newsletter.url);return c.value.localFileExists=m.isValid,c.value.lastChecked=new Date,m.isValid?O.debug(`Local file validated successfully for ${t.newsletter.filename}`):O.warn(`Local file validation failed for ${t.newsletter.filename}:`,m.error),m.isValid}catch(m){return O.error("Error validating local file:",m),c.value.localFileExists=!1,!1}finally{c.value.isValidating=!1}};return Ve(async()=>{if(f.value&&c.value.localFileExists===null&&await W(),f.value&&!y.value)try{const m=await r(t.newsletter.url);m&&(g.value=m)}catch{O.debug("No cached thumbnail found for:",t.newsletter.title)}}),(m,v)=>(h(),Y(te,{class:"newsletter-card full-height",flat:""},{default:d(()=>[n(j,{class:"q-pb-sm"},{default:d(()=>[o("div",Wt,[o("div",Gt,[o("div",Jt,D(m.newsletter.title),1),o("div",Kt,D(q(m.newsletter.date)),1)])])]),_:1}),n(j,{class:"q-pa-sm"},{default:d(()=>[o("div",ea,[o("div",{class:I(["newsletter-thumbnail-wrapper",{"no-sources":!f.value&&!T.value}]),onClick:E},[y.value&&!Q.value.local?(h(),Y(pt,{key:0,src:y.value,alt:`${m.newsletter.title} cover`,class:"rounded-borders newsletter-thumbnail",loading:"lazy",fit:"cover",ratio:1/1.3,onError:H},{default:d(()=>[o("div",ta,[n(U,{round:"",color:"primary",icon:"visibility",size:"lg",class:"overlay-btn"},{default:d(()=>[n(Z,null,{default:d(()=>[_(D(w.value),1)]),_:1})]),_:1})])]),_:1},8,["src","alt"])):g.value&&!Q.value.generated?(h(),x("div",{key:1,class:"generated-thumbnail rounded-borders newsletter-thumbnail",style:Ke({backgroundImage:`url(${g.value})`})},[o("div",aa,[n(U,{round:"",color:"primary",icon:"visibility",size:"lg",class:"overlay-btn"},{default:d(()=>[n(Z,null,{default:d(()=>[_(D(w.value),1)]),_:1})]),_:1})]),p.value?(h(),x("div",sa,[n(qe,{color:"white",size:"2rem"})])):k("",!0)],4)):(h(),x("div",la,[n(z,{name:"description",size:"3rem",class:"text-grey-5"}),o("div",na,D(m.newsletter.title),1),o("div",ra,D(q(m.newsletter.date)),1),o("div",oa,[n(U,{round:"",color:"primary",icon:"visibility",size:"lg",class:"overlay-btn"},{default:d(()=>[n(Z,null,{default:d(()=>[_(D(w.value),1)]),_:1})]),_:1})]),o("div",ia,[C.value&&!p.value?(h(),Y(U,{key:0,round:"",size:"sm",color:"secondary",icon:"auto_awesome",onClick:et(P,["stop"]),class:"generate-thumb-btn"},{default:d(()=>[n(Z,null,{default:d(()=>v[2]||(v[2]=[_("Generate Thumbnail",-1)])),_:1,__:[2]})]),_:1})):k("",!0)])]))],2)])]),_:1}),n(j,{class:"q-py-sm"},{default:d(()=>[o("div",ua,[o("div",da,[o("div",ca,[V.value?(h(),x("div",ma,[n(z,{name:"description",size:"sm",class:"q-mr-xs"}),o("span",fa,D(V.value)+" pages",1)])):k("",!0),L.value?(h(),x("div",va,[n(z,{name:"storage",size:"sm",class:"q-mr-xs"}),o("span",ga,D(L.value),1)])):k("",!0)])])]),m.newsletter.topics&&m.newsletter.topics.length>0?(h(),x("div",ha,[o("div",pa,[(h(!0),x(de,null,ce(m.newsletter.topics.slice(0,3),X=>(h(),Y(R,{key:X,dense:"",size:"sm",outline:"",color:"primary",class:"text-caption"},{default:d(()=>[_(D(X),1)]),_:2},1024))),128)),m.newsletter.topics.length>3?(h(),Y(R,{key:0,dense:"",size:"sm",outline:"",color:"grey",class:"text-caption"},{default:d(()=>[_(" +"+D(m.newsletter.topics.length-3)+" more ",1)]),_:1})):k("",!0)])])):k("",!0)]),_:1}),n(xe,{align:"around",class:"q-pt-none"},{default:d(()=>[f.value?(h(),Y(U,{key:0,flat:"",color:"primary",icon:"visibility",label:"View",size:"sm",onClick:E,class:"col"},{default:d(()=>[n(Z,null,{default:d(()=>v[3]||(v[3]=[_("View in PDF viewer",-1)])),_:1,__:[3]})]),_:1})):k("",!0),T.value?(h(),Y(U,{key:1,flat:"",color:"info",icon:"cloud_download",label:f.value?"High Quality":"Download",size:"sm",onClick:le,class:"col"},{default:d(()=>[n(Z,null,{default:d(()=>v[4]||(v[4]=[_("Download from Google Drive",-1)])),_:1,__:[4]})]),_:1},8,["label"])):k("",!0),f.value&&!T.value?(h(),Y(U,{key:2,flat:"",color:"secondary",icon:"download",label:"Download",size:"sm",onClick:ne,class:"col"},{default:d(()=>[n(Z,null,{default:d(()=>v[5]||(v[5]=[_("Download local version",-1)])),_:1,__:[5]})]),_:1})):k("",!0),T.value&&!f.value?(h(),Y(U,{key:3,flat:"",color:"primary",icon:"open_in_new",label:"View",size:"sm",onClick:le,class:"col"},{default:d(()=>[n(Z,null,{default:d(()=>v[6]||(v[6]=[_("View in Google Drive",-1)])),_:1,__:[6]})]),_:1})):k("",!0),n(yt,{flat:"",color:"grey-7",icon:"more_vert","dropdown-icon":"","auto-close":"",class:"col-auto"},{default:d(()=>[n(wt,null,{default:d(()=>[n(ge,{clickable:"",onClick:v[0]||(v[0]=X=>s.value=!0)},{default:d(()=>[n(J,{avatar:""},{default:d(()=>[n(z,{name:"info"})]),_:1}),n(J,null,{default:d(()=>[n(K,null,{default:d(()=>v[7]||(v[7]=[_("Details",-1)])),_:1,__:[7]}),n(K,{caption:""},{default:d(()=>v[8]||(v[8]=[_("View metadata and info",-1)])),_:1,__:[8]})]),_:1})]),_:1}),n(ge,{clickable:"",onClick:ve},{default:d(()=>[n(J,{avatar:""},{default:d(()=>[n(z,{name:"link"})]),_:1}),n(J,null,{default:d(()=>[n(K,null,{default:d(()=>v[9]||(v[9]=[_("Copy Link",-1)])),_:1,__:[9]}),n(K,{caption:""},{default:d(()=>v[10]||(v[10]=[_("Copy shareable URL",-1)])),_:1,__:[10]})]),_:1})]),_:1}),f.value?(h(),Y(ge,{key:0,clickable:"",onClick:W,disable:c.value.isValidating},{default:d(()=>[n(J,{avatar:""},{default:d(()=>[n(z,{name:c.value.isValidating?"hourglass_empty":"refresh"},null,8,["name"])]),_:1}),n(J,null,{default:d(()=>[n(K,null,{default:d(()=>[_(D(c.value.isValidating?"Checking...":"Check Availability"),1)]),_:1}),n(K,{caption:""},{default:d(()=>v[11]||(v[11]=[_("Verify if local file still exists",-1)])),_:1,__:[11]})]),_:1})]),_:1},8,["disable"])):k("",!0)]),_:1})]),_:1})]),_:1}),n(at,{modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=X=>s.value=X)},{default:d(()=>[n(te,{style:{"min-width":"350px"}},{default:d(()=>[n(j,{class:"row items-center"},{default:d(()=>[n(tt,{icon:"info",color:"primary","text-color":"white"}),v[12]||(v[12]=o("span",{class:"q-ml-sm text-h6"},"Newsletter Details",-1))]),_:1,__:[12]}),n(j,null,{default:d(()=>[o("div",ya,[o("div",null,[v[13]||(v[13]=o("strong",null,"Title:",-1)),_(" "+D(m.newsletter.title),1)]),o("div",null,[v[14]||(v[14]=o("strong",null,"Date:",-1)),_(" "+D(q(m.newsletter.date)),1)]),V.value?(h(),x("div",wa,[v[15]||(v[15]=o("strong",null,"Pages:",-1)),_(" "+D(V.value),1)])):k("",!0),o("div",null,[v[16]||(v[16]=o("strong",null,"Filename:",-1)),_(" "+D(m.newsletter.filename),1)]),L.value?(h(),x("div",ba,[v[17]||(v[17]=o("strong",null,"File Size:",-1)),_(" "+D(L.value),1)])):k("",!0),m.newsletter.date?(h(),x("div",Da,[v[18]||(v[18]=o("strong",null,"Published:",-1)),_(" "+D(q(m.newsletter.date)),1)])):k("",!0),m.newsletter.topics?.length?(h(),x("div",_a,[v[19]||(v[19]=o("strong",null,"Topics:",-1)),_(" "+D(m.newsletter.topics.join(", ")),1)])):k("",!0),f.value||T.value?(h(),x("div",Ma,[v[22]||(v[22]=o("strong",null,"Available Sources:",-1)),o("div",ka,[f.value?(h(),Y(R,{key:0,dense:"",size:"sm",color:"primary","text-color":"white"},{default:d(()=>[v[20]||(v[20]=_(" Local ",-1)),c.value.lastChecked?(h(),Y(Z,{key:0},{default:d(()=>[_(" Last verified: "+D(c.value.lastChecked.toLocaleTimeString()),1)]),_:1})):k("",!0)]),_:1,__:[20]})):k("",!0),T.value?(h(),Y(R,{key:1,dense:"",size:"sm",color:"secondary","text-color":"white"},{default:d(()=>v[21]||(v[21]=[_("Google Drive",-1)])),_:1,__:[21]})):k("",!0)])])):k("",!0),f.value?(h(),x("div",xa,[v[23]||(v[23]=o("strong",null,"Local File Status:",-1)),o("div",Sa,[c.value.isValidating?(h(),Y(ie,{key:0,color:"orange",icon:"hourglass_empty",label:"Checking..."})):c.value.localFileExists===!0?(h(),Y(ie,{key:1,color:"green",icon:"check_circle",label:"Available"})):c.value.localFileExists===!1?(h(),Y(ie,{key:2,color:"red",icon:"error",label:"Not found"})):(h(),Y(ie,{key:3,color:"grey",icon:"help",label:"Not checked"}))])])):k("",!0)])]),_:1}),n(xe,{align:"right"},{default:d(()=>[ze(n(U,{flat:"",label:"Close",color:"primary"},null,512),[[bt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),$e=Qe(Ca,[["__scopeId","data-v-57344c1c"]]),Ya={class:"q-pa-md"},$a={class:"row justify-center"},Ta={class:"col-12"},Fa={class:"text-h4 q-mb-md"},Na={key:0,class:"q-mt-md"},Va={class:"row q-gutter-md text-center"},qa={class:"col"},za={class:"text-h6 text-primary"},Qa={class:"col"},Ha={class:"text-h6 text-positive"},Ia={class:"col"},Aa={class:"text-h6 text-info"},La={class:"col"},Oa={class:"text-h6 text-secondary"},Ea={class:"row items-center q-mb-md"},Pa={key:0,class:"text-caption text-grey-6"},Ua={key:1,class:"text-caption text-primary"},Za={class:"row q-gutter-md q-mb-md"},Ba={class:"col-12 col-md-8"},ja={key:0,class:"text-caption text-grey-6 q-mt-xs"},Ra={class:"col-12 col-md-4"},Xa={class:"text-subtitle2 q-mb-md text-weight-medium"},Wa={class:"row q-gutter-md q-mb-md"},Ga={class:"col-12 col-sm-6 col-md-3"},Ja={class:"col-12 col-sm-6 col-md-3"},Ka={class:"col-12 col-sm-6 col-md-3"},es={class:"col-12 col-sm-6 col-md-3"},ts={class:"row items-center"},as={key:0,class:"q-gutter-xs"},ss={class:"row items-center q-mt-md"},ls={key:0,class:"text-weight-medium"},ns={key:0,class:"row justify-center q-pa-lg"},rs={class:"text-h6"},os={class:"q-mb-none"},is={key:2,class:"text-center q-pa-lg"},us={key:3,class:"newsletter-grid"},ds={class:"row q-gutter-md"},cs={key:4},ms={class:"row items-center"},fs={class:"text-h5 text-primary"},vs={class:"newsletter-grid"},gs={class:"row q-gutter-md"},hs=Ne({__name:"AdvancedIssueArchivePage",setup(e){const t=vt(),l=kt(),{isSearching:s,searchResults:r,searchStats:i,performSearch:S,clearSearch:g,updateFilters:p}=it(),Q=A(!1),c=A(!1),f=A(""),T=A("date-desc"),C=A(!0),y=st({year:null,availability:null,pageCount:null,actions:null}),w=[{label:"Newest First",value:"date-desc"},{label:"Oldest First",value:"date-asc"},{label:"Title A-Z",value:"title-asc"},{label:"Title Z-A",value:"title-desc"},{label:"Most Pages",value:"pages-desc"},{label:"Fewest Pages",value:"pages-asc"}],V=[{label:"Web Viewable",value:"viewable"},{label:"Downloadable",value:"downloadable"},{label:"Local Files Only",value:"local-only"},{label:"Cloud Files Only",value:"cloud-only"},{label:"Multiple Sources",value:"multi-source"}],L=[{label:"1-5 pages",value:"1-5"},{label:"6-10 pages",value:"6-10"},{label:"11-20 pages",value:"11-20"},{label:"20+ pages",value:"20+"}],q=[{label:"Can View Online",value:"view"},{label:"Can Download",value:"download"},{label:"Can Search Within",value:"search"},{label:"Has Thumbnail",value:"thumbnail"}],H=N(()=>t.isDarkMode?"bg-dark text-white q-dark":"bg-white text-dark"),P=N(()=>t.isDarkMode?"text-grey-4":"text-grey-7"),E=N(()=>l.newsletters.value),le=N(()=>l.loading.value),ne=N(()=>l.error.value),ve=N(()=>{const b=new Set;return E.value.forEach(a=>{const u=new Date(a.date),M=isNaN(u.getTime())?new Date().getFullYear():u.getFullYear();b.add(M)}),Array.from(b).sort((a,u)=>u-a).map(a=>({label:a.toString(),value:a}))}),W=N(()=>!!(y.year||y.availability||y.pageCount||y.actions)),m=b=>b.url&&b.url.includes("/issues/"),v=b=>b.url&&b.url.includes("drive.google.com"),X=b=>b.map((a,u)=>{const M={id:u+1,title:a.title,date:a.date,pages:a.pages||0,filename:a.filename,status:m(a)&&v(a)?"hybrid":m(a)?"local":"google-drive",syncStatus:"synced"},G=a.url;return G&&(M.url=G),a.topics&&(M.description=a.topics.join(", ")),a.fileSize&&(M.fileSize=a.fileSize),a.thumbnailUrl&&(M.thumbnailUrl=a.thumbnailUrl),a.contentType&&(M.category=a.contentType),m(a)&&(M.localUrl=a.url),v(a)&&(M.googleDriveUrl=a.url),M});let De;const Pe=b=>{clearTimeout(De),De=setTimeout(()=>{if(C.value&&b.trim()){p({query:b.trim()});const a=X(E.value);S(a,b)}else b.trim()||g()},300)};lt(f,b=>{Pe(b)});const re=N(()=>{if(C.value&&r.value.length>0)return r.value.map(a=>E.value.find(M=>M.filename===a.filename)||{id:a.id,title:a.title,date:a.date,pages:a.pages,filename:a.filename,url:a.url||"",contentType:a.category,fileSize:a.fileSize,thumbnailUrl:a.thumbnailUrl,topics:a.description?.split(", ").filter(Boolean)||[],isProcessed:!1,isProcessing:!1});if(C.value&&!f.value.trim())return E.value;let b=[...E.value];if(f.value.trim()){const a=f.value.toLowerCase();b=b.filter(u=>u.title.toLowerCase().includes(a)||u.filename.toLowerCase().includes(a)||u.topics&&u.topics.some(M=>M.toLowerCase().includes(a)))}return y.year&&(b=b.filter(a=>{const u=new Date(a.date);return(isNaN(u.getTime())?new Date().getFullYear():u.getFullYear())===y.year})),y.availability&&(b=b.filter(a=>{const u=m(a),M=v(a);switch(y.availability){case"viewable":return u;case"downloadable":return u||M;case"local-only":return u&&!M;case"cloud-only":return M&&!u;case"multi-source":return u&&M;default:return!0}})),y.pageCount&&(b=b.filter(a=>{const u=a.pages||0;switch(y.pageCount){case"1-5":return u>=1&&u<=5;case"6-10":return u>=6&&u<=10;case"11-20":return u>=11&&u<=20;case"20+":return u>20;default:return!0}})),y.actions&&(b=b.filter(a=>{switch(y.actions){case"view":return m(a);case"download":return m(a)||v(a);case"search":return m(a);case"thumbnail":return!!a.thumbnailUrl;default:return!0}})),b}),_e=N(()=>{const b=[...re.value],[a,u]=T.value.split("-");return b.sort((M,G)=>{let ae=0;switch(a){case"date":{const Me=new Date(M.date),ke=new Date(G.date),Be=isNaN(Me.getTime())?0:Me.getTime(),je=isNaN(ke.getTime())?0:ke.getTime();ae=Be-je;break}case"title":ae=M.title.localeCompare(G.title);break;case"pages":ae=(M.pages||0)-(G.pages||0);break}return u==="desc"?-ae:ae})}),Ue=N(()=>{const b=new Map;return _e.value.forEach(a=>{const u=new Date(a.date),M=isNaN(u.getTime())?new Date().getFullYear():u.getFullYear();b.has(M)||b.set(M,[]),b.get(M).push(a)}),Array.from(b.entries()).map(([a,u])=>({year:a,issues:u})).sort((a,u)=>u.year-a.year)}),Ze=()=>{y.year=null,y.availability=null,y.pageCount=null,y.actions=null,f.value=""};return Ve(()=>{l.loadNewsletters()}),(b,a)=>(h(),Y(mt,{padding:""},{default:d(()=>[o("div",Ya,[o("div",$a,[o("div",Ta,[n(te,{flat:"",class:I([H.value,"q-mb-md"])},{default:d(()=>[n(j,null,{default:d(()=>[o("div",Fa,[n(z,{name:"mdi-bookshelf",class:"q-mr-sm"}),a[14]||(a[14]=_(" Newsletter Archive ",-1))]),a[19]||(a[19]=o("p",{class:"text-body1"}," Browse through past issues of The Courier with advanced search and filtering. Find issues by content, filter by availability, and view with multiple source options. ",-1)),$(l).serviceStats.value?(h(),x("div",Na,[o("div",Va,[o("div",qa,[o("div",za,D($(l).serviceStats.value.totalNewsletters),1),a[15]||(a[15]=o("div",{class:"text-caption"},"Total Issues",-1))]),o("div",Qa,[o("div",Ha,D($(l).serviceStats.value.sourceCounts.hybrid),1),a[16]||(a[16]=o("div",{class:"text-caption"},"Multiple Sources",-1))]),o("div",Ia,[o("div",Aa,D($(l).serviceStats.value.sourceCounts.local),1),a[17]||(a[17]=o("div",{class:"text-caption"},"Web Viewable",-1))]),o("div",La,[o("div",Oa,D($(l).serviceStats.value.sourceCounts.drive),1),a[18]||(a[18]=o("div",{class:"text-caption"},"Archive Only",-1))])])])):k("",!0)]),_:1,__:[19]})]),_:1},8,["class"]),n(te,{flat:"",class:I([H.value,"q-mb-md"])},{default:d(()=>[n(j,null,{default:d(()=>[o("div",Ea,[a[21]||(a[21]=o("div",{class:"text-subtitle2 text-weight-medium q-mr-md"},"Search Mode:",-1)),n(Se,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=u=>C.value=u),options:[{label:"Simple",value:!1,icon:"search"},{label:"Advanced (PDF Content)",value:!0,icon:"find_in_page"}],color:"primary","toggle-color":"secondary",class:"q-mr-md"},null,8,["modelValue"]),n(oe),C.value&&$(i).indexedPdfs>0?(h(),x("div",Pa,D($(i).indexedPdfs)+" PDFs indexed ",1)):k("",!0),$(s)?(h(),x("div",Ua,[n(qe,{size:"14px",class:"q-mr-xs"}),a[20]||(a[20]=_(" Searching... ",-1))])):k("",!0)]),o("div",Za,[o("div",Ba,[n(nt,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=u=>f.value=u),label:C.value?"Search inside PDFs by title, content, or tags...":"Search newsletters by title, filename, or tags...",outlined:"",dense:"",class:I({"bg-grey-1":!$(t).isDarkMode,"bg-grey-9":$(t).isDarkMode}),clearable:"",loading:$(s),onClear:a[3]||(a[3]=u=>f.value="")},{prepend:d(()=>[n(z,{name:C.value?"find_in_page":"search"},null,8,["name"])]),append:d(()=>[n(U,{flat:"",dense:"",round:"",icon:"tune",onClick:a[1]||(a[1]=u=>Q.value=!Q.value),color:"primary"},{default:d(()=>[n(Z,null,{default:d(()=>[_(D(Q.value?"Hide":"Show")+" Filters",1)]),_:1})]),_:1})]),_:1},8,["modelValue","label","class","loading"]),C.value?(h(),x("div",ja," Advanced search reads inside PDF content and may take a moment for first-time searches. ")):k("",!0)]),o("div",Ra,[n(se,{modelValue:T.value,"onUpdate:modelValue":a[4]||(a[4]=u=>T.value=u),options:w,label:"Quick Sort",outlined:"",dense:"","emit-value":"","map-options":"",class:I({"bg-grey-1":!$(t).isDarkMode,"bg-grey-9":$(t).isDarkMode})},{prepend:d(()=>[n(z,{name:"sort"})]),_:1},8,["modelValue","class"])])]),n(dt,null,{default:d(()=>[ze(o("div",null,[n(ot,{class:"q-mb-md"}),o("div",Xa,[n(z,{name:"filter_list",class:"q-mr-xs"}),a[22]||(a[22]=_(" Filters ",-1))]),o("div",Wa,[o("div",Ga,[n(se,{modelValue:y.year,"onUpdate:modelValue":a[5]||(a[5]=u=>y.year=u),options:ve.value,label:"Year",outlined:"",dense:"",clearable:"","emit-value":"","map-options":"",class:I({"bg-grey-1":!$(t).isDarkMode,"bg-grey-9":$(t).isDarkMode})},{prepend:d(()=>[n(z,{name:"event"})]),_:1},8,["modelValue","options","class"])]),o("div",Ja,[n(se,{modelValue:y.availability,"onUpdate:modelValue":a[6]||(a[6]=u=>y.availability=u),options:V,label:"Available As",outlined:"",dense:"",clearable:"","emit-value":"","map-options":"",class:I({"bg-grey-1":!$(t).isDarkMode,"bg-grey-9":$(t).isDarkMode})},{prepend:d(()=>[n(z,{name:"source"})]),_:1},8,["modelValue","class"])]),o("div",Ka,[n(se,{modelValue:y.pageCount,"onUpdate:modelValue":a[7]||(a[7]=u=>y.pageCount=u),options:L,label:"Page Count",outlined:"",dense:"",clearable:"","emit-value":"","map-options":"",class:I({"bg-grey-1":!$(t).isDarkMode,"bg-grey-9":$(t).isDarkMode})},{prepend:d(()=>[n(z,{name:"description"})]),_:1},8,["modelValue","class"])]),o("div",es,[n(se,{modelValue:y.actions,"onUpdate:modelValue":a[8]||(a[8]=u=>y.actions=u),options:q,label:"Actions",outlined:"",dense:"",clearable:"","emit-value":"","map-options":"",class:I({"bg-grey-1":!$(t).isDarkMode,"bg-grey-9":$(t).isDarkMode})},{prepend:d(()=>[n(z,{name:"play_circle"})]),_:1},8,["modelValue","class"])])]),o("div",ts,[n(U,{flat:"",label:"Clear All Filters",icon:"clear_all",color:"negative",size:"sm",onClick:Ze,disable:!W.value},null,8,["disable"]),n(oe),W.value?(h(),x("div",as,[y.year?(h(),Y(R,{key:0,removable:"",onRemove:a[9]||(a[9]=u=>y.year=null),color:"primary","text-color":"white",dense:""},{default:d(()=>[_(" Year: "+D(y.year),1)]),_:1})):k("",!0),y.availability?(h(),Y(R,{key:1,removable:"",onRemove:a[10]||(a[10]=u=>y.availability=null),color:"secondary","text-color":"white",dense:""},{default:d(()=>[_(D(V.find(u=>u.value===y.availability)?.label),1)]),_:1})):k("",!0),y.pageCount?(h(),Y(R,{key:2,removable:"",onRemove:a[11]||(a[11]=u=>y.pageCount=null),color:"info","text-color":"white",dense:""},{default:d(()=>[_(D(L.find(u=>u.value===y.pageCount)?.label),1)]),_:1})):k("",!0),y.actions?(h(),Y(R,{key:3,removable:"",onRemove:a[12]||(a[12]=u=>y.actions=null),color:"positive","text-color":"white",dense:""},{default:d(()=>[_(D(q.find(u=>u.value===y.actions)?.label),1)]),_:1})):k("",!0)])):k("",!0)])],512),[[rt,Q.value]])]),_:1}),o("div",ss,[n(Se,{modelValue:c.value,"onUpdate:modelValue":a[13]||(a[13]=u=>c.value=u),options:[{label:"Grid",value:!1,icon:"grid_view"},{label:"By Year",value:!0,icon:"view_list"}],color:"primary","toggle-color":"secondary",flat:""},null,8,["modelValue"]),n(oe),o("div",{class:I(["text-body2",P.value])},[n(z,{name:"library_books",class:"q-mr-xs"}),_(" "+D(re.value.length)+" of "+D(E.value.length)+" newsletter"+D(re.value.length===1?"":"s")+" ",1),f.value||W.value?(h(),x("span",ls," (filtered) ")):k("",!0)],2)])]),_:1})]),_:1},8,["class"]),le.value?(h(),x("div",ns,[n(Mt,{color:"primary",size:"3rem"}),a[23]||(a[23]=o("div",{class:"text-body1 q-ml-md"},"Loading newsletters...",-1))])):ne.value?(h(),Y(te,{key:1,flat:"",bordered:"",class:"q-mb-md bg-negative text-white"},{default:d(()=>[n(j,null,{default:d(()=>[o("div",rs,[n(z,{name:"error",class:"q-mr-sm"}),a[24]||(a[24]=_(" Error Loading Newsletters ",-1))]),o("p",os,D(ne.value),1)]),_:1})]),_:1})):re.value.length===0?(h(),x("div",is,[n(z,{name:"search_off",size:"4rem",class:I(P.value)},null,8,["class"]),o("div",{class:I(["text-h6 q-mt-md",P.value])}," No newsletters found ",2),o("div",{class:I(["text-body1 q-mt-sm",P.value])}," Try adjusting your search or filter criteria ",2)])):c.value?(h(),x("div",cs,[(h(!0),x(de,null,ce(Ue.value,u=>(h(),x("div",{key:u.year,class:"q-mb-xl"},[n(te,{flat:"",class:I([H.value,"q-mb-md"])},{default:d(()=>[n(j,{class:"q-py-md"},{default:d(()=>[o("div",ms,[o("div",fs,D(u.year),1),n(oe),o("div",{class:I(["text-body2",P.value])},D(u.issues.length)+" issue"+D(u.issues.length===1?"":"s"),3)])]),_:2},1024)]),_:2},1032,["class"]),o("div",vs,[o("div",gs,[(h(!0),x(de,null,ce(u.issues,M=>(h(),x("div",{key:M.id,class:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},[n($e,{newsletter:M},null,8,["newsletter"])]))),128))])])]))),128))])):(h(),x("div",us,[o("div",ds,[(h(!0),x(de,null,ce(_e.value,u=>(h(),x("div",{key:u.id,class:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},[n($e,{newsletter:u},null,8,["newsletter"])]))),128))])]))])])])]),_:1}))}}),Ls=Qe(hs,[["__scopeId","data-v-ae074294"]]);export{Ls as default};
