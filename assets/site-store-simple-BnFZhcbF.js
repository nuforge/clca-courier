import{r as q,c as H,a_ as fe}from"./index-WAZpiL6p.js";import{u as me}from"./useUserSettings-DbiFVqxl.js";import{GlobalWorkerOptions as le,getDocument as he}from"./pdf-ZhLmi4kS.js";const ge=[{id:"news-001",title:"Community Board Meeting Scheduled for August 15th",summary:"Join us for our monthly community board meeting to discuss upcoming projects and community concerns.",content:`The Conashaugh Lakes Community Association will be holding its monthly board meeting on August 15th at 7:00 PM at the community center. This month's agenda includes discussions about the upcoming lake cleanup initiative, new safety protocols for the swimming areas, and updates on the road maintenance project.

All residents are encouraged to attend and voice their concerns or suggestions. Light refreshments will be provided.

For more information, please contact the community office at (570) 555-0123.`,author:"Community Board",date:"2025-08-10",category:"announcement",featured:!0},{id:"news-002",title:"Lake Cleanup Day - Volunteers Needed",summary:"Help keep our lakes beautiful! Volunteer for our annual lake cleanup day on August 20th.",content:`Our annual lake cleanup day is scheduled for Saturday, August 20th, starting at 9:00 AM. We're looking for volunteers to help remove debris, invasive plants, and litter from around all three lakes.

Volunteers should meet at the main beach area and bring work gloves, water bottles, and sun protection. All cleanup supplies will be provided by the association.

Lunch will be provided for all volunteers, and community service hours will be documented for students who need them.

To sign up, please call the community office or email cleanup@conaslakes.org.`,author:"Environmental Committee",date:"2025-08-08",category:"event",featured:!0},{id:"news-003",title:"New Speed Limits on Community Roads",summary:"Effective immediately, new speed limits have been implemented on all community roads for safety.",content:`In response to resident concerns about vehicle safety, the community board has implemented new speed limits throughout the development:

â€¢ Main roads: 25 mph (reduced from 30 mph)
â€¢ Residential streets: 15 mph (reduced from 20 mph)
â€¢ Near recreation areas: 10 mph

These changes are effective immediately and will be enforced by community patrol and local law enforcement. Speed limit signs have been posted throughout the community.

We ask all residents and visitors to be mindful of these new limits, especially during peak times when children and families are active in the area.`,author:"Safety Committee",date:"2025-08-05",category:"announcement",featured:!1},{id:"news-004",title:"Summer Concert Series Continues",summary:"Don't miss the remaining concerts in our summer series featuring local musicians.",content:`Our summer concert series continues with three more performances this month:

â€¢ August 17th: The Pocono Folk Trio - Traditional folk music
â€¢ August 24th: Jazz on the Lake - Contemporary jazz ensemble
â€¢ August 31st: Summer's End Band - Classic rock covers

All concerts are held at the main pavilion starting at 7:00 PM. Bring your lawn chairs and blankets. Food trucks will be available starting at 6:00 PM.

Concerts are free for all residents and their guests. In case of rain, performances will be moved to the community center.`,author:"Recreation Committee",date:"2025-08-07",category:"event",featured:!0},{id:"news-005",title:"Water Quality Report - Excellent Results",summary:"Latest water quality testing shows excellent results across all three lakes.",content:`We're pleased to report that our quarterly water quality testing has shown excellent results for all three lakes. The testing, conducted by certified environmental specialists, measured:

â€¢ pH levels: Within optimal range (7.2-7.8)
â€¢ Dissolved oxygen: Excellent (8-12 mg/L)
â€¢ Bacterial levels: Well below safety thresholds
â€¢ Clarity: Above average for natural lakes

These results indicate that our lakes remain safe for swimming, fishing, and other recreational activities. The community's ongoing conservation efforts, including the shoreline protection program and storm water management, continue to maintain our lakes' health.

Detailed reports are available at the community office for residents who wish to review the complete data.`,author:"Environmental Committee",date:"2025-08-03",category:"news",featured:!1}],pe=[{id:"classified-001",title:"Kayak for Sale - Almost New",description:"Barely used single-person kayak in excellent condition. Includes paddle and life vest. Perfect for exploring our beautiful lakes. Only used a handful of times.",price:"$350",category:"for-sale",contact:{name:"Mike Johnson",email:"mjohnson@email.com",phone:"(570) 555-0156"},datePosted:"2025-08-10",featured:!0},{id:"classified-002",title:"Professional Lawn Care Services",description:"Experienced lawn care professional offering mowing, trimming, leaf removal, and seasonal cleanup. Serving Conashaugh Lakes community for over 5 years. Fully insured and reliable.",category:"services",contact:{name:"Green Thumb Landscaping",email:"contact@greenthumbpa.com",phone:"(570) 555-0198"},datePosted:"2025-08-09",featured:!0},{id:"classified-003",title:"Dock Space Available for Rent",description:"Private dock space available on Lake 2. Perfect for small to medium boats. Includes electricity hookup and storage locker. Available immediately.",price:"$200/month",category:"for-sale",contact:{name:"Sarah Mitchell",email:"smitchell@email.com",phone:"(570) 555-0142"},datePosted:"2025-08-08",featured:!1},{id:"classified-004",title:"Babysitting Services Available",description:"Responsible high school student available for babysitting. Have experience with children ages 3-12. CPR certified and excellent references available.",category:"services",contact:{name:"Emma Davis",email:"emma.davis@email.com",phone:"(570) 555-0167"},datePosted:"2025-08-07",featured:!1},{id:"classified-005",title:"Looking for Fishing Buddy",description:"Retired gentleman seeking fishing companion for early morning trips. Have boat and all equipment. Just looking for good company and someone to share fishing stories with.",category:"wanted",contact:{name:"Robert Chen",email:"rchen@email.com",phone:"(570) 555-0134"},datePosted:"2025-08-06",featured:!1},{id:"classified-006",title:"Free Firewood - You Haul",description:"Large pile of seasoned firewood available for free. Recently had several trees removed and have more wood than we can use. You must pick up and haul yourself.",category:"free",contact:{name:"The Williams Family",email:"williams.family@email.com",phone:"(570) 555-0189"},datePosted:"2025-08-05",featured:!1},{id:"classified-007",title:"Pontoon Boat for Sale",description:"2019 Sun Tracker Party Barge 20ft pontoon boat. Low hours, well maintained, includes cover and trailer. Perfect for family fun on the lakes.",price:"$18,500",category:"for-sale",contact:{name:"Tom Anderson",email:"tanderson@email.com",phone:"(570) 555-0176"},datePosted:"2025-08-04",featured:!0},{id:"classified-008",title:"House Cleaning Service",description:"Professional house cleaning service with 10+ years experience. Weekly, bi-weekly, or monthly service available. Eco-friendly products used. Fully bonded and insured.",category:"services",contact:{name:"Sparkle Clean Services",email:"info@sparklecleanpa.com",phone:"(570) 555-0155"},datePosted:"2025-08-03",featured:!1}],ve=[{id:"event-001",title:"Community Board Meeting",description:"Monthly community board meeting to discuss ongoing projects, community concerns, and upcoming initiatives. All residents welcome.",date:"2025-08-15",time:"7:00 PM",location:"Community Center",organizer:"Community Board"},{id:"event-002",title:"Summer Concert: Pocono Folk Trio",description:"Enjoy an evening of traditional folk music with the talented Pocono Folk Trio. Bring your lawn chairs and blankets!",date:"2025-08-17",time:"7:00 PM",location:"Main Pavilion",organizer:"Recreation Committee"},{id:"event-003",title:"Lake Cleanup Day",description:"Annual volunteer lake cleanup day. Help keep our lakes beautiful! All supplies provided, lunch included for volunteers.",date:"2025-08-20",time:"9:00 AM",location:"Main Beach Area",organizer:"Environmental Committee"},{id:"event-004",title:"Summer Concert: Jazz on the Lake",description:"Contemporary jazz ensemble performing lakeside. Food trucks available starting at 6:00 PM.",date:"2025-08-24",time:"7:00 PM",location:"Main Pavilion",organizer:"Recreation Committee"},{id:"event-005",title:"Children's Fishing Derby",description:"Annual fishing contest for kids 12 and under. Prizes for biggest fish, most fish, and participation. All equipment provided.",date:"2025-08-27",time:"8:00 AM",location:"Lake 1 Fishing Pier",organizer:"Youth Committee"},{id:"event-006",title:"Summer Concert: Summer's End Band",description:"Close out our summer concert series with classic rock covers from Summer's End Band. Final concert of the season!",date:"2025-08-31",time:"7:00 PM",location:"Main Pavilion",organizer:"Recreation Committee"},{id:"event-007",title:"Labor Day Picnic",description:"Community-wide Labor Day celebration with games, food, and activities for the whole family. Potluck style - bring a dish to share!",date:"2025-09-01",time:"12:00 PM",location:"Community Park",organizer:"Social Committee"},{id:"event-008",title:"Fall Newsletter Submission Deadline",description:"Deadline for submitting articles, photos, and announcements for the fall issue of The Courier newsletter.",date:"2025-09-10",time:"11:59 PM",location:"Submit via email or community office",organizer:"Editorial Team"},{id:"event-009",title:"Community Yard Sale",description:"Annual community-wide yard sale. Reserve your spot early! Maps will be available at the entrance.",date:"2025-09-14",time:"8:00 AM - 3:00 PM",location:"Throughout Community",organizer:"Social Committee"},{id:"event-010",title:"Fall Foliage Photography Walk",description:"Guided photography walk to capture the beautiful fall colors around our lakes. All skill levels welcome, bring your camera or phone.",date:"2025-10-05",time:"10:00 AM",location:"Meet at Community Center",organizer:"Photography Club"}],we=[{id:1,title:"August 2025",date:"August 2025",pages:12,url:"/issues/2025.08-conashaugh-courier.pdf",filename:"2025.08-conashaugh-courier.pdf"},{id:2,title:"July 2025",date:"July 2025",pages:10,url:"/issues/2025.07-conashaugh-courier.pdf",filename:"2025.07-conashaugh-courier.pdf"},{id:3,title:"June 2025",date:"June 2025",pages:12,url:"/issues/2025.06-conashaugh-courier.pdf",filename:"2025.06-conashaugh-courier.pdf"},{id:4,title:"May 2025",date:"May 2025",pages:10,url:"/issues/2025.05-conashaugh-courier.pdf",filename:"2025.05-conashaugh-courier.pdf"},{id:5,title:"February 2025",date:"February 2025",pages:8,url:"/issues/2025.02-conashaugh-courier.pdf",filename:"2025.02-conashaugh-courier.pdf"},{id:6,title:"December 2024",date:"December 2024",pages:14,url:"/issues/2024.12-conashaugh-courier.pdf",filename:"2024.12-conashaugh-courier.pdf"},{id:7,title:"November 2024",date:"November 2024",pages:12,url:"/issues/2024.11-conashaugh-courier.pdf",filename:"2024.11-conashaugh-courier.pdf"},{id:8,title:"October 2024",date:"October 2024",pages:16,url:"/issues/2024.10-conashaugh-courier.pdf",filename:"2024.10-conashaugh-courier.pdf"},{id:9,title:"September 2024",date:"September 2024",pages:10,url:"/issues/2024.09-conashaugh-courier.pdf",filename:"2024.09-conashaugh-courier.pdf"},{id:10,title:"August 2024",date:"August 2024",pages:12,url:"/issues/2024.08-conashaugh-courier.pdf",filename:"2024.08-conashaugh-courier.pdf"},{id:11,title:"June 2024",date:"June 2024",pages:14,url:"/issues/2024.06-conashaugh-courier.pdf",filename:"2024.06-conashaugh-courier.pdf"},{id:12,title:"May 2024",date:"May 2024",pages:12,url:"/issues/2024.05-conashaugh-courier.pdf",filename:"2024.05-conashaugh-courier.pdf"},{id:13,title:"April 2024",date:"April 2024",pages:10,url:"/issues/2024.04-conashaugh-courier.pdf",filename:"2024.04-conashaugh-courier.pdf"},{id:14,title:"March 2024",date:"March 2024",pages:8,url:"/issues/2024.03-conashaugh-courier.pdf",filename:"2024.03-conashaugh-courier.pdf"},{id:15,title:"February 2024",date:"February 2024",pages:12,url:"/issues/2024.02-conashaugh-courier.pdf",filename:"2024.02-conashaugh-courier.pdf"}],be=450,ye=3,Te=29,ke=12,Se={households:be,lakes:ye,yearsPublished:Te,issuesPerYear:ke},ne=d=>new Promise(B=>setTimeout(B,d)),J={async getNewsItems(){return await ne(100),ge},async getClassifieds(){return await ne(100),pe},async getEvents(){return await ne(100),ve},async getArchivedIssues(){return await ne(100),we},async getCommunityStats(){return await ne(100),Se}};function Pe(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var ae={exports:{}},ce;function Ae(){return ce||(ce=1,function(d,B){(function(F,E){d.exports=E()})(window,function(){return function(F){var E={};function v(h){if(E[h])return E[h].exports;var g=E[h]={i:h,l:!1,exports:{}};return F[h].call(g.exports,g,g.exports,v),g.l=!0,g.exports}return v.m=F,v.c=E,v.d=function(h,g,p){v.o(h,g)||Object.defineProperty(h,g,{enumerable:!0,get:p})},v.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},v.t=function(h,g){if(1&g&&(h=v(h)),8&g||4&g&&typeof h=="object"&&h&&h.__esModule)return h;var p=Object.create(null);if(v.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:h}),2&g&&typeof h!="string")for(var O in h)v.d(p,O,(function(b){return h[b]}).bind(null,O));return p},v.n=function(h){var g=h&&h.__esModule?function(){return h.default}:function(){return h};return v.d(g,"a",g),g},v.o=function(h,g){return Object.prototype.hasOwnProperty.call(h,g)},v.p="/",v(v.s=1)}([function(F,E){var v;v=function(){return this}();try{v=v||new Function("return this")()}catch{typeof window=="object"&&(v=window)}F.exports=v},function(F,E,v){v(2),F.exports=v(6)},function(F,E,v){(function(h,g){var p,O;function b(D){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(D)}(function(D,_){b(E)=="object"&&F!==void 0?_():(O=typeof(p=_)=="function"?p.call(E,v,E,F):p)===void 0||(F.exports=O)})(0,function(){function D(r){var c=this.constructor;return this.then(function(w){return c.resolve(r()).then(function(){return w})},function(w){return c.resolve(r()).then(function(){return c.reject(w)})})}function _(){}function I(r){if(!(this instanceof I))throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],i(r,this)}function x(r,c){for(;r._state===3;)r=r._value;r._state!==0?(r._handled=!0,I._immediateFn(function(){var w=r._state===1?c.onFulfilled:c.onRejected;if(w!==null){var u;try{u=w(r._value)}catch(A){return void s(c.promise,A)}G(c.promise,u)}else(r._state===1?G:s)(c.promise,r._value)})):r._deferreds.push(c)}function G(r,c){try{if(c===r)throw new TypeError("A promise cannot be resolved with itself.");if(c&&(b(c)=="object"||typeof c=="function")){var w=c.then;if(c instanceof I)return r._state=3,r._value=c,void f(r);if(typeof w=="function")return void i(function(u,A){return function(){u.apply(A,arguments)}}(w,c),r)}r._state=1,r._value=c,f(r)}catch(u){s(r,u)}}function s(r,c){r._state=2,r._value=c,f(r)}function f(r){r._state===2&&r._deferreds.length===0&&I._immediateFn(function(){r._handled||I._unhandledRejectionFn(r._value)});for(var c=0,w=r._deferreds.length;w>c;c++)x(r,r._deferreds[c]);r._deferreds=null}function i(r,c){var w=!1;try{r(function(u){w||(w=!0,G(c,u))},function(u){w||(w=!0,s(c,u))})}catch(u){if(w)return;w=!0,s(c,u)}}var T=setTimeout;I.prototype.catch=function(r){return this.then(null,r)},I.prototype.then=function(r,c){var w=new this.constructor(_);return x(this,new function(u,A,M){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof A=="function"?A:null,this.promise=M}(r,c,w)),w},I.prototype.finally=D,I.all=function(r){return new I(function(c,w){function u(l,m){try{if(m&&(b(m)=="object"||typeof m=="function")){var k=m.then;if(typeof k=="function")return void k.call(m,function(j){u(l,j)},w)}A[l]=m,--M==0&&c(A)}catch(j){w(j)}}if(!r||r.length===void 0)throw new TypeError("Promise.all accepts an array");var A=Array.prototype.slice.call(r);if(A.length===0)return c([]);for(var M=A.length,z=0;A.length>z;z++)u(z,A[z])})},I.resolve=function(r){return r&&b(r)=="object"&&r.constructor===I?r:new I(function(c){c(r)})},I.reject=function(r){return new I(function(c,w){w(r)})},I.race=function(r){return new I(function(c,w){for(var u=0,A=r.length;A>u;u++)r[u].then(c,w)})},I._immediateFn=typeof h=="function"&&function(r){h(r)}||function(r){T(r,0)},I._unhandledRejectionFn=function(r){console!==void 0&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};var P=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(g!==void 0)return g;throw Error("unable to locate global object")}();"Promise"in P?P.Promise.prototype.finally||(P.Promise.prototype.finally=D):P.Promise=I})}).call(this,v(3).setImmediate,v(0))},function(F,E,v){(function(h){var g=h!==void 0&&h||typeof self<"u"&&self||window,p=Function.prototype.apply;function O(b,D){this._id=b,this._clearFn=D}E.setTimeout=function(){return new O(p.call(setTimeout,g,arguments),clearTimeout)},E.setInterval=function(){return new O(p.call(setInterval,g,arguments),clearInterval)},E.clearTimeout=E.clearInterval=function(b){b&&b.close()},O.prototype.unref=O.prototype.ref=function(){},O.prototype.close=function(){this._clearFn.call(g,this._id)},E.enroll=function(b,D){clearTimeout(b._idleTimeoutId),b._idleTimeout=D},E.unenroll=function(b){clearTimeout(b._idleTimeoutId),b._idleTimeout=-1},E._unrefActive=E.active=function(b){clearTimeout(b._idleTimeoutId);var D=b._idleTimeout;D>=0&&(b._idleTimeoutId=setTimeout(function(){b._onTimeout&&b._onTimeout()},D))},v(4),E.setImmediate=typeof self<"u"&&self.setImmediate||h!==void 0&&h.setImmediate||this&&this.setImmediate,E.clearImmediate=typeof self<"u"&&self.clearImmediate||h!==void 0&&h.clearImmediate||this&&this.clearImmediate}).call(this,v(0))},function(F,E,v){(function(h,g){(function(p,O){if(!p.setImmediate){var b,D,_,I,x,G=1,s={},f=!1,i=p.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(p);T=T&&T.setTimeout?T:p,{}.toString.call(p.process)==="[object process]"?b=function(c){g.nextTick(function(){r(c)})}:function(){if(p.postMessage&&!p.importScripts){var c=!0,w=p.onmessage;return p.onmessage=function(){c=!1},p.postMessage("","*"),p.onmessage=w,c}}()?(I="setImmediate$"+Math.random()+"$",x=function(c){c.source===p&&typeof c.data=="string"&&c.data.indexOf(I)===0&&r(+c.data.slice(I.length))},p.addEventListener?p.addEventListener("message",x,!1):p.attachEvent("onmessage",x),b=function(c){p.postMessage(I+c,"*")}):p.MessageChannel?((_=new MessageChannel).port1.onmessage=function(c){r(c.data)},b=function(c){_.port2.postMessage(c)}):i&&"onreadystatechange"in i.createElement("script")?(D=i.documentElement,b=function(c){var w=i.createElement("script");w.onreadystatechange=function(){r(c),w.onreadystatechange=null,D.removeChild(w),w=null},D.appendChild(w)}):b=function(c){setTimeout(r,0,c)},T.setImmediate=function(c){typeof c!="function"&&(c=new Function(""+c));for(var w=new Array(arguments.length-1),u=0;u<w.length;u++)w[u]=arguments[u+1];var A={callback:c,args:w};return s[G]=A,b(G),G++},T.clearImmediate=P}function P(c){delete s[c]}function r(c){if(f)setTimeout(r,0,c);else{var w=s[c];if(w){f=!0;try{(function(u){var A=u.callback,M=u.args;switch(M.length){case 0:A();break;case 1:A(M[0]);break;case 2:A(M[0],M[1]);break;case 3:A(M[0],M[1],M[2]);break;default:A.apply(void 0,M)}})(w)}finally{P(c),f=!1}}}}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,v(0),v(5))},function(F,E){var v,h,g=F.exports={};function p(){throw new Error("setTimeout has not been defined")}function O(){throw new Error("clearTimeout has not been defined")}function b(T){if(v===setTimeout)return setTimeout(T,0);if((v===p||!v)&&setTimeout)return v=setTimeout,setTimeout(T,0);try{return v(T,0)}catch{try{return v.call(null,T,0)}catch{return v.call(this,T,0)}}}(function(){try{v=typeof setTimeout=="function"?setTimeout:p}catch{v=p}try{h=typeof clearTimeout=="function"?clearTimeout:O}catch{h=O}})();var D,_=[],I=!1,x=-1;function G(){I&&D&&(I=!1,D.length?_=D.concat(_):x=-1,_.length&&s())}function s(){if(!I){var T=b(G);I=!0;for(var P=_.length;P;){for(D=_,_=[];++x<P;)D&&D[x].run();x=-1,P=_.length}D=null,I=!1,function(r){if(h===clearTimeout)return clearTimeout(r);if((h===O||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(r);try{h(r)}catch{try{return h.call(null,r)}catch{return h.call(this,r)}}}(T)}}function f(T,P){this.fun=T,this.array=P}function i(){}g.nextTick=function(T){var P=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)P[r-1]=arguments[r];_.push(new f(T,P)),_.length!==1||I||b(s)},f.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=i,g.addListener=i,g.once=i,g.off=i,g.removeListener=i,g.removeAllListeners=i,g.emit=i,g.prependListener=i,g.prependOnceListener=i,g.listeners=function(T){return[]},g.binding=function(T){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(T){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},function(F,E,v){v.r(E),v.d(E,"getInstance",function(){return X}),v.d(E,"setInstanceForWebComponent",function(){return oe});var h={ASM:"asm",WASM:"ems",JS_WORKER:"jsworker",THREADED_WASM:"wasm-threads"};function g(e,n){if(typeof e!="string"||!n)return e;var o=n.substr(0,n.lastIndexOf("/"));return/^(\/|%2F|[a-z0-9-]+:)/i.test(e)?e:"".concat(o,"/").concat(e)}function p(e){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function O(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function b(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,(y=t.key,a=void 0,a=function(C,S){if(p(C)!=="object"||C===null)return C;var R=C[Symbol.toPrimitive];if(R!==void 0){var L=R.call(C,S);if(p(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(C)}(y,"string"),p(a)==="symbol"?a:String(a)),t)}var y,a}function D(e,n){if(n&&(p(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(e)}function _(e){var n=typeof Map=="function"?new Map:void 0;return(_=function(o){if(o===null||(t=o,Function.toString.call(t).indexOf("[native code]")===-1))return o;var t;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(o))return n.get(o);n.set(o,y)}function y(){return I(o,arguments,s(this).constructor)}return y.prototype=Object.create(o.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),G(y,o)})(e)}function I(e,n,o){return(I=x()?Reflect.construct.bind():function(t,y,a){var C=[null];C.push.apply(C,y);var S=new(Function.bind.apply(t,C));return a&&G(S,a.prototype),S}).apply(null,arguments)}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G(e,n){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,t){return o.__proto__=t,o})(e,n)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(e)}var f=0,i=function(e){(function(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),R&&G(S,R)})(C,e);var n,o,t,y,a=(n=C,o=x(),function(){var S,R=s(n);if(o){var L=s(this).constructor;S=Reflect.construct(R,arguments,L)}else S=R.apply(this,arguments);return D(this,S)});function C(){return O(this,C),a.apply(this,arguments)}return t=C,(y=[{key:"connectedCallback",value:function(){if(!this.shadowRoot){var S=this.attachShadow({mode:"open"}),R=this.getAttribute("path");window.isApryseWebViewerWebComponent=!0,window.webViewerPath=R,this.id=this.getAttribute("id")||function L(){var N=localStorage.getItem("wv_instanceIds");if((N=N?N.split(","):[]).length&&N[f]){var U=N[f];return f++,U}var $=Math.random().toString(36).slice(-6);return N.findIndex(function(Q){return Q===$})===-1?(N.push($),localStorage.setItem("wv_instanceIds",N),f++,$):L()}()||"default",fetch("".concat(R,"/ui/index-wc.html")).then(function(L){return L.text()}).then(function(L){S.innerHTML=L,function N(U,$){if(function(Z){return Z.tagName==="SCRIPT"}(U)===!0)U.parentNode.replaceChild(function(Z,de){var te=document.createElement("script");te.text=Z.innerHTML;for(var re=-1,se=Z.attributes;++re<se.length;){var ie=se[re];ie.name==="src"?te.setAttribute("src","".concat(de).concat(ie.value)):te.setAttribute(ie.name,ie.value)}return te.async=!1,te}(U,$),U);else for(var Q=-1,ee=U.childNodes;++Q<ee.length;)N(ee[Q],$);return U}(S,R),window.dispatchEvent(new Event("webviewerloaded"))})}}}])&&b(t.prototype,y),Object.defineProperty(t,"prototype",{writable:!1}),C}(_(HTMLElement));try{customElements.define("apryse-webviewer",i)}catch(e){console.warn("This environment does not allow for usage of the WebComponent version of WebViewer: ".concat(e))}var T=function(e,n){return new Promise(function(o,t){var y,a,C,S=document.createElement("apryse-webviewer");S.setAttribute("id","wc-".concat(n.id)),e.l=e.l||e.licenseKey,e.azureWorkaround=e.azureWorkaround||e.enableAzureWorkaround,e.annotationAdmin=e.annotationAdmin||e.isAdminUser,e.enableReadOnlyMode=e.enableReadOnlyMode||e.isReadOnly,e.showLocalFilePicker=e.showLocalFilePicker||e.enableFilePicker,e.useSharedWorker=e.workerTransportPromise?"true":"false",e.path=e.path||"/lib",e.officeEditorOptions=JSON.stringify(e.officeEditorOptions||{}),e.css&&(y=n,a=e.css,(C=document.createElement("link")).setAttribute("rel","stylesheet"),C.setAttribute("href","".concat(a)),y.appendChild(C)),e.workerTransportPromise&&(window.apryseWorkerTransportPromise=e.workerTransportPromise),e.l&&(window.apryse_l=btoa(e.l));var R=["disableLogs","highContrastMode"];for(var L in["autoCreate","autoFocusNoteOnAnnotationSelection","enableOptimizedWorkers","enableAnnotations","preloadPDFWorker","useDownloader"].forEach(function(U){e?.[U]===void 0&&(e[U]=!0)}),e)e?.[L]!==void 0&&e?.[L]!==null&&(R.includes(L)&&e[L]===!1?S.removeAttribute(L):L==="encryption"?S.setAttribute("auto_load",!1):L!=="licenseKey"&&L!=="l"&&S.setAttribute(L,e[L]));S.setAttribute("webviewerjsversion","11.6.1");var N=function(U){U.data==="requestl"&&U.source&&U.source.postMessage({type:"responsel",value:e.l||e.licenseKey},"*")};n.appendChild(S),S.addEventListener("ready",function(){if(e.config){var U=document.createElement("script");U.src=e.config,document.body.appendChild(U)}if(e.encryption){var $=e.initialDoc,Q={decrypt:S.instance.Core.Encryption.decrypt,decryptOptions:e.encryption,documentId:e.documentId,extension:"xod"};S.instance.UI.loadDocument($,Q)}if(e.additionalTranslations){var ee=e.additionalTranslations;S.instance.UI.setTranslations(ee.language,ee.translations)}oe(n,S.instance),S.instance.UI.dispose=function(){return new Promise(function(Z){window.removeEventListener("message",N),console.clear(),S.instance.Core.documentViewer.closeDocument().then(function(){Z()})})},o(S.instance)}),window.addEventListener("message",N,!1)})};function P(e){return(P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function r(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),o.push.apply(o,t)}return o}function c(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?r(Object(o),!0).forEach(function(t){w(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function w(e,n,o){return(n=function(t){var y=function(a,C){if(P(a)!=="object"||a===null)return a;var S=a[Symbol.toPrimitive];if(S!==void 0){var R=S.call(a,C);if(P(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(a)}(t,"string");return P(y)==="symbol"?y:String(y)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}window.WebViewerWebComponent=T;var u={},A=0;typeof console>"u"&&(window.console={log:function(){},warn:function(){},error:function(){}});var M=function(){for(var e=1;e<arguments.length;e++)for(var n=Object.keys(arguments[e]),o=0;o<n.length;o++)arguments[0][n[o]]=arguments[e][n[o]];return arguments[0]},z=function(e){var n=[];return e.forEach(function(o){n.push(o)}),n},l=function(e,n){var o;try{o=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0})}catch{(o=document.createEvent("Event")).initEvent(e,!0,!0),o.detail=n}return o};window.PDFNet&&!u.skipPDFNetWebViewerWarning&&console.warn("PDFNet.js and WebViewer.js have been included in the same context. See https://community.apryse.com/t/what-is-the-best-location-to-call-pdfnet-apis-when-used-in-conjunction-with-webviewer/5210 for an explanation of why this could be an error in your application.");var m=new Map,k=new Map;u.WebViewer=function(e,n){var o=this;if(k.get(n))throw new Error("Two instances of WebViewer were created on the same HTML element. Please create a new element for each instance of WebViewer");k.set(n,!0),n.addEventListener("ready",function C(){m.get(n).instance=o.getCompleteInstance(),n.removeEventListener("ready",C)}),this._validateOptions(e);var t=e.webviewerServerURL||e.pdftronServer;e.fullAPI&&t&&(e.forceClientSideInit||console.warn("The fullAPI and webviewerServerURL options have both been set so the forceClientSideInit option is now enabled. This means that WebViewer will switch to client side rendering and processing to allow use of the full API."),e.forceClientSideInit=!0),this.options=M({},u.WebViewer.Options,e);var y=this.options.path.length-1;y>0&&this.options.path[y]!=="/"&&(this.options.path+="/"),this.options.uiPath=this.options.path+this.options.uiPath,n||console.error("ViewerElement is not defined. This may be caused by calling the WebViewer constructor before the DOM is loaded, or an invalid selector. Please see https://docs.apryse.com/documentation/web/get-started/ for an example."),this.element=n,this.element.style.overflow="hidden";var a=this;this.messageHandler=function(C){if(C.data==="requestl"&&C.source&&C.source.postMessage({type:"responsel",value:e.l||e.licenseKey},"*"),C.data.type==="requestConfig"&&C.data.id===a.id&&C.source){var S=e.config?a._correctRelativePath(e.config):"";C.source.postMessage({type:"responseConfig",value:S},"*")}},window.addEventListener("message",this.messageHandler,!1),this.options.autoCreate&&this.create()};var j={licenseKey:void 0,enableAzureWorkaround:!1,isAdminUser:!1,isReadOnly:!1};u.WebViewer.prototype={version:"11.6.1",create:function(){if(this.options.initialDoc){var e=this._correctRelativePath(this.options.initialDoc);e=encodeURIComponent(JSON.stringify(e)),this.options.initialDoc=e}this._create()},_create:function(){this.id=++A,this._trigger===void 0&&(this._trigger=function(n,o){var t=l(n,o);this.element.dispatchEvent(t)});var e=this.options.type.replace(" ","").split(",");e.length<1&&(e[0]="html5"),this._createViewer(e)},_validateOptions:function(e){for(var n=Object.keys(e),o=0;o<n.length;o++){var t=n[o];t in M({},j,u.WebViewer.Options)||console.warn("".concat(t," is not a valid option name. See https://docs.apryse.com/api/web/global.html#WebViewerOptions for all available options."))}var y=e.webviewerServerURL||e.pdftronServer;!e.enableRedaction||e.fullAPI||y||console.warn("FullAPI or WebViewer Server is needed to apply redactions")},_notSupportedMobile:function(){var e=document.createElement("div");e.id="webviewer-browser-unsupported",e.textContent="PDF document viewing is not supported by this browser.",this.element.appendChild(e)},_createViewer:function(e){var n,o=this;if(o.selectedType=null,this.isMobileDevice()){if(this.options.documentType&&this.options.documentType!=="xod"&&!this._testWebAssembly())return void this._notSupportedMobile();if(e=Array("html5Mobile"),o.selectedType="html5Mobile",this.options.mobileRedirect)return n=this.options.uiPath+this._getHTML5OptionsURL(),void(window.location=n)}for(var t=!1,y=!1,a=0;a<e.length;a++){if(e[a].toLowerCase()==="html5mobile"){if(this.options.documentType&&this.options.documentType!=="xod"&&!this._testWebAssembly())continue;if(t=!0,o._testHTML5()){if(this.options.mobileRedirect)return o.selectedType="html5Mobile",n=this.options.uiPath+this._getHTML5OptionsURL(),void(window.location=n);if(this.options.xdomainProxyUrl||o.isSameOrigin(decodeURIComponent(o.options.initialDoc))||o._testCORS()){o.selectedType="html5Mobile";break}y=!0}}if(e[a].toLowerCase()==="html5"&&(t=!0,o._testHTML5())){var C=o.isSameOrigin(decodeURIComponent(o.options.initialDoc));if(this.options.xdomainProxyUrl||C||o._testCORS()){o.selectedType="html5";break}y=!0}}if(o.selectedType==="html5")o._createHTML5();else if(o.selectedType==="html5Mobile")o._createHTML5Mobile();else{var S;if(y?S="This browser does not support cross origin requests. Please configure xdomain to support CORS.":t&&(S="Please use an HTML5 compatible browser."),S){var R=document.createElement("div");R.id="webviewer-browser-unsupported",R.textContent=S,o.element.appendChild(R)}}},_viewerLoaded:function(e){this._trigger("ready");try{var n=e.contentWindow;if(n.postMessage({type:"viewerLoaded"},"*"),this.options.encryption!==void 0){var o=decodeURIComponent(this.options.initialDoc);this.options.initialDoc&&(o=JSON.parse(o));var t={decrypt:n.Core.Encryption.decrypt,decryptOptions:this.options.encryption,documentId:this.options.documentId,extension:"xod"};this.getInstance().UI.loadDocument(o,t)}}catch{console.warn("Viewer is on a different domain, the promise from WebViewer function is rejected and API functions will not work because of cross domain permissions. See https://docs.apryse.com/documentation/web/guides/wv-inside/#loading-webviewer-from-another-domain for more information.")}},_getHTML5OptionsURL:function(){var e,n,o,t=this.options,y=t.webviewerServerURL||t.pdftronServer,a="";if(t.initialDoc&&(a+="#d=".concat(t.initialDoc)),t.backendType===void 0&&(t.backendType=t.pdfBackend),t.documentType&&t.documentType==="xod"&&(e=t.documentType),t.preloadWorker&&t.preloadWorker==="xod"&&(e=t.preloadWorker),t.extension&&(e=t.extension),e&&(a+="&extension=".concat(e)),t.documentType&&t.documentType!=="xod"&&(n=t.documentType),t.preloadWorker&&t.preloadWorker!=="xod"&&(n=t.preloadWorker),n&&(a+="&preloadWorker=".concat(n)),t.backendType&&(a+="&pdf=".concat(t.backendType,"&office=").concat(t.backendType,"&legacyOffice=").concat(t.backendType)),t.filename&&(a+="&filename=".concat(t.filename)),t.streaming!==void 0&&(a+="&streaming=".concat(t.streaming)),t.externalPath){var C=this._correctRelativePath(t.externalPath);C=encodeURIComponent(C),a+="&p=".concat(C)}if(t.encryption&&(a+="&auto_load=false"),t.enableAnnotations&&(a+="&a=1"),t.disabledElements){var S=encodeURIComponent(t.disabledElements.join(","));a+="&disabledElements=".concat(S)}if(t.serverUrl){var R=this._correctRelativePath(t.serverUrl);R=encodeURIComponent(R),a+="&server_url=".concat(R)}if(t.serverUrlHeaders&&(a+="&serverUrlHeaders=".concat(JSON.stringify(t.serverUrlHeaders))),t.documentId&&(a+="&did=".concat(t.documentId)),t.css){var L=this._correctRelativePath(t.css);L=encodeURIComponent(L),a+="&css=".concat(L)}return t.disableI18n&&(a+="&disableI18n=1"),t.enableOfflineMode&&(a+="&offline=1"),t.startOffline&&(a+="&startOffline=1"),(t.enableReadOnlyMode||t.isReadOnly)&&(a+="&readonly=1"),t.hideAnnotationPanel&&(a+="&hideAnnotationPanel=1"),t.disableToolGroupReordering&&(a+="&disableToolGroupReordering=1"),t.annotationUser!==void 0&&(a+="&user=".concat(t.annotationUser)),t.annotationAdmin===void 0&&t.isAdminUser===void 0||(a+="&admin=".concat(t.annotationAdmin||t.isAdminUser?1:0)),t.custom!==void 0&&(a+="&custom=".concat(encodeURIComponent(t.custom))),t.showLocalFilePicker===void 0&&t.enableFilePicker===void 0||(a+="&filepicker=".concat(t.showLocalFilePicker||t.enableFilePicker?1:0)),t.fullAPI!==void 0&&(a+="&pdfnet=".concat(t.fullAPI?1:0)),t.enableRedaction!==void 0&&(a+="&enableRedaction=".concat(t.enableRedaction?1:0)),t.disableVirtualDisplayMode!==void 0&&(a+="&disableVirtualDisplayMode=".concat(t.disableVirtualDisplayMode?1:0)),t.hideDetachedReplies!==void 0&&(a+="&hideDetachedReplies=".concat(t.hideDetachedReplies?1:0)),t.enableMeasurement!==void 0&&(a+="&enableMeasurement=".concat(t.enableMeasurement?1:0)),t.showToolbarControl!==void 0&&(a+="&toolbar=".concat(t.showToolbarControl?"true":"false")),t.notesInLeftPanel!==void 0&&(a+="&notesInLeftPanel=".concat(t.notesInLeftPanel?1:0)),t.autoExpandOutlines!==void 0&&(a+="&autoExpandOutlines=".concat(t.autoExpandOutlines?1:0)),t.enableAnnotationNumbering!==void 0&&(a+="&enableAnnotationNumbering=".concat(t.enableAnnotationNumbering?1:0)),t.enableOfficeEditing!==void 0&&(a+="&enableOfficeEditing=".concat(t.enableOfficeEditing?1:0)),t.officeEditorOptions&&(a+="&officeEditorOptions=".concat(JSON.stringify(t.officeEditorOptions))),t.xdomainProxyUrl!==void 0&&(o=typeof t.xdomainProxyUrl=="string"?{url:t.xdomainProxyUrl}:t.xdomainProxyUrl,a+="&xdomain_urls=".concat(encodeURIComponent(JSON.stringify(o)))),(t.azureWorkaround||t.enableAzureWorkaround)&&(a+="&azureWorkaround=1"),t.enableOptimizedWorkers||(a+="&enableOptimizedWorkers=0"),t.useDownloader||(a+="&useDownloader=0"),t.disableWebsockets&&(a+="&disableWebsockets=1"),t.defaultLanguage&&(a+="&defaultLanguage=".concat(t.defaultLanguage)),t.disableStreaming&&(a+="&disableStreaming=1"),t.forceClientSideInit&&(a+="&forceClientSideInit=1"),t.loadAsPDF&&(a+="&loadAsPDF=1"),t.workerTransportPromise!==void 0&&(a+="&useSharedWorker=".concat(t.workerTransportPromise?"true":"false")),y!==void 0&&y&&(a+="&webviewerServerURL=".concat(encodeURIComponent(y))),t.fallbackToClientSide&&(a+="&fallbackToClientSide=1"),t.singleServerMode!==void 0&&(a+="&singleServerMode=".concat(t.singleServerMode?"true":"false")),t.webviewerServerRangeRequests!==void 0&&(a+="&wvsRange=".concat(t.webviewerServerRangeRequests?"true":"false")),t.accessibleMode!==void 0&&(a+="&accessibleMode=".concat(t.accessibleMode?1:0)),t.disableLogs&&(a+="&disableLogs=1"),t.enableViewStateAnnotations&&(a+="&enableViewStateAnnotations=1"),t.disableFlattenedAnnotations&&(a+="&disableFlattenedAnnotations=1"),t.highContrastMode&&(a+="&highContrastMode=1"),t.selectAnnotationOnCreation!==void 0&&(a+="&selectAnnotationOnCreation=".concat(t.selectAnnotationOnCreation?1:0)),t.autoFocusNoteOnAnnotationSelection!==void 0&&(a+="&autoFocusNoteOnAnnotationSelection=".concat(t.autoFocusNoteOnAnnotationSelection?1:0)),t.disableIndexedDB&&(a+="&disableIndexedDB=1"),t.disableMultiViewerComparison&&(a+="&disableMultiViewerComparison=1"),t.showInvalidBookmarks&&(a+="&showInvalidBookmarks=1"),t.disableObjectURLBlobs&&(a+="&disableObjectURLBlobs=".concat(t.disableObjectURLBlobs)),a+="&id=".concat(this.id),(a+="&basePath=".concat(encodeURIComponent(window.location.pathname))).length>0&&a[0]==="&"&&(a="#".concat(a.slice(1))),a+="&webViewerJSVersion=".concat(this.version),t.ui&&(a+="&ui=".concat(t.ui)),t.uiConfig&&(a+="&uiConfig=".concat(t.uiConfig)),t.initialMode&&(a+="&initialMode=".concat(t.initialMode)),t.chunkSize&&(a+="&chunkSize=".concat(t.chunkSize)),a},setInstanceData:function(e){m.set(this.element,{iframe:e,l:this.options.l||this.options.licenseKey,workerTransportPromise:this.options.workerTransportPromise})},_createHTML5:function(){var e=this,n=this.options.uiPath+this._getHTML5OptionsURL(),o=document.createElement("iframe");this.setInstanceData(o),o.id="webviewer-".concat(this.id),o.src=n,o.title="webviewer",o.frameBorder=0,o.width="100%",o.height="100%",o.setAttribute("allowfullscreen",!0),o.setAttribute("webkitallowfullscreen",!0),o.setAttribute("mozallowfullscreen",!0),this.iframe=o,this.options.backgroundColor&&o.setAttribute("data-bgcolor",this.options.backgroundColor),this.options.assetPath&&o.setAttribute("data-assetpath",encodeURIComponent(this.options.assetPath)),this.element.appendChild(o),window.addEventListener("message",function t(y){if(y.data.type==="viewerLoaded"&&y.data.id===e.id)try{e.instance=e.iframe.contentWindow.instance}catch{}finally{window.removeEventListener("message",t),e._viewerLoaded(e.iframe)}})},_createHTML5Mobile:function(){var e=this,n=this.options.uiPath+this._getHTML5OptionsURL(),o=document.createElement("iframe");this.setInstanceData(o),o.id="webviewer-".concat(this.id),o.src=n,o.frameborder=0,this.options.assetPath&&o.setAttribute("data-assetpath",encodeURIComponent(this.options.assetPath)),o.style.width="100%",o.style.height="100%",this.iframe=o,this.element.appendChild(o),window.addEventListener("message",function t(y){if(y.data.type==="viewerLoaded"&&y.data.id===e.id)try{e.instance=e.iframe.contentWindow.instance}catch{}finally{window.removeEventListener("message",t),e._viewerLoaded(e.iframe)}})},dispose:function(){var e=this;return new Promise(function(n){m.delete(e.element),k.delete(e.element),window.removeEventListener("message",e.messageHandler),e.iframe=null,console.clear(),e.instance.Core.documentViewer.unmount().then(function(){n()})})},getInstance:function(){return this.instance},setCompleteInstance:function(e){this.completeInstance=e},getCompleteInstance:function(){return this.completeInstance},_correctRelativePath:function(e){var n=window.location.pathname;return Array.isArray(e)?e.map(function(o){return g(o,n)}):g(e,n)},_testHTML5:function(){try{var e=document.createElement("canvas");return e&&e.getContext("2d")}catch{return!1}},_testWebAssembly:function(){return!(!window.WebAssembly||!window.WebAssembly.validate)},_testCORS:function(){return"XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest},isIE:function(){var e=navigator.userAgent.toLowerCase(),n=/(msie) ([\w.]+)/.exec(e)||/(trident)(?:.*? rv:([\w.]+)|)/.exec(e);return n&&parseInt(n[2],10)},isMobileDevice:function(){return!this.isIE()&&(this.scrollbarWidth()===0&&navigator.userAgent.match(/Edge/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Touch/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Silk/i))},scrollbarWidth:function(){var e=document.createElement("div");e.style.cssText="width:100px;height:100px;overflow:scroll !important;position:absolute;top:-9999px",document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),n},isSameOrigin:function(e){var n=window.location,o=document.createElement("a");o.href=e,o.host===""&&(o.href=o.href);var t=window.location.port,y=o.port;return o.protocol==="http:"?(y=y||"80",t=t||"80"):o.protocol==="https:"&&(y=y||"443",t=t||"443"),o.hostname===n.hostname&&o.protocol===n.protocol&&y===t}},u.WebViewer.Options={initialDoc:void 0,annotationAdmin:void 0,isAdminUser:void 0,annotationUser:void 0,assetPath:void 0,autoCreate:!0,autoFocusNoteOnAnnotationSelection:!0,azureWorkaround:!1,additionalTranslations:void 0,enableAzureWorkaround:!1,enableOptimizedWorkers:!0,backgroundColor:void 0,backendType:void 0,css:void 0,config:void 0,custom:void 0,documentId:void 0,documentType:void 0,preloadWorker:void 0,extension:void 0,enableAnnotations:!0,filename:void 0,disableI18n:!1,disabledElements:void 0,disableWebsockets:!1,enableOfflineMode:!1,enableReadOnlyMode:!1,isReadOnly:!1,enableRedaction:!1,disableVirtualDisplayMode:!1,enableMeasurement:!1,encryption:void 0,externalPath:void 0,hideAnnotationPanel:!1,disableToolGroupReordering:!1,uiPath:"./ui/index.html",l:void 0,licenseKey:void 0,mobileRedirect:!1,path:"",pdfBackend:void 0,webviewerServerURL:void 0,webviewerServerRangeRequests:!0,fallbackToClientSide:!1,singleServerMode:!1,fullAPI:!1,preloadPDFWorker:!0,serverUrl:void 0,serverUrlHeaders:void 0,showLocalFilePicker:!1,enableFilePicker:!1,showToolbarControl:void 0,startOffline:!1,streaming:void 0,type:"html5",useDownloader:!0,workerTransportPromise:void 0,xdomainProxyUrl:void 0,ui:void 0,uiConfig:void 0,forceClientSideInit:!1,loadAsPDF:!1,accessibleMode:void 0,disableLogs:!1,enableViewStateAnnotations:!1,highContrastMode:!1,selectAnnotationOnCreation:!1,notesInLeftPanel:!1,autoExpandOutlines:!1,enableAnnotationNumbering:!1,enableOfficeEditing:!1,officeEditorOptions:{},documentXFDFRetriever:void 0,disableMultiViewerComparison:void 0,showInvalidBookmarks:!0,disableObjectURLBlobs:!1,initialMode:void 0,defaultLanguage:"en",chunkSize:void 0,disableFlattenedAnnotations:!1,disableStreaming:!1};var V=function(e){for(var n=z(m),o=0;o<n.length;o++){var t=n[o];if(t.iframe===e)return t}return null},W=T;W.l=function(e){var n=V(e);return n&&n.l},W.workerTransportPromise=function(e){var n=V(e);return n&&n.workerTransportPromise},W.WorkerTypes={ALL:"all",OFFICE:"office",LEGACY_OFFICE:"legacyOffice",PDF:"pdf",CONTENT_EDIT:"contentEdit",OFFICE_EDITOR:"officeEditor"},W.BackendTypes=h,W.Modes={DEFAULT:"default",DOCX_EDITOR:"docxEditor",SPREADSHEET_EDITOR:"spreadsheetEditor"};var X=function(e){var n=z(m);if(!n.length||!n.filter(function(o){return o.instance}).length)return console.warn("WebViewer.getInstance() was called before any instances were available"),null;if(n.length>1&&!e)throw new Error("More than one instance of WebViewer was found, and no element was passed into getInstance(). Please specify which instance you want to get.");return e?(m.get(e)||{}).instance:(n[0]||{}).instance},oe=function(e,n){m.set(e,{instance:n})};W.getInstance=X,window.WebViewer=W,W.WebComponent=W,W.Iframe=function(e,n){return new Promise(function(o,t){e.l=e.l||e.licenseKey,e.azureWorkaround=e.azureWorkaround||e.enableAzureWorkaround,e.annotationAdmin=e.annotationAdmin||e.isAdminUser,e.enableReadOnlyMode=e.enableReadOnlyMode||e.isReadOnly,e.showLocalFilePicker=e.showLocalFilePicker||e.enableFilePicker,n.addEventListener("ready",function a(){n.removeEventListener("ready",a);try{var C=n.querySelector("iframe").contentWindow;if(C.Core.Tools===void 0)throw new Error("Viewer isn't instantiated correctly. It could be caused by the 'path' option in the WebViewer constructor not being defined correctly. The 'path' option should be relative to the HTML file you're loading the script on and the lib folder needs to be publicly accessible.");var S=y.getInstance(),R={iframeWindow:C,dispose:y.dispose.bind(y)},L=M({},S,w({},S.UI_NAMESPACE_KEY,c(c({},S[S.UI_NAMESPACE_KEY]),R)));y.setCompleteInstance(L);var N=Promise.resolve();if(e.documentXFDFRetriever&&(N=L[S.CORE_NAMESPACE_KEY].documentViewer.setDocumentXFDFRetriever(e.documentXFDFRetriever)),e.additionalTranslations){var U=e.additionalTranslations;L[S.UI_NAMESPACE_KEY].setTranslations(U.language,U.translations)}N.then(function(){o(L)})}catch{if("config"in e&&e.config!=="")return o();t("Viewer is on a different domain, the promise from WebViewer function is rejected and API functions will not work because of cross domain permissions. See https://docs.apryse.com/documentation/web/guides/wv-inside/#loading-webviewer-from-another-domain for more information.")}});var y=new u.WebViewer(e,n)})},E.default=W}])})}(ae)),ae.exports}var Ie=Ae();const Ce=Pe(Ie),K=q({}),Y=q({});function Ee(){const d=()=>{try{const s=localStorage.getItem("google-drive-thumbnail-cache");s&&(Y.value=JSON.parse(s))}catch(s){console.warn("Failed to load Google Drive thumbnail cache:",s)}},B=()=>{try{localStorage.setItem("google-drive-thumbnail-cache",JSON.stringify(Y.value))}catch(s){console.warn("Failed to save Google Drive thumbnail cache:",s)}};d();const F=s=>{const f=localStorage.getItem(`pdf-thumb-${s}`);return f?(K.value[s]=f,f):K.value[s]||null},E=async s=>{if(!s.googleDriveFileId)return null;try{const f=Y.value[s.googleDriveFileId];if(f&&f.etag===s.etag)return console.log("ðŸ“¦ Using cached Google Drive thumbnail for:",s.filename),f.thumbnail;if(console.log("ðŸ”„ Generating Google Drive thumbnail for:",s.filename),s.thumbnailUrl){const i=await v(s.thumbnailUrl);if(i)return Y.value[s.googleDriveFileId]={thumbnail:i,etag:s.etag||"",timestamp:Date.now()},B(),i}if(s.googleDriveUrl){const i=await h(s.googleDriveUrl);if(i)return Y.value[s.googleDriveFileId]={thumbnail:i,etag:s.etag||"",timestamp:Date.now()},B(),i}return null}catch(f){return console.error("âŒ Error generating Google Drive thumbnail:",f),null}},v=async s=>{try{const f=await fetch(s,{method:"GET",headers:{Accept:"image/*"}});if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const i=await f.blob();return new Promise(T=>{const P=new FileReader;P.onload=()=>{T(P.result)},P.onerror=()=>{T(null)},P.readAsDataURL(i)})}catch(f){return console.warn("âš ï¸ Failed to fetch Google Drive thumbnail:",f),null}},h=async s=>{try{const f=await b(s);return f||await D(s)}catch(f){return console.warn("âš ï¸ Failed to generate thumbnail from Google Drive URL:",f),null}},g=async s=>{try{if(s.googleDriveFileId&&s.status==="google-drive"){const f=await E(s);if(f)return f}if(s.localUrl||s.url){const f=s.localUrl||s.url,i=await _(f);if(i)return i}return O(s.filename)}catch(f){return console.error("âŒ Error in generateThumbnailWithGoogleDrive:",f),O(s.filename)}},p=()=>{const s=Date.now(),f=10080*60*1e3;let i=0;for(const[T,P]of Object.entries(Y.value))s-P.timestamp>f&&(delete Y.value[T],i++);i>0&&(console.log(`ðŸ§¹ Cleaned up ${i} old Google Drive thumbnail cache entries`),B())},O=s=>{const f=document.createElement("canvas");f.width=200,f.height=280;const i=f.getContext("2d");if(i){const T=i.createLinearGradient(0,0,0,280);T.addColorStop(0,"#f8f9fa"),T.addColorStop(1,"#e9ecef"),i.fillStyle=T,i.fillRect(0,0,200,280),i.strokeStyle="#dee2e6",i.lineWidth=2,i.strokeRect(1,1,198,278),i.fillStyle="#ffffff",i.fillRect(30,50,140,100),i.strokeStyle="#dee2e6",i.lineWidth=1,i.strokeRect(30,50,140,100),i.fillStyle="#e9ecef",i.beginPath(),i.moveTo(150,50),i.lineTo(170,50),i.lineTo(170,70),i.closePath(),i.fill(),i.strokeStyle="#dee2e6",i.stroke(),i.fillStyle="#dc3545",i.font="bold 20px Arial, sans-serif",i.textAlign="center",i.fillText("PDF",100,110),i.fillStyle="#6c757d",i.font="11px Arial, sans-serif";const P=s.split("/").pop()||"Document",r=P.length>25?P.substring(0,22)+"...":P;i.fillText(r,100,180),i.font="9px Arial, sans-serif",i.fillText("Click to view full document",100,210);const c=f.toDataURL("image/jpeg",.8);return localStorage.setItem(`pdf-thumb-${s}`,c),K.value[s]=c,c}return console.error("Failed to get canvas context"),""},b=async s=>{try{if(console.log("ðŸ”„ Attempting PDF.js thumbnail generation for:",s),typeof window<"u"&&!le.workerSrc){const k="/clca-courier",j=new URL(`${k}/pdf.worker.min.js`,window.location.origin).href;le.workerSrc=j,console.log("ðŸ“ PDF.js worker configured:",j)}const T=await(await he({url:s,withCredentials:!1}).promise).getPage(1),P=document.createElement("canvas"),r=P.getContext("2d");if(!r)return console.warn("âŒ PDF.js: Could not get canvas context"),null;const c=T.getViewport({scale:1}),A=Math.min(200/c.width,280/c.height),M=T.getViewport({scale:A});P.width=M.width,P.height=M.height;const z={canvasContext:r,viewport:M};await T.render(z).promise;const l=P.toDataURL("image/jpeg",.8);return console.log("âœ… PDF.js thumbnail generated successfully"),l}catch(f){return console.warn("âŒ PDF.js thumbnail generation failed:",f),null}},D=async s=>new Promise(f=>{const i=document.createElement("div");i.style.position="fixed",i.style.left="-2000px",i.style.top="0",i.style.width="400px",i.style.height="600px",i.style.zIndex="-9999",document.body.appendChild(i);let T=null;const P=()=>{try{i.parentNode&&document.body.removeChild(i),T&&T.UI.dispose()}catch(c){console.warn("Error during WebViewer cleanup:",c)}},r=setTimeout(()=>{P(),f(null)},1e4);Ce({path:"/webviewer",initialDoc:s,enableRedaction:!1,enableMeasurement:!1,enableFilePicker:!1,ui:"legacy",disabledElements:["header","toolsHeader","leftPanel","leftPanelButton","searchButton","menuButton","toolsButton","pageNavOverlay","downloadButton","printButton","openFileButton","saveAsButton","fullscreenButton","viewControlsButton"]},i).then(c=>{T=c;const{documentViewer:w}=T.Core;w.addEventListener("documentLoadError",()=>{clearTimeout(r),P(),f(null)}),w.addEventListener("documentLoaded",async()=>{try{w.setCurrentPage(1,!0),w.setFitMode(w.FitMode.FitPage),await new Promise(l=>setTimeout(l,2e3));const u=i.querySelectorAll("canvas");let A=null;const M="",z=M.startsWith("demo:")||M==="";console.log(`License type: ${z?"Demo/Trial":"Production"}`);for(const l of u)if(console.log(`Canvas size: ${l.width}x${l.height}`),l.width>50&&l.height>50){if(z)try{const m=l.getContext("2d");m&&(m.getImageData(0,0,1,1),console.log("âœ… Canvas data access: ALLOWED"))}catch{console.log("âŒ Canvas data access: RESTRICTED (demo mode limitation)");continue}(!A||l.width*l.height>A.width*A.height)&&(A=l)}if(A){const l=document.createElement("canvas"),m=l.getContext("2d");if(m){l.width=200,l.height=280;const k=Math.min(200/A.width,280/A.height),j=A.width*k,V=A.height*k,W=(200-j)/2,X=(280-V)/2;m.fillStyle="#ffffff",m.fillRect(0,0,200,280),m.drawImage(A,W,X,j,V);const oe=l.toDataURL("image/jpeg",.8);clearTimeout(r),P(),f(oe);return}}clearTimeout(r),P(),f(null)}catch(u){console.error("Error generating actual thumbnail:",u),clearTimeout(r),P(),f(null)}})}).catch(()=>{clearTimeout(r),P(),f(null)})}),_=async s=>{console.log("ðŸ” Starting optimized three-tier thumbnail generation for:",s);const f=F(s);if(f)return console.log("âœ… Using cached thumbnail"),f;console.log("ðŸŽ¯ Tier 1: Attempting PDF.js thumbnail (fastest, most reliable)...");try{const i=await b(s);if(i)return console.log("âœ… Tier 1 SUCCESS: PDF.js thumbnail generated"),localStorage.setItem(`pdf-thumb-${s}`,i),K.value[s]=i,i;console.log("âš ï¸ Tier 1 FAILED: PDF.js could not generate thumbnail")}catch(i){console.warn("âŒ Tier 1 ERROR: PDF.js thumbnail generation failed:",i)}console.log("ðŸŽ¯ Tier 2: Attempting WebViewer thumbnail (fallback for quality)...");try{const i=await D(s);if(i)return console.log("âœ… Tier 2 SUCCESS: WebViewer thumbnail generated"),localStorage.setItem(`pdf-thumb-${s}`,i),K.value[s]=i,i;console.log("âš ï¸ Tier 2 FAILED: WebViewer could not generate thumbnail")}catch(i){console.warn("âŒ Tier 2 ERROR: WebViewer thumbnail generation failed:",i)}console.log("ðŸŽ¯ Tier 3: Generating styled fallback placeholder...");try{const i=O(s);return console.log("âœ… Tier 3 SUCCESS: Fallback placeholder generated"),localStorage.setItem(`pdf-thumb-${s}`,i),K.value[s]=i,i}catch(i){return console.error("âŒ Tier 3 ERROR: Even fallback generation failed:",i),null}},I=()=>{K.value={};for(let s=localStorage.length-1;s>=0;s--){const f=localStorage.key(s);f&&f.startsWith("pdf-thumb-")&&localStorage.removeItem(f)}},x=s=>{delete K.value[s],localStorage.removeItem(`pdf-thumb-${s}`)};return{getThumbnail:_,clearCache:I,clearSingleCache:x,regenerateThumbnail:async s=>(x(s),await _(s)),generateThumbnailWithGoogleDrive:g,cleanupThumbnailCache:p,thumbnailCache:H(()=>K.value),googleDriveThumbnailCache:H(()=>Y.value)}}let ue=!1;function De(){const d=q({isLoading:!1,isInitialized:!1,isAuthenticated:!1,error:null,issues:[],thumbnails:{},loadingThumbnails:new Set}),{getThumbnail:B}=Ee(),F=H(()=>d.value.issues.sort((l,m)=>new Date(m.date).getTime()-new Date(l.date).getTime())),E=H(()=>F.value[0]||null),v=H(()=>{const l={};return F.value.forEach(m=>{const k=new Date(m.date).getFullYear().toString();l[k]||(l[k]=[]),l[k].push(m)}),l}),h=async()=>{if(!ue){console.log("Loading Google API script and Google Identity Services...");try{await fetch("https://apis.google.com/js/api.js",{method:"HEAD",mode:"no-cors"}),console.log("Network connectivity to Google APIs: OK")}catch(l){console.warn("Network connectivity test failed:",l)}if(await Promise.all([new Promise((l,m)=>{const k=document.createElement("script");k.src="https://apis.google.com/js/api.js",k.onload=()=>{console.log("âœ… Google API script loaded successfully"),l()},k.onerror=j=>{console.error("âŒ Failed to load Google API script:",j),m(new Error("Failed to load Google API script"))},document.head.appendChild(k)}),new Promise((l,m)=>{const k=document.createElement("script");k.src="https://accounts.google.com/gsi/client",k.onload=()=>{console.log("âœ… Google Identity Services script loaded successfully"),l()},k.onerror=j=>{console.error("âŒ Failed to load Google Identity Services script:",j),m(new Error("Failed to load Google Identity Services script"))},document.head.appendChild(k)})]),await new Promise(l=>setTimeout(l,200)),window.gapi&&window.google?.accounts?.oauth2)ue=!0,console.log("âœ… Both Google API and Google Identity Services are available");else throw new Error("Google APIs not available after script load")}},g=async()=>{throw console.log("ðŸ”§ Initializing Google API client..."),console.log("ðŸ”‘ API Key present:",!1),console.log("ðŸ†” Client ID present:",!1),new Error("Google API credentials not configured")};let p=localStorage.getItem("google_drive_access_token"),O=null,b=null;const D=()=>{if(!window.google?.accounts?.oauth2)throw new Error("Google Identity Services not loaded");O=window.google.accounts.oauth2.initTokenClient({client_id:void 0,scope:"https://www.googleapis.com/auth/drive.readonly",callback:m=>{if(console.log("ðŸŽ‰ GOOGLE IDENTITY SERVICES CALLBACK TRIGGERED!",m),m.error){console.error("âŒ Token client error:",m.error),d.value.isAuthenticated=!1,localStorage.removeItem("google_drive_access_token"),b&&(b(!1),b=null);return}console.log("âœ… Authentication callback successful, access token received"),p=m.access_token,localStorage.setItem("google_drive_access_token",p),window.gapi.client.setToken({access_token:p}),d.value.isAuthenticated=!0,console.log("âœ… Authentication successful, loading data..."),I().then(k=>{d.value.issues=k,d.value.isLoading=!1,d.value.error="",console.log(`âœ… Loaded ${k.length} issues after authentication`),b&&(b(!0),b=null)}).catch(k=>{console.error("âŒ Failed to load data after authentication:",k),d.value.error=k.message,d.value.isLoading=!1,b&&(b(!1),b=null)})}})},_=()=>{if(console.log("ðŸ” Checking authentication..."),console.log("ðŸ” Access token from storage:",p?"***exists***":"null"),console.log("ðŸ” GAPI client available:",!!window.gapi?.client),p)try{return window.gapi?.client?(window.gapi.client.setToken({access_token:p}),console.log("âœ… Already authenticated with valid token"),d.value.isAuthenticated=!0,!0):(console.warn("âš ï¸ GAPI client not available yet, cannot set token"),!1)}catch(l){console.warn("âš ï¸ Failed to set token on gapi client:",l),p=null,localStorage.removeItem("google_drive_access_token")}return console.log("â„¹ï¸ Not authenticated"),d.value.isAuthenticated=!1,!1},I=async()=>{throw new Error("Google Drive folder ID not configured (VITE_GOOGLE_DRIVE_ISSUES_FOLDER_ID)")},x=async()=>{try{if(d.value.isLoading=!0,d.value.error=null,console.log("ðŸ”„ Initializing Google Drive PDF loader..."),await h(),await g(),O||(D(),console.log("âœ… Google Identity Services token client initialized")),!_())return d.value.error="AUTHENTICATION_REQUIRED",d.value.isInitialized=!0,!1;const m=await I();return d.value.issues=m,d.value.isInitialized=!0,console.log(`âœ… Successfully loaded ${m.length} issues from Google Drive`),m.length===0&&(d.value.error="No PDF issues found in Google Drive folder"),!0}catch(l){return console.error("âŒ Error initializing Google Drive PDF loader:",l),d.value.error=l instanceof Error?l.message:"Unknown error",d.value.isInitialized=!0,!1}finally{d.value.isLoading=!1}},G=async()=>{try{d.value.isLoading=!0,d.value.error=null,await h(),await g(),console.log("ðŸ”„ Using legacy GAPI Auth2 authentication..."),window.gapi?.auth2||(console.log("ðŸ“¦ Loading GAPI Auth2..."),await new Promise((W,X)=>{window.gapi.load("auth2",{callback:()=>{console.log("âœ… GAPI Auth2 loaded"),W()},onerror:()=>{X(new Error("Failed to load GAPI Auth2"))}})})),!!window.gapi.auth2.getAuthInstance()||(console.log("ðŸ”§ Initializing GAPI Auth2..."),await window.gapi.auth2.init({client_id:void 0,scope:"https://www.googleapis.com/auth/drive.readonly"}));const k=window.gapi.auth2.getAuthInstance();console.log("ðŸš€ Starting GAPI Auth2 sign in...");const V=(await k.signIn()).getAuthResponse();if(console.log("ðŸŽ‰ LEGACY AUTH SUCCESS!",V),V&&V.access_token){p=V.access_token,p&&(localStorage.setItem("google_drive_access_token",p),window.gapi.client.setToken({access_token:p})),d.value.isAuthenticated=!0,console.log("âœ… Legacy authentication successful, loading data...");const W=await I();return d.value.issues=W,d.value.isLoading=!1,d.value.error="",console.log(`âœ… Loaded ${W.length} issues after legacy authentication`),!0}return!1}catch(l){return console.error("âŒ Legacy authentication error:",l),d.value.error=l instanceof Error?l.message:"Legacy authentication failed",!1}finally{d.value.isLoading=!1}},s=()=>{console.log("ðŸ§ª TESTING: Basic Google Identity Services");const l=void 0;if(console.log("ðŸ§ª Client ID for test:",l),!window.google?.accounts?.oauth2){console.error("âŒ TEST FAILED: Google Identity Services not available");return}const m=window.google.accounts.oauth2.initTokenClient({client_id:l,scope:"https://www.googleapis.com/auth/drive.readonly",callback:k=>{if(console.log("ðŸŽ‰ TEST CALLBACK TRIGGERED!",k),console.log("ðŸŽ‰ Response keys:",Object.keys(k)),k.error){console.error("âŒ TEST: Authentication error:",k.error);return}k.access_token?console.log("âœ… TEST: Received access token length:",k.access_token.length):console.warn("âš ï¸ TEST: No access token in response")}});console.log("ðŸ§ª Test token client created, calling requestAccessToken..."),m.requestAccessToken(),console.log("ðŸ§ª Test requestAccessToken called")},f=async()=>{try{return d.value.isLoading=!0,d.value.error=null,await h(),await g(),O||D(),console.log("ðŸ” Forcing authentication popup..."),new Promise(l=>{try{if(!O){l(!1);return}b=l,console.log("ðŸ” Google Identity Services check:"),console.log("  - window.google exists:",!!window.google),console.log("  - window.google.accounts exists:",!!window.google?.accounts),console.log("  - window.google.accounts.oauth2 exists:",!!window.google?.accounts?.oauth2),console.log("  - tokenClient exists:",!!O),console.log("  - tokenClient.requestAccessToken exists:",!!O?.requestAccessToken),console.log("ðŸš€ About to call requestAccessToken()..."),O.requestAccessToken(),console.log("âœ… requestAccessToken() called successfully")}catch(m){console.error("âŒ Authentication setup error:",m),d.value.isLoading=!1,l(!1)}})}catch(l){return console.error("âŒ Authentication error:",l),d.value.error=l instanceof Error?l.message:"Authentication failed",!1}finally{d.value.isLoading=!1}},i=async l=>{const m=l.googleDriveFileId||l.id.toString();if(!(d.value.thumbnails[m]||d.value.loadingThumbnails.has(m))){d.value.loadingThumbnails.add(m);try{const k=l.url||l.googleDriveUrl;if(!k){console.warn(`No valid URL found for thumbnail: ${l.filename}`);return}console.log(`ðŸ–¼ï¸ Generating thumbnail for ${l.filename}`);const j=await B(k);j&&(d.value.thumbnails[m]=j,console.log(`âœ… Thumbnail generated for ${l.filename}`))}catch(k){console.warn(`Failed to load thumbnail for ${l.filename}:`,k)}finally{d.value.loadingThumbnails.delete(m)}}},T=async l=>{const m=l.googleDriveFileId||l.id.toString();delete d.value.thumbnails[m],await i(l)},P=l=>d.value.issues.find(m=>m.id===l)||null,r=l=>{const m=d.value.issues.findIndex(k=>k.id===l);return m===-1||m===0?null:d.value.issues[m-1]||null},c=l=>{const m=d.value.issues.findIndex(k=>k.id===l);return m===-1||m===d.value.issues.length-1?null:d.value.issues[m+1]||null},w=(l,m=3)=>{const k=new Date(l.date).getFullYear();return d.value.issues.filter(V=>V.id!==l.id).filter(V=>Math.abs(new Date(V.date).getFullYear()-k)<=1).sort((V,W)=>new Date(W.date).getTime()-new Date(V.date).getTime()).slice(0,m)},u=async()=>{const l=d.value.issues.map(m=>i(m));await Promise.allSettled(l)},A=l=>Promise.resolve({pageCount:l.pages||1,fileSize:l.fileSize||"Unknown",lastModified:l.lastModified||new Date().toISOString(),title:l.title,filename:l.filename}),M=()=>{p=null,localStorage.removeItem("google_drive_access_token"),d.value.isAuthenticated=!1,console.log("ðŸ§¹ Authentication cleared")},z=()=>Promise.resolve("Unknown");return{state:H(()=>d.value),archivedIssues:F,latestIssue:E,issuesByYear:v,initialize:x,authenticate:f,legacyAuthenticate:G,clearAuthentication:M,testGoogleIdentityServices:s,loadThumbnail:i,regenerateThumbnail:T,getPdfMetadata:A,getFileSize:z,getIssueById:P,getNextIssue:r,getPreviousIssue:c,getRelatedIssues:w,loadAllThumbnails:u}}const Le=fe("site",()=>{const d=me(),B=De(),F=q(!1),E=q(!0),v=q(!0),h=q([]),g=q([]),p=q([]),O=q([]),b=q({households:0,lakes:0,yearsPublished:0,issuesPerYear:0}),D=H(()=>v.value&&B.state.value.issues.length>0?B.archivedIssues.value.map(u=>({id:u.id,title:u.title,date:u.date,pages:u.pages,url:u.googleDriveUrl||u.localUrl||u.url||"",filename:u.filename})):O.value),_=H(()=>h.value.filter(u=>u.featured).slice(0,3)),I=H(()=>g.value.sort((u,A)=>new Date(A.datePosted).getTime()-new Date(u.datePosted).getTime()).slice(0,4)),x=H(()=>p.value.filter(u=>new Date(u.date)>=new Date).sort((u,A)=>new Date(u.date).getTime()-new Date(A.date).getTime()).slice(0,5)),G=H(()=>{const u=D.value;return u.length===0?null:u[0]});function s(){d.toggleDarkMode()}function f(){F.value=!F.value}function i(u){const A=u?"dark":"light";d.setTheme(A)}async function T(){try{E.value=!0;const[u,A,M,z,l]=await Promise.all([J.getNewsItems(),J.getClassifieds(),J.getEvents(),J.getArchivedIssues(),J.getCommunityStats()]);if(h.value=u,g.value=A,p.value=M,O.value=z,b.value=l,v.value)try{await B.initialize()}catch(m){console.warn("Google Drive initialization failed, falling back to local data:",m),v.value=!1}}catch(u){console.error("Error loading data:",u)}finally{E.value=!1}}async function P(){try{h.value=await J.getNewsItems()}catch(u){console.error("Error loading news items:",u)}}async function r(){try{g.value=await J.getClassifieds()}catch(u){console.error("Error loading classifieds:",u)}}async function c(){try{p.value=await J.getEvents()}catch(u){console.error("Error loading events:",u)}}async function w(){try{O.value=await J.getArchivedIssues()}catch(u){console.error("Error loading archived issues:",u)}}return T(),{isDarkMode:d.isDarkMode,isMenuOpen:F,isLoading:E,useGoogleDrive:v,newsItems:h,classifieds:g,events:p,communityStats:b,archivedIssues:D,userSettings:d.userSettings,currentTheme:d.currentTheme,notificationSettings:d.notificationSettings,displaySettings:d.displaySettings,pdfSettings:d.pdfSettings,featuredNews:_,recentClassifieds:I,upcomingEvents:x,latestIssue:G,toggleDarkMode:s,toggleMenu:f,setDarkMode:i,loadAllData:T,loadNewsItems:P,loadClassifieds:r,loadEvents:c,loadArchivedIssues:w,updateUserSettings:d.updateSettings,resetUserSettings:d.resetSettings,exportUserSettings:d.exportSettings,importUserSettings:d.importSettings,googleDrivePdfs:H(()=>B)}});export{Ce as W,Ee as a,Le as u};
